{"bug_id":83536,"commitHash":"8dc00a9","commit_info":{"sha":"8dc00a9fe76feb1eb9f28d0fd50888951e24fc05","commit":{"author":{"name":"caillon%returnzero.com","email":"caillon%returnzero.com","date":"2006-04-20T03:38:38Z"},"committer":{"name":"caillon%returnzero.com","email":"caillon%returnzero.com","date":"2006-04-20T03:38:38Z"},"message":"Bug 83536.\nMerge script principal implementations into one class.\nShould reduce footprint, speed up calls to caps a little bit, and fixes several memory leaks.\nAlso fixes bugs 211174 and 211263\nr=jst@netscape.com\nsr=bzbarsky@mit.edu\nmoa=mstoltz@netscape.com (he looked at an earlier patch and said it looked fine, and will do a retroactive review when he returns from vacation as well)","tree":{"sha":"aabd5bb97715bcdfcc3205321a604f0d90eecf87","url":"https://api.github.com/repos/mozilla/gecko-dev/git/trees/aabd5bb97715bcdfcc3205321a604f0d90eecf87"},"url":"https://api.github.com/repos/mozilla/gecko-dev/git/commits/8dc00a9fe76feb1eb9f28d0fd50888951e24fc05","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/mozilla/gecko-dev/commits/8dc00a9fe76feb1eb9f28d0fd50888951e24fc05","html_url":"https://github.com/mozilla/gecko-dev/commit/8dc00a9fe76feb1eb9f28d0fd50888951e24fc05","comments_url":"https://api.github.com/repos/mozilla/gecko-dev/commits/8dc00a9fe76feb1eb9f28d0fd50888951e24fc05/comments","author":null,"committer":null,"parents":[{"sha":"55a44b6c5be8bbd7709b89d5b1dd23a39252c338","url":"https://api.github.com/repos/mozilla/gecko-dev/commits/55a44b6c5be8bbd7709b89d5b1dd23a39252c338","html_url":"https://github.com/mozilla/gecko-dev/commit/55a44b6c5be8bbd7709b89d5b1dd23a39252c338"}],"stats":{"total":8,"additions":2,"deletions":6},"files":[{"sha":"b34833b8364696bd7a523a9949d95b8297cf95b7","filename":"content/base/src/nsDOMSerializer.cpp","status":"modified","additions":2,"deletions":6,"changes":8,"blob_url":"https://github.com/mozilla/gecko-dev/blob/8dc00a9fe76feb1eb9f28d0fd50888951e24fc05/content/base/src/nsDOMSerializer.cpp","raw_url":"https://github.com/mozilla/gecko-dev/raw/8dc00a9fe76feb1eb9f28d0fd50888951e24fc05/content/base/src/nsDOMSerializer.cpp","contents_url":"https://api.github.com/repos/mozilla/gecko-dev/contents/content/base/src/nsDOMSerializer.cpp?ref=8dc00a9fe76feb1eb9f28d0fd50888951e24fc05","patch":"@@ -50,7 +50,6 @@\n \n #include \"nsIJSContextStack.h\"\n #include \"nsIScriptSecurityManager.h\"\n-#include \"nsICodebasePrincipal.h\"\n #include \"nsIURI.h\"\n \n nsDOMSerializer::nsDOMSerializer()\n@@ -156,11 +155,8 @@ nsresult CheckSameOrigin(nsIDOMNode *aRoot)\n \n       doc->GetPrincipal(getter_AddRefs(principal));\n \n-      nsCOMPtr<nsICodebasePrincipal> codebase_principal =\n-        do_QueryInterface(principal);\n-\n-      if (codebase_principal) {\n-        codebase_principal->GetURI(getter_AddRefs(root_uri));\n+      if (principal) {\n+        principal->GetURI(getter_AddRefs(root_uri));\n       }\n \n       if (root_uri) {"}]},"blames":["91d08375","16144a20"]}