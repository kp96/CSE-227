{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basdf3f2cb\""},"diff":[{"chunks":[{"content":"@@ -568,15 +568,15 @@ nsNativeThemeCocoa::DrawWidgetBackground(nsIRenderingContext* aContext, nsIFrame","changes":[{"type":"normal","normal":true,"ln1":568,"ln2":568,"content":"     // If we have a scale, I think we've already lost; so don't round"},{"type":"normal","normal":true,"ln1":569,"ln2":569,"content":"     // anything here"},{"type":"normal","normal":true,"ln1":570,"ln2":570,"content":"     CGContextConcatCTM(cgContext,"},{"type":"del","del":true,"ln":571,"content":"-                       CGAffineTransformMake(mat.xx, mat.xy,"},{"type":"del","del":true,"ln":572,"content":"-                                             mat.yx, mat.yy,"},{"type":"add","add":true,"ln":571,"content":"+                       CGAffineTransformMake(mat.xx, mat.yx,"},{"type":"add","add":true,"ln":572,"content":"+                                             mat.xy, mat.yy,"},{"type":"normal","normal":true,"ln1":573,"ln2":573,"content":"                                              mat.x0, mat.y0));"},{"type":"normal","normal":true,"ln1":574,"ln2":574,"content":"   } else {"},{"type":"normal","normal":true,"ln1":575,"ln2":575,"content":"     // Otherwise, we round the x0/y0, because otherwise things get rendered badly"},{"type":"normal","normal":true,"ln1":576,"ln2":576,"content":"     // XXX how should we be rounding the x0/y0?"},{"type":"normal","normal":true,"ln1":577,"ln2":577,"content":"     CGContextConcatCTM(cgContext,"},{"type":"del","del":true,"ln":578,"content":"-                       CGAffineTransformMake(mat.xx, mat.xy,"},{"type":"del","del":true,"ln":579,"content":"-                                             mat.yx, mat.yy,"},{"type":"add","add":true,"ln":578,"content":"+                       CGAffineTransformMake(mat.xx, mat.yx,"},{"type":"add","add":true,"ln":579,"content":"+                                             mat.xy, mat.yy,"},{"type":"normal","normal":true,"ln1":580,"ln2":580,"content":"                                              floor(mat.x0 + 0.5),"},{"type":"normal","normal":true,"ln1":581,"ln2":581,"content":"                                              floor(mat.y0 + 0.5)));"},{"type":"normal","normal":true,"ln1":582,"ln2":582,"content":"   }"}],"oldStart":568,"oldLines":15,"newStart":568,"newLines":15},{"content":"@@ -585,6 +585,8 @@ nsNativeThemeCocoa::DrawWidgetBackground(nsIRenderingContext* aContext, nsIFrame","changes":[{"type":"normal","normal":true,"ln1":585,"ln2":585,"content":"   if (1 /*aWidgetType == NS_THEME_TEXTFIELD*/) {"},{"type":"normal","normal":true,"ln1":586,"ln2":586,"content":"     fprintf(stderr, \"Native theme drawing widget %d [%p] dis:%d in rect [%d %d %d %d]\\n\","},{"type":"normal","normal":true,"ln1":587,"ln2":587,"content":"             aWidgetType, aFrame, IsDisabled(aFrame), aRect.x, aRect.y, aRect.width, aRect.height);"},{"type":"add","add":true,"ln":588,"content":"+    fprintf(stderr, \"Cairo matrix: [%f %f %f %f %f %f]\\n\","},{"type":"add","add":true,"ln":589,"content":"+            mat.xx, mat.yx, mat.xy, mat.yy, mat.x0, mat.y0);"},{"type":"normal","normal":true,"ln1":588,"ln2":590,"content":"     fprintf(stderr, \"Native theme xform[0]: [%f %f %f %f %f %f]\\n\","},{"type":"normal","normal":true,"ln1":589,"ln2":591,"content":"             mm0.a, mm0.b, mm0.c, mm0.d, mm0.tx, mm0.ty);"},{"type":"normal","normal":true,"ln1":590,"ln2":592,"content":"     CGAffineTransform mm = CGContextGetCTM(cgContext);"}],"oldStart":585,"oldLines":6,"newStart":585,"newLines":8}],"deletions":4,"additions":6,"from":"widget/src/cocoa/nsNativeThemeCocoa.mm","to":"widget/src/cocoa/nsNativeThemeCocoa.mm","index":["6337198..7fc7b4a","100644"]}]}