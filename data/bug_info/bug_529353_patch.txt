Index: src/safebrowsing/SafeBrowsingListManager.mm
===================================================================
RCS file: /cvsroot/mozilla/camino/src/safebrowsing/SafeBrowsingListManager.mm,v
retrieving revision 1.3
diff -u -8 -r1.3 SafeBrowsingListManager.mm
--- src/safebrowsing/SafeBrowsingListManager.mm	6 Jul 2009 20:33:22 -0000	1.3
+++ src/safebrowsing/SafeBrowsingListManager.mm	8 Dec 2009 21:48:02 -0000
@@ -488,16 +488,21 @@
   [reportURL replaceOccurrencesOfString:kReportedURLPlaceholder
                              withString:urlToReport
                                 options:NULL
                                   range:NSMakeRange(0, [reportURL length])];
 
   NSString *currentLanguageCode =
     [[PreferenceManager sharedInstance] getStringPref:kGeckoPrefUserAgentLocale
                                           withSuccess:&prefFetchSuccess];
+  // Google uses "no" as the language code for Norwegian Bokm√•l, while Mac OS X
+  // uses "nb" or "nb-no" (depending on the .lproj name), so convert to what 
+  // Google expects in the URLs.
+  if ([currentLanguageCode isEqualToString:@"nb"] || [currentLanguageCode isEqualToString:@"nb-no"])
+    currentLanguageCode = @"no";
   if (!prefFetchSuccess)
     currentLanguageCode = @"en";
 
   [reportURL replaceOccurrencesOfString:kLanguageCodePlaceholder
                              withString:currentLanguageCode
                                 options:NULL
                                   range:NSMakeRange(0, [reportURL length])];
 
