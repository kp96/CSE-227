{"bug_id":298892,"commitHash":"b164605","commit_info":{"sha":"b164605f9432796102a687f3ed7ddd55d97fa812","commit":{"author":{"name":"neil%parkwaycc.co.uk","email":"neil%parkwaycc.co.uk","date":"2006-07-29T05:44:13Z"},"committer":{"name":"neil%parkwaycc.co.uk","email":"neil%parkwaycc.co.uk","date":"2006-07-29T05:44:13Z"},"message":"Bug 298892 Use instanceof loop instead of findParentNode r=timeless sr+a=dveditz","tree":{"sha":"ba9d74d761fdbd0ed71734556554a6b0c20dbb7d","url":"https://api.github.com/repos/mozilla/gecko-dev/git/trees/ba9d74d761fdbd0ed71734556554a6b0c20dbb7d"},"url":"https://api.github.com/repos/mozilla/gecko-dev/git/commits/b164605f9432796102a687f3ed7ddd55d97fa812","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/mozilla/gecko-dev/commits/b164605f9432796102a687f3ed7ddd55d97fa812","html_url":"https://github.com/mozilla/gecko-dev/commit/b164605f9432796102a687f3ed7ddd55d97fa812","comments_url":"https://api.github.com/repos/mozilla/gecko-dev/commits/b164605f9432796102a687f3ed7ddd55d97fa812/comments","author":null,"committer":null,"parents":[{"sha":"791d4bb5bdb38093c69a71fc2d98757908a7a3d5","url":"https://api.github.com/repos/mozilla/gecko-dev/commits/791d4bb5bdb38093c69a71fc2d98757908a7a3d5","html_url":"https://github.com/mozilla/gecko-dev/commit/791d4bb5bdb38093c69a71fc2d98757908a7a3d5"}],"stats":{"total":27,"additions":2,"deletions":25},"files":[{"sha":"08a39d0a60c438c06c9474ae30278602c650c015","filename":"suite/common/contentAreaClick.js","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/mozilla/gecko-dev/blob/b164605f9432796102a687f3ed7ddd55d97fa812/suite/common/contentAreaClick.js","raw_url":"https://github.com/mozilla/gecko-dev/raw/b164605f9432796102a687f3ed7ddd55d97fa812/suite/common/contentAreaClick.js","contents_url":"https://api.github.com/repos/mozilla/gecko-dev/contents/suite/common/contentAreaClick.js?ref=b164605f9432796102a687f3ed7ddd55d97fa812","patch":"@@ -134,7 +134,8 @@\n       prefillTextBox(target); // prefill the empty text field if possible\n     }\n     else {\n-      linkNode = findParentNode(event.originalTarget, \"a\");\n+      while (linkNode && !(linkNode instanceof HTMLAnchorElement))\n+        linkNode = linkNode.parentNode;\n       // <a> cannot be nested.  So if we find an anchor without an\n       // href, there is no useful <a> around the target\n       if (linkNode && !linkNode.hasAttribute(\"href\"))\n@@ -186,7 +187,6 @@\n \n     if (pref && !isKeyPress && event.button == 1 &&\n         !event.getPreventDefault() &&\n-        !findParentNode(event.originalTarget, \"scrollbar\") &&\n         pref.getBoolPref(\"middlemouse.contentLoadURL\")) {\n       if (middleMousePaste(event)) {\n         event.preventBubble();"},{"sha":"dbf9c612e86152b8768a02f852b0df6c12b36c7d","filename":"suite/common/contentAreaUtils.js","status":"modified","additions":0,"deletions":23,"changes":23,"blob_url":"https://github.com/mozilla/gecko-dev/blob/b164605f9432796102a687f3ed7ddd55d97fa812/suite/common/contentAreaUtils.js","raw_url":"https://github.com/mozilla/gecko-dev/raw/b164605f9432796102a687f3ed7ddd55d97fa812/suite/common/contentAreaUtils.js","contents_url":"https://api.github.com/repos/mozilla/gecko-dev/contents/suite/common/contentAreaUtils.js?ref=b164605f9432796102a687f3ed7ddd55d97fa812","patch":"@@ -178,29 +178,6 @@ function openNewTabWith(url, sendReferrer, reverseBackgroundPref)\n   }\n }\n \n-function findParentNode(node, parentNode)\n-{\n-  if (node && node.nodeType == Node.TEXT_NODE) {\n-    node = node.parentNode;\n-  }\n-  while (node) {\n-    if (node.nodeType == Node.DOCUMENT_NODE) {\n-      return null;\n-    }\n-    var nodeName = node.localName;\n-    if (!nodeName)\n-      return null;\n-    nodeName = nodeName.toLowerCase();\n-    if (nodeName == \"body\" || nodeName == \"html\") {\n-      return null;\n-    }\n-    if (nodeName == parentNode)\n-      return node;\n-    node = node.parentNode;\n-  }\n-  return null;\n-}\n-\n // Clientelle: (Make sure you don't break any of these)\n //  - File    ->  Save Page/Frame As...\n //  - Context ->  Save Page/Frame As..."}]},"blames":["791d4bb5","e7a387ca","913c2518","a7cb5876","529bb3b5","a57b2180","591c1926","bc0e36e3","237ea52a","e073b0d1","5eac9662","e1174455","a00c379d"]}