{"bug_id":304847,"commitHash":"1d3384b","commit_info":{"sha":"1d3384b1c6d68d39e7b4856e645178c7fa5330b1","commit":{"author":{"name":"bzbarsky%mit.edu","email":"bzbarsky%mit.edu","date":"2005-09-19T03:23:21Z"},"committer":{"name":"bzbarsky%mit.edu","email":"bzbarsky%mit.edu","date":"2005-09-19T03:23:21Z"},"message":"Only do expensive GetName() calls if we're actually logging.  Bug 304847,\nr=kaie, sr=dmose","tree":{"sha":"bdede09c651c4ed2765702d7f45c1e2814378c9e","url":"https://api.github.com/repos/mozilla/gecko-dev/git/trees/bdede09c651c4ed2765702d7f45c1e2814378c9e"},"url":"https://api.github.com/repos/mozilla/gecko-dev/git/commits/1d3384b1c6d68d39e7b4856e645178c7fa5330b1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/mozilla/gecko-dev/commits/1d3384b1c6d68d39e7b4856e645178c7fa5330b1","html_url":"https://github.com/mozilla/gecko-dev/commit/1d3384b1c6d68d39e7b4856e645178c7fa5330b1","comments_url":"https://api.github.com/repos/mozilla/gecko-dev/commits/1d3384b1c6d68d39e7b4856e645178c7fa5330b1/comments","author":null,"committer":null,"parents":[{"sha":"fed343c43acfa493258026b3b9dea195aebdffc8","url":"https://api.github.com/repos/mozilla/gecko-dev/commits/fed343c43acfa493258026b3b9dea195aebdffc8","html_url":"https://github.com/mozilla/gecko-dev/commit/fed343c43acfa493258026b3b9dea195aebdffc8"}],"stats":{"total":12,"additions":7,"deletions":5},"files":[{"sha":"7c5b5672ad25a933b1b881e49c8f5ce3906f73bc","filename":"security/manager/boot/src/nsSecureBrowserUIImpl.cpp","status":"modified","additions":7,"deletions":5,"changes":12,"blob_url":"https://github.com/mozilla/gecko-dev/blob/1d3384b1c6d68d39e7b4856e645178c7fa5330b1/security/manager/boot/src/nsSecureBrowserUIImpl.cpp","raw_url":"https://github.com/mozilla/gecko-dev/raw/1d3384b1c6d68d39e7b4856e645178c7fa5330b1/security/manager/boot/src/nsSecureBrowserUIImpl.cpp","contents_url":"https://api.github.com/repos/mozilla/gecko-dev/contents/security/manager/boot/src/nsSecureBrowserUIImpl.cpp?ref=1d3384b1c6d68d39e7b4856e645178c7fa5330b1","patch":"@@ -610,11 +610,13 @@ nsSecureBrowserUIImpl::OnStateChange(nsIWebProgress* aWebProgress,\n   }\n \n #ifdef PR_LOGGING\n-  nsXPIDLCString reqname;\n-  aRequest->GetName(reqname);\n-  PR_LOG(gSecureDocLog, PR_LOG_DEBUG,\n-         (\"SecureUI:%p: %p %p OnStateChange %x %s\\n\", this, aWebProgress, aRequest,\n-            aProgressStateFlags, reqname.get()));\n+  if (PR_LOG_TEST(gSecureDocLog, PR_LOG_DEBUG)) {\n+    nsXPIDLCString reqname;\n+    aRequest->GetName(reqname);\n+    PR_LOG(gSecureDocLog, PR_LOG_DEBUG,\n+           (\"SecureUI:%p: %p %p OnStateChange %x %s\\n\", this, aWebProgress,\n+            aRequest, aProgressStateFlags, reqname.get()));\n+  }\n #endif\n \n   nsCOMPtr<nsIChannel> channel(do_QueryInterface(aRequest));"}]},"blames":["2d6fbf60"]}