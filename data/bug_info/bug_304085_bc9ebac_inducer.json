{"bug_id":304085,"commitHash":"bc9ebac","commit_info":{"sha":"bc9ebac033b4e715296346bc699954e54834242d","commit":{"author":{"name":"timeless%mozdev.org","email":"timeless%mozdev.org","date":"2005-08-17T07:40:39Z"},"committer":{"name":"timeless%mozdev.org","email":"timeless%mozdev.org","date":"2005-08-17T07:40:39Z"},"message":"Bug 304085 crash [@ JS_ValueToString - JSValIDToString] with DEBUG_CAPS_HACKER\nr=caillon sr=dveditz","tree":{"sha":"1d63b2d3dae13cf754c1ae1cb58e4558991865cb","url":"https://api.github.com/repos/mozilla/gecko-dev/git/trees/1d63b2d3dae13cf754c1ae1cb58e4558991865cb"},"url":"https://api.github.com/repos/mozilla/gecko-dev/git/commits/bc9ebac033b4e715296346bc699954e54834242d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/mozilla/gecko-dev/commits/bc9ebac033b4e715296346bc699954e54834242d","html_url":"https://github.com/mozilla/gecko-dev/commit/bc9ebac033b4e715296346bc699954e54834242d","comments_url":"https://api.github.com/repos/mozilla/gecko-dev/commits/bc9ebac033b4e715296346bc699954e54834242d/comments","author":null,"committer":null,"parents":[{"sha":"f80c96ae61fe8781994e70cc51bb760a2714a01e","url":"https://api.github.com/repos/mozilla/gecko-dev/commits/f80c96ae61fe8781994e70cc51bb760a2714a01e","html_url":"https://github.com/mozilla/gecko-dev/commit/f80c96ae61fe8781994e70cc51bb760a2714a01e"}],"stats":{"total":2,"additions":2,"deletions":0},"files":[{"sha":"4a5d600cd8773c3d1b8377ae6f539a76123b1996","filename":"caps/src/nsScriptSecurityManager.cpp","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/mozilla/gecko-dev/blob/bc9ebac033b4e715296346bc699954e54834242d/caps/src/nsScriptSecurityManager.cpp","raw_url":"https://github.com/mozilla/gecko-dev/raw/bc9ebac033b4e715296346bc699954e54834242d/caps/src/nsScriptSecurityManager.cpp","contents_url":"https://api.github.com/repos/mozilla/gecko-dev/contents/caps/src/nsScriptSecurityManager.cpp?ref=bc9ebac033b4e715296346bc699954e54834242d","patch":"@@ -3605,6 +3605,8 @@ nsScriptSecurityManager::PrintPolicyDB()\n     if(mOriginToPolicyMap)\n     {\n         JSContext* cx = GetCurrentJSContext();\n+        if (!cx)\n+            cx = GetSafeJSContext();\n         printf(\"----------------------------\\n\");\n         printf(\"Domain: Default.\\n\");\n         PL_DHashTableEnumerate(mDefaultPolicy, PrintClassPolicy, (void*)cx);"}]},"blames":["4756b716"]}