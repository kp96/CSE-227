diff -r 302b5d394f91 security/manager/ssl/src/nsNSSIOLayer.cpp
--- a/security/manager/ssl/src/nsNSSIOLayer.cpp	Mon Nov 09 15:23:57 2009 +1300
+++ b/security/manager/ssl/src/nsNSSIOLayer.cpp	Thu Nov 12 14:55:15 2009 +0200
@@ -402,8 +402,9 @@ nsNSSSocketInfo::EnsureDocShellDependent
                          docshell.get(),
                          NS_PROXY_SYNC,
                          getter_AddRefs(proxiedDocShell));
-    nsISecureBrowserUI* secureUI;
-    proxiedDocShell->GetSecurityUI(&secureUI);
+    nsISecureBrowserUI* secureUI = nsnull;
+    if (proxiedDocShell)
+      proxiedDocShell->GetSecurityUI(&secureUI);
     if (secureUI)
     {
       nsCOMPtr<nsIThread> mainThread(do_GetMainThread());
