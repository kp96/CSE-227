{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas33ceaee\""},"diff":[{"chunks":[{"content":"@@ -214,7 +214,7 @@ gfxPangoFont::Shutdown()","changes":[{"type":"normal","normal":true,"ln1":214,"ln2":214,"content":" "},{"type":"normal","normal":true,"ln1":215,"ln2":215,"content":"     PangoFontMap *fontmap = pango_cairo_font_map_get_default ();"},{"type":"normal","normal":true,"ln1":216,"ln2":216,"content":"     if (PANGO_IS_FC_FONT_MAP (fontmap))"},{"type":"del","del":true,"ln":217,"content":"-\tpango_fc_font_map_shutdown (PANGO_FC_FONT_MAP (fontmap));"},{"type":"add","add":true,"ln":217,"content":"+        pango_fc_font_map_shutdown (PANGO_FC_FONT_MAP (fontmap));"},{"type":"normal","normal":true,"ln1":218,"ln2":218,"content":" "},{"type":"normal","normal":true,"ln1":219,"ln2":219,"content":" }"},{"type":"normal","normal":true,"ln1":220,"ln2":220,"content":" "}],"oldStart":214,"oldLines":7,"newStart":214,"newLines":7},{"content":"@@ -451,11 +451,10 @@ gfxPangoFont::GetMetrics()","changes":[{"type":"normal","normal":true,"ln1":451,"ln2":451,"content":" "},{"type":"normal","normal":true,"ln1":452,"ln2":452,"content":"     FT_Face face = NULL;"},{"type":"normal","normal":true,"ln1":453,"ln2":453,"content":"     if (PANGO_IS_FC_FONT (font))"},{"type":"del","del":true,"ln":454,"content":"-      face = pango_fc_font_lock_face (PANGO_FC_FONT (font));"},{"type":"add","add":true,"ln":454,"content":"+        face = pango_fc_font_lock_face (PANGO_FC_FONT (font));"},{"type":"normal","normal":true,"ln1":455,"ln2":455,"content":" "},{"type":"normal","normal":true,"ln1":456,"ln2":456,"content":"     if (face) {"},{"type":"del","del":true,"ln":457,"content":"-"},{"type":"del","del":true,"ln":458,"content":"-\tfloat val;"},{"type":"add","add":true,"ln":457,"content":"+        float val;"},{"type":"normal","normal":true,"ln1":459,"ln2":458,"content":" "},{"type":"normal","normal":true,"ln1":460,"ln2":459,"content":"         TT_OS2 *os2 = (TT_OS2 *) FT_Get_Sfnt_Table(face, ft_sfnt_os2);"},{"type":"normal","normal":true,"ln1":461,"ln2":460,"content":"     "}],"oldStart":451,"oldLines":11,"newStart":451,"newLines":10},{"content":"@@ -478,10 +477,11 @@ gfxPangoFont::GetMetrics()","changes":[{"type":"normal","normal":true,"ln1":478,"ln2":477,"content":"             mMetrics.subscriptOffset = mMetrics.xHeight;"},{"type":"normal","normal":true,"ln1":479,"ln2":478,"content":"         }"},{"type":"normal","normal":true,"ln1":480,"ln2":479,"content":" "},{"type":"add","add":true,"ln":480,"content":"+        pango_fc_font_unlock_face(PANGO_FC_FONT(face));"},{"type":"normal","normal":true,"ln1":481,"ln2":481,"content":"     } else {"},{"type":"normal","normal":true,"ln1":482,"ln2":482,"content":" "},{"type":"del","del":true,"ln":483,"content":"-\tmMetrics.superscriptOffset = mMetrics.xHeight;"},{"type":"del","del":true,"ln":484,"content":"-\tmMetrics.subscriptOffset = mMetrics.xHeight;"},{"type":"add","add":true,"ln":483,"content":"+        mMetrics.superscriptOffset = mMetrics.xHeight;"},{"type":"add","add":true,"ln":484,"content":"+        mMetrics.subscriptOffset = mMetrics.xHeight;"},{"type":"normal","normal":true,"ln1":485,"ln2":485,"content":"     }"},{"type":"normal","normal":true,"ln1":486,"ln2":486,"content":" "},{"type":"normal","normal":true,"ln1":487,"ln2":487,"content":" "}],"oldStart":478,"oldLines":10,"newStart":477,"newLines":11},{"content":"@@ -694,8 +694,8 @@ SetupClusterBoundaries(gfxTextRun* aTextRun, const gchar *aUTF8, PRUint32 aUTF8L","changes":[{"type":"normal","normal":true,"ln1":694,"ln2":694,"content":"     if (aTextRun->GetFlags() & gfxTextRunFactory::TEXT_IS_8BIT) {"},{"type":"normal","normal":true,"ln1":695,"ln2":695,"content":"         // 8-bit text doesn't have clusters."},{"type":"normal","normal":true,"ln1":696,"ln2":696,"content":"         // XXX is this true in all languages???"},{"type":"del","del":true,"ln":697,"content":"-\t// behdad: don't think so.  Czech for example IIRC has a"},{"type":"del","del":true,"ln":698,"content":"-\t// 'ch' grapheme."},{"type":"add","add":true,"ln":697,"content":"+        // behdad: don't think so.  Czech for example IIRC has a"},{"type":"add","add":true,"ln":698,"content":"+        // 'ch' grapheme."},{"type":"normal","normal":true,"ln1":699,"ln2":699,"content":"         return;"},{"type":"normal","normal":true,"ln1":700,"ln2":700,"content":"     }"},{"type":"normal","normal":true,"ln1":701,"ln2":701,"content":" "}],"oldStart":694,"oldLines":8,"newStart":694,"newLines":8},{"content":"@@ -924,8 +924,8 @@ gfxPangoFontGroup::SetGlyphs(gfxTextRun *aTextRun, gfxPangoFont *aFont,","changes":[{"type":"normal","normal":true,"ln1":924,"ln2":924,"content":"         } else {"},{"type":"normal","normal":true,"ln1":925,"ln2":925,"content":"             gunichar ch = g_utf8_get_char(clusterUTF8);"},{"type":"normal","normal":true,"ln1":926,"ln2":926,"content":"             do { // Does pango ever provide more than one glyph in the cluster"},{"type":"del","del":true,"ln":927,"content":"-                 // if there is a missing glyph?"},{"type":"del","del":true,"ln":928,"content":"-\t\t // behdad: yes"},{"type":"add","add":true,"ln":927,"content":"+                // if there is a missing glyph?"},{"type":"add","add":true,"ln":928,"content":"+                // behdad: yes"},{"type":"normal","normal":true,"ln1":929,"ln2":929,"content":"                 if (IS_MISSING_GLYPH(glyphs[glyphIndex].glyph)) {"},{"type":"normal","normal":true,"ln1":930,"ln2":930,"content":"                     if (pango_is_zero_width(ch)) {"},{"type":"normal","normal":true,"ln1":931,"ln2":931,"content":"                         // the zero width characters returns empty glyph ID at shaping,"}],"oldStart":924,"oldLines":8,"newStart":924,"newLines":8}],"deletions":10,"additions":10,"from":"gfx/thebes/src/gfxPangoFonts.cpp","to":"gfx/thebes/src/gfxPangoFonts.cpp","index":["cf7b7e4..79c5586","100644"]}]}