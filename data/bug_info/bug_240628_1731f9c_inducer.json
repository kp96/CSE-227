{"bug_id":240628,"commitHash":"1731f9c","commit_info":{"sha":"1731f9c04c59c07038b3785615f4dc1d6d486d3d","commit":{"author":{"name":"bzbarsky%mit.edu","email":"bzbarsky%mit.edu","date":"2004-04-16T15:10:42Z"},"committer":{"name":"bzbarsky%mit.edu","email":"bzbarsky%mit.edu","date":"2004-04-16T15:10:42Z"},"message":"Make sure to copy over the \"common name\" (actually \"pretty name\") of the cert\nwhen cloning it.  Bug 240628, r=caillon, sr=darin.","tree":{"sha":"aacfa40ec7cf80eb4de021b7a5fe723a70e92778","url":"https://api.github.com/repos/mozilla/gecko-dev/git/trees/aacfa40ec7cf80eb4de021b7a5fe723a70e92778"},"url":"https://api.github.com/repos/mozilla/gecko-dev/git/commits/1731f9c04c59c07038b3785615f4dc1d6d486d3d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/mozilla/gecko-dev/commits/1731f9c04c59c07038b3785615f4dc1d6d486d3d","html_url":"https://github.com/mozilla/gecko-dev/commit/1731f9c04c59c07038b3785615f4dc1d6d486d3d","comments_url":"https://api.github.com/repos/mozilla/gecko-dev/commits/1731f9c04c59c07038b3785615f4dc1d6d486d3d/comments","author":null,"committer":null,"parents":[{"sha":"6990942e0c2db0e7eacf3fe63a5027716f314fbc","url":"https://api.github.com/repos/mozilla/gecko-dev/commits/6990942e0c2db0e7eacf3fe63a5027716f314fbc","html_url":"https://github.com/mozilla/gecko-dev/commit/6990942e0c2db0e7eacf3fe63a5027716f314fbc"}],"stats":{"total":14,"additions":14,"deletions":0},"files":[{"sha":"eb345230e96443a08a07780464ef0f6bb41aa43c","filename":"modules/libjar/nsJARChannel.cpp","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/mozilla/gecko-dev/blob/1731f9c04c59c07038b3785615f4dc1d6d486d3d/modules/libjar/nsJARChannel.cpp","raw_url":"https://github.com/mozilla/gecko-dev/raw/1731f9c04c59c07038b3785615f4dc1d6d486d3d/modules/libjar/nsJARChannel.cpp","contents_url":"https://api.github.com/repos/mozilla/gecko-dev/contents/modules/libjar/nsJARChannel.cpp?ref=1731f9c04c59c07038b3785615f4dc1d6d486d3d","patch":"@@ -422,6 +422,10 @@ nsJARChannel::GetOwner(nsISupports **result)\n         rv = cert->GetCertificateID(getter_Copies(certID));\n         if (NS_FAILED(rv)) return rv;\n \n+        nsXPIDLCString commonName;\n+        rv = cert->GetCommonName(getter_Copies(commonName));\n+        if (NS_FAILED(rv)) return rv;\n+\n         nsCOMPtr<nsIScriptSecurityManager> secMan = \n                  do_GetService(NS_SCRIPTSECURITYMANAGER_CONTRACTID, &rv);\n         if (NS_FAILED(rv)) return rv;\n@@ -430,6 +434,9 @@ nsJARChannel::GetOwner(nsISupports **result)\n                                              getter_AddRefs(cert));\n         if (NS_FAILED(rv)) return rv;\n \n+        rv = cert->SetCommonName(commonName);\n+        if (NS_FAILED(rv)) return rv;\n+        \n         mOwner = do_QueryInterface(cert, &rv);\n         if (NS_FAILED(rv)) return rv;\n "},{"sha":"eb345230e96443a08a07780464ef0f6bb41aa43c","filename":"netwerk/protocol/jar/src/nsJARChannel.cpp","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/mozilla/gecko-dev/blob/1731f9c04c59c07038b3785615f4dc1d6d486d3d/netwerk/protocol/jar/src/nsJARChannel.cpp","raw_url":"https://github.com/mozilla/gecko-dev/raw/1731f9c04c59c07038b3785615f4dc1d6d486d3d/netwerk/protocol/jar/src/nsJARChannel.cpp","contents_url":"https://api.github.com/repos/mozilla/gecko-dev/contents/netwerk/protocol/jar/src/nsJARChannel.cpp?ref=1731f9c04c59c07038b3785615f4dc1d6d486d3d","patch":"@@ -422,6 +422,10 @@ nsJARChannel::GetOwner(nsISupports **result)\n         rv = cert->GetCertificateID(getter_Copies(certID));\n         if (NS_FAILED(rv)) return rv;\n \n+        nsXPIDLCString commonName;\n+        rv = cert->GetCommonName(getter_Copies(commonName));\n+        if (NS_FAILED(rv)) return rv;\n+\n         nsCOMPtr<nsIScriptSecurityManager> secMan = \n                  do_GetService(NS_SCRIPTSECURITYMANAGER_CONTRACTID, &rv);\n         if (NS_FAILED(rv)) return rv;\n@@ -430,6 +434,9 @@ nsJARChannel::GetOwner(nsISupports **result)\n                                              getter_AddRefs(cert));\n         if (NS_FAILED(rv)) return rv;\n \n+        rv = cert->SetCommonName(commonName);\n+        if (NS_FAILED(rv)) return rv;\n+        \n         mOwner = do_QueryInterface(cert, &rv);\n         if (NS_FAILED(rv)) return rv;\n "}]},"blames":["66caced6","1325ceb6","685a7af4","66caced6","1325ceb6","685a7af4"]}