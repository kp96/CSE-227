{"bug_id":246905,"commitHash":"159e0a2","commit_info":{"sha":"159e0a2eab838472c1018886d9e0f52f8b89ee3e","commit":{"author":{"name":"smontagu%smontagu.org","email":"smontagu%smontagu.org","date":"2005-09-29T08:41:22Z"},"committer":{"name":"smontagu%smontagu.org","email":"smontagu%smontagu.org","date":"2005-09-29T08:41:22Z"},"message":"Make the dates shown in the Expired Certificate alert have consistent (short) format. Bug 246905, patch by Constantine A. Murenin <cnst+bmo@bugmail.mojo.ru>, r=jgmyers, sr=brendan","tree":{"sha":"6deaa398c844cfd87f28699ad0bc073b0689d0ef","url":"https://api.github.com/repos/mozilla/gecko-dev/git/trees/6deaa398c844cfd87f28699ad0bc073b0689d0ef"},"url":"https://api.github.com/repos/mozilla/gecko-dev/git/commits/159e0a2eab838472c1018886d9e0f52f8b89ee3e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/mozilla/gecko-dev/commits/159e0a2eab838472c1018886d9e0f52f8b89ee3e","html_url":"https://github.com/mozilla/gecko-dev/commit/159e0a2eab838472c1018886d9e0f52f8b89ee3e","comments_url":"https://api.github.com/repos/mozilla/gecko-dev/commits/159e0a2eab838472c1018886d9e0f52f8b89ee3e/comments","author":null,"committer":null,"parents":[{"sha":"6d9ff886f2b89354f4bc4573589c667430571ffb","url":"https://api.github.com/repos/mozilla/gecko-dev/commits/6d9ff886f2b89354f4bc4573589c667430571ffb","html_url":"https://github.com/mozilla/gecko-dev/commit/6d9ff886f2b89354f4bc4573589c667430571ffb"}],"stats":{"total":10,"additions":8,"deletions":2},"files":[{"sha":"d383420ef98d544f7ceb9804bf5869b26ecaebe0","filename":"security/manager/pki/resources/content/serverCertExpired.js","status":"modified","additions":8,"deletions":2,"changes":10,"blob_url":"https://github.com/mozilla/gecko-dev/blob/159e0a2eab838472c1018886d9e0f52f8b89ee3e/security/manager/pki/resources/content/serverCertExpired.js","raw_url":"https://github.com/mozilla/gecko-dev/raw/159e0a2eab838472c1018886d9e0f52f8b89ee3e/security/manager/pki/resources/content/serverCertExpired.js","contents_url":"https://api.github.com/repos/mozilla/gecko-dev/contents/security/manager/pki/resources/content/serverCertExpired.js?ref=159e0a2eab838472c1018886d9e0f52f8b89ee3e","patch":"@@ -55,9 +55,15 @@ function onLoad()\n   var bundle = srGetStrBundle(\"chrome://pippki/locale/pippki.properties\");\n   var message1 = dialogParams.GetString(1);\n   \n-  var currDate = new Date(); \n+  const nsIScriptableDateFormat = Components.interfaces.nsIScriptableDateFormat;\n+  var dateService = Components.classes[\"@mozilla.org/intl/scriptabledateformat;1\"].getService(nsIScriptableDateFormat);\n+  var date = new Date(); \n+  var dateStr = dateService.FormatDateTime(\"\", dateService.dateFormatShort, dateService.timeFormatNoSeconds, \n+                                           date.getFullYear(), date.getMonth()+1, date.getDate(), \n+                                           date.getHours(), date.getMinutes(), date.getSeconds());\n+\n   var message2 = bundle.formatStringFromName(\"serverCertExpiredMsg2\", \n-                                             [ currDate.toLocaleString() ],\n+                                             [ dateStr ],\n                                               1);\n   setText(\"message1\", message1);\n   setText(\"message2\", message2);"}]},"blames":["147e289d","7c35b579"]}