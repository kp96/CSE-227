{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basb9d0f43\""},"diff":[{"chunks":[{"content":"@@ -479,7 +479,6 @@ MOZ_DBUS_GLIB_CFLAGS    = @MOZ_DBUS_GLIB_CFLAGS@","changes":[{"type":"normal","normal":true,"ln1":479,"ln2":479,"content":" MOZ_DBUS_GLIB_LIBS      = @MOZ_DBUS_GLIB_LIBS@"},{"type":"normal","normal":true,"ln1":480,"ln2":480,"content":" MOZ_ENABLE_DBUS         = @MOZ_ENABLE_DBUS@"},{"type":"normal","normal":true,"ln1":481,"ln2":481,"content":" "},{"type":"del","del":true,"ln":482,"content":"-MOZ_ENABLE_FREETYPE2   = @MOZ_ENABLE_FREETYPE2@"},{"type":"normal","normal":true,"ln1":483,"ln2":482,"content":" FT2_CFLAGS             = @FT2_CFLAGS@"},{"type":"normal","normal":true,"ln1":484,"ln2":483,"content":" FT2_LIBS               = @FT2_LIBS@"},{"type":"normal","normal":true,"ln1":485,"ln2":484,"content":" "}],"oldStart":479,"oldLines":7,"newStart":479,"newLines":6}],"deletions":1,"additions":0,"from":"config/autoconf.mk.in","to":"config/autoconf.mk.in","index":["075eeb4..b6d2682","100644"]},{"chunks":[{"content":"@@ -4763,26 +4763,6 @@ AC_DEFINE_UNQUOTED(MOZ_DISTRIBUTION_ID,\"$MOZ_DISTRIBUTION_ID\")","changes":[{"type":"normal","normal":true,"ln1":4763,"ln2":4763,"content":" AC_SUBST(MOZ_DISTRIBUTION_ID)"},{"type":"normal","normal":true,"ln1":4764,"ln2":4764,"content":" "},{"type":"normal","normal":true,"ln1":4765,"ln2":4765,"content":" dnl ========================================================"},{"type":"del","del":true,"ln":4766,"content":"-dnl = FreeType2"},{"type":"del","del":true,"ln":4767,"content":"-dnl = Enable freetype by default if building against X11 "},{"type":"del","del":true,"ln":4768,"content":"-dnl = and freetype is available"},{"type":"del","del":true,"ln":4769,"content":"-dnl ========================================================"},{"type":"del","del":true,"ln":4770,"content":"-MOZ_ARG_DISABLE_BOOL(freetype2,"},{"type":"del","del":true,"ln":4771,"content":"-[  --disable-freetype2     Disable FreeType2 support ],"},{"type":"del","del":true,"ln":4772,"content":"-    MOZ_ENABLE_FREETYPE2=,"},{"type":"del","del":true,"ln":4773,"content":"-    MOZ_ENABLE_FREETYPE2=1)"},{"type":"del","del":true,"ln":4774,"content":"-"},{"type":"del","del":true,"ln":4775,"content":"-if test \"$MOZ_ENABLE_FREETYPE2\" && test -z \"$MOZ_X11\" -o -z \"$_HAVE_FREETYPE2\"; then"},{"type":"del","del":true,"ln":4776,"content":"-    AC_MSG_ERROR([Cannot enable FreeType2 support for non-X11 toolkits or if FreeType2 is not detected.])"},{"type":"del","del":true,"ln":4777,"content":"-fi"},{"type":"del","del":true,"ln":4778,"content":"-"},{"type":"del","del":true,"ln":4779,"content":"-if test \"$MOZ_ENABLE_FREETYPE2\"; then"},{"type":"del","del":true,"ln":4780,"content":"-    AC_DEFINE(MOZ_ENABLE_FREETYPE2)"},{"type":"del","del":true,"ln":4781,"content":"-    _NON_GLOBAL_ACDEFINES=\"$_NON_GLOBAL_ACDEFINES MOZ_ENABLE_FREETYPE2\""},{"type":"del","del":true,"ln":4782,"content":"-fi"},{"type":"del","del":true,"ln":4783,"content":"-AC_SUBST(MOZ_ENABLE_FREETYPE2)"},{"type":"del","del":true,"ln":4784,"content":"-"},{"type":"del","del":true,"ln":4785,"content":"-dnl ========================================================"},{"type":"normal","normal":true,"ln1":4786,"ln2":4766,"content":" dnl = Xft"},{"type":"normal","normal":true,"ln1":4787,"ln2":4767,"content":" dnl ========================================================"},{"type":"normal","normal":true,"ln1":4788,"ln2":4768,"content":" if test \"$MOZ_ENABLE_GTK2\"; then"}],"oldStart":4763,"oldLines":26,"newStart":4763,"newLines":6},{"content":"@@ -4798,10 +4778,6 @@ if test \"$MOZ_ENABLE_XFT\" && test -z \"$MOZ_ENABLE_GTK2\"; then","changes":[{"type":"normal","normal":true,"ln1":4798,"ln2":4778,"content":"     AC_MSG_ERROR([Cannot enable XFT support for non-GTK2 toolkits.])"},{"type":"normal","normal":true,"ln1":4799,"ln2":4779,"content":" fi"},{"type":"normal","normal":true,"ln1":4800,"ln2":4780,"content":" "},{"type":"del","del":true,"ln":4801,"content":"-if test \"$MOZ_ENABLE_XFT\" && test \"$MOZ_ENABLE_FREETYPE2\"; then"},{"type":"del","del":true,"ln":4802,"content":"-    AC_MSG_ERROR([Cannot enable XFT and FREETYPE2 at the same time.])"},{"type":"del","del":true,"ln":4803,"content":"-fi"},{"type":"del","del":true,"ln":4804,"content":"-"},{"type":"normal","normal":true,"ln1":4805,"ln2":4781,"content":" if test \"$MOZ_ENABLE_XFT\""},{"type":"normal","normal":true,"ln1":4806,"ln2":4782,"content":" then"},{"type":"normal","normal":true,"ln1":4807,"ln2":4783,"content":"     AC_DEFINE(MOZ_ENABLE_XFT)"}],"oldStart":4798,"oldLines":10,"newStart":4778,"newLines":6}],"deletions":24,"additions":0,"from":"configure.in","to":"configure.in","index":["8932e2e..0d410f7","100644"]},{"chunks":[{"content":"@@ -55,12 +55,5 @@ XPIDLSRCS\t= \\","changes":[{"type":"normal","normal":true,"ln1":55,"ln2":55,"content":" \t\tgfxtypes.idl \\"},{"type":"normal","normal":true,"ln1":56,"ln2":56,"content":" \t\t$(NULL)"},{"type":"normal","normal":true,"ln1":57,"ln2":57,"content":" "},{"type":"del","del":true,"ln":58,"content":"-ifdef MOZ_ENABLE_FREETYPE2"},{"type":"del","del":true,"ln":59,"content":"-XPIDLSRCS\t+= \\"},{"type":"del","del":true,"ln":60,"content":"-\t\tnsIFontCatalogService.idl \\"},{"type":"del","del":true,"ln":61,"content":"-\t\tnsIFreeType2.idl \\"},{"type":"del","del":true,"ln":62,"content":"-\t\t$(NULL)"},{"type":"del","del":true,"ln":63,"content":"-endif"},{"type":"del","del":true,"ln":64,"content":"-"},{"type":"normal","normal":true,"ln1":65,"ln2":58,"content":" include $(topsrcdir)/config/rules.mk"},{"type":"normal","normal":true,"ln1":66,"ln2":59,"content":" "}],"oldStart":55,"oldLines":12,"newStart":55,"newLines":5}],"deletions":7,"additions":0,"from":"gfx/idl/Makefile.in","to":"gfx/idl/Makefile.in","index":["8504e19..3be4b92","100644"]},{"chunks":[{"content":"@@ -1,123 +0,0 @@","changes":[{"type":"del","del":true,"ln":1,"content":"-/* -*- Mode: IDL; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */"},{"type":"del","del":true,"ln":2,"content":"-/* ***** BEGIN LICENSE BLOCK *****"},{"type":"del","del":true,"ln":3,"content":"- * Version: MPL 1.1/GPL 2.0/LGPL 2.1"},{"type":"del","del":true,"ln":4,"content":"- *"},{"type":"del","del":true,"ln":5,"content":"- * The contents of this file are subject to the Mozilla Public License Version"},{"type":"del","del":true,"ln":6,"content":"- * 1.1 (the \"License\"); you may not use this file except in compliance with"},{"type":"del","del":true,"ln":7,"content":"- * the License. You may obtain a copy of the License at"},{"type":"del","del":true,"ln":8,"content":"- * http://www.mozilla.org/MPL/"},{"type":"del","del":true,"ln":9,"content":"- *"},{"type":"del","del":true,"ln":10,"content":"- * Software distributed under the License is distributed on an \"AS IS\" basis,"},{"type":"del","del":true,"ln":11,"content":"- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License"},{"type":"del","del":true,"ln":12,"content":"- * for the specific language governing rights and limitations under the"},{"type":"del","del":true,"ln":13,"content":"- * License."},{"type":"del","del":true,"ln":14,"content":"- *"},{"type":"del","del":true,"ln":15,"content":"- * The Original Code is mozilla.org code."},{"type":"del","del":true,"ln":16,"content":"- *"},{"type":"del","del":true,"ln":17,"content":"- * The Initial Developer of the Original Code is"},{"type":"del","del":true,"ln":18,"content":"- * Christopher Blizzard <blizzard@mozilla.org>."},{"type":"del","del":true,"ln":19,"content":"- * Portions created by the Initial Developer are Copyright (C) 2002"},{"type":"del","del":true,"ln":20,"content":"- * the Initial Developer. All Rights Reserved."},{"type":"del","del":true,"ln":21,"content":"- *"},{"type":"del","del":true,"ln":22,"content":"- * Contributor(s):"},{"type":"del","del":true,"ln":23,"content":"- *   Pete Zha <pete.zha@sun.com>"},{"type":"del","del":true,"ln":24,"content":"- *   Brian Stell <bstell@ix.netcom.com>"},{"type":"del","del":true,"ln":25,"content":"- *"},{"type":"del","del":true,"ln":26,"content":"- * Alternatively, the contents of this file may be used under the terms of"},{"type":"del","del":true,"ln":27,"content":"- * either the GNU General Public License Version 2 or later (the \"GPL\"), or"},{"type":"del","del":true,"ln":28,"content":"- * the GNU Lesser General Public License Version 2.1 or later (the \"LGPL\"),"},{"type":"del","del":true,"ln":29,"content":"- * in which case the provisions of the GPL or the LGPL are applicable instead"},{"type":"del","del":true,"ln":30,"content":"- * of those above. If you wish to allow use of your version of this file only"},{"type":"del","del":true,"ln":31,"content":"- * under the terms of either the GPL or the LGPL, and not to allow others to"},{"type":"del","del":true,"ln":32,"content":"- * use your version of this file under the terms of the MPL, indicate your"},{"type":"del","del":true,"ln":33,"content":"- * decision by deleting the provisions above and replace them with the notice"},{"type":"del","del":true,"ln":34,"content":"- * and other provisions required by the GPL or the LGPL. If you do not delete"},{"type":"del","del":true,"ln":35,"content":"- * the provisions above, a recipient may use your version of this file under"},{"type":"del","del":true,"ln":36,"content":"- * the terms of any one of the MPL, the GPL or the LGPL."},{"type":"del","del":true,"ln":37,"content":"- *"},{"type":"del","del":true,"ln":38,"content":"- * ***** END LICENSE BLOCK ***** */"},{"type":"del","del":true,"ln":39,"content":"-"},{"type":"del","del":true,"ln":40,"content":"-#include \"nsISupports.idl\""},{"type":"del","del":true,"ln":41,"content":"-#include \"nsIArray.idl\""},{"type":"del","del":true,"ln":42,"content":"-"},{"type":"del","del":true,"ln":43,"content":"-[noscript, uuid(70406f93-5b53-49a0-b5a7-ebf533bfe59b)]"},{"type":"del","del":true,"ln":44,"content":"-interface nsIFontCatalogEntry : nsISupports"},{"type":"del","del":true,"ln":45,"content":"-{"},{"type":"del","del":true,"ln":46,"content":"-  const short FONT_CATALOG_TRUETYPE = 1;"},{"type":"del","del":true,"ln":47,"content":"-"},{"type":"del","del":true,"ln":48,"content":"-  readonly attribute unsigned short fontCatalogType;"},{"type":"del","del":true,"ln":49,"content":"-};"},{"type":"del","del":true,"ln":50,"content":"-"},{"type":"del","del":true,"ln":51,"content":"-[noscript, uuid(11f3efad-316e-4982-b9cf-9c304b0d5237)]"},{"type":"del","del":true,"ln":52,"content":"-interface nsITrueTypeFontCatalogEntry : nsIFontCatalogEntry"},{"type":"del","del":true,"ln":53,"content":"-{"},{"type":"del","del":true,"ln":54,"content":"-  readonly attribute ACString        fileName;"},{"type":"del","del":true,"ln":55,"content":"-  readonly attribute ACString        familyName;"},{"type":"del","del":true,"ln":56,"content":"-  readonly attribute ACString        styleName;"},{"type":"del","del":true,"ln":57,"content":"-  readonly attribute ACString        vendorID;"},{"type":"del","del":true,"ln":58,"content":"-  readonly attribute short           faceIndex;"},{"type":"del","del":true,"ln":59,"content":"-  readonly attribute short           numFaces;"},{"type":"del","del":true,"ln":60,"content":"-  readonly attribute short           numEmbeddedBitmaps;"},{"type":"del","del":true,"ln":61,"content":"-  readonly attribute long            numGlyphs;"},{"type":"del","del":true,"ln":62,"content":"-  readonly attribute long            numUsableGlyphs;"},{"type":"del","del":true,"ln":63,"content":"-  readonly attribute unsigned short  weight;"},{"type":"del","del":true,"ln":64,"content":"-  readonly attribute unsigned short  width;"},{"type":"del","del":true,"ln":65,"content":"-  readonly attribute unsigned long   flags;"},{"type":"del","del":true,"ln":66,"content":"-  readonly attribute long long       faceFlags;"},{"type":"del","del":true,"ln":67,"content":"-  readonly attribute long long       styleFlags;"},{"type":"del","del":true,"ln":68,"content":"-  readonly attribute unsigned long   codePageRange1;"},{"type":"del","del":true,"ln":69,"content":"-  readonly attribute unsigned long   codePageRange2;"},{"type":"del","del":true,"ln":70,"content":"-  readonly attribute long long       fileModTime;"},{"type":"del","del":true,"ln":71,"content":"-"},{"type":"del","del":true,"ln":72,"content":"-  void getCCMap(out unsigned long size,"},{"type":"del","del":true,"ln":73,"content":"-                [retval, array, size_is(size)] out unsigned short ccMaps);"},{"type":"del","del":true,"ln":74,"content":"-"},{"type":"del","del":true,"ln":75,"content":"-  void getEmbeddedBitmapHeights(out unsigned long size,"},{"type":"del","del":true,"ln":76,"content":"-                [retval, array, size_is(size)] out long heights);"},{"type":"del","del":true,"ln":77,"content":"-};"},{"type":"del","del":true,"ln":78,"content":"-"},{"type":"del","del":true,"ln":79,"content":"-[noscript, uuid(a3057187-c40f-4ffa-9160-2b16482053b1)]"},{"type":"del","del":true,"ln":80,"content":"-interface nsIFontCatalogService : nsISupports"},{"type":"del","del":true,"ln":81,"content":"-{"},{"type":"del","del":true,"ln":82,"content":"-  nsIArray getFontCatalogEntries(in ACString familyName,"},{"type":"del","del":true,"ln":83,"content":"-                                 in ACString language,"},{"type":"del","del":true,"ln":84,"content":"-                                 in unsigned short weight,"},{"type":"del","del":true,"ln":85,"content":"-                                 in unsigned short width,"},{"type":"del","del":true,"ln":86,"content":"-                                 in unsigned short slant,"},{"type":"del","del":true,"ln":87,"content":"-                                 in unsigned short spacing);"},{"type":"del","del":true,"ln":88,"content":"-"},{"type":"del","del":true,"ln":89,"content":"-  // Definition for weight"},{"type":"del","del":true,"ln":90,"content":"-  const unsigned short kFCWeightAny      =   0;"},{"type":"del","del":true,"ln":91,"content":"-  const unsigned short kFCWeightLight    = 300;"},{"type":"del","del":true,"ln":92,"content":"-  const unsigned short kFCWeightBook     = 400;"},{"type":"del","del":true,"ln":93,"content":"-  const unsigned short kFCWeightMedium   = 400;"},{"type":"del","del":true,"ln":94,"content":"-  const unsigned short kFCWeightRegular  = 400;"},{"type":"del","del":true,"ln":95,"content":"-  const unsigned short kFCWeightDemi     = 600;"},{"type":"del","del":true,"ln":96,"content":"-  const unsigned short kFCWeightDemibold = 600;"},{"type":"del","del":true,"ln":97,"content":"-  const unsigned short kFCWeightBold     = 700;"},{"type":"del","del":true,"ln":98,"content":"-  const unsigned short kFCWeighBlack     = 900;"},{"type":"del","del":true,"ln":99,"content":"-"},{"type":"del","del":true,"ln":100,"content":"-  // Definition for width"},{"type":"del","del":true,"ln":101,"content":"-  const unsigned short kFCWidthAny           = 0;"},{"type":"del","del":true,"ln":102,"content":"-  const unsigned short kFCWidthNarrow        = 3;"},{"type":"del","del":true,"ln":103,"content":"-  const unsigned short kFCWidthSemicondensed = 4;"},{"type":"del","del":true,"ln":104,"content":"-  const unsigned short kFCWidthBlock         = 5;"},{"type":"del","del":true,"ln":105,"content":"-  const unsigned short kFCWidthMedium        = 5;"},{"type":"del","del":true,"ln":106,"content":"-  const unsigned short kFCWidthNormal        = 5;"},{"type":"del","del":true,"ln":107,"content":"-  const unsigned short kFCWidthBold          = 7;"},{"type":"del","del":true,"ln":108,"content":"-  const unsigned short kFCWidthWide          = 7;"},{"type":"del","del":true,"ln":109,"content":"-  const unsigned short kFCWidthDoubleWide    = 9;"},{"type":"del","del":true,"ln":110,"content":"-"},{"type":"del","del":true,"ln":111,"content":"-  // Definition for slant"},{"type":"del","del":true,"ln":112,"content":"-  const unsigned short kFCSlantAny            = 0;"},{"type":"del","del":true,"ln":113,"content":"-  const unsigned short kFCSlantRoman          = 1;"},{"type":"del","del":true,"ln":114,"content":"-  const unsigned short kFCSlantItalic         = 2;"},{"type":"del","del":true,"ln":115,"content":"-  const unsigned short kFCSlantOblique        = 3;"},{"type":"del","del":true,"ln":116,"content":"-  const unsigned short kFCSlantReverseItalic  = 4;"},{"type":"del","del":true,"ln":117,"content":"-  const unsigned short kFCSlantReverseOblique = 5;"},{"type":"del","del":true,"ln":118,"content":"-"},{"type":"del","del":true,"ln":119,"content":"-  // Definition for spacing"},{"type":"del","del":true,"ln":120,"content":"-  const unsigned short kFCSpacingAny          = 0;"},{"type":"del","del":true,"ln":121,"content":"-  const unsigned short kFCSpacingMonospace    = 1;"},{"type":"del","del":true,"ln":122,"content":"-  const unsigned short kFCSpacingProportional = 2;"},{"type":"del","del":true,"ln":123,"content":"-};"}],"oldStart":1,"oldLines":123,"newStart":0,"newLines":0}],"deletions":123,"additions":0,"from":"gfx/idl/nsIFontCatalogService.idl","to":"/dev/null","deleted":true,"index":["17bb19b..0000000"]},{"chunks":[{"content":"@@ -1,141 +0,0 @@","changes":[{"type":"del","del":true,"ln":1,"content":"-/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */"},{"type":"del","del":true,"ln":2,"content":"-/* ***** BEGIN LICENSE BLOCK *****"},{"type":"del","del":true,"ln":3,"content":"- * Version: MPL 1.1/GPL 2.0/LGPL 2.1"},{"type":"del","del":true,"ln":4,"content":"- *"},{"type":"del","del":true,"ln":5,"content":"- * The contents of this file are subject to the Mozilla Public License Version"},{"type":"del","del":true,"ln":6,"content":"- * 1.1 (the \"License\"); you may not use this file except in compliance with"},{"type":"del","del":true,"ln":7,"content":"- * the License. You may obtain a copy of the License at"},{"type":"del","del":true,"ln":8,"content":"- * http://www.mozilla.org/MPL/"},{"type":"del","del":true,"ln":9,"content":"- *"},{"type":"del","del":true,"ln":10,"content":"- * Software distributed under the License is distributed on an \"AS IS\" basis,"},{"type":"del","del":true,"ln":11,"content":"- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License"},{"type":"del","del":true,"ln":12,"content":"- * for the specific language governing rights and limitations under the"},{"type":"del","del":true,"ln":13,"content":"- * License."},{"type":"del","del":true,"ln":14,"content":"- *"},{"type":"del","del":true,"ln":15,"content":"- * The Original Code is Golden Hills Computer Services code."},{"type":"del","del":true,"ln":16,"content":"- *"},{"type":"del","del":true,"ln":17,"content":"- * The Initial Developer of the Original Code is Brian Stell."},{"type":"del","del":true,"ln":18,"content":"- * Portions created by the Initial Developer are Copyright (C) 2002"},{"type":"del","del":true,"ln":19,"content":"- * the Initial Developer. All Rights Reserved."},{"type":"del","del":true,"ln":20,"content":"- *"},{"type":"del","del":true,"ln":21,"content":"- * Contributor(s):"},{"type":"del","del":true,"ln":22,"content":"- *      Brian Stell <bstell@ix.netcom.com>"},{"type":"del","del":true,"ln":23,"content":"- *"},{"type":"del","del":true,"ln":24,"content":"- * Alternatively, the contents of this file may be used under the terms of"},{"type":"del","del":true,"ln":25,"content":"- * either the GNU General Public License Version 2 or later (the \"GPL\"), or"},{"type":"del","del":true,"ln":26,"content":"- * the GNU Lesser General Public License Version 2.1 or later (the \"LGPL\"),"},{"type":"del","del":true,"ln":27,"content":"- * in which case the provisions of the GPL or the LGPL are applicable instead"},{"type":"del","del":true,"ln":28,"content":"- * of those above. If you wish to allow use of your version of this file only"},{"type":"del","del":true,"ln":29,"content":"- * under the terms of either the GPL or the LGPL, and not to allow others to"},{"type":"del","del":true,"ln":30,"content":"- * use your version of this file under the terms of the MPL, indicate your"},{"type":"del","del":true,"ln":31,"content":"- * decision by deleting the provisions above and replace them with the notice"},{"type":"del","del":true,"ln":32,"content":"- * and other provisions required by the GPL or the LGPL. If you do not delete"},{"type":"del","del":true,"ln":33,"content":"- * the provisions above, a recipient may use your version of this file under"},{"type":"del","del":true,"ln":34,"content":"- * the terms of any one of the MPL, the GPL or the LGPL."},{"type":"del","del":true,"ln":35,"content":"- *"},{"type":"del","del":true,"ln":36,"content":"- * ***** END LICENSE BLOCK ***** */"},{"type":"del","del":true,"ln":37,"content":"-"},{"type":"del","del":true,"ln":38,"content":"-#include \"nsISupports.idl\""},{"type":"del","del":true,"ln":39,"content":"-%{C++"},{"type":"del","del":true,"ln":40,"content":"-#include <ft2build.h>"},{"type":"del","del":true,"ln":41,"content":"-#include FT_FREETYPE_H"},{"type":"del","del":true,"ln":42,"content":"-#include FT_CACHE_H"},{"type":"del","del":true,"ln":43,"content":"-#include FT_CACHE_IMAGE_H"},{"type":"del","del":true,"ln":44,"content":"-#include FT_OUTLINE_H"},{"type":"del","del":true,"ln":45,"content":"-#include FT_TRUETYPE_TABLES_H"},{"type":"del","del":true,"ln":46,"content":"-#define NS_FREETYPE2_CONTRACTID \"@mozilla.org/freetype2;1\""},{"type":"del","del":true,"ln":47,"content":"-#define NS_FREETYPE2_CID NS_IFREETYPE2_IID"},{"type":"del","del":true,"ln":48,"content":"-// macros to handle FreeType2 26.6 numbers (26 bit number with 6 bit fraction)"},{"type":"del","del":true,"ln":49,"content":"-#define FT_REG_TO_16_16(x) ((x)<<16)"},{"type":"del","del":true,"ln":50,"content":"-#ifndef FT_MulFix"},{"type":"del","del":true,"ln":51,"content":"-#define FT_MulFix(v, s) (((v)*(s))>>16)"},{"type":"del","del":true,"ln":52,"content":"-#endif"},{"type":"del","del":true,"ln":53,"content":"-#define FT_ROUND(x) (((x) + 32) & ~63) // 63 = 2^6 - 1"},{"type":"del","del":true,"ln":54,"content":"-#define FT_TRUNC(x) ((x) >> 6)"},{"type":"del","del":true,"ln":55,"content":"-#define FT_DESIGN_UNITS_TO_PIXELS(v, s) FT_TRUNC(FT_ROUND(FT_MulFix((v) , (s))))"},{"type":"del","del":true,"ln":56,"content":"-"},{"type":"del","del":true,"ln":57,"content":"-%}"},{"type":"del","del":true,"ln":58,"content":"-"},{"type":"del","del":true,"ln":59,"content":"-"},{"type":"del","del":true,"ln":60,"content":"-[ptr] native constCharPtr(const char);"},{"type":"del","del":true,"ln":61,"content":"-native FT_Int(FT_Int);"},{"type":"del","del":true,"ln":62,"content":"-native FT_Long(FT_Long);"},{"type":"del","del":true,"ln":63,"content":"-native FT_UInt(FT_UInt);"},{"type":"del","del":true,"ln":64,"content":"-native FT_ULong(FT_ULong);"},{"type":"del","del":true,"ln":65,"content":"-"},{"type":"del","del":true,"ln":66,"content":"-native FT_BBox(FT_BBox);"},{"type":"del","del":true,"ln":67,"content":"-native FT_CharMap(FT_CharMap);"},{"type":"del","del":true,"ln":68,"content":"-native FT_Error(FT_Error);"},{"type":"del","del":true,"ln":69,"content":"-native FT_Face(FT_Face);"},{"type":"del","del":true,"ln":70,"content":"-native FT_Glyph(FT_Glyph);"},{"type":"del","del":true,"ln":71,"content":"-native FT_GlyphSlot(FT_GlyphSlot);"},{"type":"del","del":true,"ln":72,"content":"-native FT_Library(FT_Library);"},{"type":"del","del":true,"ln":73,"content":"-[ptr] native FT_Outline_p(FT_Outline);"},{"type":"del","del":true,"ln":74,"content":"-[ptr] native const_FT_Outline_Funcs_p(const FT_Outline_Funcs);"},{"type":"del","del":true,"ln":75,"content":"-native FT_Pointer(FT_Pointer);"},{"type":"del","del":true,"ln":76,"content":"-native FT_Sfnt_Tag(FT_Sfnt_Tag);"},{"type":"del","del":true,"ln":77,"content":"-native FT_Size(FT_Size);"},{"type":"del","del":true,"ln":78,"content":"-"},{"type":"del","del":true,"ln":79,"content":"-[ptr] native FTC_Image_Desc_p(FTC_Image_Desc);"},{"type":"del","del":true,"ln":80,"content":"-native FTC_Face_Requester(FTC_Face_Requester);"},{"type":"del","del":true,"ln":81,"content":"-native FTC_Font(FTC_Font);"},{"type":"del","del":true,"ln":82,"content":"-native FTC_Image_Cache(FTC_Image_Cache);"},{"type":"del","del":true,"ln":83,"content":"-native FTC_Manager(FTC_Manager);"},{"type":"del","del":true,"ln":84,"content":"-"},{"type":"del","del":true,"ln":85,"content":"-// #ifdef MOZ_SVG"},{"type":"del","del":true,"ln":86,"content":"-[ptr] native FT_Matrix_p(FT_Matrix);"},{"type":"del","del":true,"ln":87,"content":"-native FT_Vector(FT_Vector);"},{"type":"del","del":true,"ln":88,"content":"-[ptr] native FT_Vector_p(FT_Vector);"},{"type":"del","del":true,"ln":89,"content":"-native FT_Render_Mode(FT_Render_Mode);"},{"type":"del","del":true,"ln":90,"content":"-native FT_Bool(FT_Bool);"},{"type":"del","del":true,"ln":91,"content":"-// #endif"},{"type":"del","del":true,"ln":92,"content":"-"},{"type":"del","del":true,"ln":93,"content":"-/*"},{"type":"del","del":true,"ln":94,"content":"- * A XPCOM interface to the run-time loaded functions"},{"type":"del","del":true,"ln":95,"content":"- */"},{"type":"del","del":true,"ln":96,"content":"-[uuid(c6e09354-1bb1-4ec2-aaa3-a26d0aafe36d)]"},{"type":"del","del":true,"ln":97,"content":"-interface nsIFreeType2 : nsISupports"},{"type":"del","del":true,"ln":98,"content":"-{"},{"type":"del","del":true,"ln":99,"content":"-"},{"type":"del","del":true,"ln":100,"content":"-    readonly attribute FT_Library library;"},{"type":"del","del":true,"ln":101,"content":"-    readonly attribute FTC_Manager FTCacheManager;"},{"type":"del","del":true,"ln":102,"content":"-    readonly attribute FTC_Image_Cache ImageCache;"},{"type":"del","del":true,"ln":103,"content":"-"},{"type":"del","del":true,"ln":104,"content":"-    void    doneFace(in FT_Face face);"},{"type":"del","del":true,"ln":105,"content":"-    void    doneFreeType(in FT_Library lib);"},{"type":"del","del":true,"ln":106,"content":"-    void    doneGlyph(in FT_Glyph glyph);"},{"type":"del","del":true,"ln":107,"content":"-    FT_UInt getCharIndex(in FT_Face face, in FT_ULong charcode);"},{"type":"del","del":true,"ln":108,"content":"-    void    getGlyph(in FT_GlyphSlot slot, out FT_Glyph glyph);"},{"type":"del","del":true,"ln":109,"content":"-    voidPtr getSfntTable(in FT_Face face, in FT_Sfnt_Tag tag);"},{"type":"del","del":true,"ln":110,"content":"-    void    glyphGetCBox(in FT_Glyph glyph, in FT_UInt mode, out FT_BBox box);"},{"type":"del","del":true,"ln":111,"content":"-    void    initFreeType(out FT_Library lib);"},{"type":"del","del":true,"ln":112,"content":"-    void    loadGlyph(in FT_Face face, in FT_UInt gindex, in FT_Int flags);"},{"type":"del","del":true,"ln":113,"content":"-    void    newFace(in FT_Library lib, in constCharPtr filename,"},{"type":"del","del":true,"ln":114,"content":"-                    in FT_Long face_num, out FT_Face face);"},{"type":"del","del":true,"ln":115,"content":"-    void    outlineDecompose(in FT_Outline_p outline,"},{"type":"del","del":true,"ln":116,"content":"-                             in const_FT_Outline_Funcs_p funcs, in voidPtr p);"},{"type":"del","del":true,"ln":117,"content":"-    void    setCharmap(in FT_Face face, in FT_CharMap charmap);"},{"type":"del","del":true,"ln":118,"content":"-    void    imageCacheLookup(in FTC_Image_Cache cache, in FTC_Image_Desc_p desc,"},{"type":"del","del":true,"ln":119,"content":"-                             in FT_UInt gindex, out FT_Glyph glyph);"},{"type":"del","del":true,"ln":120,"content":"-    void    managerLookupSize(in FTC_Manager manager, in FTC_Font font,"},{"type":"del","del":true,"ln":121,"content":"-                              out FT_Face face, out FT_Size size);"},{"type":"del","del":true,"ln":122,"content":"-    void    managerDone(in FTC_Manager manager);"},{"type":"del","del":true,"ln":123,"content":"-    void    managerNew(in FT_Library lib, in FT_UInt max_faces,"},{"type":"del","del":true,"ln":124,"content":"-                       in FT_UInt max_sizes, in FT_ULong max_bytes,"},{"type":"del","del":true,"ln":125,"content":"-                       in FTC_Face_Requester requester, in FT_Pointer req_data,"},{"type":"del","del":true,"ln":126,"content":"-                       out FTC_Manager manager);"},{"type":"del","del":true,"ln":127,"content":"-    void    imageCacheNew(in FTC_Manager manager, out FTC_Image_Cache cache);"},{"type":"del","del":true,"ln":128,"content":"-/* #ifdef MOZ_SVG */"},{"type":"del","del":true,"ln":129,"content":"-    void glyphTransform(in FT_Glyph glyph, in FT_Matrix_p matrix,"},{"type":"del","del":true,"ln":130,"content":"-                        in FT_Vector_p delta);"},{"type":"del","del":true,"ln":131,"content":"-    void getKerning(in FT_Face face, in FT_UInt left_glyph, in FT_UInt right_glyph,"},{"type":"del","del":true,"ln":132,"content":"-                    in FT_UInt kern_mode, out FT_Vector akerning);"},{"type":"del","del":true,"ln":133,"content":"-    void glyphCopy(in FT_Glyph source, out FT_Glyph target);"},{"type":"del","del":true,"ln":134,"content":"-    void glyphToBitmap(inout FT_Glyph the_glyph, in FT_Render_Mode render_mode,"},{"type":"del","del":true,"ln":135,"content":"-                       in FT_Vector_p origin, in FT_Bool destroy);"},{"type":"del","del":true,"ln":136,"content":"-/* #endif */"},{"type":"del","del":true,"ln":137,"content":"-"},{"type":"del","del":true,"ln":138,"content":"-    FT_ULong getFirstChar(in FT_Face face, out FT_UInt gindex);"},{"type":"del","del":true,"ln":139,"content":"-    FT_ULong getNextChar(in FT_Face face, in FT_ULong charcode, out FT_UInt gindex);"},{"type":"del","del":true,"ln":140,"content":"-    void supportsExtFunc(out PRBool res);"},{"type":"del","del":true,"ln":141,"content":"-};"}],"oldStart":1,"oldLines":141,"newStart":0,"newLines":0}],"deletions":141,"additions":0,"from":"gfx/idl/nsIFreeType2.idl","to":"/dev/null","deleted":true,"index":["e8b075f..0000000"]},{"chunks":[{"content":"@@ -64,10 +64,6 @@ REQUIRES\t= xpcom \\","changes":[{"type":"normal","normal":true,"ln1":64,"ln2":64,"content":" "},{"type":"normal","normal":true,"ln1":65,"ln2":65,"content":" DIRS        = shared"},{"type":"normal","normal":true,"ln1":66,"ln2":66,"content":" "},{"type":"del","del":true,"ln":67,"content":"-ifdef MOZ_ENABLE_FREETYPE2"},{"type":"del","del":true,"ln":68,"content":"-DIRS        += freetype"},{"type":"del","del":true,"ln":69,"content":"-endif"},{"type":"del","del":true,"ln":70,"content":"-"},{"type":"normal","normal":true,"ln1":71,"ln2":67,"content":" ifdef MOZ_ENABLE_POSTSCRIPT"},{"type":"normal","normal":true,"ln1":72,"ln2":68,"content":" DIRS        += psshared"},{"type":"normal","normal":true,"ln1":73,"ln2":69,"content":" endif"}],"oldStart":64,"oldLines":10,"newStart":64,"newLines":6}],"deletions":4,"additions":0,"from":"gfx/src/Makefile.in","to":"gfx/src/Makefile.in","index":["cb2ae0f..1c33cda","100644"]},{"chunks":[{"content":"@@ -1,76 +0,0 @@","changes":[{"type":"del","del":true,"ln":1,"content":"-#"},{"type":"del","del":true,"ln":2,"content":"-# ***** BEGIN LICENSE BLOCK *****"},{"type":"del","del":true,"ln":3,"content":"-# Version: MPL 1.1/GPL 2.0/LGPL 2.1"},{"type":"del","del":true,"ln":4,"content":"-#"},{"type":"del","del":true,"ln":5,"content":"-# The contents of this file are subject to the Mozilla Public License Version"},{"type":"del","del":true,"ln":6,"content":"-# 1.1 (the \"License\"); you may not use this file except in compliance with"},{"type":"del","del":true,"ln":7,"content":"-# the License. You may obtain a copy of the License at"},{"type":"del","del":true,"ln":8,"content":"-# http://www.mozilla.org/MPL/"},{"type":"del","del":true,"ln":9,"content":"-#"},{"type":"del","del":true,"ln":10,"content":"-# Software distributed under the License is distributed on an \"AS IS\" basis,"},{"type":"del","del":true,"ln":11,"content":"-# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License"},{"type":"del","del":true,"ln":12,"content":"-# for the specific language governing rights and limitations under the"},{"type":"del","del":true,"ln":13,"content":"-# License."},{"type":"del","del":true,"ln":14,"content":"-#"},{"type":"del","del":true,"ln":15,"content":"-# The Original Code is mozilla.org code."},{"type":"del","del":true,"ln":16,"content":"-#"},{"type":"del","del":true,"ln":17,"content":"-# The Initial Developer of the Original Code is"},{"type":"del","del":true,"ln":18,"content":"-# Netscape Communications Corporation."},{"type":"del","del":true,"ln":19,"content":"-# Portions created by the Initial Developer are Copyright (C) 1998"},{"type":"del","del":true,"ln":20,"content":"-# the Initial Developer. All Rights Reserved."},{"type":"del","del":true,"ln":21,"content":"-#"},{"type":"del","del":true,"ln":22,"content":"-# Contributor(s):"},{"type":"del","del":true,"ln":23,"content":"-#"},{"type":"del","del":true,"ln":24,"content":"-# Alternatively, the contents of this file may be used under the terms of"},{"type":"del","del":true,"ln":25,"content":"-# either of the GNU General Public License Version 2 or later (the \"GPL\"),"},{"type":"del","del":true,"ln":26,"content":"-# or the GNU Lesser General Public License Version 2.1 or later (the \"LGPL\"),"},{"type":"del","del":true,"ln":27,"content":"-# in which case the provisions of the GPL or the LGPL are applicable instead"},{"type":"del","del":true,"ln":28,"content":"-# of those above. If you wish to allow use of your version of this file only"},{"type":"del","del":true,"ln":29,"content":"-# under the terms of either the GPL or the LGPL, and not to allow others to"},{"type":"del","del":true,"ln":30,"content":"-# use your version of this file under the terms of the MPL, indicate your"},{"type":"del","del":true,"ln":31,"content":"-# decision by deleting the provisions above and replace them with the notice"},{"type":"del","del":true,"ln":32,"content":"-# and other provisions required by the GPL or the LGPL. If you do not delete"},{"type":"del","del":true,"ln":33,"content":"-# the provisions above, a recipient may use your version of this file under"},{"type":"del","del":true,"ln":34,"content":"-# the terms of any one of the MPL, the GPL or the LGPL."},{"type":"del","del":true,"ln":35,"content":"-#"},{"type":"del","del":true,"ln":36,"content":"-# ***** END LICENSE BLOCK *****"},{"type":"del","del":true,"ln":37,"content":"-"},{"type":"del","del":true,"ln":38,"content":"-DEPTH\t\t= ../../.."},{"type":"del","del":true,"ln":39,"content":"-topsrcdir\t= @top_srcdir@"},{"type":"del","del":true,"ln":40,"content":"-srcdir\t\t= @srcdir@"},{"type":"del","del":true,"ln":41,"content":"-VPATH\t\t= @srcdir@"},{"type":"del","del":true,"ln":42,"content":"-"},{"type":"del","del":true,"ln":43,"content":"-include $(DEPTH)/config/autoconf.mk"},{"type":"del","del":true,"ln":44,"content":"-"},{"type":"del","del":true,"ln":45,"content":"-MODULE\t\t= gfx"},{"type":"del","del":true,"ln":46,"content":"-LIBRARY_NAME\t= gfxft2_s"},{"type":"del","del":true,"ln":47,"content":"-FORCE_STATIC_LIB= 1"},{"type":"del","del":true,"ln":48,"content":"-EXPORT_LIBRARY\t= 1"},{"type":"del","del":true,"ln":49,"content":"-LIBXUL_LIBRARY\t= 1"},{"type":"del","del":true,"ln":50,"content":"-"},{"type":"del","del":true,"ln":51,"content":"-REQUIRES\t= xpcom \\"},{"type":"del","del":true,"ln":52,"content":"-\t\t  string \\"},{"type":"del","del":true,"ln":53,"content":"-\t\t  pref \\"},{"type":"del","del":true,"ln":54,"content":"-\t\t  uconv \\"},{"type":"del","del":true,"ln":55,"content":"-\t\t  unicharutil \\"},{"type":"del","del":true,"ln":56,"content":"-\t\t  $(NULL)"},{"type":"del","del":true,"ln":57,"content":"-"},{"type":"del","del":true,"ln":58,"content":"-CPPSRCS\t= \\"},{"type":"del","del":true,"ln":59,"content":"-\t\tnsFreeType.cpp \\"},{"type":"del","del":true,"ln":60,"content":"-\t\t$(NULL)"},{"type":"del","del":true,"ln":61,"content":"-"},{"type":"del","del":true,"ln":62,"content":"-EXTRA_DSO_LDOPTS = \\"},{"type":"del","del":true,"ln":63,"content":"-\t\t$(LIBS_DIR) \\"},{"type":"del","del":true,"ln":64,"content":"-\t\t-lgkgfx \\"},{"type":"del","del":true,"ln":65,"content":"-\t\t$(MOZ_COMPONENT_LIBS) \\"},{"type":"del","del":true,"ln":66,"content":"-\t\t$(NULL)"},{"type":"del","del":true,"ln":67,"content":"-"},{"type":"del","del":true,"ln":68,"content":"-include $(topsrcdir)/config/rules.mk"},{"type":"del","del":true,"ln":69,"content":"-"},{"type":"del","del":true,"ln":70,"content":"-ifdef MOZ_ENABLE_FREETYPE2"},{"type":"del","del":true,"ln":71,"content":"-LOCAL_INCLUDES\t= -I../.."},{"type":"del","del":true,"ln":72,"content":"-INCLUDES        += $(FT2_CFLAGS)"},{"type":"del","del":true,"ln":73,"content":"-# due to runtime linking with PR_LoadLibrary"},{"type":"del","del":true,"ln":74,"content":"-# EXTRA_DSO_LDOPTS does not need $(FT2_LIBS)"},{"type":"del","del":true,"ln":75,"content":"-endif"},{"type":"del","del":true,"ln":76,"content":"-"}],"oldStart":1,"oldLines":76,"newStart":0,"newLines":0}],"deletions":76,"additions":0,"from":"gfx/src/freetype/Makefile.in","to":"/dev/null","deleted":true,"index":["03bf863..0000000"]},{"chunks":[{"content":"@@ -1,1171 +0,0 @@","changes":[{"type":"del","del":true,"ln":1,"content":"-/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */"},{"type":"del","del":true,"ln":2,"content":"-/* ex: set tabstop=8 softtabstop=2 shiftwidth=2 expandtab: */"},{"type":"del","del":true,"ln":3,"content":"-/* ***** BEGIN LICENSE BLOCK *****"},{"type":"del","del":true,"ln":4,"content":"- * Version: MPL 1.1/GPL 2.0/LGPL 2.1"},{"type":"del","del":true,"ln":5,"content":"- *"},{"type":"del","del":true,"ln":6,"content":"- * The contents of this file are subject to the Mozilla Public License Version"},{"type":"del","del":true,"ln":7,"content":"- * 1.1 (the \"License\"); you may not use this file except in compliance with"},{"type":"del","del":true,"ln":8,"content":"- * the License. You may obtain a copy of the License at"},{"type":"del","del":true,"ln":9,"content":"- * http://www.mozilla.org/MPL/"},{"type":"del","del":true,"ln":10,"content":"- *"},{"type":"del","del":true,"ln":11,"content":"- * Software distributed under the License is distributed on an \"AS IS\" basis,"},{"type":"del","del":true,"ln":12,"content":"- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License"},{"type":"del","del":true,"ln":13,"content":"- * for the specific language governing rights and limitations under the"},{"type":"del","del":true,"ln":14,"content":"- * License."},{"type":"del","del":true,"ln":15,"content":"- *"},{"type":"del","del":true,"ln":16,"content":"- * The Original Code is mozilla.org code."},{"type":"del","del":true,"ln":17,"content":"- *"},{"type":"del","del":true,"ln":18,"content":"- * The Initial Developer of the Original Code is"},{"type":"del","del":true,"ln":19,"content":"- * Netscape Communications Corporation."},{"type":"del","del":true,"ln":20,"content":"- * Portions created by the Initial Developer are Copyright (C) 1998"},{"type":"del","del":true,"ln":21,"content":"- * the Initial Developer. All Rights Reserved."},{"type":"del","del":true,"ln":22,"content":"- *"},{"type":"del","del":true,"ln":23,"content":"- * Contributor(s):"},{"type":"del","del":true,"ln":24,"content":"- *   Brian Stell <bstell@netscape.com>"},{"type":"del","del":true,"ln":25,"content":"- *"},{"type":"del","del":true,"ln":26,"content":"- * Alternatively, the contents of this file may be used under the terms of"},{"type":"del","del":true,"ln":27,"content":"- * either of the GNU General Public License Version 2 or later (the \"GPL\"),"},{"type":"del","del":true,"ln":28,"content":"- * or the GNU Lesser General Public License Version 2.1 or later (the \"LGPL\"),"},{"type":"del","del":true,"ln":29,"content":"- * in which case the provisions of the GPL or the LGPL are applicable instead"},{"type":"del","del":true,"ln":30,"content":"- * of those above. If you wish to allow use of your version of this file only"},{"type":"del","del":true,"ln":31,"content":"- * under the terms of either the GPL or the LGPL, and not to allow others to"},{"type":"del","del":true,"ln":32,"content":"- * use your version of this file under the terms of the MPL, indicate your"},{"type":"del","del":true,"ln":33,"content":"- * decision by deleting the provisions above and replace them with the notice"},{"type":"del","del":true,"ln":34,"content":"- * and other provisions required by the GPL or the LGPL. If you do not delete"},{"type":"del","del":true,"ln":35,"content":"- * the provisions above, a recipient may use your version of this file under"},{"type":"del","del":true,"ln":36,"content":"- * the terms of any one of the MPL, the GPL or the LGPL."},{"type":"del","del":true,"ln":37,"content":"- *"},{"type":"del","del":true,"ln":38,"content":"- * ***** END LICENSE BLOCK ***** */"},{"type":"del","del":true,"ln":39,"content":"-"},{"type":"del","del":true,"ln":40,"content":"-#include \"math.h\""},{"type":"del","del":true,"ln":41,"content":"-#include \"nsIPref.h\""},{"type":"del","del":true,"ln":42,"content":"-#include \"nsCOMPtr.h\""},{"type":"del","del":true,"ln":43,"content":"-#include \"nsIServiceManager.h\""},{"type":"del","del":true,"ln":44,"content":"-#include \"nsICharRepresentable.h\""},{"type":"del","del":true,"ln":45,"content":"-#include \"nsCompressedCharMap.h\""},{"type":"del","del":true,"ln":46,"content":"-#include \"nsICharsetConverterManager.h\""},{"type":"del","del":true,"ln":47,"content":"-#include \"nsIRenderingContext.h\""},{"type":"del","del":true,"ln":48,"content":"-#include \"nsFreeType.h\""},{"type":"del","del":true,"ln":49,"content":"-"},{"type":"del","del":true,"ln":50,"content":"-#include <ft2build.h>"},{"type":"del","del":true,"ln":51,"content":"-#include FT_FREETYPE_H"},{"type":"del","del":true,"ln":52,"content":"-#include FT_GLYPH_H"},{"type":"del","del":true,"ln":53,"content":"-#include FT_TRUETYPE_TABLES_H"},{"type":"del","del":true,"ln":54,"content":"-#include FT_TRUETYPE_IDS_H"},{"type":"del","del":true,"ln":55,"content":"-"},{"type":"del","del":true,"ln":56,"content":"-# define FREETYPE_PRINTF(x) \\"},{"type":"del","del":true,"ln":57,"content":"-            PR_BEGIN_MACRO \\"},{"type":"del","del":true,"ln":58,"content":"-              if (gFreeTypeDebug) { \\"},{"type":"del","del":true,"ln":59,"content":"-                printf x ; \\"},{"type":"del","del":true,"ln":60,"content":"-                printf(\", %s %d\\n\", __FILE__, __LINE__); \\"},{"type":"del","del":true,"ln":61,"content":"-              } \\"},{"type":"del","del":true,"ln":62,"content":"-            PR_END_MACRO"},{"type":"del","del":true,"ln":63,"content":"-"},{"type":"del","del":true,"ln":64,"content":"-PRUint32 gFreeTypeDebug = 0;"},{"type":"del","del":true,"ln":65,"content":"-"},{"type":"del","del":true,"ln":66,"content":"-//"},{"type":"del","del":true,"ln":67,"content":"-// these belong in nsFontFreeType"},{"type":"del","del":true,"ln":68,"content":"-//"},{"type":"del","del":true,"ln":69,"content":"-PRBool       nsFreeType2::gFreeType2Autohinted = PR_FALSE;"},{"type":"del","del":true,"ln":70,"content":"-PRBool       nsFreeType2::gFreeType2Unhinted = PR_TRUE;"},{"type":"del","del":true,"ln":71,"content":"-PRUint8      nsFreeType2::gAATTDarkTextMinValue = 64;"},{"type":"del","del":true,"ln":72,"content":"-double       nsFreeType2::gAATTDarkTextGain = 0.8;"},{"type":"del","del":true,"ln":73,"content":"-PRInt32      nsFreeType2::gAntiAliasMinimum = 8;"},{"type":"del","del":true,"ln":74,"content":"-PRInt32      nsFreeType2::gEmbeddedBitmapMaximumHeight = 1000000;"},{"type":"del","del":true,"ln":75,"content":"-nsHashtable* nsFreeType2::sFontFamilies = nsnull;"},{"type":"del","del":true,"ln":76,"content":"-nsHashtable* nsFreeType2::sRange1CharSetNames = nsnull;"},{"type":"del","del":true,"ln":77,"content":"-nsHashtable* nsFreeType2::sRange2CharSetNames = nsnull;"},{"type":"del","del":true,"ln":78,"content":"-nsICharsetConverterManager* nsFreeType2::sCharSetManager = nsnull;"},{"type":"del","del":true,"ln":79,"content":"-PRBool       nsFreeType2::gHasExtFunc = PR_TRUE;"},{"type":"del","del":true,"ln":80,"content":"-"},{"type":"del","del":true,"ln":81,"content":"-extern nsulCodePageRangeCharSetName ulCodePageRange1CharSetNames[];"},{"type":"del","del":true,"ln":82,"content":"-extern nsulCodePageRangeCharSetName ulCodePageRange2CharSetNames[];"},{"type":"del","del":true,"ln":83,"content":"-extern nsTTFontFamilyEncoderInfo    gFontFamilyEncoderInfo[];"},{"type":"del","del":true,"ln":84,"content":"-"},{"type":"del","del":true,"ln":85,"content":"-typedef int Error;"},{"type":"del","del":true,"ln":86,"content":"-"},{"type":"del","del":true,"ln":87,"content":"-/*FT_CALLBACK_DEF*/ FT_Error nsFreeTypeFaceRequester(FTC_FaceID, FT_Library, "},{"type":"del","del":true,"ln":88,"content":"-                                                 FT_Pointer, FT_Face*);"},{"type":"del","del":true,"ln":89,"content":"-static FT_Error nsFreeType2__DummyFunc();"},{"type":"del","del":true,"ln":90,"content":"-"},{"type":"del","del":true,"ln":91,"content":"-static nsHashtable* gFreeTypeFaces = nsnull;"},{"type":"del","del":true,"ln":92,"content":"-"},{"type":"del","del":true,"ln":93,"content":"-//"},{"type":"del","del":true,"ln":94,"content":"-// Define the FreeType2 functions we resolve at run time."},{"type":"del","del":true,"ln":95,"content":"-// see the comment near nsFreeType2::DoneFace() for more info"},{"type":"del","del":true,"ln":96,"content":"-//"},{"type":"del","del":true,"ln":97,"content":"-#define NS_FT2_OFFSET(f) (long)&((nsFreeType2*)0)->f"},{"type":"del","del":true,"ln":98,"content":"-FtFuncList nsFreeType2::FtFuncs [] = {"},{"type":"del","del":true,"ln":99,"content":"-  {\"FT_Done_Face\",            NS_FT2_OFFSET(nsFT_Done_Face),            PR_TRUE},"},{"type":"del","del":true,"ln":100,"content":"-  {\"FT_Done_FreeType\",        NS_FT2_OFFSET(nsFT_Done_FreeType),        PR_TRUE},"},{"type":"del","del":true,"ln":101,"content":"-  {\"FT_Done_Glyph\",           NS_FT2_OFFSET(nsFT_Done_Glyph),           PR_TRUE},"},{"type":"del","del":true,"ln":102,"content":"-  {\"FT_Get_Char_Index\",       NS_FT2_OFFSET(nsFT_Get_Char_Index),       PR_TRUE},"},{"type":"del","del":true,"ln":103,"content":"-  {\"FT_Get_Glyph\",            NS_FT2_OFFSET(nsFT_Get_Glyph),            PR_TRUE},"},{"type":"del","del":true,"ln":104,"content":"-  {\"FT_Get_Sfnt_Table\",       NS_FT2_OFFSET(nsFT_Get_Sfnt_Table),       PR_TRUE},"},{"type":"del","del":true,"ln":105,"content":"-  {\"FT_Glyph_Get_CBox\",       NS_FT2_OFFSET(nsFT_Glyph_Get_CBox),       PR_TRUE},"},{"type":"del","del":true,"ln":106,"content":"-  {\"FT_Init_FreeType\",        NS_FT2_OFFSET(nsFT_Init_FreeType),        PR_TRUE},"},{"type":"del","del":true,"ln":107,"content":"-  {\"FT_Load_Glyph\",           NS_FT2_OFFSET(nsFT_Load_Glyph),           PR_TRUE},"},{"type":"del","del":true,"ln":108,"content":"-  {\"FT_New_Face\",             NS_FT2_OFFSET(nsFT_New_Face),             PR_TRUE},"},{"type":"del","del":true,"ln":109,"content":"-  {\"FT_Outline_Decompose\",    NS_FT2_OFFSET(nsFT_Outline_Decompose),    PR_TRUE},"},{"type":"del","del":true,"ln":110,"content":"-  {\"FT_Set_Charmap\",          NS_FT2_OFFSET(nsFT_Set_Charmap),          PR_TRUE},"},{"type":"del","del":true,"ln":111,"content":"-  {\"FTC_Image_Cache_Lookup\",  NS_FT2_OFFSET(nsFTC_Image_Cache_Lookup),  PR_TRUE},"},{"type":"del","del":true,"ln":112,"content":"-  {\"FTC_Manager_Lookup_Size\", NS_FT2_OFFSET(nsFTC_Manager_Lookup_Size), PR_TRUE},"},{"type":"del","del":true,"ln":113,"content":"-  {\"FTC_Manager_Done\",        NS_FT2_OFFSET(nsFTC_Manager_Done),        PR_TRUE},"},{"type":"del","del":true,"ln":114,"content":"-  {\"FTC_Manager_New\",         NS_FT2_OFFSET(nsFTC_Manager_New),         PR_TRUE},"},{"type":"del","del":true,"ln":115,"content":"-  {\"FTC_Image_Cache_New\",     NS_FT2_OFFSET(nsFTC_Image_Cache_New),     PR_TRUE},"},{"type":"del","del":true,"ln":116,"content":"-// #ifdef MOZ_SVG"},{"type":"del","del":true,"ln":117,"content":"-  {\"FT_Glyph_Transform\",      NS_FT2_OFFSET(nsFT_Glyph_Transform),      PR_TRUE},"},{"type":"del","del":true,"ln":118,"content":"-  {\"FT_Get_Kerning\",          NS_FT2_OFFSET(nsFT_Get_Kerning),          PR_TRUE},"},{"type":"del","del":true,"ln":119,"content":"-  {\"FT_Glyph_Copy\",           NS_FT2_OFFSET(nsFT_Glyph_Copy),           PR_TRUE},"},{"type":"del","del":true,"ln":120,"content":"-  {\"FT_Glyph_To_Bitmap\",      NS_FT2_OFFSET(nsFT_Glyph_To_Bitmap),      PR_TRUE},"},{"type":"del","del":true,"ln":121,"content":"-// #endif"},{"type":"del","del":true,"ln":122,"content":"-  {\"FT_Get_First_Char\",       NS_FT2_OFFSET(nsFT_Get_First_Char),       PR_FALSE},"},{"type":"del","del":true,"ln":123,"content":"-  {\"FT_Get_Next_Char\",        NS_FT2_OFFSET(nsFT_Get_Next_Char),        PR_FALSE},"},{"type":"del","del":true,"ln":124,"content":"-  {nsnull,                    0, 0}"},{"type":"del","del":true,"ln":125,"content":"-};"},{"type":"del","del":true,"ln":126,"content":"-"},{"type":"del","del":true,"ln":127,"content":"-nsTTFontEncoderInfo FEI_Adobe_Symbol_Encoding = {"},{"type":"del","del":true,"ln":128,"content":"-  \"Adobe-Symbol-Encoding\", TT_PLATFORM_MICROSOFT, TT_MS_ID_SYMBOL_CS, nsnull"},{"type":"del","del":true,"ln":129,"content":"-};"},{"type":"del","del":true,"ln":130,"content":"-nsTTFontEncoderInfo FEI_x_ttf_cmr = {"},{"type":"del","del":true,"ln":131,"content":"-  \"x-ttf-cmr\", TT_PLATFORM_MICROSOFT, TT_MS_ID_UNICODE_CS, nsnull"},{"type":"del","del":true,"ln":132,"content":"-};"},{"type":"del","del":true,"ln":133,"content":"-nsTTFontEncoderInfo FEI_x_ttf_cmmi = {"},{"type":"del","del":true,"ln":134,"content":"-  \"x-ttf-cmmi\", TT_PLATFORM_MICROSOFT, TT_MS_ID_UNICODE_CS, nsnull"},{"type":"del","del":true,"ln":135,"content":"-};"},{"type":"del","del":true,"ln":136,"content":"-nsTTFontEncoderInfo FEI_x_ttf_cmsy = {"},{"type":"del","del":true,"ln":137,"content":"-  \"x-ttf-cmsy\", TT_PLATFORM_MICROSOFT, TT_MS_ID_UNICODE_CS, nsnull"},{"type":"del","del":true,"ln":138,"content":"-};"},{"type":"del","del":true,"ln":139,"content":"-nsTTFontEncoderInfo FEI_x_ttf_cmex = {"},{"type":"del","del":true,"ln":140,"content":"-  \"x-ttf-cmex\", TT_PLATFORM_MICROSOFT, TT_MS_ID_UNICODE_CS, nsnull"},{"type":"del","del":true,"ln":141,"content":"-};"},{"type":"del","del":true,"ln":142,"content":"-nsTTFontEncoderInfo FEI_x_mathematica1 = {"},{"type":"del","del":true,"ln":143,"content":"-  \"x-mathematica1\", TT_PLATFORM_MACINTOSH, TT_MAC_ID_ROMAN, nsnull"},{"type":"del","del":true,"ln":144,"content":"-};"},{"type":"del","del":true,"ln":145,"content":"-nsTTFontEncoderInfo FEI_x_mathematica2 = {"},{"type":"del","del":true,"ln":146,"content":"-  \"x-mathematica2\", TT_PLATFORM_MACINTOSH, TT_MAC_ID_ROMAN, nsnull"},{"type":"del","del":true,"ln":147,"content":"-};"},{"type":"del","del":true,"ln":148,"content":"-nsTTFontEncoderInfo FEI_x_mathematica3 = {"},{"type":"del","del":true,"ln":149,"content":"-  \"x-mathematica3\", TT_PLATFORM_MACINTOSH, TT_MAC_ID_ROMAN, nsnull"},{"type":"del","del":true,"ln":150,"content":"-};"},{"type":"del","del":true,"ln":151,"content":"-nsTTFontEncoderInfo FEI_x_mathematica4 = {"},{"type":"del","del":true,"ln":152,"content":"-  \"x-mathematica4\", TT_PLATFORM_MACINTOSH, TT_MAC_ID_ROMAN, nsnull"},{"type":"del","del":true,"ln":153,"content":"-};"},{"type":"del","del":true,"ln":154,"content":"-nsTTFontEncoderInfo FEI_x_mathematica5 = {"},{"type":"del","del":true,"ln":155,"content":"-  \"x-mathematica5\", TT_PLATFORM_MACINTOSH, TT_MAC_ID_ROMAN, nsnull"},{"type":"del","del":true,"ln":156,"content":"-};"},{"type":"del","del":true,"ln":157,"content":"-nsTTFontEncoderInfo FEI_x_mtextra = {"},{"type":"del","del":true,"ln":158,"content":"-  \"x-mtextra\", TT_PLATFORM_MICROSOFT, TT_MS_ID_SYMBOL_CS, nsnull"},{"type":"del","del":true,"ln":159,"content":"-};"},{"type":"del","del":true,"ln":160,"content":"-nsTTFontEncoderInfo FEI_windows_1252 = {"},{"type":"del","del":true,"ln":161,"content":"-  \"windows-1252\", TT_PLATFORM_MICROSOFT, TT_MS_ID_SYMBOL_CS, nsnull"},{"type":"del","del":true,"ln":162,"content":"-};"},{"type":"del","del":true,"ln":163,"content":"-"},{"type":"del","del":true,"ln":164,"content":"-"},{"type":"del","del":true,"ln":165,"content":"-///////////////////////////////////////////////////////////////////////"},{"type":"del","del":true,"ln":166,"content":"-//"},{"type":"del","del":true,"ln":167,"content":"-// class nsFreeType2 data/functions"},{"type":"del","del":true,"ln":168,"content":"-//"},{"type":"del","del":true,"ln":169,"content":"-///////////////////////////////////////////////////////////////////////"},{"type":"del","del":true,"ln":170,"content":"-"},{"type":"del","del":true,"ln":171,"content":"-NS_IMPL_ISUPPORTS1(nsFreeType2, nsIFreeType2)"},{"type":"del","del":true,"ln":172,"content":"-"},{"type":"del","del":true,"ln":173,"content":"-//"},{"type":"del","del":true,"ln":174,"content":"-// Since the Freetype2 library may not be available on the user's"},{"type":"del","del":true,"ln":175,"content":"-// system we cannot link directly to it otherwise the whole app would"},{"type":"del","del":true,"ln":176,"content":"-// fail to run on those systems.  Instead we access the FreeType2"},{"type":"del","del":true,"ln":177,"content":"-// functions via function pointers."},{"type":"del","del":true,"ln":178,"content":"-//"},{"type":"del","del":true,"ln":179,"content":"-// If we can load the Freetype2 library with PR_LoadLIbrary we to load "},{"type":"del","del":true,"ln":180,"content":"-// pointers to the Ft2 functions. If not, then the function pointers"},{"type":"del","del":true,"ln":181,"content":"-// point to a dummy function which always returns an error."},{"type":"del","del":true,"ln":182,"content":"-//"},{"type":"del","del":true,"ln":183,"content":"- "},{"type":"del","del":true,"ln":184,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":185,"content":"-nsFreeType2::DoneFace(FT_Face face)"},{"type":"del","del":true,"ln":186,"content":"-{ "},{"type":"del","del":true,"ln":187,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":188,"content":"-  FT_Error error = nsFT_Done_Face(face);"},{"type":"del","del":true,"ln":189,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":190,"content":"-} "},{"type":"del","del":true,"ln":191,"content":"- "},{"type":"del","del":true,"ln":192,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":193,"content":"-nsFreeType2::DoneFreeType(FT_Library library)"},{"type":"del","del":true,"ln":194,"content":"-{ "},{"type":"del","del":true,"ln":195,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":196,"content":"-  FT_Error error = nsFT_Done_FreeType(library);"},{"type":"del","del":true,"ln":197,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":198,"content":"-} "},{"type":"del","del":true,"ln":199,"content":"- "},{"type":"del","del":true,"ln":200,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":201,"content":"-nsFreeType2::DoneGlyph(FT_Glyph glyph)"},{"type":"del","del":true,"ln":202,"content":"-{ "},{"type":"del","del":true,"ln":203,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":204,"content":"-  nsFT_Done_Glyph(glyph);"},{"type":"del","del":true,"ln":205,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":206,"content":"-} "},{"type":"del","del":true,"ln":207,"content":"- "},{"type":"del","del":true,"ln":208,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":209,"content":"-nsFreeType2::GetCharIndex(FT_Face face, FT_ULong charcode, FT_UInt *index)"},{"type":"del","del":true,"ln":210,"content":"-{ "},{"type":"del","del":true,"ln":211,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":212,"content":"-  *index = nsFT_Get_Char_Index(face, charcode);"},{"type":"del","del":true,"ln":213,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":214,"content":"-} "},{"type":"del","del":true,"ln":215,"content":"-"},{"type":"del","del":true,"ln":216,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":217,"content":"-nsFreeType2::GetGlyph(FT_GlyphSlot slot, FT_Glyph *glyph)"},{"type":"del","del":true,"ln":218,"content":"-{ "},{"type":"del","del":true,"ln":219,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":220,"content":"-  FT_Error error = nsFT_Get_Glyph(slot, glyph);"},{"type":"del","del":true,"ln":221,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":222,"content":"-} "},{"type":"del","del":true,"ln":223,"content":"- "},{"type":"del","del":true,"ln":224,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":225,"content":"-nsFreeType2::GetSfntTable(FT_Face face, FT_Sfnt_Tag tag, void** table)"},{"type":"del","del":true,"ln":226,"content":"-{ "},{"type":"del","del":true,"ln":227,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":228,"content":"-  *table = nsFT_Get_Sfnt_Table(face, tag);"},{"type":"del","del":true,"ln":229,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":230,"content":"-} "},{"type":"del","del":true,"ln":231,"content":"- "},{"type":"del","del":true,"ln":232,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":233,"content":"-nsFreeType2::GlyphGetCBox(FT_Glyph glyph, FT_UInt mode, FT_BBox *bbox)"},{"type":"del","del":true,"ln":234,"content":"-{ "},{"type":"del","del":true,"ln":235,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":236,"content":"-  nsFT_Glyph_Get_CBox(glyph, mode, bbox);"},{"type":"del","del":true,"ln":237,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":238,"content":"-} "},{"type":"del","del":true,"ln":239,"content":"- "},{"type":"del","del":true,"ln":240,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":241,"content":"-nsFreeType2::InitFreeType(FT_Library *library)"},{"type":"del","del":true,"ln":242,"content":"-{ "},{"type":"del","del":true,"ln":243,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":244,"content":"-  FT_Error error = nsFT_Init_FreeType(library);"},{"type":"del","del":true,"ln":245,"content":"-  if (error)"},{"type":"del","del":true,"ln":246,"content":"-  {"},{"type":"del","del":true,"ln":247,"content":"-    FREETYPE_PRINTF((\"\\n\\n*********\\nFreeType initialization error = %d\","},{"type":"del","del":true,"ln":248,"content":"-                         error));"},{"type":"del","del":true,"ln":249,"content":"-    return NS_ERROR_FAILURE;"},{"type":"del","del":true,"ln":250,"content":"-  }"},{"type":"del","del":true,"ln":251,"content":"-  else return NS_OK;"},{"type":"del","del":true,"ln":252,"content":"-} "},{"type":"del","del":true,"ln":253,"content":"- "},{"type":"del","del":true,"ln":254,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":255,"content":"-nsFreeType2::LoadGlyph(FT_Face face, FT_UInt glyph, FT_Int flags)"},{"type":"del","del":true,"ln":256,"content":"-{ "},{"type":"del","del":true,"ln":257,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":258,"content":"-  FT_Error error = nsFT_Load_Glyph(face, glyph, flags);"},{"type":"del","del":true,"ln":259,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":260,"content":"-} "},{"type":"del","del":true,"ln":261,"content":"- "},{"type":"del","del":true,"ln":262,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":263,"content":"-nsFreeType2::NewFace(FT_Library library, const char *path,"},{"type":"del","del":true,"ln":264,"content":"-                         FT_Long face_index, FT_Face *face)"},{"type":"del","del":true,"ln":265,"content":"-{ "},{"type":"del","del":true,"ln":266,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":267,"content":"-  FT_Error error = nsFT_New_Face(library, path, face_index, face);"},{"type":"del","del":true,"ln":268,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":269,"content":"-} "},{"type":"del","del":true,"ln":270,"content":"- "},{"type":"del","del":true,"ln":271,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":272,"content":"-nsFreeType2::OutlineDecompose(FT_Outline *outline,"},{"type":"del","del":true,"ln":273,"content":"-                              const FT_Outline_Funcs *funcs, void *user)"},{"type":"del","del":true,"ln":274,"content":"-{ "},{"type":"del","del":true,"ln":275,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":276,"content":"-  FT_Error error = nsFT_Outline_Decompose(outline, funcs, user);"},{"type":"del","del":true,"ln":277,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":278,"content":"-} "},{"type":"del","del":true,"ln":279,"content":"- "},{"type":"del","del":true,"ln":280,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":281,"content":"-nsFreeType2::SetCharmap(FT_Face face, FT_CharMap  charmap)"},{"type":"del","del":true,"ln":282,"content":"-{ "},{"type":"del","del":true,"ln":283,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":284,"content":"-  FT_Error error = nsFT_Set_Charmap(face, charmap);"},{"type":"del","del":true,"ln":285,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":286,"content":"-} "},{"type":"del","del":true,"ln":287,"content":"- "},{"type":"del","del":true,"ln":288,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":289,"content":"-nsFreeType2::ImageCacheLookup(FTC_Image_Cache cache, FTC_Image_Desc *desc,"},{"type":"del","del":true,"ln":290,"content":"-                              FT_UInt glyphID, FT_Glyph *glyph)"},{"type":"del","del":true,"ln":291,"content":"-{ "},{"type":"del","del":true,"ln":292,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":293,"content":"-  FT_Error error = nsFTC_Image_Cache_Lookup(cache, desc, glyphID, glyph);"},{"type":"del","del":true,"ln":294,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":295,"content":"-} "},{"type":"del","del":true,"ln":296,"content":"- "},{"type":"del","del":true,"ln":297,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":298,"content":"-nsFreeType2::ManagerLookupSize(FTC_Manager manager, FTC_Font font,"},{"type":"del","del":true,"ln":299,"content":"-                               FT_Face *face, FT_Size *size)"},{"type":"del","del":true,"ln":300,"content":"-{ "},{"type":"del","del":true,"ln":301,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":302,"content":"-  FT_Error error = nsFTC_Manager_Lookup_Size(manager, font, face, size);"},{"type":"del","del":true,"ln":303,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":304,"content":"-} "},{"type":"del","del":true,"ln":305,"content":"- "},{"type":"del","del":true,"ln":306,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":307,"content":"-nsFreeType2::ManagerDone(FTC_Manager manager)"},{"type":"del","del":true,"ln":308,"content":"-{ "},{"type":"del","del":true,"ln":309,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":310,"content":"-  nsFTC_Manager_Done(manager);"},{"type":"del","del":true,"ln":311,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":312,"content":"-} "},{"type":"del","del":true,"ln":313,"content":"- "},{"type":"del","del":true,"ln":314,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":315,"content":"-nsFreeType2::ManagerNew(FT_Library library, FT_UInt max_faces,"},{"type":"del","del":true,"ln":316,"content":"-                        FT_UInt max_sizes, FT_ULong max_bytes,"},{"type":"del","del":true,"ln":317,"content":"-                        FTC_Face_Requester requester, FT_Pointer req_data,"},{"type":"del","del":true,"ln":318,"content":"-                        FTC_Manager *manager)"},{"type":"del","del":true,"ln":319,"content":"-{ "},{"type":"del","del":true,"ln":320,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":321,"content":"-  FT_Error error = nsFTC_Manager_New(library, max_faces, max_sizes, max_bytes,"},{"type":"del","del":true,"ln":322,"content":"-                                     requester, req_data, manager);"},{"type":"del","del":true,"ln":323,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":324,"content":"-} "},{"type":"del","del":true,"ln":325,"content":"- "},{"type":"del","del":true,"ln":326,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":327,"content":"-nsFreeType2::ImageCacheNew(FTC_Manager manager, FTC_Image_Cache *cache)"},{"type":"del","del":true,"ln":328,"content":"-{ "},{"type":"del","del":true,"ln":329,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":330,"content":"-  FT_Error error = nsFTC_Image_Cache_New(manager, cache);"},{"type":"del","del":true,"ln":331,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":332,"content":"-} "},{"type":"del","del":true,"ln":333,"content":"-"},{"type":"del","del":true,"ln":334,"content":"-// #ifdef MOZ_SVG"},{"type":"del","del":true,"ln":335,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":336,"content":"-nsFreeType2::GlyphTransform(FT_Glyph glyph, FT_Matrix * matrix, FT_Vector * delta)"},{"type":"del","del":true,"ln":337,"content":"-{"},{"type":"del","del":true,"ln":338,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":339,"content":"-  FT_Error error = nsFT_Glyph_Transform(glyph, matrix, delta);"},{"type":"del","del":true,"ln":340,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":341,"content":"-}"},{"type":"del","del":true,"ln":342,"content":"-"},{"type":"del","del":true,"ln":343,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":344,"content":"-nsFreeType2::GetKerning(FT_Face face, FT_UInt left_glyph, FT_UInt right_glyph,"},{"type":"del","del":true,"ln":345,"content":"-                        FT_UInt kern_mode, FT_Vector *akerning)"},{"type":"del","del":true,"ln":346,"content":"-{"},{"type":"del","del":true,"ln":347,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":348,"content":"-  FT_Error error = nsFT_Get_Kerning(face, left_glyph, right_glyph,"},{"type":"del","del":true,"ln":349,"content":"-                                    kern_mode, akerning);"},{"type":"del","del":true,"ln":350,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":351,"content":"-}"},{"type":"del","del":true,"ln":352,"content":"-"},{"type":"del","del":true,"ln":353,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":354,"content":"-nsFreeType2::GlyphCopy(FT_Glyph source, FT_Glyph *target)"},{"type":"del","del":true,"ln":355,"content":"-{"},{"type":"del","del":true,"ln":356,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":357,"content":"-  FT_Error error = nsFT_Glyph_Copy(source, target);"},{"type":"del","del":true,"ln":358,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":359,"content":"-}"},{"type":"del","del":true,"ln":360,"content":"-"},{"type":"del","del":true,"ln":361,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":362,"content":"-nsFreeType2::GlyphToBitmap(FT_Glyph *the_glyph, FT_Render_Mode render_mode,"},{"type":"del","del":true,"ln":363,"content":"-                           FT_Vector * origin, FT_Bool destroy)"},{"type":"del","del":true,"ln":364,"content":"-{"},{"type":"del","del":true,"ln":365,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":366,"content":"-  FT_Error error = nsFT_Glyph_To_Bitmap(the_glyph, render_mode, origin, destroy);"},{"type":"del","del":true,"ln":367,"content":"-  return error ? NS_ERROR_FAILURE : NS_OK;"},{"type":"del","del":true,"ln":368,"content":"-}"},{"type":"del","del":true,"ln":369,"content":"-"},{"type":"del","del":true,"ln":370,"content":"-// #endif"},{"type":"del","del":true,"ln":371,"content":"-"},{"type":"del","del":true,"ln":372,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":373,"content":"-nsFreeType2::GetFirstChar(FT_Face face, FT_UInt *gindex, FT_ULong *charcode)"},{"type":"del","del":true,"ln":374,"content":"-{ "},{"type":"del","del":true,"ln":375,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":376,"content":"-  *charcode = nsFT_Get_First_Char(face, gindex);"},{"type":"del","del":true,"ln":377,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":378,"content":"-} "},{"type":"del","del":true,"ln":379,"content":"-"},{"type":"del","del":true,"ln":380,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":381,"content":"-nsFreeType2::GetNextChar(FT_Face face, FT_ULong charcode, FT_UInt *gindex, FT_ULong *ncharcode)"},{"type":"del","del":true,"ln":382,"content":"-{ "},{"type":"del","del":true,"ln":383,"content":"-  // call the FreeType2 function via the function pointer"},{"type":"del","del":true,"ln":384,"content":"-  *ncharcode = nsFT_Get_Next_Char(face, charcode, gindex);"},{"type":"del","del":true,"ln":385,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":386,"content":"-} "},{"type":"del","del":true,"ln":387,"content":"-"},{"type":"del","del":true,"ln":388,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":389,"content":"-nsFreeType2::SupportsExtFunc(PRBool *res)"},{"type":"del","del":true,"ln":390,"content":"-{ "},{"type":"del","del":true,"ln":391,"content":"-  *res = gHasExtFunc;"},{"type":"del","del":true,"ln":392,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":393,"content":"-} "},{"type":"del","del":true,"ln":394,"content":"- "},{"type":"del","del":true,"ln":395,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":396,"content":"-nsFreeType2::GetImageCache(FTC_Image_Cache *aCache)"},{"type":"del","del":true,"ln":397,"content":"-{"},{"type":"del","del":true,"ln":398,"content":"-  *aCache = mImageCache;"},{"type":"del","del":true,"ln":399,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":400,"content":"-}"},{"type":"del","del":true,"ln":401,"content":"-"},{"type":"del","del":true,"ln":402,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":403,"content":"-nsFreeType2::GetFTCacheManager(FTC_Manager *aManager)"},{"type":"del","del":true,"ln":404,"content":"-{ "},{"type":"del","del":true,"ln":405,"content":"-  *aManager = mFTCacheManager;"},{"type":"del","del":true,"ln":406,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":407,"content":"-} "},{"type":"del","del":true,"ln":408,"content":"- "},{"type":"del","del":true,"ln":409,"content":"-NS_IMETHODIMP"},{"type":"del","del":true,"ln":410,"content":"-nsFreeType2::GetLibrary(FT_Library *aLibrary)"},{"type":"del","del":true,"ln":411,"content":"-{ "},{"type":"del","del":true,"ln":412,"content":"-  *aLibrary = mFreeTypeLibrary;"},{"type":"del","del":true,"ln":413,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":414,"content":"-} "},{"type":"del","del":true,"ln":415,"content":"-"},{"type":"del","del":true,"ln":416,"content":"-void"},{"type":"del","del":true,"ln":417,"content":"-nsFreeType2::ClearFunctions()"},{"type":"del","del":true,"ln":418,"content":"-{"},{"type":"del","del":true,"ln":419,"content":"-  FtFuncList *p;"},{"type":"del","del":true,"ln":420,"content":"-  void *ptr = this;"},{"type":"del","del":true,"ln":421,"content":"-  for (p=FtFuncs; p->FuncName; p++) {"},{"type":"del","del":true,"ln":422,"content":"-    *((PRFuncPtr*)((char*)ptr+p->FuncOffset)) = "},{"type":"del","del":true,"ln":423,"content":"-                        (PRFuncPtr)&nsFreeType2__DummyFunc;"},{"type":"del","del":true,"ln":424,"content":"-  }"},{"type":"del","del":true,"ln":425,"content":"-}"},{"type":"del","del":true,"ln":426,"content":"-"},{"type":"del","del":true,"ln":427,"content":"-void"},{"type":"del","del":true,"ln":428,"content":"-nsFreeType2::ClearGlobals()"},{"type":"del","del":true,"ln":429,"content":"-{"},{"type":"del","del":true,"ln":430,"content":"-  mSharedLib = nsnull;"},{"type":"del","del":true,"ln":431,"content":"-  mFreeTypeLibrary = nsnull;"},{"type":"del","del":true,"ln":432,"content":"-  mFTCacheManager  = nsnull;"},{"type":"del","del":true,"ln":433,"content":"-  mImageCache      = nsnull;"},{"type":"del","del":true,"ln":434,"content":"-}"},{"type":"del","del":true,"ln":435,"content":"-"},{"type":"del","del":true,"ln":436,"content":"-// I would like to make this a static member function but the compilier "},{"type":"del","del":true,"ln":437,"content":"-// warning about converting a data pointer to a function pointer cannot"},{"type":"del","del":true,"ln":438,"content":"-// distinguish static member functions from static data members"},{"type":"del","del":true,"ln":439,"content":"-static FT_Error"},{"type":"del","del":true,"ln":440,"content":"-nsFreeType2__DummyFunc()"},{"type":"del","del":true,"ln":441,"content":"-{"},{"type":"del","del":true,"ln":442,"content":"-  NS_ERROR(\"nsFreeType2__DummyFunc should never be called\");"},{"type":"del","del":true,"ln":443,"content":"-  return 1;"},{"type":"del","del":true,"ln":444,"content":"-}"},{"type":"del","del":true,"ln":445,"content":"-"},{"type":"del","del":true,"ln":446,"content":"-nsFreeType2::~nsFreeType2()"},{"type":"del","del":true,"ln":447,"content":"-{"},{"type":"del","del":true,"ln":448,"content":"-  FreeGlobals();"},{"type":"del","del":true,"ln":449,"content":"-}"},{"type":"del","del":true,"ln":450,"content":"-"},{"type":"del","del":true,"ln":451,"content":"-void"},{"type":"del","del":true,"ln":452,"content":"-nsFreeType2::FreeGlobals()"},{"type":"del","del":true,"ln":453,"content":"-{"},{"type":"del","del":true,"ln":454,"content":"-  if (mFreeType2SharedLibraryName) {"},{"type":"del","del":true,"ln":455,"content":"-    free(mFreeType2SharedLibraryName);"},{"type":"del","del":true,"ln":456,"content":"-    mFreeType2SharedLibraryName = nsnull;"},{"type":"del","del":true,"ln":457,"content":"-  }"},{"type":"del","del":true,"ln":458,"content":"-  if (gFreeTypeFaces) {"},{"type":"del","del":true,"ln":459,"content":"-    gFreeTypeFaces->Reset(nsFreeTypeFace::FreeFace, nsnull);"},{"type":"del","del":true,"ln":460,"content":"-    delete gFreeTypeFaces;"},{"type":"del","del":true,"ln":461,"content":"-    gFreeTypeFaces = nsnull;"},{"type":"del","del":true,"ln":462,"content":"-  }"},{"type":"del","del":true,"ln":463,"content":"-  // mImageCache released by cache manager"},{"type":"del","del":true,"ln":464,"content":"-  if (mFTCacheManager) {"},{"type":"del","del":true,"ln":465,"content":"-    // use \"this->\" to make sure it is obivious we are calling the member func"},{"type":"del","del":true,"ln":466,"content":"-    this->ManagerDone(mFTCacheManager);"},{"type":"del","del":true,"ln":467,"content":"-    mFTCacheManager = nsnull;"},{"type":"del","del":true,"ln":468,"content":"-  }"},{"type":"del","del":true,"ln":469,"content":"-  if (mFreeTypeLibrary) {"},{"type":"del","del":true,"ln":470,"content":"-    // use \"this->\" to make sure it is obivious we are calling the member func"},{"type":"del","del":true,"ln":471,"content":"-    this->DoneFreeType(mFreeTypeLibrary);"},{"type":"del","del":true,"ln":472,"content":"-    mFreeTypeLibrary = nsnull;"},{"type":"del","del":true,"ln":473,"content":"-  }"},{"type":"del","del":true,"ln":474,"content":"-  "},{"type":"del","del":true,"ln":475,"content":"-  if (sRange1CharSetNames)"},{"type":"del","del":true,"ln":476,"content":"-    delete sRange1CharSetNames;"},{"type":"del","del":true,"ln":477,"content":"-  if (sRange2CharSetNames)"},{"type":"del","del":true,"ln":478,"content":"-    delete sRange2CharSetNames;"},{"type":"del","del":true,"ln":479,"content":"-  if (sFontFamilies)"},{"type":"del","del":true,"ln":480,"content":"-    delete sFontFamilies;"},{"type":"del","del":true,"ln":481,"content":"-  "},{"type":"del","del":true,"ln":482,"content":"-  NS_IF_RELEASE(sCharSetManager);"},{"type":"del","del":true,"ln":483,"content":"-  "},{"type":"del","del":true,"ln":484,"content":"-  // release any encoders that were created"},{"type":"del","del":true,"ln":485,"content":"-  int i;"},{"type":"del","del":true,"ln":486,"content":"-  for (i=0; gFontFamilyEncoderInfo[i].mFamilyName; i++) {"},{"type":"del","del":true,"ln":487,"content":"-    nsTTFontFamilyEncoderInfo *ffei = &gFontFamilyEncoderInfo[i];"},{"type":"del","del":true,"ln":488,"content":"-    nsTTFontEncoderInfo *fei = ffei->mEncodingInfo;"},{"type":"del","del":true,"ln":489,"content":"-    NS_IF_RELEASE(fei->mConverter);"},{"type":"del","del":true,"ln":490,"content":"-  }"},{"type":"del","del":true,"ln":491,"content":"-"},{"type":"del","del":true,"ln":492,"content":"-  UnloadSharedLib();"},{"type":"del","del":true,"ln":493,"content":"-  ClearFunctions();"},{"type":"del","del":true,"ln":494,"content":"-  ClearGlobals();"},{"type":"del","del":true,"ln":495,"content":"-}"},{"type":"del","del":true,"ln":496,"content":"-"},{"type":"del","del":true,"ln":497,"content":"-nsresult"},{"type":"del","del":true,"ln":498,"content":"-nsFreeType2::Init()"},{"type":"del","del":true,"ln":499,"content":"-{"},{"type":"del","del":true,"ln":500,"content":"-  // set all the globals to default values"},{"type":"del","del":true,"ln":501,"content":"-  ClearGlobals();"},{"type":"del","del":true,"ln":502,"content":"-"},{"type":"del","del":true,"ln":503,"content":"-  nsulCodePageRangeCharSetName *crn = nsnull;"},{"type":"del","del":true,"ln":504,"content":"-  nsTTFontFamilyEncoderInfo *ff = gFontFamilyEncoderInfo;"},{"type":"del","del":true,"ln":505,"content":"-  nsCOMPtr<nsIPref> mPref = do_GetService(NS_PREF_CONTRACTID);"},{"type":"del","del":true,"ln":506,"content":"-  "},{"type":"del","del":true,"ln":507,"content":"-  if (!mPref) {"},{"type":"del","del":true,"ln":508,"content":"-    FreeGlobals();"},{"type":"del","del":true,"ln":509,"content":"-    return NS_ERROR_FAILURE;"},{"type":"del","del":true,"ln":510,"content":"-  }"},{"type":"del","del":true,"ln":511,"content":"-  nsresult rv;"},{"type":"del","del":true,"ln":512,"content":"-"},{"type":"del","del":true,"ln":513,"content":"-  PRBool enable_freetype2 = PR_TRUE;"},{"type":"del","del":true,"ln":514,"content":"-  rv = mPref->GetBoolPref(\"font.FreeType2.enable\", &enable_freetype2);"},{"type":"del","del":true,"ln":515,"content":"-  if (NS_SUCCEEDED(rv)) {"},{"type":"del","del":true,"ln":516,"content":"-    mEnableFreeType2 = enable_freetype2;"},{"type":"del","del":true,"ln":517,"content":"-    FREETYPE_PRINTF((\"mEnableFreeType2 = %d\", mEnableFreeType2));"},{"type":"del","del":true,"ln":518,"content":"-  }"},{"type":"del","del":true,"ln":519,"content":"-"},{"type":"del","del":true,"ln":520,"content":"-  rv = mPref->GetCharPref(\"font.freetype2.shared-library\","},{"type":"del","del":true,"ln":521,"content":"-                          &mFreeType2SharedLibraryName);"},{"type":"del","del":true,"ln":522,"content":"-  if (NS_FAILED(rv)) {"},{"type":"del","del":true,"ln":523,"content":"-    enable_freetype2 = PR_FALSE;"},{"type":"del","del":true,"ln":524,"content":"-    FREETYPE_PRINTF(("},{"type":"del","del":true,"ln":525,"content":"-                  \"mFreeType2SharedLibraryName missing, FreeType2 disabled\"));"},{"type":"del","del":true,"ln":526,"content":"-    mFreeType2SharedLibraryName = nsnull;"},{"type":"del","del":true,"ln":527,"content":"-  }"},{"type":"del","del":true,"ln":528,"content":"-"},{"type":"del","del":true,"ln":529,"content":"-  PRBool freetype2_autohinted = PR_FALSE;"},{"type":"del","del":true,"ln":530,"content":"-  rv = mPref->GetBoolPref(\"font.FreeType2.autohinted\", &freetype2_autohinted);"},{"type":"del","del":true,"ln":531,"content":"-  if (NS_SUCCEEDED(rv)) {"},{"type":"del","del":true,"ln":532,"content":"-    gFreeType2Autohinted = freetype2_autohinted;"},{"type":"del","del":true,"ln":533,"content":"-    FREETYPE_PRINTF((\"gFreeType2Autohinted = %d\", gFreeType2Autohinted));"},{"type":"del","del":true,"ln":534,"content":"-  }"},{"type":"del","del":true,"ln":535,"content":"-  "},{"type":"del","del":true,"ln":536,"content":"-  PRBool freetype2_unhinted = PR_TRUE;"},{"type":"del","del":true,"ln":537,"content":"-  rv = mPref->GetBoolPref(\"font.FreeType2.unhinted\", &freetype2_unhinted);"},{"type":"del","del":true,"ln":538,"content":"-  if (NS_SUCCEEDED(rv)) {"},{"type":"del","del":true,"ln":539,"content":"-    gFreeType2Unhinted = freetype2_unhinted;"},{"type":"del","del":true,"ln":540,"content":"-    FREETYPE_PRINTF((\"gFreeType2Unhinted = %d\", gFreeType2Unhinted));"},{"type":"del","del":true,"ln":541,"content":"-  }"},{"type":"del","del":true,"ln":542,"content":"-"},{"type":"del","del":true,"ln":543,"content":"-  PRInt32 int_val = 0;"},{"type":"del","del":true,"ln":544,"content":"-  rv = mPref->GetIntPref(\"font.scale.tt_bitmap.dark_text.min\", &int_val);"},{"type":"del","del":true,"ln":545,"content":"-  if (NS_SUCCEEDED(rv)) {"},{"type":"del","del":true,"ln":546,"content":"-    gAATTDarkTextMinValue = int_val;"},{"type":"del","del":true,"ln":547,"content":"-    FREETYPE_PRINTF((\"gAATTDarkTextMinValue = %d\", gAATTDarkTextMinValue));"},{"type":"del","del":true,"ln":548,"content":"-  }"},{"type":"del","del":true,"ln":549,"content":"-"},{"type":"del","del":true,"ln":550,"content":"-  nsXPIDLCString str;"},{"type":"del","del":true,"ln":551,"content":"-  rv = mPref->GetCharPref(\"font.scale.tt_bitmap.dark_text.gain\","},{"type":"del","del":true,"ln":552,"content":"-                           getter_Copies(str));"},{"type":"del","del":true,"ln":553,"content":"-  if (NS_SUCCEEDED(rv)) {"},{"type":"del","del":true,"ln":554,"content":"-    gAATTDarkTextGain = atof(str.get());"},{"type":"del","del":true,"ln":555,"content":"-    FREETYPE_PRINTF((\"gAATTDarkTextGain = %g\", gAATTDarkTextGain));"},{"type":"del","del":true,"ln":556,"content":"-  }"},{"type":"del","del":true,"ln":557,"content":"-"},{"type":"del","del":true,"ln":558,"content":"-  PRInt32 antialias_minimum = 8;"},{"type":"del","del":true,"ln":559,"content":"-  rv = mPref->GetIntPref(\"font.antialias.min\", &antialias_minimum);"},{"type":"del","del":true,"ln":560,"content":"-  if (NS_SUCCEEDED(rv)) {"},{"type":"del","del":true,"ln":561,"content":"-    gAntiAliasMinimum = antialias_minimum;"},{"type":"del","del":true,"ln":562,"content":"-    FREETYPE_PRINTF((\"gAntiAliasMinimum = %d\", gAntiAliasMinimum));"},{"type":"del","del":true,"ln":563,"content":"-  }"},{"type":"del","del":true,"ln":564,"content":"-"},{"type":"del","del":true,"ln":565,"content":"-  PRInt32 embedded_bitmaps_maximum = 1000000;"},{"type":"del","del":true,"ln":566,"content":"-  rv = mPref->GetIntPref(\"font.embedded_bitmaps.max\",&embedded_bitmaps_maximum);"},{"type":"del","del":true,"ln":567,"content":"-  if (NS_SUCCEEDED(rv)) {"},{"type":"del","del":true,"ln":568,"content":"-    gEmbeddedBitmapMaximumHeight = embedded_bitmaps_maximum;"},{"type":"del","del":true,"ln":569,"content":"-    FREETYPE_PRINTF((\"gEmbeddedBitmapMaximumHeight = %d\","},{"type":"del","del":true,"ln":570,"content":"-                             gEmbeddedBitmapMaximumHeight));"},{"type":"del","del":true,"ln":571,"content":"-  }"},{"type":"del","del":true,"ln":572,"content":"-  "},{"type":"del","del":true,"ln":573,"content":"-  if (NS_FAILED(rv)) {"},{"type":"del","del":true,"ln":574,"content":"-    mEnableFreeType2 = PR_FALSE;"},{"type":"del","del":true,"ln":575,"content":"-    mFreeType2SharedLibraryName = nsnull;"},{"type":"del","del":true,"ln":576,"content":"-    gFreeType2Autohinted = PR_FALSE;"},{"type":"del","del":true,"ln":577,"content":"-    gFreeType2Unhinted = PR_TRUE;"},{"type":"del","del":true,"ln":578,"content":"-    gAATTDarkTextMinValue = 64;"},{"type":"del","del":true,"ln":579,"content":"-    gAATTDarkTextGain = 0.8;"},{"type":"del","del":true,"ln":580,"content":"-    gAntiAliasMinimum = 8;"},{"type":"del","del":true,"ln":581,"content":"-    gEmbeddedBitmapMaximumHeight = 1000000;"},{"type":"del","del":true,"ln":582,"content":"-  }"},{"type":"del","del":true,"ln":583,"content":"-  "},{"type":"del","del":true,"ln":584,"content":"-  mPref = nsnull;"},{"type":"del","del":true,"ln":585,"content":"-  "},{"type":"del","del":true,"ln":586,"content":"-  if (!InitLibrary()) {"},{"type":"del","del":true,"ln":587,"content":"-    FreeGlobals();"},{"type":"del","del":true,"ln":588,"content":"-    return NS_ERROR_OUT_OF_MEMORY;"},{"type":"del","del":true,"ln":589,"content":"-  }"},{"type":"del","del":true,"ln":590,"content":"-  gFreeTypeFaces = new nsHashtable();"},{"type":"del","del":true,"ln":591,"content":"-  if (!gFreeTypeFaces) {"},{"type":"del","del":true,"ln":592,"content":"-    FreeGlobals();"},{"type":"del","del":true,"ln":593,"content":"-    return NS_ERROR_OUT_OF_MEMORY;"},{"type":"del","del":true,"ln":594,"content":"-  }"},{"type":"del","del":true,"ln":595,"content":"-"},{"type":"del","del":true,"ln":596,"content":"-  sRange1CharSetNames = new nsHashtable();"},{"type":"del","del":true,"ln":597,"content":"-  if (!sRange1CharSetNames) {"},{"type":"del","del":true,"ln":598,"content":"-    FreeGlobals();"},{"type":"del","del":true,"ln":599,"content":"-    return NS_ERROR_OUT_OF_MEMORY;"},{"type":"del","del":true,"ln":600,"content":"-  }"},{"type":"del","del":true,"ln":601,"content":"-  crn = ulCodePageRange1CharSetNames;"},{"type":"del","del":true,"ln":602,"content":"-  while (crn->charsetName) {"},{"type":"del","del":true,"ln":603,"content":"-    char buf[32];"},{"type":"del","del":true,"ln":604,"content":"-    sprintf(buf, \"0x%08lx\", crn->bit);"},{"type":"del","del":true,"ln":605,"content":"-    nsCStringKey key(buf);"},{"type":"del","del":true,"ln":606,"content":"-    sRange1CharSetNames->Put(&key, (void*)crn->charsetName);"},{"type":"del","del":true,"ln":607,"content":"-    crn++;"},{"type":"del","del":true,"ln":608,"content":"-  }"},{"type":"del","del":true,"ln":609,"content":"-"},{"type":"del","del":true,"ln":610,"content":"-  sRange2CharSetNames = new nsHashtable();"},{"type":"del","del":true,"ln":611,"content":"-  if (!sRange2CharSetNames) {"},{"type":"del","del":true,"ln":612,"content":"-    FreeGlobals();"},{"type":"del","del":true,"ln":613,"content":"-    return NS_ERROR_OUT_OF_MEMORY;"},{"type":"del","del":true,"ln":614,"content":"-  }"},{"type":"del","del":true,"ln":615,"content":"-  crn = ulCodePageRange2CharSetNames;"},{"type":"del","del":true,"ln":616,"content":"-  while (crn->charsetName) {"},{"type":"del","del":true,"ln":617,"content":"-    char buf[32];"},{"type":"del","del":true,"ln":618,"content":"-    sprintf(buf, \"0x%08lx\", crn->bit);"},{"type":"del","del":true,"ln":619,"content":"-    nsCStringKey key(buf);"},{"type":"del","del":true,"ln":620,"content":"-    sRange2CharSetNames->Put(&key, (void*)crn->charsetName);"},{"type":"del","del":true,"ln":621,"content":"-    crn++;"},{"type":"del","del":true,"ln":622,"content":"-  }"},{"type":"del","del":true,"ln":623,"content":"-"},{"type":"del","del":true,"ln":624,"content":"-  sFontFamilies = new nsHashtable();"},{"type":"del","del":true,"ln":625,"content":"-  if (!sFontFamilies) {"},{"type":"del","del":true,"ln":626,"content":"-    FreeGlobals();"},{"type":"del","del":true,"ln":627,"content":"-    return NS_ERROR_OUT_OF_MEMORY;"},{"type":"del","del":true,"ln":628,"content":"-  }"},{"type":"del","del":true,"ln":629,"content":"-  while (ff->mFamilyName) {"},{"type":"del","del":true,"ln":630,"content":"-    nsCAutoString name(ff->mFamilyName);"},{"type":"del","del":true,"ln":631,"content":"-    ToLowerCase(name);"},{"type":"del","del":true,"ln":632,"content":"-    nsCStringKey key(name);"},{"type":"del","del":true,"ln":633,"content":"-    sFontFamilies->Put(&key, (void*)ff);"},{"type":"del","del":true,"ln":634,"content":"-    ff++;"},{"type":"del","del":true,"ln":635,"content":"-  }"},{"type":"del","del":true,"ln":636,"content":"-"},{"type":"del","del":true,"ln":637,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":638,"content":"-}"},{"type":"del","del":true,"ln":639,"content":"-"},{"type":"del","del":true,"ln":640,"content":"-PRBool"},{"type":"del","del":true,"ln":641,"content":"-nsFreeType2::InitLibrary()"},{"type":"del","del":true,"ln":642,"content":"-{"},{"type":"del","del":true,"ln":643,"content":"-#ifdef MOZ_MATHML"},{"type":"del","del":true,"ln":644,"content":"-  // do not yet support MathML"},{"type":"del","del":true,"ln":645,"content":"-  // goto cleanup_and_return;"},{"type":"del","del":true,"ln":646,"content":"-#endif"},{"type":"del","del":true,"ln":647,"content":"-"},{"type":"del","del":true,"ln":648,"content":"-  if (!mEnableFreeType2)"},{"type":"del","del":true,"ln":649,"content":"-    return PR_FALSE;"},{"type":"del","del":true,"ln":650,"content":"-"},{"type":"del","del":true,"ln":651,"content":"-  // since the library may not be available on any given system"},{"type":"del","del":true,"ln":652,"content":"-  // failing to load is not considered a fatal error"},{"type":"del","del":true,"ln":653,"content":"-  if (!LoadSharedLib())"},{"type":"del","del":true,"ln":654,"content":"-    return PR_FALSE;"},{"type":"del","del":true,"ln":655,"content":"-"},{"type":"del","del":true,"ln":656,"content":"-  // use \"this->\" to make sure it is obivious we are calling the member func"},{"type":"del","del":true,"ln":657,"content":"-  nsresult rv = this->InitFreeType(&mFreeTypeLibrary);"},{"type":"del","del":true,"ln":658,"content":"-  if (NS_FAILED(rv)) {"},{"type":"del","del":true,"ln":659,"content":"-    mFreeTypeLibrary = nsnull;"},{"type":"del","del":true,"ln":660,"content":"-    goto cleanup_and_return;"},{"type":"del","del":true,"ln":661,"content":"-  }"},{"type":"del","del":true,"ln":662,"content":"-  // use \"this->\" to make sure it is obivious we are calling the member func"},{"type":"del","del":true,"ln":663,"content":"-  rv = this->ManagerNew(mFreeTypeLibrary, 0, 0, 0, nsFreeTypeFaceRequester,"},{"type":"del","del":true,"ln":664,"content":"-                         this, &mFTCacheManager);"},{"type":"del","del":true,"ln":665,"content":"-  NS_ASSERTION(NS_SUCCEEDED(rv), \"failed to create FreeType Cache manager\");"},{"type":"del","del":true,"ln":666,"content":"-  if (NS_FAILED(rv))"},{"type":"del","del":true,"ln":667,"content":"-    goto cleanup_and_return;"},{"type":"del","del":true,"ln":668,"content":"-  // use \"this->\" to make sure it is obivious we are calling the member func"},{"type":"del","del":true,"ln":669,"content":"-  rv = this->ImageCacheNew(mFTCacheManager, &mImageCache);"},{"type":"del","del":true,"ln":670,"content":"-  NS_ASSERTION(NS_SUCCEEDED(rv), \"failed to create FreeType image cache\");"},{"type":"del","del":true,"ln":671,"content":"-  if (NS_FAILED(rv))"},{"type":"del","del":true,"ln":672,"content":"-    goto cleanup_and_return;"},{"type":"del","del":true,"ln":673,"content":"-  return PR_TRUE;"},{"type":"del","del":true,"ln":674,"content":"-"},{"type":"del","del":true,"ln":675,"content":"-cleanup_and_return:"},{"type":"del","del":true,"ln":676,"content":"-  // clean everything up but note that init was called"},{"type":"del","del":true,"ln":677,"content":"-  FreeGlobals();"},{"type":"del","del":true,"ln":678,"content":"-  return(PR_FALSE);"},{"type":"del","del":true,"ln":679,"content":"-}"},{"type":"del","del":true,"ln":680,"content":"-"},{"type":"del","del":true,"ln":681,"content":"-PRBool"},{"type":"del","del":true,"ln":682,"content":"-nsFreeType2::LoadSharedLib()"},{"type":"del","del":true,"ln":683,"content":"-{"},{"type":"del","del":true,"ln":684,"content":"-  NS_ASSERTION(mSharedLib==nsnull, \"library already loaded\");"},{"type":"del","del":true,"ln":685,"content":"-"},{"type":"del","del":true,"ln":686,"content":"-  if (!mFreeType2SharedLibraryName)"},{"type":"del","del":true,"ln":687,"content":"-    return PR_FALSE;"},{"type":"del","del":true,"ln":688,"content":"-  mSharedLib = PR_LoadLibrary(mFreeType2SharedLibraryName);"},{"type":"del","del":true,"ln":689,"content":"-  // since the library may not be available on any given system"},{"type":"del","del":true,"ln":690,"content":"-  // failing to load is not considered a fatal error"},{"type":"del","del":true,"ln":691,"content":"-  if (!mSharedLib) {"},{"type":"del","del":true,"ln":692,"content":"-    NS_WARNING(\"freetype library not found\");"},{"type":"del","del":true,"ln":693,"content":"-    return PR_FALSE;"},{"type":"del","del":true,"ln":694,"content":"-  }"},{"type":"del","del":true,"ln":695,"content":"-"},{"type":"del","del":true,"ln":696,"content":"-  // checking FT_Get_First_Char() and FT_Get_Next_Char() for fast lookup methods"},{"type":"del","del":true,"ln":697,"content":"-  gHasExtFunc = PR_TRUE;"},{"type":"del","del":true,"ln":698,"content":"-  FtFuncList *p;"},{"type":"del","del":true,"ln":699,"content":"-  PRFuncPtr func;"},{"type":"del","del":true,"ln":700,"content":"-  void *ptr = this;"},{"type":"del","del":true,"ln":701,"content":"-  for (p=FtFuncs; p->FuncName; p++) {"},{"type":"del","del":true,"ln":702,"content":"-    func = PR_FindFunctionSymbol(mSharedLib, p->FuncName);"},{"type":"del","del":true,"ln":703,"content":"-    if (!func) {"},{"type":"del","del":true,"ln":704,"content":"-      if (p->Required == PR_TRUE) {"},{"type":"del","del":true,"ln":705,"content":"-        NS_WARNING(\"nsFreeType2::LoadSharedLib Error\");"},{"type":"del","del":true,"ln":706,"content":"-        ClearFunctions();"},{"type":"del","del":true,"ln":707,"content":"-        return PR_FALSE;"},{"type":"del","del":true,"ln":708,"content":"-      } else {"},{"type":"del","del":true,"ln":709,"content":"-        // should not return, but disable fast lookup methods"},{"type":"del","del":true,"ln":710,"content":"-        gHasExtFunc = PR_FALSE;"},{"type":"del","del":true,"ln":711,"content":"-      }"},{"type":"del","del":true,"ln":712,"content":"-    }"},{"type":"del","del":true,"ln":713,"content":"-    *((PRFuncPtr*)((char*)ptr+p->FuncOffset)) = func;"},{"type":"del","del":true,"ln":714,"content":"-  }"},{"type":"del","del":true,"ln":715,"content":"-"},{"type":"del","del":true,"ln":716,"content":"-  return PR_TRUE;"},{"type":"del","del":true,"ln":717,"content":"-"},{"type":"del","del":true,"ln":718,"content":"-}"},{"type":"del","del":true,"ln":719,"content":"-"},{"type":"del","del":true,"ln":720,"content":"-void"},{"type":"del","del":true,"ln":721,"content":"-nsFreeType2::UnloadSharedLib()"},{"type":"del","del":true,"ln":722,"content":"-{"},{"type":"del","del":true,"ln":723,"content":"-  if (mSharedLib)"},{"type":"del","del":true,"ln":724,"content":"-    PR_UnloadLibrary(mSharedLib);"},{"type":"del","del":true,"ln":725,"content":"-  mSharedLib = nsnull;"},{"type":"del","del":true,"ln":726,"content":"-}"},{"type":"del","del":true,"ln":727,"content":"-"},{"type":"del","del":true,"ln":728,"content":"-const char *"},{"type":"del","del":true,"ln":729,"content":"-nsFreeType2::GetRange1CharSetName(unsigned long aBit)"},{"type":"del","del":true,"ln":730,"content":"-{"},{"type":"del","del":true,"ln":731,"content":"-  char buf[32];"},{"type":"del","del":true,"ln":732,"content":"-  sprintf(buf, \"0x%08lx\", aBit);"},{"type":"del","del":true,"ln":733,"content":"-  nsCStringKey key(buf);"},{"type":"del","del":true,"ln":734,"content":"-  const char *charsetName = (const char *)sRange1CharSetNames->Get(&key);"},{"type":"del","del":true,"ln":735,"content":"-  return charsetName;"},{"type":"del","del":true,"ln":736,"content":"-}"},{"type":"del","del":true,"ln":737,"content":"-"},{"type":"del","del":true,"ln":738,"content":"-const char *"},{"type":"del","del":true,"ln":739,"content":"-nsFreeType2::GetRange2CharSetName(unsigned long aBit)"},{"type":"del","del":true,"ln":740,"content":"-{"},{"type":"del","del":true,"ln":741,"content":"-  char buf[32];"},{"type":"del","del":true,"ln":742,"content":"-  sprintf(buf, \"0x%08lx\", aBit);"},{"type":"del","del":true,"ln":743,"content":"-  nsCStringKey key(buf);"},{"type":"del","del":true,"ln":744,"content":"-  const char *charsetName = (const char *)sRange2CharSetNames->Get(&key);"},{"type":"del","del":true,"ln":745,"content":"-  return charsetName;"},{"type":"del","del":true,"ln":746,"content":"-}"},{"type":"del","del":true,"ln":747,"content":"-"},{"type":"del","del":true,"ln":748,"content":"-nsTTFontFamilyEncoderInfo*"},{"type":"del","del":true,"ln":749,"content":"-nsFreeType2::GetCustomEncoderInfo(const char * aFamilyName)"},{"type":"del","del":true,"ln":750,"content":"-{"},{"type":"del","del":true,"ln":751,"content":"-  if (!sFontFamilies)"},{"type":"del","del":true,"ln":752,"content":"-    return nsnull;"},{"type":"del","del":true,"ln":753,"content":"-"},{"type":"del","del":true,"ln":754,"content":"-  nsTTFontFamilyEncoderInfo *ffei;"},{"type":"del","del":true,"ln":755,"content":"-  nsCAutoString name(aFamilyName);"},{"type":"del","del":true,"ln":756,"content":"-  ToLowerCase(name);"},{"type":"del","del":true,"ln":757,"content":"-  nsCStringKey key(name);"},{"type":"del","del":true,"ln":758,"content":"-  ffei = (nsTTFontFamilyEncoderInfo*)sFontFamilies->Get(&key);"},{"type":"del","del":true,"ln":759,"content":"-  if (!ffei)"},{"type":"del","del":true,"ln":760,"content":"-    return nsnull;"},{"type":"del","del":true,"ln":761,"content":"-"},{"type":"del","del":true,"ln":762,"content":"-  // init the converter"},{"type":"del","del":true,"ln":763,"content":"-  if (!ffei->mEncodingInfo->mConverter) {"},{"type":"del","del":true,"ln":764,"content":"-    nsTTFontEncoderInfo *fei = ffei->mEncodingInfo;"},{"type":"del","del":true,"ln":765,"content":"-    //"},{"type":"del","del":true,"ln":766,"content":"-    // build the converter"},{"type":"del","del":true,"ln":767,"content":"-    //"},{"type":"del","del":true,"ln":768,"content":"-    nsICharsetConverterManager* charSetManager = GetCharSetManager();"},{"type":"del","del":true,"ln":769,"content":"-    if (!charSetManager)"},{"type":"del","del":true,"ln":770,"content":"-      return nsnull;"},{"type":"del","del":true,"ln":771,"content":"-    nsresult res;"},{"type":"del","del":true,"ln":772,"content":"-    res = charSetManager->GetUnicodeEncoderRaw(fei->mConverterName, &fei->mConverter);"},{"type":"del","del":true,"ln":773,"content":"-    if (NS_FAILED(res)) {"},{"type":"del","del":true,"ln":774,"content":"-      return nsnull;"},{"type":"del","del":true,"ln":775,"content":"-    }"},{"type":"del","del":true,"ln":776,"content":"-  }"},{"type":"del","del":true,"ln":777,"content":"-  return ffei;"},{"type":"del","del":true,"ln":778,"content":"-}"},{"type":"del","del":true,"ln":779,"content":"-"},{"type":"del","del":true,"ln":780,"content":"-nsICharsetConverterManager*"},{"type":"del","del":true,"ln":781,"content":"-nsFreeType2::GetCharSetManager()"},{"type":"del","del":true,"ln":782,"content":"-{"},{"type":"del","del":true,"ln":783,"content":"-  if (!sCharSetManager) {"},{"type":"del","del":true,"ln":784,"content":"-    //"},{"type":"del","del":true,"ln":785,"content":"-    // get the sCharSetManager"},{"type":"del","del":true,"ln":786,"content":"-    //"},{"type":"del","del":true,"ln":787,"content":"-    CallGetService(NS_CHARSETCONVERTERMANAGER_CONTRACTID, &sCharSetManager);"},{"type":"del","del":true,"ln":788,"content":"-    NS_ASSERTION(sCharSetManager,\"failed to create the charset manager\");"},{"type":"del","del":true,"ln":789,"content":"-  }"},{"type":"del","del":true,"ln":790,"content":"-  return sCharSetManager;"},{"type":"del","del":true,"ln":791,"content":"-}"},{"type":"del","del":true,"ln":792,"content":"-"},{"type":"del","del":true,"ln":793,"content":"-PRUint16*"},{"type":"del","del":true,"ln":794,"content":"-nsFreeType2::GetCCMap(nsFontCatalogEntry *aFce)"},{"type":"del","del":true,"ln":795,"content":"-{"},{"type":"del","del":true,"ln":796,"content":"-  nsCompressedCharMap ccmapObj;"},{"type":"del","del":true,"ln":797,"content":"-  if (aFce->mFlags & FCE_FLAGS_SURROGATE) {"},{"type":"del","del":true,"ln":798,"content":"-    ccmapObj.Extend();"},{"type":"del","del":true,"ln":799,"content":"-  }"},{"type":"del","del":true,"ln":800,"content":"-  ccmapObj.SetChars(aFce->mCCMap);"},{"type":"del","del":true,"ln":801,"content":"-  return ccmapObj.NewCCMap();"},{"type":"del","del":true,"ln":802,"content":"-}"},{"type":"del","del":true,"ln":803,"content":"-"},{"type":"del","del":true,"ln":804,"content":"-///////////////////////////////////////////////////////////////////////"},{"type":"del","del":true,"ln":805,"content":"-//"},{"type":"del","del":true,"ln":806,"content":"-// class nsFreeTypeFace data/functions"},{"type":"del","del":true,"ln":807,"content":"-//"},{"type":"del","del":true,"ln":808,"content":"-///////////////////////////////////////////////////////////////////////"},{"type":"del","del":true,"ln":809,"content":"-NS_IMPL_ISUPPORTS1(nsFreeTypeFace, nsITrueTypeFontCatalogEntry)"},{"type":"del","del":true,"ln":810,"content":"-"},{"type":"del","del":true,"ln":811,"content":"-nsFreeTypeFace::nsFreeTypeFace()"},{"type":"del","del":true,"ln":812,"content":"-{"},{"type":"del","del":true,"ln":813,"content":"-}"},{"type":"del","del":true,"ln":814,"content":"-"},{"type":"del","del":true,"ln":815,"content":"-nsresult nsFreeTypeFace::Init(nsFontCatalogEntry *aFce)"},{"type":"del","del":true,"ln":816,"content":"-{"},{"type":"del","del":true,"ln":817,"content":"-  NS_ASSERTION(aFce, \"init of nsFreeTypeFace needs nsFontCatalogEntry\");"},{"type":"del","del":true,"ln":818,"content":"-  if (aFce)"},{"type":"del","del":true,"ln":819,"content":"-    mFce = aFce;"},{"type":"del","del":true,"ln":820,"content":"-  else {"},{"type":"del","del":true,"ln":821,"content":"-    mFce = new nsFontCatalogEntry;"},{"type":"del","del":true,"ln":822,"content":"-    NS_ASSERTION(mFce, \"memory error while creating nsFontCatalogEntry\");"},{"type":"del","del":true,"ln":823,"content":"-    if (!mFce)"},{"type":"del","del":true,"ln":824,"content":"-      return NS_ERROR_OUT_OF_MEMORY;"},{"type":"del","del":true,"ln":825,"content":"-  }"},{"type":"del","del":true,"ln":826,"content":"-  mCCMap = nsnull;"},{"type":"del","del":true,"ln":827,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":828,"content":"-}"},{"type":"del","del":true,"ln":829,"content":"-"},{"type":"del","del":true,"ln":830,"content":"-nsFreeTypeFace::~nsFreeTypeFace()"},{"type":"del","del":true,"ln":831,"content":"-{"},{"type":"del","del":true,"ln":832,"content":"-  if (mCCMap)"},{"type":"del","del":true,"ln":833,"content":"-    FreeCCMap(mCCMap);"},{"type":"del","del":true,"ln":834,"content":"-}"},{"type":"del","del":true,"ln":835,"content":"-"},{"type":"del","del":true,"ln":836,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetFontCatalogType("},{"type":"del","del":true,"ln":837,"content":"-                              PRUint16 *aFontCatalogType)"},{"type":"del","del":true,"ln":838,"content":"-{"},{"type":"del","del":true,"ln":839,"content":"-  *aFontCatalogType = FONT_CATALOG_TRUETYPE;"},{"type":"del","del":true,"ln":840,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":841,"content":"-}"},{"type":"del","del":true,"ln":842,"content":"-"},{"type":"del","del":true,"ln":843,"content":"-/* readonly attribute ACString fileName; */"},{"type":"del","del":true,"ln":844,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetFileName(nsACString & aFileName)"},{"type":"del","del":true,"ln":845,"content":"-{"},{"type":"del","del":true,"ln":846,"content":"-  aFileName.Assign(mFce->mFontFileName);"},{"type":"del","del":true,"ln":847,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":848,"content":"-}"},{"type":"del","del":true,"ln":849,"content":"-"},{"type":"del","del":true,"ln":850,"content":"-/* readonly attribute ACString familyName; */"},{"type":"del","del":true,"ln":851,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetFamilyName(nsACString & aFamilyName)"},{"type":"del","del":true,"ln":852,"content":"-{"},{"type":"del","del":true,"ln":853,"content":"-  aFamilyName.Assign(mFce->mFamilyName);"},{"type":"del","del":true,"ln":854,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":855,"content":"-}"},{"type":"del","del":true,"ln":856,"content":"-"},{"type":"del","del":true,"ln":857,"content":"-/* readonly attribute ACString styleName; */"},{"type":"del","del":true,"ln":858,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetStyleName(nsACString & aStyleName)"},{"type":"del","del":true,"ln":859,"content":"-{"},{"type":"del","del":true,"ln":860,"content":"-  aStyleName.Assign(mFce->mStyleName);"},{"type":"del","del":true,"ln":861,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":862,"content":"-}"},{"type":"del","del":true,"ln":863,"content":"-"},{"type":"del","del":true,"ln":864,"content":"-/* readonly attribute ACString vendorID; */"},{"type":"del","del":true,"ln":865,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetVendorID(nsACString & aVendorID)"},{"type":"del","del":true,"ln":866,"content":"-{"},{"type":"del","del":true,"ln":867,"content":"-  aVendorID.Assign(mFce->mVendorID);"},{"type":"del","del":true,"ln":868,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":869,"content":"-}"},{"type":"del","del":true,"ln":870,"content":"-"},{"type":"del","del":true,"ln":871,"content":"-/* readonly attribute short faceIndex; */"},{"type":"del","del":true,"ln":872,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetFaceIndex(PRInt16 *aFaceIndex)"},{"type":"del","del":true,"ln":873,"content":"-{"},{"type":"del","del":true,"ln":874,"content":"-  *aFaceIndex = mFce->mFaceIndex;"},{"type":"del","del":true,"ln":875,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":876,"content":"-}"},{"type":"del","del":true,"ln":877,"content":"-"},{"type":"del","del":true,"ln":878,"content":"-/* readonly attribute short numFaces; */"},{"type":"del","del":true,"ln":879,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetNumFaces(PRInt16 *aNumFaces)"},{"type":"del","del":true,"ln":880,"content":"-{"},{"type":"del","del":true,"ln":881,"content":"-  *aNumFaces = mFce->mNumFaces;"},{"type":"del","del":true,"ln":882,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":883,"content":"-}"},{"type":"del","del":true,"ln":884,"content":"-"},{"type":"del","del":true,"ln":885,"content":"-/* readonly attribute short numEmbeddedBitmaps; */"},{"type":"del","del":true,"ln":886,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetNumEmbeddedBitmaps("},{"type":"del","del":true,"ln":887,"content":"-                              PRInt16 *aNumEmbeddedBitmaps)"},{"type":"del","del":true,"ln":888,"content":"-{"},{"type":"del","del":true,"ln":889,"content":"-  *aNumEmbeddedBitmaps = mFce->mNumEmbeddedBitmaps;"},{"type":"del","del":true,"ln":890,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":891,"content":"-}"},{"type":"del","del":true,"ln":892,"content":"-"},{"type":"del","del":true,"ln":893,"content":"-/* readonly attribute long numGlyphs; */"},{"type":"del","del":true,"ln":894,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetNumGlyphs(PRInt32 *aNumGlyphs)"},{"type":"del","del":true,"ln":895,"content":"-{"},{"type":"del","del":true,"ln":896,"content":"-  *aNumGlyphs = mFce->mNumGlyphs;"},{"type":"del","del":true,"ln":897,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":898,"content":"-}"},{"type":"del","del":true,"ln":899,"content":"-"},{"type":"del","del":true,"ln":900,"content":"-/* readonly attribute long numUsableGlyphs; */"},{"type":"del","del":true,"ln":901,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetNumUsableGlyphs("},{"type":"del","del":true,"ln":902,"content":"-                              PRInt32 *aNumUsableGlyphs)"},{"type":"del","del":true,"ln":903,"content":"-{"},{"type":"del","del":true,"ln":904,"content":"-  *aNumUsableGlyphs = mFce->mNumUsableGlyphs;"},{"type":"del","del":true,"ln":905,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":906,"content":"-}"},{"type":"del","del":true,"ln":907,"content":"-"},{"type":"del","del":true,"ln":908,"content":"-/* readonly attribute unsigned short weight; */"},{"type":"del","del":true,"ln":909,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetWeight(PRUint16 *aWeight)"},{"type":"del","del":true,"ln":910,"content":"-{"},{"type":"del","del":true,"ln":911,"content":"-  *aWeight = mFce->mWeight;"},{"type":"del","del":true,"ln":912,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":913,"content":"-}"},{"type":"del","del":true,"ln":914,"content":"-"},{"type":"del","del":true,"ln":915,"content":"-/* readonly attribute unsigned short width; */"},{"type":"del","del":true,"ln":916,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetWidth(PRUint16 *aWidth)"},{"type":"del","del":true,"ln":917,"content":"-{"},{"type":"del","del":true,"ln":918,"content":"-  *aWidth = mFce->mWidth;"},{"type":"del","del":true,"ln":919,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":920,"content":"-}"},{"type":"del","del":true,"ln":921,"content":"-"},{"type":"del","del":true,"ln":922,"content":"-/* readonly attribute unsigned long flags; */"},{"type":"del","del":true,"ln":923,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetFlags(PRUint32 *aFlags)"},{"type":"del","del":true,"ln":924,"content":"-{"},{"type":"del","del":true,"ln":925,"content":"-  *aFlags = mFce->mFlags;"},{"type":"del","del":true,"ln":926,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":927,"content":"-}"},{"type":"del","del":true,"ln":928,"content":"-"},{"type":"del","del":true,"ln":929,"content":"-/* readonly attribute long long faceFlags; */"},{"type":"del","del":true,"ln":930,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetFaceFlags(PRInt64 *aFaceFlags)"},{"type":"del","del":true,"ln":931,"content":"-{"},{"type":"del","del":true,"ln":932,"content":"-  *aFaceFlags = mFce->mFaceFlags;"},{"type":"del","del":true,"ln":933,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":934,"content":"-}"},{"type":"del","del":true,"ln":935,"content":"-"},{"type":"del","del":true,"ln":936,"content":"-/* readonly attribute long long styleFlags; */"},{"type":"del","del":true,"ln":937,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetStyleFlags(PRInt64 *aStyleFlags)"},{"type":"del","del":true,"ln":938,"content":"-{"},{"type":"del","del":true,"ln":939,"content":"-  *aStyleFlags = mFce->mStyleFlags;"},{"type":"del","del":true,"ln":940,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":941,"content":"-}"},{"type":"del","del":true,"ln":942,"content":"-"},{"type":"del","del":true,"ln":943,"content":"-/* readonly attribute unsigned long codePageRange1; */"},{"type":"del","del":true,"ln":944,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetCodePageRange1("},{"type":"del","del":true,"ln":945,"content":"-                              PRUint32 *aCodePageRange1)"},{"type":"del","del":true,"ln":946,"content":"-{"},{"type":"del","del":true,"ln":947,"content":"-  *aCodePageRange1 = mFce->mCodePageRange1;"},{"type":"del","del":true,"ln":948,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":949,"content":"-}"},{"type":"del","del":true,"ln":950,"content":"-"},{"type":"del","del":true,"ln":951,"content":"-/* readonly attribute unsigned long codePageRange2; */"},{"type":"del","del":true,"ln":952,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetCodePageRange2("},{"type":"del","del":true,"ln":953,"content":"-                              PRUint32 *aCodePageRange2)"},{"type":"del","del":true,"ln":954,"content":"-{"},{"type":"del","del":true,"ln":955,"content":"-  *aCodePageRange2 = mFce->mCodePageRange2;"},{"type":"del","del":true,"ln":956,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":957,"content":"-}"},{"type":"del","del":true,"ln":958,"content":"-"},{"type":"del","del":true,"ln":959,"content":"-/* readonly attribute long long time; */"},{"type":"del","del":true,"ln":960,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetFileModTime(PRInt64 *aTime)"},{"type":"del","del":true,"ln":961,"content":"-{"},{"type":"del","del":true,"ln":962,"content":"-  *aTime = mFce->mMTime;"},{"type":"del","del":true,"ln":963,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":964,"content":"-}"},{"type":"del","del":true,"ln":965,"content":"-"},{"type":"del","del":true,"ln":966,"content":"-/* void getCCMap (out unsigned long size,"},{"type":"del","del":true,"ln":967,"content":"- * [array, size_is (size), retval] out unsigned short ccMaps); */"},{"type":"del","del":true,"ln":968,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetCCMap("},{"type":"del","del":true,"ln":969,"content":"-                              PRUint32 *size, PRUint16 **ccMaps)"},{"type":"del","del":true,"ln":970,"content":"-{"},{"type":"del","del":true,"ln":971,"content":"-  *ccMaps = nsFreeType2::GetCCMap(mFce);"},{"type":"del","del":true,"ln":972,"content":"-  *size = CCMAP_SIZE(*ccMaps);"},{"type":"del","del":true,"ln":973,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":974,"content":"-}"},{"type":"del","del":true,"ln":975,"content":"-"},{"type":"del","del":true,"ln":976,"content":"-/* void getEmbeddedBitmapHeights (out unsigned long size,"},{"type":"del","del":true,"ln":977,"content":"- * [array, size_is (size), retval] out short heights); */"},{"type":"del","del":true,"ln":978,"content":"-NS_IMETHODIMP nsFreeTypeFace::GetEmbeddedBitmapHeights("},{"type":"del","del":true,"ln":979,"content":"-                              PRUint32 *size, PRInt32 **heights)"},{"type":"del","del":true,"ln":980,"content":"-{"},{"type":"del","del":true,"ln":981,"content":"-  *heights = mFce->mEmbeddedBitmapHeights;"},{"type":"del","del":true,"ln":982,"content":"-  *size = mFce->mNumEmbeddedBitmaps;"},{"type":"del","del":true,"ln":983,"content":"-  return NS_OK;"},{"type":"del","del":true,"ln":984,"content":"-}"},{"type":"del","del":true,"ln":985,"content":"-"},{"type":"del","del":true,"ln":986,"content":"-PRBool"},{"type":"del","del":true,"ln":987,"content":"-nsFreeTypeFace::FreeFace(nsHashKey* aKey, void* aData, void* aClosure)"},{"type":"del","del":true,"ln":988,"content":"-{"},{"type":"del","del":true,"ln":989,"content":"-  nsFreeTypeFace *face = (nsFreeTypeFace*) aData;"},{"type":"del","del":true,"ln":990,"content":"-  NS_RELEASE(face);"},{"type":"del","del":true,"ln":991,"content":"-"},{"type":"del","del":true,"ln":992,"content":"-  return PR_TRUE;"},{"type":"del","del":true,"ln":993,"content":"-}"},{"type":"del","del":true,"ln":994,"content":"-"},{"type":"del","del":true,"ln":995,"content":"-PRUint16 *"},{"type":"del","del":true,"ln":996,"content":"-nsFreeTypeFace::GetCCMap()"},{"type":"del","del":true,"ln":997,"content":"-{"},{"type":"del","del":true,"ln":998,"content":"-  if (!mCCMap) {"},{"type":"del","del":true,"ln":999,"content":"-    mCCMap = nsFreeType2::GetCCMap(mFce);"},{"type":"del","del":true,"ln":1000,"content":"-  }"},{"type":"del","del":true,"ln":1001,"content":"-  return mCCMap;"},{"type":"del","del":true,"ln":1002,"content":"-}"},{"type":"del","del":true,"ln":1003,"content":"-"},{"type":"del","del":true,"ln":1004,"content":"-///////////////////////////////////////////////////////////////////////"},{"type":"del","del":true,"ln":1005,"content":"-//"},{"type":"del","del":true,"ln":1006,"content":"-// miscellaneous routines in alphabetic order"},{"type":"del","del":true,"ln":1007,"content":"-//"},{"type":"del","del":true,"ln":1008,"content":"-///////////////////////////////////////////////////////////////////////"},{"type":"del","del":true,"ln":1009,"content":"-"},{"type":"del","del":true,"ln":1010,"content":"-/*FT_CALLBACK_DEF*/"},{"type":"del","del":true,"ln":1011,"content":"-FT_Error"},{"type":"del","del":true,"ln":1012,"content":"-nsFreeTypeFaceRequester(FTC_FaceID face_id, FT_Library lib,"},{"type":"del","del":true,"ln":1013,"content":"-                  FT_Pointer request_data, FT_Face* aFace)"},{"type":"del","del":true,"ln":1014,"content":"-{"},{"type":"del","del":true,"ln":1015,"content":"-  nsFreeTypeFace *faceID = (nsFreeTypeFace *)face_id;"},{"type":"del","del":true,"ln":1016,"content":"-  FT_Error fterror = 0;"},{"type":"del","del":true,"ln":1017,"content":"-  nsFreeType2 *ft2 = (nsFreeType2 *)request_data;"},{"type":"del","del":true,"ln":1018,"content":"-  nsresult rv;"},{"type":"del","del":true,"ln":1019,"content":"-"},{"type":"del","del":true,"ln":1020,"content":"-  rv = ft2->NewFace(lib, faceID->GetFilename(), faceID->GetFaceIndex(), aFace);"},{"type":"del","del":true,"ln":1021,"content":"-  if (NS_FAILED(rv))"},{"type":"del","del":true,"ln":1022,"content":"-    return fterror;"},{"type":"del","del":true,"ln":1023,"content":"-"},{"type":"del","del":true,"ln":1024,"content":"-  FT_Face face = *aFace;"},{"type":"del","del":true,"ln":1025,"content":"-  FT_UShort platform_id = TT_PLATFORM_MICROSOFT;"},{"type":"del","del":true,"ln":1026,"content":"-  FT_UShort encoding_id = TT_MS_ID_UNICODE_CS;"},{"type":"del","del":true,"ln":1027,"content":"-  nsFontCatalogEntry* fce = faceID->GetFce();"},{"type":"del","del":true,"ln":1028,"content":"-  nsTTFontFamilyEncoderInfo *ffei ="},{"type":"del","del":true,"ln":1029,"content":"-                     nsFreeType2::GetCustomEncoderInfo(fce->mFamilyName);"},{"type":"del","del":true,"ln":1030,"content":"-  if (ffei) {"},{"type":"del","del":true,"ln":1031,"content":"-    platform_id = ffei->mEncodingInfo->mCmapPlatformID;"},{"type":"del","del":true,"ln":1032,"content":"-    encoding_id = ffei->mEncodingInfo->mCmapEncoding;"},{"type":"del","del":true,"ln":1033,"content":"-  }"},{"type":"del","del":true,"ln":1034,"content":"-"},{"type":"del","del":true,"ln":1035,"content":"-  for (int i=0; i < face->num_charmaps; i++) {"},{"type":"del","del":true,"ln":1036,"content":"-    if (face->charmaps[i]->platform_id == platform_id) {"},{"type":"del","del":true,"ln":1037,"content":"-#if defined(TT_MS_ID_UCS_4)"},{"type":"del","del":true,"ln":1038,"content":"-      if (face->charmaps[i]->encoding_id == TT_MS_ID_UCS_4) {"},{"type":"del","del":true,"ln":1039,"content":"-        rv = ft2->SetCharmap(face, face->charmaps[i]);"},{"type":"del","del":true,"ln":1040,"content":"-        if (NS_FAILED(rv)) {"},{"type":"del","del":true,"ln":1041,"content":"-          FREETYPE_PRINTF((\"failed to set cmap\"));"},{"type":"del","del":true,"ln":1042,"content":"-          ft2->DoneFace(face);"},{"type":"del","del":true,"ln":1043,"content":"-          *aFace = nsnull;"},{"type":"del","del":true,"ln":1044,"content":"-          fterror = 1;"},{"type":"del","del":true,"ln":1045,"content":"-        }"},{"type":"del","del":true,"ln":1046,"content":"-        // UCS_4 is the most preferred cmap since it supports surrogates"},{"type":"del","del":true,"ln":1047,"content":"-        // so stop here to avoid the possibly of getting UNICODE_CS which"},{"type":"del","del":true,"ln":1048,"content":"-        // is the 2nd preferred choice."},{"type":"del","del":true,"ln":1049,"content":"-        break;"},{"type":"del","del":true,"ln":1050,"content":"-      } else"},{"type":"del","del":true,"ln":1051,"content":"-#endif /* defined(TT_MS_ID_UCS_4) */"},{"type":"del","del":true,"ln":1052,"content":"-      if (face->charmaps[i]->encoding_id == encoding_id) {"},{"type":"del","del":true,"ln":1053,"content":"-        rv = ft2->SetCharmap(face, face->charmaps[i]);"},{"type":"del","del":true,"ln":1054,"content":"-        if (NS_FAILED(rv)) {"},{"type":"del","del":true,"ln":1055,"content":"-          FREETYPE_PRINTF((\"failed to set cmap\"));"},{"type":"del","del":true,"ln":1056,"content":"-          ft2->DoneFace(face);"},{"type":"del","del":true,"ln":1057,"content":"-          *aFace = nsnull;"},{"type":"del","del":true,"ln":1058,"content":"-          fterror = 1;"},{"type":"del","del":true,"ln":1059,"content":"-        }"},{"type":"del","del":true,"ln":1060,"content":"-      }"},{"type":"del","del":true,"ln":1061,"content":"-    }"},{"type":"del","del":true,"ln":1062,"content":"-  }"},{"type":"del","del":true,"ln":1063,"content":"-"},{"type":"del","del":true,"ln":1064,"content":"-  return fterror;"},{"type":"del","del":true,"ln":1065,"content":"-}"},{"type":"del","del":true,"ln":1066,"content":"-"},{"type":"del","del":true,"ln":1067,"content":"-nsFreeTypeFace *"},{"type":"del","del":true,"ln":1068,"content":"-nsFreeTypeGetFaceID(nsFontCatalogEntry *aFce)"},{"type":"del","del":true,"ln":1069,"content":"-{"},{"type":"del","del":true,"ln":1070,"content":"-  // We need to have separate keys for the different faces in a ttc file."},{"type":"del","del":true,"ln":1071,"content":"-  // We append a slash and the face index to the file name to give us a "},{"type":"del","del":true,"ln":1072,"content":"-  // unique key for each ttc face."},{"type":"del","del":true,"ln":1073,"content":"-  nsCAutoString key_str(aFce->mFontFileName);"},{"type":"del","del":true,"ln":1074,"content":"-  key_str.Append('/');"},{"type":"del","del":true,"ln":1075,"content":"-  key_str.AppendInt(aFce->mFaceIndex);"},{"type":"del","del":true,"ln":1076,"content":"-  nsCStringKey key(key_str);"},{"type":"del","del":true,"ln":1077,"content":"-  nsFreeTypeFace *face = (nsFreeTypeFace *)gFreeTypeFaces->Get(&key);"},{"type":"del","del":true,"ln":1078,"content":"-  if (!face) {"},{"type":"del","del":true,"ln":1079,"content":"-    face = new nsFreeTypeFace;"},{"type":"del","del":true,"ln":1080,"content":"-    NS_ASSERTION(face, \"memory error while creating nsFreeTypeFace\");"},{"type":"del","del":true,"ln":1081,"content":"-    if (!face)"},{"type":"del","del":true,"ln":1082,"content":"-      return nsnull;"},{"type":"del","del":true,"ln":1083,"content":"-    NS_ADDREF(face);"},{"type":"del","del":true,"ln":1084,"content":"-    nsresult rv = face->Init(aFce);"},{"type":"del","del":true,"ln":1085,"content":"-    if (NS_FAILED(rv)) {"},{"type":"del","del":true,"ln":1086,"content":"-      NS_RELEASE(face);"},{"type":"del","del":true,"ln":1087,"content":"-      return nsnull;"},{"type":"del","del":true,"ln":1088,"content":"-    }"},{"type":"del","del":true,"ln":1089,"content":"-    gFreeTypeFaces->Put(&key, face);"},{"type":"del","del":true,"ln":1090,"content":"-  }"},{"type":"del","del":true,"ln":1091,"content":"-  return face;"},{"type":"del","del":true,"ln":1092,"content":"-}"},{"type":"del","del":true,"ln":1093,"content":"-"},{"type":"del","del":true,"ln":1094,"content":"-nsTTFontFamilyEncoderInfo gFontFamilyEncoderInfo[] = {"},{"type":"del","del":true,"ln":1095,"content":"-  { \"symbol\",         &FEI_Adobe_Symbol_Encoding },"},{"type":"del","del":true,"ln":1096,"content":"-  { \"cmr10\",          &FEI_x_ttf_cmr,            },"},{"type":"del","del":true,"ln":1097,"content":"-  { \"cmmi10\",         &FEI_x_ttf_cmmi,           },"},{"type":"del","del":true,"ln":1098,"content":"-  { \"cmsy10\",         &FEI_x_ttf_cmsy,           },"},{"type":"del","del":true,"ln":1099,"content":"-  { \"cmex10\",         &FEI_x_ttf_cmex,           },"},{"type":"del","del":true,"ln":1100,"content":"-  { \"math1\",          &FEI_x_mathematica1,       },"},{"type":"del","del":true,"ln":1101,"content":"-  { \"math1-bold\",     &FEI_x_mathematica1,       },"},{"type":"del","del":true,"ln":1102,"content":"-  { \"math1mono\",      &FEI_x_mathematica1,       },"},{"type":"del","del":true,"ln":1103,"content":"-  { \"math1mono-bold\", &FEI_x_mathematica1,       },"},{"type":"del","del":true,"ln":1104,"content":"-  { \"math2\",          &FEI_x_mathematica2,       },"},{"type":"del","del":true,"ln":1105,"content":"-  { \"math2-bold\",     &FEI_x_mathematica2,       },"},{"type":"del","del":true,"ln":1106,"content":"-  { \"math2mono\",      &FEI_x_mathematica2,       },"},{"type":"del","del":true,"ln":1107,"content":"-  { \"math2mono-bold\", &FEI_x_mathematica2,       },"},{"type":"del","del":true,"ln":1108,"content":"-  { \"ahMn\",           &FEI_x_mathematica3,       }, // weird name for Math3"},{"type":"del","del":true,"ln":1109,"content":"-  { \"math3\",          &FEI_x_mathematica3,       },"},{"type":"del","del":true,"ln":1110,"content":"-  { \"math3-bold\",     &FEI_x_mathematica3,       },"},{"type":"del","del":true,"ln":1111,"content":"-  { \"math3mono\",      &FEI_x_mathematica3,       },"},{"type":"del","del":true,"ln":1112,"content":"-  { \"math3mono-bold\", &FEI_x_mathematica3,       },"},{"type":"del","del":true,"ln":1113,"content":"-  { \"math4\",          &FEI_x_mathematica4,       },"},{"type":"del","del":true,"ln":1114,"content":"-  { \"math4-bold\",     &FEI_x_mathematica4,       },"},{"type":"del","del":true,"ln":1115,"content":"-  { \"math4mono\",      &FEI_x_mathematica4,       },"},{"type":"del","del":true,"ln":1116,"content":"-  { \"math4mono-bold\", &FEI_x_mathematica4,       },"},{"type":"del","del":true,"ln":1117,"content":"-  { \"math5\",          &FEI_x_mathematica5,       },"},{"type":"del","del":true,"ln":1118,"content":"-  { \"math5-bold\",     &FEI_x_mathematica5,       },"},{"type":"del","del":true,"ln":1119,"content":"-  { \"math5bold\",      &FEI_x_mathematica5,       },"},{"type":"del","del":true,"ln":1120,"content":"-  { \"math5mono\",      &FEI_x_mathematica5,       },"},{"type":"del","del":true,"ln":1121,"content":"-  { \"math5mono-bold\", &FEI_x_mathematica5,       },"},{"type":"del","del":true,"ln":1122,"content":"-  { \"math5monobold\",  &FEI_x_mathematica5,       },"},{"type":"del","del":true,"ln":1123,"content":"-  { \"mtextra\",        &FEI_x_mtextra,            },"},{"type":"del","del":true,"ln":1124,"content":"-  { \"mt extra\",       &FEI_x_mtextra,            },"},{"type":"del","del":true,"ln":1125,"content":"-  { \"wingdings\",      &FEI_windows_1252,         },"},{"type":"del","del":true,"ln":1126,"content":"-  { \"webdings\",       &FEI_windows_1252,         },"},{"type":"del","del":true,"ln":1127,"content":"-  { nsnull },"},{"type":"del","del":true,"ln":1128,"content":"-};"},{"type":"del","del":true,"ln":1129,"content":"-"},{"type":"del","del":true,"ln":1130,"content":"-nsulCodePageRangeCharSetName ulCodePageRange1CharSetNames[] = {"},{"type":"del","del":true,"ln":1131,"content":"-{ TT_OS2_CPR1_LATIN1,       \"iso8859-1\"         },"},{"type":"del","del":true,"ln":1132,"content":"-{ TT_OS2_CPR1_LATIN2,       \"iso8859-2\"         },"},{"type":"del","del":true,"ln":1133,"content":"-{ TT_OS2_CPR1_CYRILLIC,     \"iso8859-5\"         },"},{"type":"del","del":true,"ln":1134,"content":"-{ TT_OS2_CPR1_GREEK,        \"iso8859-7\"         },"},{"type":"del","del":true,"ln":1135,"content":"-{ TT_OS2_CPR1_TURKISH,      \"iso8859-9\"         },"},{"type":"del","del":true,"ln":1136,"content":"-{ TT_OS2_CPR1_HEBREW,       \"iso8859-8\"         },"},{"type":"del","del":true,"ln":1137,"content":"-{ TT_OS2_CPR1_ARABIC,       \"iso8859-6\"         },"},{"type":"del","del":true,"ln":1138,"content":"-{ TT_OS2_CPR1_BALTIC,       \"iso8859-13\"        },"},{"type":"del","del":true,"ln":1139,"content":"-{ TT_OS2_CPR1_VIETNAMESE,   \"viscii1.1-1\"       },"},{"type":"del","del":true,"ln":1140,"content":"-{ TT_OS2_CPR1_THAI,         \"tis620.2533-1\"     },"},{"type":"del","del":true,"ln":1141,"content":"-{ TT_OS2_CPR1_JAPANESE,     \"jisx0208.1990-0\"   },"},{"type":"del","del":true,"ln":1142,"content":"-{ TT_OS2_CPR1_CHINESE_SIMP, \"gb2312.1980-1\"     },"},{"type":"del","del":true,"ln":1143,"content":"-{ TT_OS2_CPR1_KO_WANSUNG,   \"ksc5601.1992-3\"    },"},{"type":"del","del":true,"ln":1144,"content":"-{ TT_OS2_CPR1_CHINESE_TRAD, \"big5-0\"            },"},{"type":"del","del":true,"ln":1145,"content":"-{ TT_OS2_CPR1_KO_JOHAB,     \"ksc5601.1992-3\"    },"},{"type":"del","del":true,"ln":1146,"content":"-{ TT_OS2_CPR1_MAC_ROMAN,    \"iso8859-1\"         },"},{"type":"del","del":true,"ln":1147,"content":"-{ TT_OS2_CPR1_OEM,          \"fontspecific-0\"    },"},{"type":"del","del":true,"ln":1148,"content":"-{ TT_OS2_CPR1_SYMBOL,       \"fontspecific-0\"    },"},{"type":"del","del":true,"ln":1149,"content":"-{ 0,                         nsnull             },"},{"type":"del","del":true,"ln":1150,"content":"-};"},{"type":"del","del":true,"ln":1151,"content":"-"},{"type":"del","del":true,"ln":1152,"content":"-nsulCodePageRangeCharSetName ulCodePageRange2CharSetNames[] = {"},{"type":"del","del":true,"ln":1153,"content":"-{ TT_OS2_CPR2_GREEK,        \"iso8859-7\"         },"},{"type":"del","del":true,"ln":1154,"content":"-{ TT_OS2_CPR2_RUSSIAN,      \"koi8-r\"            },"},{"type":"del","del":true,"ln":1155,"content":"-{ TT_OS2_CPR2_NORDIC,       \"iso8859-10\"        },"},{"type":"del","del":true,"ln":1156,"content":"-{ TT_OS2_CPR2_ARABIC,       \"iso8859-6\"         },"},{"type":"del","del":true,"ln":1157,"content":"-{ TT_OS2_CPR2_CA_FRENCH,    \"iso8859-1\"         },"},{"type":"del","del":true,"ln":1158,"content":"-{ TT_OS2_CPR2_HEBREW,       \"iso8859-8\"         },"},{"type":"del","del":true,"ln":1159,"content":"-{ TT_OS2_CPR2_ICELANDIC,    \"iso8859-1\"         },"},{"type":"del","del":true,"ln":1160,"content":"-{ TT_OS2_CPR2_PORTUGESE,    \"iso8859-1\"         },"},{"type":"del","del":true,"ln":1161,"content":"-{ TT_OS2_CPR2_TURKISH,      \"iso8859-9\"         },"},{"type":"del","del":true,"ln":1162,"content":"-{ TT_OS2_CPR2_CYRILLIC,     \"iso8859-5\"         },"},{"type":"del","del":true,"ln":1163,"content":"-{ TT_OS2_CPR2_LATIN2,       \"iso8859-2\"         },"},{"type":"del","del":true,"ln":1164,"content":"-{ TT_OS2_CPR2_BALTIC,       \"iso8859-4\"         },"},{"type":"del","del":true,"ln":1165,"content":"-{ TT_OS2_CPR2_GREEK_437G,   \"iso8859-7\"         },"},{"type":"del","del":true,"ln":1166,"content":"-{ TT_OS2_CPR2_ARABIC_708,   \"iso8859-6\"         },"},{"type":"del","del":true,"ln":1167,"content":"-{ TT_OS2_CPR2_WE_LATIN1,    \"iso8859-1\"         },"},{"type":"del","del":true,"ln":1168,"content":"-{ TT_OS2_CPR2_US,           \"iso8859-1\"         },"},{"type":"del","del":true,"ln":1169,"content":"-{ 0,                         nsnull             },"},{"type":"del","del":true,"ln":1170,"content":"-};"},{"type":"del","del":true,"ln":1171,"content":"-"}],"oldStart":1,"oldLines":1171,"newStart":0,"newLines":0}],"deletions":1171,"additions":0,"from":"gfx/src/freetype/nsFreeType.cpp","to":"/dev/null","deleted":true,"index":["58037e6..0000000"]},{"chunks":[{"content":"@@ -1,323 +0,0 @@","changes":[{"type":"del","del":true,"ln":1,"content":"-/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-"},{"type":"del","del":true,"ln":2,"content":"- * ex: set tabstop=8 softtabstop=2 shiftwidth=2 expandtab:"},{"type":"del","del":true,"ln":3,"content":"- *"},{"type":"del","del":true,"ln":4,"content":"- * ***** BEGIN LICENSE BLOCK *****"},{"type":"del","del":true,"ln":5,"content":"- * Version: MPL 1.1/GPL 2.0/LGPL 2.1"},{"type":"del","del":true,"ln":6,"content":"- *"},{"type":"del","del":true,"ln":7,"content":"- * The contents of this file are subject to the Mozilla Public License Version"},{"type":"del","del":true,"ln":8,"content":"- * 1.1 (the \"License\"); you may not use this file except in compliance with"},{"type":"del","del":true,"ln":9,"content":"- * the License. You may obtain a copy of the License at"},{"type":"del","del":true,"ln":10,"content":"- * http://www.mozilla.org/MPL/"},{"type":"del","del":true,"ln":11,"content":"- *"},{"type":"del","del":true,"ln":12,"content":"- * Software distributed under the License is distributed on an \"AS IS\" basis,"},{"type":"del","del":true,"ln":13,"content":"- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License"},{"type":"del","del":true,"ln":14,"content":"- * for the specific language governing rights and limitations under the"},{"type":"del","del":true,"ln":15,"content":"- * License."},{"type":"del","del":true,"ln":16,"content":"- *"},{"type":"del","del":true,"ln":17,"content":"- * The Original Code is mozilla.org code."},{"type":"del","del":true,"ln":18,"content":"- *"},{"type":"del","del":true,"ln":19,"content":"- * The Initial Developer of the Original Code is"},{"type":"del","del":true,"ln":20,"content":"- * Netscape Communications Corporation."},{"type":"del","del":true,"ln":21,"content":"- * Portions created by the Initial Developer are Copyright (C) 1998"},{"type":"del","del":true,"ln":22,"content":"- * the Initial Developer. All Rights Reserved."},{"type":"del","del":true,"ln":23,"content":"- *"},{"type":"del","del":true,"ln":24,"content":"- * Contributor(s):"},{"type":"del","del":true,"ln":25,"content":"- *"},{"type":"del","del":true,"ln":26,"content":"- * Alternatively, the contents of this file may be used under the terms of"},{"type":"del","del":true,"ln":27,"content":"- * either of the GNU General Public License Version 2 or later (the \"GPL\"),"},{"type":"del","del":true,"ln":28,"content":"- * or the GNU Lesser General Public License Version 2.1 or later (the \"LGPL\"),"},{"type":"del","del":true,"ln":29,"content":"- * in which case the provisions of the GPL or the LGPL are applicable instead"},{"type":"del","del":true,"ln":30,"content":"- * of those above. If you wish to allow use of your version of this file only"},{"type":"del","del":true,"ln":31,"content":"- * under the terms of either the GPL or the LGPL, and not to allow others to"},{"type":"del","del":true,"ln":32,"content":"- * use your version of this file under the terms of the MPL, indicate your"},{"type":"del","del":true,"ln":33,"content":"- * decision by deleting the provisions above and replace them with the notice"},{"type":"del","del":true,"ln":34,"content":"- * and other provisions required by the GPL or the LGPL. If you do not delete"},{"type":"del","del":true,"ln":35,"content":"- * the provisions above, a recipient may use your version of this file under"},{"type":"del","del":true,"ln":36,"content":"- * the terms of any one of the MPL, the GPL or the LGPL."},{"type":"del","del":true,"ln":37,"content":"- *"},{"type":"del","del":true,"ln":38,"content":"- * ***** END LICENSE BLOCK ***** */"},{"type":"del","del":true,"ln":39,"content":"-"},{"type":"del","del":true,"ln":40,"content":"-#ifndef nsFreeType_h__"},{"type":"del","del":true,"ln":41,"content":"-#define nsFreeType_h__"},{"type":"del","del":true,"ln":42,"content":"-"},{"type":"del","del":true,"ln":43,"content":"-#include \"gfx-config.h\""},{"type":"del","del":true,"ln":44,"content":"-#if (defined(MOZ_ENABLE_FREETYPE2))"},{"type":"del","del":true,"ln":45,"content":"-"},{"type":"del","del":true,"ln":46,"content":"-#include \"nspr.h\""},{"type":"del","del":true,"ln":47,"content":"-#include \"nsHashtable.h\""},{"type":"del","del":true,"ln":48,"content":"-#include \"nsICharsetConverterManager.h\""},{"type":"del","del":true,"ln":49,"content":"-#include \"nsIFontCatalogService.h\""},{"type":"del","del":true,"ln":50,"content":"-#include <ft2build.h>"},{"type":"del","del":true,"ln":51,"content":"-#include FT_FREETYPE_H"},{"type":"del","del":true,"ln":52,"content":"-#include FT_CACHE_H"},{"type":"del","del":true,"ln":53,"content":"-#include FT_CACHE_IMAGE_H"},{"type":"del","del":true,"ln":54,"content":"-#include FT_TRUETYPE_TABLES_H"},{"type":"del","del":true,"ln":55,"content":"-#include \"nsIFreeType2.h\""},{"type":"del","del":true,"ln":56,"content":"-"},{"type":"del","del":true,"ln":57,"content":"-typedef struct FT_FaceRec_*  FT_Face;"},{"type":"del","del":true,"ln":58,"content":"-"},{"type":"del","del":true,"ln":59,"content":"-typedef struct {"},{"type":"del","del":true,"ln":60,"content":"-  const char   *mFontFileName;"},{"type":"del","del":true,"ln":61,"content":"-  time_t        mMTime;"},{"type":"del","del":true,"ln":62,"content":"-  PRUint32      mFlags;"},{"type":"del","del":true,"ln":63,"content":"-  const char   *mFontType;"},{"type":"del","del":true,"ln":64,"content":"-  int           mFaceIndex;"},{"type":"del","del":true,"ln":65,"content":"-  int           mNumFaces;"},{"type":"del","del":true,"ln":66,"content":"-  const char   *mFamilyName;"},{"type":"del","del":true,"ln":67,"content":"-  const char   *mStyleName;"},{"type":"del","del":true,"ln":68,"content":"-  FT_UShort     mWeight;"},{"type":"del","del":true,"ln":69,"content":"-  FT_UShort     mWidth;"},{"type":"del","del":true,"ln":70,"content":"-  int           mNumGlyphs;"},{"type":"del","del":true,"ln":71,"content":"-  int           mNumUsableGlyphs;"},{"type":"del","del":true,"ln":72,"content":"-  FT_Long       mFaceFlags;"},{"type":"del","del":true,"ln":73,"content":"-  FT_Long       mStyleFlags;"},{"type":"del","del":true,"ln":74,"content":"-  FT_Long       mCodePageRange1;"},{"type":"del","del":true,"ln":75,"content":"-  FT_Long       mCodePageRange2;"},{"type":"del","del":true,"ln":76,"content":"-  char          mVendorID[5];"},{"type":"del","del":true,"ln":77,"content":"-  const char   *mFoundryName;"},{"type":"del","del":true,"ln":78,"content":"-  int           mNumEmbeddedBitmaps;"},{"type":"del","del":true,"ln":79,"content":"-  int          *mEmbeddedBitmapHeights;"},{"type":"del","del":true,"ln":80,"content":"-  PRUint16     *mCCMap;       // compressed char map"},{"type":"del","del":true,"ln":81,"content":"-} nsFontCatalogEntry;"},{"type":"del","del":true,"ln":82,"content":"-"},{"type":"del","del":true,"ln":83,"content":"-#define FCE_FLAGS_ISVALID    0x01"},{"type":"del","del":true,"ln":84,"content":"-#define FCE_FLAGS_UNICODE    0x02"},{"type":"del","del":true,"ln":85,"content":"-#define FCE_FLAGS_SYMBOL     0x04"},{"type":"del","del":true,"ln":86,"content":"-#define FCE_FLAGS_SURROGATE  0x08"},{"type":"del","del":true,"ln":87,"content":"-#define FREE_IF(x) if(x) free((void*)x)"},{"type":"del","del":true,"ln":88,"content":"-"},{"type":"del","del":true,"ln":89,"content":"-typedef struct {"},{"type":"del","del":true,"ln":90,"content":"-  const char             *mConverterName;"},{"type":"del","del":true,"ln":91,"content":"-  PRUint8                 mCmapPlatformID;"},{"type":"del","del":true,"ln":92,"content":"-  PRUint8                 mCmapEncoding;"},{"type":"del","del":true,"ln":93,"content":"-  nsIUnicodeEncoder*      mConverter;"},{"type":"del","del":true,"ln":94,"content":"-} nsTTFontEncoderInfo;"},{"type":"del","del":true,"ln":95,"content":"-"},{"type":"del","del":true,"ln":96,"content":"-typedef struct nsTTFontFamilyEncoderInfo {"},{"type":"del","del":true,"ln":97,"content":"-  const char             *mFamilyName;"},{"type":"del","del":true,"ln":98,"content":"-  nsTTFontEncoderInfo    *mEncodingInfo;"},{"type":"del","del":true,"ln":99,"content":"-} nsTTFontFamilyEncoderInfo;"},{"type":"del","del":true,"ln":100,"content":"-"},{"type":"del","del":true,"ln":101,"content":"-typedef struct {"},{"type":"del","del":true,"ln":102,"content":"-  unsigned long bit;"},{"type":"del","del":true,"ln":103,"content":"-  const char *charsetName;"},{"type":"del","del":true,"ln":104,"content":"-} nsulCodePageRangeCharSetName;"},{"type":"del","del":true,"ln":105,"content":"-"},{"type":"del","del":true,"ln":106,"content":"-//"},{"type":"del","del":true,"ln":107,"content":"-// the FreeType2 function type declarations"},{"type":"del","del":true,"ln":108,"content":"-//"},{"type":"del","del":true,"ln":109,"content":"-typedef FT_Error (*FT_Done_Face_t)(FT_Face);"},{"type":"del","del":true,"ln":110,"content":"-typedef FT_Error (*FT_Done_FreeType_t)(FT_Library);"},{"type":"del","del":true,"ln":111,"content":"-typedef FT_Error (*FT_Done_Glyph_t)(FT_Glyph);"},{"type":"del","del":true,"ln":112,"content":"-typedef FT_Error (*FT_Get_Char_Index_t)(FT_Face, FT_ULong);"},{"type":"del","del":true,"ln":113,"content":"-typedef FT_Error (*FT_Get_Glyph_t)(FT_GlyphSlot, FT_Glyph*);"},{"type":"del","del":true,"ln":114,"content":"-typedef void*    (*FT_Get_Sfnt_Table_t)(FT_Face, FT_Sfnt_Tag);"},{"type":"del","del":true,"ln":115,"content":"-typedef FT_Error (*FT_Glyph_Get_CBox_t)(FT_Glyph, FT_UInt, FT_BBox*);"},{"type":"del","del":true,"ln":116,"content":"-typedef FT_Error (*FT_Init_FreeType_t)(FT_Library*);"},{"type":"del","del":true,"ln":117,"content":"-typedef FT_Error (*FT_Load_Glyph_t)(FT_Face, FT_UInt, FT_Int);"},{"type":"del","del":true,"ln":118,"content":"-typedef FT_Error (*FT_Outline_Decompose_t)"},{"type":"del","del":true,"ln":119,"content":"-                      (FT_Outline*, const FT_Outline_Funcs*, void*);"},{"type":"del","del":true,"ln":120,"content":"-typedef FT_Error (*FT_New_Face_t)(FT_Library, const char*, FT_Long, FT_Face*);"},{"type":"del","del":true,"ln":121,"content":"-typedef FT_Error (*FT_Set_Charmap_t)(FT_Face face, FT_CharMap  charmap);"},{"type":"del","del":true,"ln":122,"content":"-typedef FT_Error (*FTC_Image_Cache_Lookup_t)"},{"type":"del","del":true,"ln":123,"content":"-                      (FTC_Image_Cache, FTC_Image_Desc*, FT_UInt, FT_Glyph*);"},{"type":"del","del":true,"ln":124,"content":"-typedef FT_Error (*FTC_Manager_Lookup_Size_t)"},{"type":"del","del":true,"ln":125,"content":"-                      (FTC_Manager, FTC_Font, FT_Face*, FT_Size*);"},{"type":"del","del":true,"ln":126,"content":"-typedef FT_Error (*FTC_Manager_Done_t)(FTC_Manager);"},{"type":"del","del":true,"ln":127,"content":"-typedef FT_Error (*FTC_Manager_New_t)(FT_Library, FT_UInt, FT_UInt, FT_ULong,"},{"type":"del","del":true,"ln":128,"content":"-                       FTC_Face_Requester, FT_Pointer, FTC_Manager*);"},{"type":"del","del":true,"ln":129,"content":"-typedef FT_Error (*FTC_Image_Cache_New_t)(FTC_Manager, FTC_Image_Cache*);"},{"type":"del","del":true,"ln":130,"content":"-// #ifdef MOZ_SVG"},{"type":"del","del":true,"ln":131,"content":"-typedef FT_Error (*FT_Glyph_Transform_t)(FT_Glyph, FT_Matrix*, FT_Vector*);"},{"type":"del","del":true,"ln":132,"content":"-typedef FT_Error (*FT_Get_Kerning_t)"},{"type":"del","del":true,"ln":133,"content":"-                      (FT_Face, FT_UInt, FT_UInt, FT_UInt, FT_Vector*);"},{"type":"del","del":true,"ln":134,"content":"-typedef FT_Error (*FT_Glyph_Copy_t)(FT_Glyph, FT_Glyph*);"},{"type":"del","del":true,"ln":135,"content":"-typedef FT_Error (*FT_Glyph_To_Bitmap_t)"},{"type":"del","del":true,"ln":136,"content":"-                      (FT_Glyph*, FT_Render_Mode, FT_Vector*, FT_Bool);"},{"type":"del","del":true,"ln":137,"content":"-// #endif"},{"type":"del","del":true,"ln":138,"content":"-"},{"type":"del","del":true,"ln":139,"content":"-typedef FT_ULong (*FT_Get_First_Char_t)(FT_Face, FT_UInt*);"},{"type":"del","del":true,"ln":140,"content":"-typedef FT_ULong (*FT_Get_Next_Char_t)(FT_Face, FT_ULong, FT_UInt*);"},{"type":"del","del":true,"ln":141,"content":"-"},{"type":"del","del":true,"ln":142,"content":"-class nsFreeTypeFace;"},{"type":"del","del":true,"ln":143,"content":"-"},{"type":"del","del":true,"ln":144,"content":"-nsFreeTypeFace * nsFreeTypeGetFaceID(nsFontCatalogEntry *aFce);"},{"type":"del","del":true,"ln":145,"content":"-"},{"type":"del","del":true,"ln":146,"content":"-typedef struct {"},{"type":"del","del":true,"ln":147,"content":"-  const char *FuncName;"},{"type":"del","del":true,"ln":148,"content":"-  long  FuncOffset;"},{"type":"del","del":true,"ln":149,"content":"-  const PRBool Required;"},{"type":"del","del":true,"ln":150,"content":"-} FtFuncList;"},{"type":"del","del":true,"ln":151,"content":"-"},{"type":"del","del":true,"ln":152,"content":"-// class nsFreeType class definition"},{"type":"del","del":true,"ln":153,"content":"-class nsFreeType2 : nsIFreeType2 {"},{"type":"del","del":true,"ln":154,"content":"-  NS_DECL_ISUPPORTS"},{"type":"del","del":true,"ln":155,"content":"-"},{"type":"del","del":true,"ln":156,"content":"-public:"},{"type":"del","del":true,"ln":157,"content":"-  void FreeGlobals();"},{"type":"del","del":true,"ln":158,"content":"-  nsresult Init();"},{"type":"del","del":true,"ln":159,"content":"-  virtual ~nsFreeType2();"},{"type":"del","del":true,"ln":160,"content":"-"},{"type":"del","del":true,"ln":161,"content":"-  NS_DECL_NSIFREETYPE2"},{"type":"del","del":true,"ln":162,"content":"-"},{"type":"del","del":true,"ln":163,"content":"-  // these belong in nsFT2FontCatalog"},{"type":"del","del":true,"ln":164,"content":"-  static PRUint16*   GetCCMap(nsFontCatalogEntry *aFce);"},{"type":"del","del":true,"ln":165,"content":"-  static const char* GetRange1CharSetName(unsigned long aBit);"},{"type":"del","del":true,"ln":166,"content":"-  static const char* GetRange2CharSetName(unsigned long aBit);"},{"type":"del","del":true,"ln":167,"content":"-  static nsTTFontFamilyEncoderInfo* GetCustomEncoderInfo(const char *);"},{"type":"del","del":true,"ln":168,"content":"-"},{"type":"del","del":true,"ln":169,"content":"-protected:"},{"type":"del","del":true,"ln":170,"content":"-  // run time loaded function pointers"},{"type":"del","del":true,"ln":171,"content":"-  FT_Done_Face_t            nsFT_Done_Face;"},{"type":"del","del":true,"ln":172,"content":"-  FT_Done_FreeType_t        nsFT_Done_FreeType;"},{"type":"del","del":true,"ln":173,"content":"-  FT_Done_Glyph_t           nsFT_Done_Glyph;"},{"type":"del","del":true,"ln":174,"content":"-  FT_Get_Char_Index_t       nsFT_Get_Char_Index;"},{"type":"del","del":true,"ln":175,"content":"-  FT_Get_Glyph_t            nsFT_Get_Glyph;"},{"type":"del","del":true,"ln":176,"content":"-  FT_Get_Sfnt_Table_t       nsFT_Get_Sfnt_Table;"},{"type":"del","del":true,"ln":177,"content":"-  FT_Glyph_Get_CBox_t       nsFT_Glyph_Get_CBox;"},{"type":"del","del":true,"ln":178,"content":"-  FT_Init_FreeType_t        nsFT_Init_FreeType;"},{"type":"del","del":true,"ln":179,"content":"-  FT_Load_Glyph_t           nsFT_Load_Glyph;"},{"type":"del","del":true,"ln":180,"content":"-  FT_New_Face_t             nsFT_New_Face;"},{"type":"del","del":true,"ln":181,"content":"-  FT_Outline_Decompose_t    nsFT_Outline_Decompose;"},{"type":"del","del":true,"ln":182,"content":"-  FT_Set_Charmap_t          nsFT_Set_Charmap;"},{"type":"del","del":true,"ln":183,"content":"-  FTC_Image_Cache_Lookup_t  nsFTC_Image_Cache_Lookup;"},{"type":"del","del":true,"ln":184,"content":"-  FTC_Manager_Lookup_Size_t nsFTC_Manager_Lookup_Size;"},{"type":"del","del":true,"ln":185,"content":"-  FTC_Manager_Done_t        nsFTC_Manager_Done;"},{"type":"del","del":true,"ln":186,"content":"-  FTC_Manager_New_t         nsFTC_Manager_New;"},{"type":"del","del":true,"ln":187,"content":"-  FTC_Image_Cache_New_t     nsFTC_Image_Cache_New;"},{"type":"del","del":true,"ln":188,"content":"-// #ifdef MOZ_SVG"},{"type":"del","del":true,"ln":189,"content":"-  FT_Glyph_Transform_t      nsFT_Glyph_Transform;"},{"type":"del","del":true,"ln":190,"content":"-  FT_Get_Kerning_t          nsFT_Get_Kerning;"},{"type":"del","del":true,"ln":191,"content":"-  FT_Glyph_Copy_t           nsFT_Glyph_Copy;"},{"type":"del","del":true,"ln":192,"content":"-  FT_Glyph_To_Bitmap_t      nsFT_Glyph_To_Bitmap;"},{"type":"del","del":true,"ln":193,"content":"-// #endif"},{"type":"del","del":true,"ln":194,"content":"-  FT_Get_First_Char_t       nsFT_Get_First_Char;"},{"type":"del","del":true,"ln":195,"content":"-  FT_Get_Next_Char_t        nsFT_Get_Next_Char;"},{"type":"del","del":true,"ln":196,"content":"-"},{"type":"del","del":true,"ln":197,"content":"-  // this array needs to be big enough to hold all the function pointers"},{"type":"del","del":true,"ln":198,"content":"-  // plus one extra for the null at the end"},{"type":"del","del":true,"ln":199,"content":"-// #ifdef MOZ_SVG"},{"type":"del","del":true,"ln":200,"content":"-  static FtFuncList FtFuncs[24];"},{"type":"del","del":true,"ln":201,"content":"-// #else"},{"type":"del","del":true,"ln":202,"content":"-//  static FtFuncList FtFuncs[20];"},{"type":"del","del":true,"ln":203,"content":"-// #endif"},{"type":"del","del":true,"ln":204,"content":"-  "},{"type":"del","del":true,"ln":205,"content":"-protected:"},{"type":"del","del":true,"ln":206,"content":"-  PRBool mEnableFreeType2;"},{"type":"del","del":true,"ln":207,"content":"-  char*  mFreeType2SharedLibraryName;"},{"type":"del","del":true,"ln":208,"content":"-"},{"type":"del","del":true,"ln":209,"content":"-public:"},{"type":"del","del":true,"ln":210,"content":"-  // these belong in the nsFontFreeType code"},{"type":"del","del":true,"ln":211,"content":"-  static PRBool  gFreeType2Autohinted;"},{"type":"del","del":true,"ln":212,"content":"-  static PRBool  gFreeType2Unhinted;"},{"type":"del","del":true,"ln":213,"content":"-  static PRUint8 gAATTDarkTextMinValue;"},{"type":"del","del":true,"ln":214,"content":"-  static double  gAATTDarkTextGain;"},{"type":"del","del":true,"ln":215,"content":"-  static PRInt32 gAntiAliasMinimum;"},{"type":"del","del":true,"ln":216,"content":"-  static PRInt32 gEmbeddedBitmapMaximumHeight;"},{"type":"del","del":true,"ln":217,"content":"-  static PRBool  gHasExtFunc;"},{"type":"del","del":true,"ln":218,"content":"-"},{"type":"del","del":true,"ln":219,"content":"-protected:"},{"type":"del","del":true,"ln":220,"content":"-  void ClearGlobals();"},{"type":"del","del":true,"ln":221,"content":"-  void ClearFunctions();"},{"type":"del","del":true,"ln":222,"content":"-  PRBool InitLibrary();"},{"type":"del","del":true,"ln":223,"content":"-  PRBool LoadSharedLib();"},{"type":"del","del":true,"ln":224,"content":"-  void UnloadSharedLib();"},{"type":"del","del":true,"ln":225,"content":"-"},{"type":"del","del":true,"ln":226,"content":"-  // this belongs in nsFT2FontCatalog"},{"type":"del","del":true,"ln":227,"content":"-  static nsICharsetConverterManager* GetCharSetManager();"},{"type":"del","del":true,"ln":228,"content":"-"},{"type":"del","del":true,"ln":229,"content":"-  PRLibrary      *mSharedLib;"},{"type":"del","del":true,"ln":230,"content":"-  FT_Library      mFreeTypeLibrary;"},{"type":"del","del":true,"ln":231,"content":"-  FTC_Manager     mFTCacheManager;"},{"type":"del","del":true,"ln":232,"content":"-  FTC_Image_Cache mImageCache;"},{"type":"del","del":true,"ln":233,"content":"-"},{"type":"del","del":true,"ln":234,"content":"-  static nsHashtable   *sFontFamilies;"},{"type":"del","del":true,"ln":235,"content":"-  static nsHashtable   *sRange1CharSetNames;"},{"type":"del","del":true,"ln":236,"content":"-  static nsHashtable   *sRange2CharSetNames;"},{"type":"del","del":true,"ln":237,"content":"-  static nsICharsetConverterManager* sCharSetManager;"},{"type":"del","del":true,"ln":238,"content":"-};"},{"type":"del","del":true,"ln":239,"content":"-"},{"type":"del","del":true,"ln":240,"content":"-/* this simple record is used to model a given `installed' face */"},{"type":"del","del":true,"ln":241,"content":"-class nsFreeTypeFace : public nsITrueTypeFontCatalogEntry {"},{"type":"del","del":true,"ln":242,"content":"-public:"},{"type":"del","del":true,"ln":243,"content":"-  NS_DECL_ISUPPORTS"},{"type":"del","del":true,"ln":244,"content":"-  NS_DECL_NSITRUETYPEFONTCATALOGENTRY"},{"type":"del","del":true,"ln":245,"content":"-  "},{"type":"del","del":true,"ln":246,"content":"-  nsFreeTypeFace();"},{"type":"del","del":true,"ln":247,"content":"-  virtual ~nsFreeTypeFace();"},{"type":"del","del":true,"ln":248,"content":"-  virtual nsresult Init(nsFontCatalogEntry *aFce);"},{"type":"del","del":true,"ln":249,"content":"-  /* additional members */"},{"type":"del","del":true,"ln":250,"content":"-  NS_IMETHODIMP GetFontCatalogType(PRUint16 *aFontCatalogType);"},{"type":"del","del":true,"ln":251,"content":"-"},{"type":"del","del":true,"ln":252,"content":"-  static PRBool FreeFace(nsHashKey* aKey, void* aData, void* aClosure);"},{"type":"del","del":true,"ln":253,"content":"-  const char *GetFilename()"},{"type":"del","del":true,"ln":254,"content":"-                  { return mFce->mFontFileName; }"},{"type":"del","del":true,"ln":255,"content":"-  int *GetEmbeddedBitmapHeights()"},{"type":"del","del":true,"ln":256,"content":"-                  { return mFce->mEmbeddedBitmapHeights; } ;"},{"type":"del","del":true,"ln":257,"content":"-  int GetFaceIndex()"},{"type":"del","del":true,"ln":258,"content":"-                  { return mFce->mFaceIndex; }"},{"type":"del","del":true,"ln":259,"content":"-  int GetNumEmbeddedBitmaps()"},{"type":"del","del":true,"ln":260,"content":"-                  { return mFce->mNumEmbeddedBitmaps; } ;"},{"type":"del","del":true,"ln":261,"content":"-  PRUint16 *GetCCMap();"},{"type":"del","del":true,"ln":262,"content":"-  nsFontCatalogEntry* GetFce() { return mFce; };"},{"type":"del","del":true,"ln":263,"content":"-"},{"type":"del","del":true,"ln":264,"content":"-  PRBool mHasExtendFuncs;"},{"type":"del","del":true,"ln":265,"content":"-"},{"type":"del","del":true,"ln":266,"content":"-protected:"},{"type":"del","del":true,"ln":267,"content":"-  nsFontCatalogEntry *mFce;"},{"type":"del","del":true,"ln":268,"content":"-  PRUint16           *mCCMap;"},{"type":"del","del":true,"ln":269,"content":"-"},{"type":"del","del":true,"ln":270,"content":"-};"},{"type":"del","del":true,"ln":271,"content":"-"},{"type":"del","del":true,"ln":272,"content":"-#endif /* MOZ_ENABLE_FREETYPE2 */"},{"type":"del","del":true,"ln":273,"content":"-"},{"type":"del","del":true,"ln":274,"content":"-/*"},{"type":"del","del":true,"ln":275,"content":"- * Defines for the TrueType codepage bits."},{"type":"del","del":true,"ln":276,"content":"- * Used as a hint for the languages supported in a TrueType font."},{"type":"del","del":true,"ln":277,"content":"- */"},{"type":"del","del":true,"ln":278,"content":"-"},{"type":"del","del":true,"ln":279,"content":"-/*"},{"type":"del","del":true,"ln":280,"content":"- * ulCodePageRange1"},{"type":"del","del":true,"ln":281,"content":"- */"},{"type":"del","del":true,"ln":282,"content":"-#define TT_OS2_CPR1_LATIN1       (0x00000001) /* Latin 1                     */"},{"type":"del","del":true,"ln":283,"content":"-#define TT_OS2_CPR1_LATIN2       (0x00000002) /* Latin 2: Eastern Europe     */"},{"type":"del","del":true,"ln":284,"content":"-#define TT_OS2_CPR1_CYRILLIC     (0x00000004) /* Cyrillic                    */"},{"type":"del","del":true,"ln":285,"content":"-#define TT_OS2_CPR1_GREEK        (0x00000008) /* Greek                       */"},{"type":"del","del":true,"ln":286,"content":"-#define TT_OS2_CPR1_TURKISH      (0x00000010) /* Turkish                     */"},{"type":"del","del":true,"ln":287,"content":"-#define TT_OS2_CPR1_HEBREW       (0x00000020) /* Hebrew                      */"},{"type":"del","del":true,"ln":288,"content":"-#define TT_OS2_CPR1_ARABIC       (0x00000040) /* Arabic                      */"},{"type":"del","del":true,"ln":289,"content":"-#define TT_OS2_CPR1_BALTIC       (0x00000080) /* Windows Baltic              */"},{"type":"del","del":true,"ln":290,"content":"-#define TT_OS2_CPR1_VIETNAMESE   (0x00000100) /* Vietnamese                  */"},{"type":"del","del":true,"ln":291,"content":"-                                 /* 9-15     Reserved for Alternate ANSI     */"},{"type":"del","del":true,"ln":292,"content":"-#define TT_OS2_CPR1_THAI         (0x00010000) /* Thai                        */"},{"type":"del","del":true,"ln":293,"content":"-#define TT_OS2_CPR1_JAPANESE     (0x00020000) /* JIS/Japan                   */"},{"type":"del","del":true,"ln":294,"content":"-#define TT_OS2_CPR1_CHINESE_SIMP (0x00040000) /* Chinese: Simplified         */"},{"type":"del","del":true,"ln":295,"content":"-#define TT_OS2_CPR1_KO_WANSUNG   (0x00080000) /* Korean Wansung              */"},{"type":"del","del":true,"ln":296,"content":"-#define TT_OS2_CPR1_CHINESE_TRAD (0x00100000) /* Chinese: Traditional        */"},{"type":"del","del":true,"ln":297,"content":"-#define TT_OS2_CPR1_KO_JOHAB     (0x00200000) /* Korean Johab                */"},{"type":"del","del":true,"ln":298,"content":"-                                 /* 22-28    Reserved for Alternate ANSI&OEM */"},{"type":"del","del":true,"ln":299,"content":"-#define TT_OS2_CPR1_MAC_ROMAN    (0x20000000) /* Mac (US Roman)              */"},{"type":"del","del":true,"ln":300,"content":"-#define TT_OS2_CPR1_OEM          (0x40000000) /* OEM Character Set           */"},{"type":"del","del":true,"ln":301,"content":"-#define TT_OS2_CPR1_SYMBOL       (0x80000000) /* Symbol Character Set        */"},{"type":"del","del":true,"ln":302,"content":"-"},{"type":"del","del":true,"ln":303,"content":"-/*"},{"type":"del","del":true,"ln":304,"content":"- * ulCodePageRange2"},{"type":"del","del":true,"ln":305,"content":"- */                              /* 32-47    Reserved for OEM                */"},{"type":"del","del":true,"ln":306,"content":"-#define TT_OS2_CPR2_GREEK        (0x00010000) /* IBM Greek                   */"},{"type":"del","del":true,"ln":307,"content":"-#define TT_OS2_CPR2_RUSSIAN      (0x00020000) /* MS-DOS Russian              */"},{"type":"del","del":true,"ln":308,"content":"-#define TT_OS2_CPR2_NORDIC       (0x00040000) /* MS-DOS Nordic               */"},{"type":"del","del":true,"ln":309,"content":"-#define TT_OS2_CPR2_ARABIC       (0x00080000) /* Arabic                      */"},{"type":"del","del":true,"ln":310,"content":"-#define TT_OS2_CPR2_CA_FRENCH    (0x00100000) /* MS-DOS Canadian French      */"},{"type":"del","del":true,"ln":311,"content":"-#define TT_OS2_CPR2_HEBREW       (0x00200000) /* Hebrew                      */"},{"type":"del","del":true,"ln":312,"content":"-#define TT_OS2_CPR2_ICELANDIC    (0x00400000) /* MS-DOS Icelandic            */"},{"type":"del","del":true,"ln":313,"content":"-#define TT_OS2_CPR2_PORTUGESE    (0x00800000) /* MS-DOS Portuguese           */"},{"type":"del","del":true,"ln":314,"content":"-#define TT_OS2_CPR2_TURKISH      (0x01000000) /* IBM Turkish                 */"},{"type":"del","del":true,"ln":315,"content":"-#define TT_OS2_CPR2_CYRILLIC     (0x02000000)/*IBM Cyrillic; primarily Russian*/"},{"type":"del","del":true,"ln":316,"content":"-#define TT_OS2_CPR2_LATIN2       (0x04000000) /* Latin 2                     */"},{"type":"del","del":true,"ln":317,"content":"-#define TT_OS2_CPR2_BALTIC       (0x08000000) /* MS-DOS Baltic               */"},{"type":"del","del":true,"ln":318,"content":"-#define TT_OS2_CPR2_GREEK_437G   (0x10000000) /* Greek; former 437 G         */"},{"type":"del","del":true,"ln":319,"content":"-#define TT_OS2_CPR2_ARABIC_708   (0x20000000) /* Arabic; ASMO 708            */"},{"type":"del","del":true,"ln":320,"content":"-#define TT_OS2_CPR2_WE_LATIN1    (0x40000000) /* WE/Latin 1                  */"},{"type":"del","del":true,"ln":321,"content":"-#define TT_OS2_CPR2_US           (0x80000000) /* US                          */"},{"type":"del","del":true,"ln":322,"content":"-"},{"type":"del","del":true,"ln":323,"content":"-#endif"}],"oldStart":1,"oldLines":323,"newStart":0,"newLines":0}],"deletions":323,"additions":0,"from":"gfx/src/freetype/nsFreeType.h","to":"/dev/null","deleted":true,"index":["ed1ef9f..0000000"]}]}