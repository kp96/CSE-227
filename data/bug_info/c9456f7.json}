{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basc9456f7\""},"diff":[{"chunks":[{"content":"@@ -86,6 +86,7 @@ _TEST_FILES = \ttest_bug5141.html \\","changes":[{"type":"normal","normal":true,"ln1":86,"ln2":86,"content":" \t\ttest_bug373181.xhtml \\"},{"type":"normal","normal":true,"ln1":87,"ln2":87,"content":" \t\ttest_bug375314.html \\"},{"type":"normal","normal":true,"ln1":88,"ln2":88,"content":" \t\ttest_bug382113.html \\"},{"type":"add","add":true,"ln":89,"content":"+\t\ttest_bug390219.html \\"},{"type":"normal","normal":true,"ln1":89,"ln2":90,"content":" \t\ttest_bug390735.html \\"},{"type":"normal","normal":true,"ln1":90,"ln2":91,"content":" \t\ttest_bug392318.html \\"},{"type":"normal","normal":true,"ln1":91,"ln2":92,"content":" \t\ttest_bug392511.html \\"}],"oldStart":86,"oldLines":6,"newStart":86,"newLines":7},{"content":"@@ -101,6 +102,11 @@ _TEST_FILES = \ttest_bug5141.html \\","changes":[{"type":"normal","normal":true,"ln1":101,"ln2":102,"content":" \t\tfile_CrossSiteXHR_pass1.xml^headers^ \\"},{"type":"normal","normal":true,"ln1":102,"ln2":103,"content":" \t\tfile_CrossSiteXHR_pass2.xml \\"},{"type":"normal","normal":true,"ln1":103,"ln2":104,"content":" \t\tfile_CrossSiteXHR_pass3.xml \\"},{"type":"add","add":true,"ln":105,"content":"+\t\ttest_bug326337.html \\"},{"type":"add","add":true,"ln":106,"content":"+\t\tfile_bug326337_inner.html \\"},{"type":"add","add":true,"ln":107,"content":"+\t\tfile_bug326337.xml \\"},{"type":"add","add":true,"ln":108,"content":"+\t\tfile_bug326337_multipart.txt \\"},{"type":"add","add":true,"ln":109,"content":"+\t\tfile_bug326337_multipart.txt^headers^ \\"},{"type":"normal","normal":true,"ln1":104,"ln2":110,"content":" \t\t$(NULL)"},{"type":"normal","normal":true,"ln1":105,"ln2":111,"content":" "},{"type":"normal","normal":true,"ln1":106,"ln2":112,"content":" libs:: $(_TEST_FILES)"}],"oldStart":101,"oldLines":6,"newStart":102,"newLines":11}],"deletions":0,"additions":6,"from":"content/base/test/Makefile.in","to":"content/base/test/Makefile.in","index":["c2b42f5..7d8c309","100644"]},{"chunks":[{"content":"@@ -12,4 +12,3 @@ Content-Type: text/html","changes":[{"type":"normal","normal":true,"ln1":12,"ln2":12,"content":" Content-Type: text/plain"},{"type":"normal","normal":true,"ln1":13,"ln2":13,"content":" "},{"type":"normal","normal":true,"ln1":14,"ln2":14,"content":" File 3"},{"type":"del","del":true,"ln":15,"content":"---"}],"oldStart":12,"oldLines":4,"newStart":12,"newLines":3}],"deletions":1,"additions":0,"from":"content/base/test/file_bug218236_multipart.txt","to":"content/base/test/file_bug218236_multipart.txt","index":["ec2962e..001e3ad","100644"]},{"chunks":[{"content":"@@ -0,0 +1 @@","changes":[{"type":"add","add":true,"ln":1,"content":"+<data root=\"yes\"/>\r"}],"oldStart":0,"oldLines":0,"newStart":1,"newLines":0}],"deletions":0,"additions":1,"from":"/dev/null","to":"content/base/test/file_bug326337.xml","new":true,"index":["0000000..d328051"]},{"chunks":[{"content":"@@ -0,0 +1,59 @@","changes":[{"type":"add","add":true,"ln":1,"content":"+<!DOCTYPE HTML>\r"},{"type":"add","add":true,"ln":2,"content":"+<html>\r"},{"type":"add","add":true,"ln":3,"content":"+<!--\r"},{"type":"add","add":true,"ln":4,"content":"+https://bugzilla.mozilla.org/show_bug.cgi?id=326337\r"},{"type":"add","add":true,"ln":5,"content":"+-->\r"},{"type":"add","add":true,"ln":6,"content":"+<head>\r"},{"type":"add","add":true,"ln":7,"content":"+  <title>Inner file for Bug 326337</title>\r"},{"type":"add","add":true,"ln":8,"content":"+</head>\r"},{"type":"add","add":true,"ln":9,"content":"+<body>\r"},{"type":"add","add":true,"ln":10,"content":"+<script>\r"},{"type":"add","add":true,"ln":11,"content":"+\r"},{"type":"add","add":true,"ln":12,"content":"+document.domain = \"example.com\";\r"},{"type":"add","add":true,"ln":13,"content":"+\r"},{"type":"add","add":true,"ln":14,"content":"+runTest1();\r"},{"type":"add","add":true,"ln":15,"content":"+\r"},{"type":"add","add":true,"ln":16,"content":"+var xhr;\r"},{"type":"add","add":true,"ln":17,"content":"+\r"},{"type":"add","add":true,"ln":18,"content":"+function runTest1() {\r"},{"type":"add","add":true,"ln":19,"content":"+  xhr = new XMLHttpRequest();\r"},{"type":"add","add":true,"ln":20,"content":"+  xhr.open(\"GET\", \"file_bug326337.xml\", true);\r"},{"type":"add","add":true,"ln":21,"content":"+  xhr.onreadystatechange = function() {\r"},{"type":"add","add":true,"ln":22,"content":"+    if (xhr.readyState == 4) {\r"},{"type":"add","add":true,"ln":23,"content":"+      check(xhr.responseXML.documentElement.getAttribute(\"root\"));\r"},{"type":"add","add":true,"ln":24,"content":"+      runTest2();\r"},{"type":"add","add":true,"ln":25,"content":"+    }\r"},{"type":"add","add":true,"ln":26,"content":"+  }\r"},{"type":"add","add":true,"ln":27,"content":"+  xhr.send(null);\r"},{"type":"add","add":true,"ln":28,"content":"+}\r"},{"type":"add","add":true,"ln":29,"content":"+\r"},{"type":"add","add":true,"ln":30,"content":"+function runTest2() {\r"},{"type":"add","add":true,"ln":31,"content":"+  var secondDoc = false;\r"},{"type":"add","add":true,"ln":32,"content":"+  xhr = new XMLHttpRequest();\r"},{"type":"add","add":true,"ln":33,"content":"+  xhr.multipart = true;\r"},{"type":"add","add":true,"ln":34,"content":"+  xhr.open(\"GET\", \"file_bug326337_multipart.txt\", true);\r"},{"type":"add","add":true,"ln":35,"content":"+  xhr.onreadystatechange = function() {\r"},{"type":"add","add":true,"ln":36,"content":"+    if (xhr.readyState == 4) {\r"},{"type":"add","add":true,"ln":37,"content":"+      check(xhr.responseXML.documentElement.getAttribute(\"root\"));\r"},{"type":"add","add":true,"ln":38,"content":"+      if (secondDoc) {\r"},{"type":"add","add":true,"ln":39,"content":"+        parent.location.hash = \"#done\";\r"},{"type":"add","add":true,"ln":40,"content":"+      }\r"},{"type":"add","add":true,"ln":41,"content":"+      else {\r"},{"type":"add","add":true,"ln":42,"content":"+        secondDoc = true;\r"},{"type":"add","add":true,"ln":43,"content":"+      }\r"},{"type":"add","add":true,"ln":44,"content":"+    }\r"},{"type":"add","add":true,"ln":45,"content":"+  }\r"},{"type":"add","add":true,"ln":46,"content":"+  xhr.send(null);\r"},{"type":"add","add":true,"ln":47,"content":"+}\r"},{"type":"add","add":true,"ln":48,"content":"+\r"},{"type":"add","add":true,"ln":49,"content":"+function check(attr) {\r"},{"type":"add","add":true,"ln":50,"content":"+  if (attr != \"yes\") {\r"},{"type":"add","add":true,"ln":51,"content":"+    parent.location.hash = \"#fail\";\r"},{"type":"add","add":true,"ln":52,"content":"+    throw 1;\r"},{"type":"add","add":true,"ln":53,"content":"+  }\r"},{"type":"add","add":true,"ln":54,"content":"+}\r"},{"type":"add","add":true,"ln":55,"content":"+\r"},{"type":"add","add":true,"ln":56,"content":"+</script>\r"},{"type":"add","add":true,"ln":57,"content":"+</pre>\r"},{"type":"add","add":true,"ln":58,"content":"+</body>\r"},{"type":"add","add":true,"ln":59,"content":"+</html>\r"}],"oldStart":0,"oldLines":0,"newStart":1,"newLines":59}],"deletions":0,"additions":59,"from":"/dev/null","to":"content/base/test/file_bug326337_inner.html","new":true,"index":["0000000..1b70fc5"]},{"chunks":[{"content":"@@ -0,0 +1,9 @@","changes":[{"type":"add","add":true,"ln":1,"content":"+----boundary"},{"type":"add","add":true,"ln":2,"content":"+Content-Type: text/xml"},{"type":"add","add":true,"ln":3,"content":"+"},{"type":"add","add":true,"ln":4,"content":"+<data root=\"yes\"><sub roo=\"no\">text</sub></data>"},{"type":"add","add":true,"ln":5,"content":"+"},{"type":"add","add":true,"ln":6,"content":"+------boundary"},{"type":"add","add":true,"ln":7,"content":"+Content-Type: text/xml"},{"type":"add","add":true,"ln":8,"content":"+"},{"type":"add","add":true,"ln":9,"content":"+<data root=\"yes\">text 2</data>"}],"oldStart":0,"oldLines":0,"newStart":1,"newLines":9}],"deletions":0,"additions":9,"from":"/dev/null","to":"content/base/test/file_bug326337_multipart.txt","new":true,"index":["0000000..4f8234f"]},{"chunks":[{"content":"@@ -0,0 +1,2 @@","changes":[{"type":"add","add":true,"ln":1,"content":"+HTTP 200 OK"},{"type":"add","add":true,"ln":2,"content":"+Content-Type: multipart/x-mixed-replace;boundary=\"----boundary\""}],"oldStart":0,"oldLines":0,"newStart":1,"newLines":2}],"deletions":0,"additions":2,"from":"/dev/null","to":"content/base/test/file_bug326337_multipart.txt^headers^","new":true,"index":["0000000..8644505"]},{"chunks":[{"content":"@@ -0,0 +1,38 @@","changes":[{"type":"add","add":true,"ln":1,"content":"+<!DOCTYPE HTML>\r"},{"type":"add","add":true,"ln":2,"content":"+<html>\r"},{"type":"add","add":true,"ln":3,"content":"+<!--\r"},{"type":"add","add":true,"ln":4,"content":"+https://bugzilla.mozilla.org/show_bug.cgi?id=326337\r"},{"type":"add","add":true,"ln":5,"content":"+-->\r"},{"type":"add","add":true,"ln":6,"content":"+<head>\r"},{"type":"add","add":true,"ln":7,"content":"+  <title>Test for Bug 326337</title>\r"},{"type":"add","add":true,"ln":8,"content":"+  <script type=\"text/javascript\" src=\"/MochiKit/MochiKit.js\"></script>\r"},{"type":"add","add":true,"ln":9,"content":"+  <script type=\"text/javascript\" src=\"/tests/SimpleTest/SimpleTest.js\"></script>        \r"},{"type":"add","add":true,"ln":10,"content":"+  <link rel=\"stylesheet\" type=\"text/css\" href=\"/tests/SimpleTest/test.css\" />\r"},{"type":"add","add":true,"ln":11,"content":"+</head>\r"},{"type":"add","add":true,"ln":12,"content":"+<body>\r"},{"type":"add","add":true,"ln":13,"content":"+<a target=\"_blank\" href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=326337\">Mozilla Bug 326337</a>\r"},{"type":"add","add":true,"ln":14,"content":"+<p id=\"display\"></p>\r"},{"type":"add","add":true,"ln":15,"content":"+<div id=\"content\" style=\"display: none\">\r"},{"type":"add","add":true,"ln":16,"content":"+</div>\r"},{"type":"add","add":true,"ln":17,"content":"+<iframe id=\"inner\" src=\"http://test1.example.com/tests/content/base/test/file_bug326337_inner.html\"></iframe>\r"},{"type":"add","add":true,"ln":18,"content":"+<pre id=\"test\">\r"},{"type":"add","add":true,"ln":19,"content":"+<script class=\"testbody\" type=\"text/javascript\">\r"},{"type":"add","add":true,"ln":20,"content":"+\r"},{"type":"add","add":true,"ln":21,"content":"+/** Test for Bug 326337 **/\r"},{"type":"add","add":true,"ln":22,"content":"+\r"},{"type":"add","add":true,"ln":23,"content":"+SimpleTest.waitForExplicitFinish();\r"},{"type":"add","add":true,"ln":24,"content":"+\r"},{"type":"add","add":true,"ln":25,"content":"+var t = setInterval(doCheck, 300);\r"},{"type":"add","add":true,"ln":26,"content":"+function doCheck() {\r"},{"type":"add","add":true,"ln":27,"content":"+  if (location.hash) {\r"},{"type":"add","add":true,"ln":28,"content":"+    clearInterval(t);\r"},{"type":"add","add":true,"ln":29,"content":"+    is(location.hash, \"#done\", \"failed to run\");\r"},{"type":"add","add":true,"ln":30,"content":"+    SimpleTest.finish();\r"},{"type":"add","add":true,"ln":31,"content":"+  }\r"},{"type":"add","add":true,"ln":32,"content":"+}\r"},{"type":"add","add":true,"ln":33,"content":"+\r"},{"type":"add","add":true,"ln":34,"content":"+</script>\r"},{"type":"add","add":true,"ln":35,"content":"+</pre>\r"},{"type":"add","add":true,"ln":36,"content":"+</body>\r"},{"type":"add","add":true,"ln":37,"content":"+</html>\r"},{"type":"add","add":true,"ln":38,"content":"+\r"}],"oldStart":0,"oldLines":0,"newStart":1,"newLines":38}],"deletions":0,"additions":38,"from":"/dev/null","to":"content/base/test/test_bug326337.html","new":true,"index":["0000000..dfaf8c0"]},{"chunks":[{"content":"@@ -0,0 +1,39 @@","changes":[{"type":"add","add":true,"ln":1,"content":"+<!DOCTYPE HTML>"},{"type":"add","add":true,"ln":2,"content":"+<html>"},{"type":"add","add":true,"ln":3,"content":"+<!--"},{"type":"add","add":true,"ln":4,"content":"+https://bugzilla.mozilla.org/show_bug.cgi?id=390219"},{"type":"add","add":true,"ln":5,"content":"+-->"},{"type":"add","add":true,"ln":6,"content":"+<head>"},{"type":"add","add":true,"ln":7,"content":"+  <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">"},{"type":"add","add":true,"ln":8,"content":"+  <title>Test for Bug 390219</title>"},{"type":"add","add":true,"ln":9,"content":"+  <script type=\"text/javascript\" src=\"/MochiKit/MochiKit.js\"></script>"},{"type":"add","add":true,"ln":10,"content":"+  <script type=\"text/javascript\" src=\"/tests/SimpleTest/SimpleTest.js\"></script>        "},{"type":"add","add":true,"ln":11,"content":"+  <link rel=\"stylesheet\" type=\"text/css\" href=\"/tests/SimpleTest/test.css\" />"},{"type":"add","add":true,"ln":12,"content":"+</head>"},{"type":"add","add":true,"ln":13,"content":"+<body>"},{"type":"add","add":true,"ln":14,"content":"+<p id=\"display\"></p>"},{"type":"add","add":true,"ln":15,"content":"+<div id=\"content\" style=\"display: none\">"},{"type":"add","add":true,"ln":16,"content":"+  "},{"type":"add","add":true,"ln":17,"content":"+</div>"},{"type":"add","add":true,"ln":18,"content":"+<pre id=\"test\">"},{"type":"add","add":true,"ln":19,"content":"+<script class=\"testbody\" type=\"text/javascript\">"},{"type":"add","add":true,"ln":20,"content":"+/** Test for Bug 390219 **/"},{"type":"add","add":true,"ln":21,"content":"+"},{"type":"add","add":true,"ln":22,"content":"+SimpleTest.waitForExplicitFinish();"},{"type":"add","add":true,"ln":23,"content":"+xhr = new XMLHttpRequest();"},{"type":"add","add":true,"ln":24,"content":"+xhr.open(\"GET\", \"non-existing_url\", true);"},{"type":"add","add":true,"ln":25,"content":"+xhr.send(null);"},{"type":"add","add":true,"ln":26,"content":"+xhr.abort();"},{"type":"add","add":true,"ln":27,"content":"+xhr.open(\"GET\", \".\", true);"},{"type":"add","add":true,"ln":28,"content":"+xhr.onreadystatechange = function() {"},{"type":"add","add":true,"ln":29,"content":"+  if (xhr.readyState == 4) {"},{"type":"add","add":true,"ln":30,"content":"+    is(xhr.status, 200, \"wrong status\");"},{"type":"add","add":true,"ln":31,"content":"+    SimpleTest.finish();"},{"type":"add","add":true,"ln":32,"content":"+  }"},{"type":"add","add":true,"ln":33,"content":"+}"},{"type":"add","add":true,"ln":34,"content":"+xhr.send(null);"},{"type":"add","add":true,"ln":35,"content":"+"},{"type":"add","add":true,"ln":36,"content":"+</script>"},{"type":"add","add":true,"ln":37,"content":"+</pre>"},{"type":"add","add":true,"ln":38,"content":"+</body>"},{"type":"add","add":true,"ln":39,"content":"+</html>"}],"oldStart":0,"oldLines":0,"newStart":1,"newLines":39}],"deletions":0,"additions":39,"from":"/dev/null","to":"content/base/test/test_bug390219.html","new":true,"index":["0000000..05c08c2"]}]}