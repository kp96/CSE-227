{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basf965cd24\""},"diff":[{"chunks":[{"content":"@@ -586,11 +586,10 @@ nsDisplayBorder::OptimizeVisibility(nsDisplayListBuilder* aBuilder,","changes":[{"type":"normal","normal":true,"ln1":586,"ln2":586,"content":"   if (!nsDisplayItem::OptimizeVisibility(aBuilder, aVisibleRegion))"},{"type":"normal","normal":true,"ln1":587,"ln2":587,"content":"     return PR_FALSE;"},{"type":"normal","normal":true,"ln1":588,"ln2":588,"content":" "},{"type":"del","del":true,"ln":589,"content":"-  const nsStyleBorder* border = mFrame->GetStyleBorder();"},{"type":"del","del":true,"ln":590,"content":"-  nsRect contentRect = GetBounds(aBuilder);"},{"type":"del","del":true,"ln":591,"content":"-  contentRect.Deflate(border->GetBorder());"},{"type":"del","del":true,"ln":592,"content":"-  if (contentRect.Contains(aVisibleRegion->GetBounds()) &&"},{"type":"del","del":true,"ln":593,"content":"-      !nsLayoutUtils::HasNonZeroSide(border->mBorderRadius)) {"},{"type":"add","add":true,"ln":589,"content":"+  nsRect paddingRect = mFrame->GetPaddingRect() - mFrame->GetPosition() +"},{"type":"add","add":true,"ln":590,"content":"+    aBuilder->ToReferenceFrame(mFrame);"},{"type":"add","add":true,"ln":591,"content":"+  if (paddingRect.Contains(aVisibleRegion->GetBounds()) &&"},{"type":"add","add":true,"ln":592,"content":"+      !nsLayoutUtils::HasNonZeroSide(mFrame->GetStyleBorder()->mBorderRadius)) {"},{"type":"normal","normal":true,"ln1":594,"ln2":593,"content":"     // the visible region is entirely inside the content rect, and no part"},{"type":"normal","normal":true,"ln1":595,"ln2":594,"content":"     // of the border is rendered inside the content rect, so we are not"},{"type":"normal","normal":true,"ln1":596,"ln2":595,"content":"     // visible"}],"oldStart":586,"oldLines":11,"newStart":586,"newLines":10}],"deletions":5,"additions":4,"from":"layout/base/nsDisplayList.cpp","to":"layout/base/nsDisplayList.cpp","index":["35b140f..45104f6","100644"]}]}