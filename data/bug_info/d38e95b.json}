{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basd38e95b\""},"diff":[{"chunks":[{"content":"@@ -94,7 +94,7 @@ public:","changes":[{"type":"normal","normal":true,"ln1":94,"ln2":94,"content":"   static inline PRBool IsComplexChar(PRUnichar u)"},{"type":"normal","normal":true,"ln1":95,"ln2":95,"content":"   {"},{"type":"normal","normal":true,"ln1":96,"ln2":96,"content":"     return IsComplexASCIIChar(u) ||"},{"type":"del","del":true,"ln":97,"content":"-           (0x0e01 <= u && u <= 0x0edf) || // Thai & Lao"},{"type":"add","add":true,"ln":97,"content":"+           NS_NeedsPlatformNativeHandling(u) ||"},{"type":"normal","normal":true,"ln1":98,"ln2":98,"content":"            (0x1100 <= u && u <= 0x11ff) || // Hangul Jamo"},{"type":"normal","normal":true,"ln1":99,"ln2":99,"content":"            (0x2000 <= u && u <= 0x21ff) || // Punctuations and Symbols"},{"type":"normal","normal":true,"ln1":100,"ln2":100,"content":"            (0x2e80 <= u && u <= 0xd7ff) || // several CJK blocks"}],"oldStart":94,"oldLines":7,"newStart":94,"newLines":7}],"deletions":1,"additions":1,"from":"content/base/public/nsLineBreaker.h","to":"content/base/public/nsLineBreaker.h","index":["a9503a5..af2aa36","100644"]},{"chunks":[{"content":"@@ -86,4 +86,10 @@ NS_IsSpace(PRUnichar u)","changes":[{"type":"normal","normal":true,"ln1":86,"ln2":86,"content":"          u == 0x3000;                    // IDEOGRAPHIC SPACE"},{"type":"normal","normal":true,"ln1":87,"ln2":87,"content":" }"},{"type":"normal","normal":true,"ln1":88,"ln2":88,"content":" "},{"type":"add","add":true,"ln":89,"content":"+static inline PRBool"},{"type":"add","add":true,"ln":90,"content":"+NS_NeedsPlatformNativeHandling(PRUnichar aChar)"},{"type":"add","add":true,"ln":91,"content":"+{"},{"type":"add","add":true,"ln":92,"content":"+  return (0x0e01 <= aChar && aChar <= 0x0fff); // Thai, Lao, Tibetan"},{"type":"add","add":true,"ln":93,"content":"+}"},{"type":"add","add":true,"ln":94,"content":"+"},{"type":"normal","normal":true,"ln1":89,"ln2":95,"content":" #endif  /* nsILineBreaker_h__ */"}],"oldStart":86,"oldLines":4,"newStart":86,"newLines":10}],"deletions":0,"additions":6,"from":"intl/lwbrk/public/nsILineBreaker.h","to":"intl/lwbrk/public/nsILineBreaker.h","index":["5430962..db4696c","100644"]},{"chunks":[{"content":"@@ -415,12 +415,6 @@ IS_CJK_CHAR(PRUnichar u)","changes":[{"type":"normal","normal":true,"ln1":415,"ln2":415,"content":"           (0xff00 <= (u) && (u) <= 0xffef) );"},{"type":"normal","normal":true,"ln1":416,"ln2":416,"content":" }"},{"type":"normal","normal":true,"ln1":417,"ln2":417,"content":" "},{"type":"del","del":true,"ln":418,"content":"-static inline int"},{"type":"del","del":true,"ln":419,"content":"-IS_COMPLEX(PRUnichar u)"},{"type":"del","del":true,"ln":420,"content":"-{"},{"type":"del","del":true,"ln":421,"content":"-  return (0x0e01 <= (u) && (u) <= 0x0e5b);"},{"type":"del","del":true,"ln":422,"content":"-}"},{"type":"del","del":true,"ln":423,"content":"-"},{"type":"normal","normal":true,"ln1":424,"ln2":418,"content":" static inline PRBool"},{"type":"normal","normal":true,"ln1":425,"ln2":419,"content":" IS_NONBREAKABLE_SPACE(PRUnichar u)"},{"type":"normal","normal":true,"ln1":426,"ln2":420,"content":" {"}],"oldStart":415,"oldLines":12,"newStart":415,"newLines":6},{"content":"@@ -447,6 +441,8 @@ GetClass(PRUnichar u)","changes":[{"type":"normal","normal":true,"ln1":447,"ln2":441,"content":"    // Handle 3 range table first"},{"type":"normal","normal":true,"ln1":448,"ln2":442,"content":"    if (0x0000 == h) {"},{"type":"normal","normal":true,"ln1":449,"ln2":443,"content":"      c = GETCLASSFROMTABLE(gLBClass00, l);"},{"type":"add","add":true,"ln":444,"content":"+   } else if (NS_NeedsPlatformNativeHandling(u)) {"},{"type":"add","add":true,"ln":445,"content":"+     c = CLASS_COMPLEX;"},{"type":"normal","normal":true,"ln1":450,"ln2":446,"content":"    } else if (0x0E00 == h) {"},{"type":"normal","normal":true,"ln1":451,"ln2":447,"content":"      c = GETCLASSFROMTABLE(gLBClass0E, l);"},{"type":"normal","normal":true,"ln1":452,"ln2":448,"content":"    } else if (0x2000 == h) {"}],"oldStart":447,"oldLines":6,"newStart":441,"newLines":8},{"content":"@@ -738,12 +734,12 @@ nsJISx4051LineBreaker::WordMove(const PRUnichar* aText, PRUint32 aLen,","changes":[{"type":"normal","normal":true,"ln1":738,"ln2":734,"content":"   PRInt32 begin, end;"},{"type":"normal","normal":true,"ln1":739,"ln2":735,"content":" "},{"type":"normal","normal":true,"ln1":740,"ln2":736,"content":"   for (begin = aPos; begin > 0 && !NS_IsSpace(aText[begin - 1]); --begin) {"},{"type":"del","del":true,"ln":741,"content":"-    if (IS_CJK_CHAR(aText[begin]) || IS_COMPLEX(aText[begin])) {"},{"type":"add","add":true,"ln":737,"content":"+    if (IS_CJK_CHAR(aText[begin]) || NS_NeedsPlatformNativeHandling(aText[begin])) {"},{"type":"normal","normal":true,"ln1":742,"ln2":738,"content":"       textNeedsJISx4051 = PR_TRUE;"},{"type":"normal","normal":true,"ln1":743,"ln2":739,"content":"     }"},{"type":"normal","normal":true,"ln1":744,"ln2":740,"content":"   }"},{"type":"normal","normal":true,"ln1":745,"ln2":741,"content":"   for (end = aPos + 1; end < PRInt32(aLen) && !NS_IsSpace(aText[end]); ++end) {"},{"type":"del","del":true,"ln":746,"content":"-    if (IS_CJK_CHAR(aText[end]) || IS_COMPLEX(aText[end])) {"},{"type":"add","add":true,"ln":742,"content":"+    if (IS_CJK_CHAR(aText[end]) || NS_NeedsPlatformNativeHandling(aText[end])) {"},{"type":"normal","normal":true,"ln1":747,"ln2":743,"content":"       textNeedsJISx4051 = PR_TRUE;"},{"type":"normal","normal":true,"ln1":748,"ln2":744,"content":"     }"},{"type":"normal","normal":true,"ln1":749,"ln2":745,"content":"   }"}],"oldStart":738,"oldLines":12,"newStart":734,"newLines":12}],"deletions":8,"additions":4,"from":"intl/lwbrk/src/nsJISx4501LineBreaker.cpp","to":"intl/lwbrk/src/nsJISx4501LineBreaker.cpp","index":["1e279da..7ef2cad","100644"]}]}