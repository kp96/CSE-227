{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basf9c2361\""},"diff":[{"chunks":[{"content":"@@ -61,6 +61,7 @@ _TEST_FILES = \ttest_bug1682.html \\","changes":[{"type":"normal","normal":true,"ln1":61,"ln2":61,"content":" \t\ttest_bug359657.html \\"},{"type":"normal","normal":true,"ln1":62,"ln2":62,"content":" \t\ttest_bug380383.html \\"},{"type":"normal","normal":true,"ln1":63,"ln2":63,"content":" \t\ttest_bug386495.html \\"},{"type":"add","add":true,"ln":64,"content":"+\t\ttest_bug391777.html \\"},{"type":"normal","normal":true,"ln1":64,"ln2":65,"content":" \t\t$(NULL)"},{"type":"normal","normal":true,"ln1":65,"ln2":66,"content":" "},{"type":"normal","normal":true,"ln1":66,"ln2":67,"content":" libs:: $(_TEST_FILES)"}],"oldStart":61,"oldLines":6,"newStart":61,"newLines":7}],"deletions":0,"additions":1,"from":"content/html/document/test/Makefile.in","to":"content/html/document/test/Makefile.in","index":["810588b..9e670c4","100644"]},{"chunks":[{"content":"@@ -0,0 +1,25 @@","changes":[{"type":"add","add":true,"ln":1,"content":"+<!DOCTYPE HTML>"},{"type":"add","add":true,"ln":2,"content":"+<html>"},{"type":"add","add":true,"ln":3,"content":"+<!--"},{"type":"add","add":true,"ln":4,"content":"+https://bugzilla.mozilla.org/show_bug.cgi?id=391777"},{"type":"add","add":true,"ln":5,"content":"+-->"},{"type":"add","add":true,"ln":6,"content":"+<head>"},{"type":"add","add":true,"ln":7,"content":"+  <title>Test for Bug 391777</title>"},{"type":"add","add":true,"ln":8,"content":"+  <script type=\"text/javascript\" src=\"/MochiKit/MochiKit.js\"></script>"},{"type":"add","add":true,"ln":9,"content":"+  <script type=\"text/javascript\" src=\"/tests/SimpleTest/SimpleTest.js\"></script>        "},{"type":"add","add":true,"ln":10,"content":"+  <link rel=\"stylesheet\" type=\"text/css\" href=\"/tests/SimpleTest/test.css\" />"},{"type":"add","add":true,"ln":11,"content":"+</head>"},{"type":"add","add":true,"ln":12,"content":"+<body>"},{"type":"add","add":true,"ln":13,"content":"+<a target=\"_blank\" href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=391777\">Mozilla Bug 391777</a>"},{"type":"add","add":true,"ln":14,"content":"+<p id=\"display\"></p>"},{"type":"add","add":true,"ln":15,"content":"+<script class=\"testbody\" type=\"text/javascript\">"},{"type":"add","add":true,"ln":16,"content":"+"},{"type":"add","add":true,"ln":17,"content":"+/** Test for Bug 391777 **/"},{"type":"add","add":true,"ln":18,"content":"+var arg = {};"},{"type":"add","add":true,"ln":19,"content":"+arg.testVal = \"foo\";"},{"type":"add","add":true,"ln":20,"content":"+var result = window.showModalDialog(\"javascript:window.returnValue = window.dialogArguments.testVal; window.close(); 'This window should close on its own.';\", arg);"},{"type":"add","add":true,"ln":21,"content":"+ok(true, \"We should get here without user interaction\");"},{"type":"add","add":true,"ln":22,"content":"+is(result, \"foo\", \"Unexpected result from showModalDialog\");"},{"type":"add","add":true,"ln":23,"content":"+</script>"},{"type":"add","add":true,"ln":24,"content":"+</body>"},{"type":"add","add":true,"ln":25,"content":"+</html>"}],"oldStart":0,"oldLines":0,"newStart":1,"newLines":25}],"deletions":0,"additions":25,"from":"/dev/null","to":"content/html/document/test/test_bug391777.html","new":true,"index":["0000000..fcfe9d7"]},{"chunks":[{"content":"@@ -927,7 +927,7 @@ nsWindowWatcher::OpenWindowJSInternal(nsIDOMWindow *aParent,","changes":[{"type":"normal","normal":true,"ln1":927,"ln2":927,"content":"       modalContentWindow = do_QueryInterface(*_retval);"},{"type":"normal","normal":true,"ln1":928,"ln2":928,"content":"     }"},{"type":"normal","normal":true,"ln1":929,"ln2":929,"content":" "},{"type":"del","del":true,"ln":930,"content":"-    nsAutoWindowStateHelper windowStateHelper(modalContentWindow);"},{"type":"add","add":true,"ln":930,"content":"+    nsAutoWindowStateHelper windowStateHelper(aParent);"},{"type":"normal","normal":true,"ln1":931,"ln2":931,"content":" "},{"type":"normal","normal":true,"ln1":932,"ln2":932,"content":"     if (!windowStateHelper.DefaultEnabled()) {"},{"type":"normal","normal":true,"ln1":933,"ln2":933,"content":"       // Default to cancel not opening the modal window."}],"oldStart":927,"oldLines":7,"newStart":927,"newLines":7}],"deletions":1,"additions":1,"from":"embedding/components/windowwatcher/src/nsWindowWatcher.cpp","to":"embedding/components/windowwatcher/src/nsWindowWatcher.cpp","index":["af62108..e5634a8","100644"]}]}