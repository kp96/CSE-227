{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basbe5de02\""},"diff":[{"chunks":[{"content":"@@ -121,10 +121,6 @@ nsXPInstallManager::nsXPInstallManager()","changes":[{"type":"normal","normal":true,"ln1":121,"ln2":121,"content":" "},{"type":"normal","normal":true,"ln1":122,"ln2":122,"content":"     // initialize mLastUpdate to the current time"},{"type":"normal","normal":true,"ln1":123,"ln2":123,"content":"     mLastUpdate = PR_Now();"},{"type":"del","del":true,"ln":124,"content":"-"},{"type":"del","del":true,"ln":125,"content":"-    nsCOMPtr<nsIObserverService> os(do_GetService(\"@mozilla.org/observer-service;1\"));"},{"type":"del","del":true,"ln":126,"content":"-    if (os)"},{"type":"del","del":true,"ln":127,"content":"-        os->AddObserver(this, XPI_PROGRESS_TOPIC, PR_TRUE);"},{"type":"normal","normal":true,"ln1":128,"ln2":124,"content":" }"},{"type":"normal","normal":true,"ln1":129,"ln2":125,"content":" "},{"type":"normal","normal":true,"ln1":130,"ln2":126,"content":" "}],"oldStart":121,"oldLines":10,"newStart":121,"newLines":6},{"content":"@@ -178,6 +174,10 @@ nsXPInstallManager::InitManagerWithHashes(const PRUnichar **aURLs,","changes":[{"type":"normal","normal":true,"ln1":178,"ln2":174,"content":" "},{"type":"normal","normal":true,"ln1":179,"ln2":175,"content":"     mNeedsShutdown = PR_TRUE;"},{"type":"normal","normal":true,"ln1":180,"ln2":176,"content":" "},{"type":"add","add":true,"ln":177,"content":"+    nsCOMPtr<nsIObserverService> os(do_GetService(\"@mozilla.org/observer-service;1\"));"},{"type":"add","add":true,"ln":178,"content":"+    if (os)"},{"type":"add","add":true,"ln":179,"content":"+        os->AddObserver(this, XPI_PROGRESS_TOPIC, PR_TRUE);"},{"type":"add","add":true,"ln":180,"content":"+"},{"type":"normal","normal":true,"ln1":181,"ln2":181,"content":"     for (PRUint32 i = 0; i < aURLCount; ++i) "},{"type":"normal","normal":true,"ln1":182,"ln2":182,"content":"     {"},{"type":"normal","normal":true,"ln1":183,"ln2":183,"content":"         nsXPITriggerItem* item = new nsXPITriggerItem(0, aURLs[i], nsnull,"}],"oldStart":178,"oldLines":6,"newStart":174,"newLines":10},{"content":"@@ -341,6 +341,10 @@ nsXPInstallManager::InitManagerInternal()","changes":[{"type":"normal","normal":true,"ln1":341,"ln2":341,"content":" "},{"type":"normal","normal":true,"ln1":342,"ln2":342,"content":"         if (OKtoInstall)"},{"type":"normal","normal":true,"ln1":343,"ln2":343,"content":"         {"},{"type":"add","add":true,"ln":344,"content":"+            nsCOMPtr<nsIObserverService> os(do_GetService(\"@mozilla.org/observer-service;1\"));"},{"type":"add","add":true,"ln":345,"content":"+            if (os)"},{"type":"add","add":true,"ln":346,"content":"+                os->AddObserver(this, XPI_PROGRESS_TOPIC, PR_TRUE);"},{"type":"add","add":true,"ln":347,"content":"+"},{"type":"normal","normal":true,"ln1":344,"ln2":348,"content":"             //-----------------------------------------------------"},{"type":"normal","normal":true,"ln1":345,"ln2":349,"content":"             // Open the progress dialog"},{"type":"normal","normal":true,"ln1":346,"ln2":350,"content":"             //-----------------------------------------------------"}],"oldStart":341,"oldLines":6,"newStart":341,"newLines":10}],"deletions":4,"additions":8,"from":"xpinstall/src/nsXPInstallManager.cpp","to":"xpinstall/src/nsXPInstallManager.cpp","index":["86744c6..3de44c5","100644"]}]}