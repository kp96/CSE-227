{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas9846059\""},"diff":[{"chunks":[{"content":"@@ -205,9 +205,8 @@ var PlacesCommandHook = {","changes":[{"type":"normal","normal":true,"ln1":205,"ln2":205,"content":"     // it to the content area"},{"type":"normal","normal":true,"ln1":206,"ln2":206,"content":"     var starIcon = document.getElementById(\"star-button\");"},{"type":"normal","normal":true,"ln1":207,"ln2":207,"content":"     if (starIcon && isElementVisible(starIcon)) {"},{"type":"del","del":true,"ln":208,"content":"-      var dockTo = starIcon.parentNode; // urlbar endcap"},{"type":"normal","normal":true,"ln1":209,"ln2":208,"content":"       this.bookmarkPage(getBrowser().selectedBrowser, aParent, aShowEditUI,"},{"type":"del","del":true,"ln":210,"content":"-                        dockTo, \"after_start\");"},{"type":"add","add":true,"ln":209,"content":"+                        starIcon, \"after_start\");"},{"type":"normal","normal":true,"ln1":211,"ln2":210,"content":"     }"},{"type":"normal","normal":true,"ln1":212,"ln2":211,"content":"     else {"},{"type":"normal","normal":true,"ln1":213,"ln2":212,"content":"       this.bookmarkPage(getBrowser().selectedBrowser, aParent, aShowEditUI,"}],"oldStart":205,"oldLines":9,"newStart":205,"newLines":8}],"deletions":2,"additions":1,"from":"browser/base/content/browser-places.js","to":"browser/base/content/browser-places.js","index":["91969a3..3444c01","100644"]},{"chunks":[{"content":"@@ -956,9 +956,9 @@ function delayedStartup()","changes":[{"type":"normal","normal":true,"ln1":956,"ln2":956,"content":"   if (gURLBar && document.documentElement.getAttribute(\"chromehidden\").indexOf(\"toolbar\") != -1) {"},{"type":"normal","normal":true,"ln1":957,"ln2":957,"content":"     gURLBar.setAttribute(\"readonly\", \"true\");"},{"type":"normal","normal":true,"ln1":958,"ln2":958,"content":"     gURLBar.setAttribute(\"enablehistory\", \"false\");"},{"type":"del","del":true,"ln":959,"content":"-    var urlbarEndcap = document.getElementById(\"urlbar-endcap\");"},{"type":"del","del":true,"ln":960,"content":"-    if (urlbarEndcap)"},{"type":"del","del":true,"ln":961,"content":"-      urlbarEndcap.setAttribute(\"hidden\", \"true\");"},{"type":"add","add":true,"ln":959,"content":"+    var goButtonStack = document.getElementById(\"go-button-stack\");"},{"type":"add","add":true,"ln":960,"content":"+    if (goButtonStack)"},{"type":"add","add":true,"ln":961,"content":"+      goButtonStack.setAttribute(\"hidden\", \"true\");"},{"type":"normal","normal":true,"ln1":962,"ln2":962,"content":"   }"},{"type":"normal","normal":true,"ln1":963,"ln2":963,"content":" "},{"type":"normal","normal":true,"ln1":964,"ln2":964,"content":"   if (gURLBar) {"}],"oldStart":956,"oldLines":9,"newStart":956,"newLines":9},{"content":"@@ -5574,9 +5574,9 @@ function showToolbars() {","changes":[{"type":"normal","normal":true,"ln1":5574,"ln2":5574,"content":"     gURLBar.setAttribute(\"enablehistory\", \"true\");"},{"type":"normal","normal":true,"ln1":5575,"ln2":5575,"content":"   }"},{"type":"normal","normal":true,"ln1":5576,"ln2":5576,"content":"   "},{"type":"del","del":true,"ln":5577,"content":"-  var urlbarEndcap = document.getElementById(\"urlbar-endcap\");"},{"type":"del","del":true,"ln":5578,"content":"-  if (urlbarEndcap)"},{"type":"del","del":true,"ln":5579,"content":"-    urlbarEndcap.removeAttribute(\"hidden\");"},{"type":"add","add":true,"ln":5577,"content":"+  var goButtonStack = document.getElementById(\"go-button-stack\");"},{"type":"add","add":true,"ln":5578,"content":"+  if (goButtonStack)"},{"type":"add","add":true,"ln":5579,"content":"+    goButtonStack.removeAttribute(\"hidden\");"},{"type":"normal","normal":true,"ln1":5580,"ln2":5580,"content":"   "},{"type":"normal","normal":true,"ln1":5581,"ln2":5581,"content":"   return false; // Dismiss the notification message"},{"type":"normal","normal":true,"ln1":5582,"ln2":5582,"content":" }"}],"oldStart":5574,"oldLines":9,"newStart":5574,"newLines":9}],"deletions":6,"additions":6,"from":"browser/base/content/browser.js","to":"browser/base/content/browser.js","index":["7b1a175..63de19b","100644"]},{"chunks":[{"content":"@@ -264,17 +264,20 @@","changes":[{"type":"normal","normal":true,"ln1":264,"ln2":264,"content":" #endif"},{"type":"normal","normal":true,"ln1":265,"ln2":265,"content":"             </hbox>"},{"type":"normal","normal":true,"ln1":266,"ln2":266,"content":"           </textbox>"},{"type":"del","del":true,"ln":267,"content":"-          <hbox id=\"urlbar-endcap\" class=\"endcap\" chromedir=\"&locale.dir;\">"},{"type":"del","del":true,"ln":268,"content":"-            <toolbarbutton id=\"star-button\""},{"type":"del","del":true,"ln":269,"content":"-                           onclick=\"if (event.button == 0) PlacesStarButton.onClick(event);\"/>"},{"type":"del","del":true,"ln":270,"content":"-            <toolbarbutton id=\"go-button\" chromedir=\"&locale.dir;\""},{"type":"del","del":true,"ln":271,"content":"-                           label=\"&goEndCap.label;\""},{"type":"del","del":true,"ln":272,"content":"-                           onclick=\"handleURLBarCommand(event);\""},{"type":"del","del":true,"ln":273,"content":"-                           ondragover=\"nsDragAndDrop.dragOver(event, goButtonObserver);\""},{"type":"del","del":true,"ln":274,"content":"-                           ondragdrop=\"nsDragAndDrop.drop(event, goButtonObserver);\""},{"type":"del","del":true,"ln":275,"content":"-                           ondragexit=\"nsDragAndDrop.dragExit(event, goButtonObserver);\""},{"type":"del","del":true,"ln":276,"content":"-                           tooltiptext=\"&goEndCap.tooltip;\"/>"},{"type":"del","del":true,"ln":277,"content":"-          </hbox>"},{"type":"add","add":true,"ln":267,"content":"+          <stack id=\"go-button-stack\" class=\"endcap\">"},{"type":"add","add":true,"ln":268,"content":"+            <box class=\"endcap-box\" chromedir=\"&locale.dir;\"/>"},{"type":"add","add":true,"ln":269,"content":"+            <hbox>"},{"type":"add","add":true,"ln":270,"content":"+              <toolbarbutton id=\"star-button\""},{"type":"add","add":true,"ln":271,"content":"+                             onclick=\"if (event.button == 0) PlacesStarButton.onClick(event);\"/>"},{"type":"add","add":true,"ln":272,"content":"+              <toolbarbutton id=\"go-button\" chromedir=\"&locale.dir;\""},{"type":"add","add":true,"ln":273,"content":"+                             label=\"&goEndCap.label;\""},{"type":"add","add":true,"ln":274,"content":"+                             onclick=\"handleURLBarCommand(event);\""},{"type":"add","add":true,"ln":275,"content":"+                             ondragover=\"nsDragAndDrop.dragOver(event, goButtonObserver);\""},{"type":"add","add":true,"ln":276,"content":"+                             ondragdrop=\"nsDragAndDrop.drop(event, goButtonObserver);\""},{"type":"add","add":true,"ln":277,"content":"+                             ondragexit=\"nsDragAndDrop.dragExit(event, goButtonObserver);\""},{"type":"add","add":true,"ln":278,"content":"+                             tooltiptext=\"&goEndCap.tooltip;\"/>"},{"type":"add","add":true,"ln":279,"content":"+            </hbox>"},{"type":"add","add":true,"ln":280,"content":"+          </stack>"},{"type":"normal","normal":true,"ln1":278,"ln2":281,"content":"         </hbox>"},{"type":"normal","normal":true,"ln1":279,"ln2":282,"content":"       </toolbaritem>"},{"type":"normal","normal":true,"ln1":280,"ln2":283,"content":" "}],"oldStart":264,"oldLines":17,"newStart":264,"newLines":20}],"deletions":11,"additions":14,"from":"browser/base/content/browser.xul","to":"browser/base/content/browser.xul","index":["70ea737..0dd2062","100644"]},{"chunks":[{"content":"@@ -102,14 +102,15 @@","changes":[{"type":"normal","normal":true,"ln1":102,"ln2":102,"content":"           </xul:textbox>"},{"type":"normal","normal":true,"ln1":103,"ln2":103,"content":"         </xul:hbox>"},{"type":"normal","normal":true,"ln1":104,"ln2":104,"content":" "},{"type":"del","del":true,"ln":105,"content":"-        <xul:box class=\"endcap\" chromedir=\"&locale.dir;\">"},{"type":"add","add":true,"ln":105,"content":"+        <xul:stack class=\"search-go-button-stack endcap\">"},{"type":"add","add":true,"ln":106,"content":"+          <xul:box class=\"endcap-box\" chromedir=\"&locale.dir;\"/>"},{"type":"normal","normal":true,"ln1":106,"ln2":107,"content":"           <xul:toolbarbutton class=\"search-go-button\""},{"type":"normal","normal":true,"ln1":107,"ln2":108,"content":"                              anonid=\"search-go-button\""},{"type":"normal","normal":true,"ln1":108,"ln2":109,"content":"                              chromedir=\"&locale.dir;\""},{"type":"normal","normal":true,"ln1":109,"ln2":110,"content":"                              oncommand=\"document.getBindingParent(this).handleSearchCommand(event);\""},{"type":"normal","normal":true,"ln1":110,"ln2":111,"content":"                              onclick=\"checkForMiddleClick(this, event);\""},{"type":"normal","normal":true,"ln1":111,"ln2":112,"content":"                              label=\"&searchEndCap.label;\" />"},{"type":"del","del":true,"ln":112,"content":"-        </xul:box>"},{"type":"add","add":true,"ln":113,"content":"+        </xul:stack>"},{"type":"normal","normal":true,"ln1":113,"ln2":114,"content":"       </xul:hbox>"},{"type":"normal","normal":true,"ln1":114,"ln2":115,"content":"     </content>"},{"type":"normal","normal":true,"ln1":115,"ln2":116,"content":" "}],"oldStart":102,"oldLines":14,"newStart":102,"newLines":15}],"deletions":2,"additions":3,"from":"browser/components/search/content/search.xml","to":"browser/components/search/content/search.xml","index":["e131bb8..639d35a0","100644"]},{"chunks":[{"content":"@@ -1004,7 +1004,10 @@ statusbarpanel#statusbar-display {","changes":[{"type":"normal","normal":true,"ln1":1004,"ln2":1004,"content":" /* ::::: endcaps ::::: */"},{"type":"normal","normal":true,"ln1":1005,"ln2":1005,"content":" "},{"type":"normal","normal":true,"ln1":1006,"ln2":1006,"content":" .endcap {"},{"type":"del","del":true,"ln":1007,"content":"-  margin: 2px 0px 2px 0px;"},{"type":"add","add":true,"ln":1007,"content":"+  padding: 2px 0px 2px 0px;"},{"type":"add","add":true,"ln":1008,"content":"+}"},{"type":"add","add":true,"ln":1009,"content":"+"},{"type":"add","add":true,"ln":1010,"content":"+.endcap-box {"},{"type":"normal","normal":true,"ln1":1008,"ln2":1011,"content":"   -moz-border-radius: 0 4px 4px 0;"},{"type":"normal","normal":true,"ln1":1009,"ln2":1012,"content":"   border: 1px solid ThreeDShadow;"},{"type":"normal","normal":true,"ln1":1010,"ln2":1013,"content":"   border-left-width: 0;"}],"oldStart":1004,"oldLines":7,"newStart":1004,"newLines":10},{"content":"@@ -1013,18 +1016,17 @@ statusbarpanel#statusbar-display {","changes":[{"type":"normal","normal":true,"ln1":1013,"ln2":1016,"content":"   background-position: 50% 50%;"},{"type":"normal","normal":true,"ln1":1014,"ln2":1017,"content":" }"},{"type":"normal","normal":true,"ln1":1015,"ln2":1018,"content":" "},{"type":"del","del":true,"ln":1016,"content":"-.endcap[chromedir=\"rtl\"] {"},{"type":"add","add":true,"ln":1019,"content":"+toolbar:not([mode=\"text\"]) .endcap:hover > .endcap-box {"},{"type":"add","add":true,"ln":1020,"content":"+  background-image: url(\"chrome://browser/skin/endcap-bkgnd-hover.png\");"},{"type":"add","add":true,"ln":1021,"content":"+}"},{"type":"add","add":true,"ln":1022,"content":"+"},{"type":"add","add":true,"ln":1023,"content":"+.endcap-box[chromedir=\"rtl\"] {"},{"type":"normal","normal":true,"ln1":1017,"ln2":1024,"content":"   -moz-border-radius: 4px 0 0 4px;"},{"type":"normal","normal":true,"ln1":1018,"ln2":1025,"content":"   border-left-width: 1px;"},{"type":"normal","normal":true,"ln1":1019,"ln2":1026,"content":"   border-right-width: 0;"},{"type":"normal","normal":true,"ln1":1020,"ln2":1027,"content":" }"},{"type":"normal","normal":true,"ln1":1021,"ln2":1028,"content":" "},{"type":"del","del":true,"ln":1022,"content":"-toolbar:not([mode=\"text\"]) .endcap:hover {"},{"type":"del","del":true,"ln":1023,"content":"-  background-image: url(\"chrome://browser/skin/endcap-bkgnd-hover.png\");"},{"type":"del","del":true,"ln":1024,"content":"-}"},{"type":"del","del":true,"ln":1025,"content":"-"},{"type":"del","del":true,"ln":1026,"content":"-toolbar[mode=\"text\"] .endcap {"},{"type":"del","del":true,"ln":1027,"content":"-  margin: 0;"},{"type":"add","add":true,"ln":1029,"content":"+toolbar[mode=\"text\"] .endcap-box {"},{"type":"normal","normal":true,"ln1":1028,"ln2":1030,"content":"   border: none;"},{"type":"normal","normal":true,"ln1":1029,"ln2":1031,"content":"   background-image: none;"},{"type":"normal","normal":true,"ln1":1030,"ln2":1032,"content":" }"}],"oldStart":1013,"oldLines":18,"newStart":1016,"newLines":17},{"content":"@@ -1060,6 +1062,10 @@ toolbar[mode=\"text\"] #go-button {","changes":[{"type":"normal","normal":true,"ln1":1060,"ln2":1062,"content":"   padding: 3px;"},{"type":"normal","normal":true,"ln1":1061,"ln2":1063,"content":" }"},{"type":"normal","normal":true,"ln1":1062,"ln2":1064,"content":" "},{"type":"add","add":true,"ln":1065,"content":"+toolbar[mode=\"text\"] #go-button-stack {"},{"type":"add","add":true,"ln":1066,"content":"+  padding: 0;"},{"type":"add","add":true,"ln":1067,"content":"+}"},{"type":"add","add":true,"ln":1068,"content":"+"},{"type":"normal","normal":true,"ln1":1063,"ln2":1069,"content":" #go-button > .toolbarbutton-icon {"},{"type":"normal","normal":true,"ln1":1064,"ln2":1070,"content":"   margin: 0;"},{"type":"normal","normal":true,"ln1":1065,"ln2":1071,"content":" }"}],"oldStart":1060,"oldLines":6,"newStart":1062,"newLines":10},{"content":"@@ -1098,7 +1104,8 @@ toolbar:not([mode=\"text\"]) #star-button[starred=\"true\"],","changes":[{"type":"normal","normal":true,"ln1":1098,"ln2":1104,"content":" }"},{"type":"normal","normal":true,"ln1":1099,"ln2":1105,"content":" "},{"type":"normal","normal":true,"ln1":1100,"ln2":1106,"content":" #star-button > .toolbarbutton-icon {"},{"type":"del","del":true,"ln":1101,"content":"-  margin: 3px;"},{"type":"add","add":true,"ln":1107,"content":"+  margin-left: 3px;"},{"type":"add","add":true,"ln":1108,"content":"+  margin-right: 3px;"},{"type":"normal","normal":true,"ln1":1102,"ln2":1109,"content":" }"},{"type":"normal","normal":true,"ln1":1103,"ln2":1110,"content":" "},{"type":"normal","normal":true,"ln1":1104,"ln2":1111,"content":" /* ::::: content area ::::: */"}],"oldStart":1098,"oldLines":7,"newStart":1104,"newLines":8}],"deletions":9,"additions":16,"from":"browser/themes/winstripe/browser/browser.css","to":"browser/themes/winstripe/browser/browser.css","index":["293a65a..3ab3175","100644"]},{"chunks":[{"content":"@@ -163,6 +163,10 @@ toolbar[mode=\"text\"] .search-go-button {","changes":[{"type":"normal","normal":true,"ln1":163,"ln2":163,"content":"   -moz-appearance: toolbarbutton;"},{"type":"normal","normal":true,"ln1":164,"ln2":164,"content":" }"},{"type":"normal","normal":true,"ln1":165,"ln2":165,"content":" "},{"type":"add","add":true,"ln":166,"content":"+toolbar[mode=\"text\"] .search-go-button-stack {"},{"type":"add","add":true,"ln":167,"content":"+  padding: 0px;"},{"type":"add","add":true,"ln":168,"content":"+}"},{"type":"add","add":true,"ln":169,"content":"+"},{"type":"normal","normal":true,"ln1":166,"ln2":170,"content":" toolbar[mode=\"text\"] .search-go-button {"},{"type":"normal","normal":true,"ln1":167,"ln2":171,"content":"   background-image: none;"},{"type":"normal","normal":true,"ln1":168,"ln2":172,"content":"   list-style-image: none;"}],"oldStart":163,"oldLines":6,"newStart":163,"newLines":10}],"deletions":0,"additions":4,"from":"browser/themes/winstripe/browser/searchbar.css","to":"browser/themes/winstripe/browser/searchbar.css","index":["2bb518e..93e6250","100644"]}]}