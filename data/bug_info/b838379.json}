{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basb838379\""},"diff":[{"chunks":[{"content":"@@ -919,9 +919,9 @@ var gApplicationsPane = {","changes":[{"type":"normal","normal":true,"ln1":919,"ln2":919,"content":"       item.setAttribute(\"actionIcon\","},{"type":"normal","normal":true,"ln1":920,"ln2":920,"content":"                         this._getIconURLForPreferredAction(visibleType));"},{"type":"normal","normal":true,"ln1":921,"ln2":921,"content":"       this._list.appendChild(item);"},{"type":"del","del":true,"ln":922,"content":"-      if (visibleType.type == this._list.getAttribute(\"lastSelectedType\"))"},{"type":"del","del":true,"ln":923,"content":"-        this._list.selectedItem = item;"},{"type":"normal","normal":true,"ln1":924,"ln2":922,"content":"     }"},{"type":"add","add":true,"ln":923,"content":"+"},{"type":"add","add":true,"ln":924,"content":"+    this._selectLastSelectedType();"},{"type":"normal","normal":true,"ln1":925,"ln2":925,"content":"   },"},{"type":"normal","normal":true,"ln1":926,"ln2":926,"content":" "},{"type":"normal","normal":true,"ln1":927,"ln2":927,"content":"   _getVisibleTypes: function() {"}],"oldStart":919,"oldLines":9,"newStart":919,"newLines":9},{"content":"@@ -1036,6 +1036,25 @@ var gApplicationsPane = {","changes":[{"type":"normal","normal":true,"ln1":1036,"ln2":1036,"content":"     }"},{"type":"normal","normal":true,"ln1":1037,"ln2":1037,"content":"   },"},{"type":"normal","normal":true,"ln1":1038,"ln2":1038,"content":" "},{"type":"add","add":true,"ln":1039,"content":"+  _selectLastSelectedType: function() {"},{"type":"add","add":true,"ln":1040,"content":"+    // If the list is disabled by the pref.downloads.disable_button.edit_actions"},{"type":"add","add":true,"ln":1041,"content":"+    // preference being locked, then don't select the type, as that would cause"},{"type":"add","add":true,"ln":1042,"content":"+    // it to appear selected, with a different background and an actions menu"},{"type":"add","add":true,"ln":1043,"content":"+    // that makes it seem like you can choose an action for the type."},{"type":"add","add":true,"ln":1044,"content":"+    if (this._list.disabled)"},{"type":"add","add":true,"ln":1045,"content":"+      return;"},{"type":"add","add":true,"ln":1046,"content":"+"},{"type":"add","add":true,"ln":1047,"content":"+    var lastSelectedType = this._list.getAttribute(\"lastSelectedType\");"},{"type":"add","add":true,"ln":1048,"content":"+    if (!lastSelectedType)"},{"type":"add","add":true,"ln":1049,"content":"+      return;"},{"type":"add","add":true,"ln":1050,"content":"+"},{"type":"add","add":true,"ln":1051,"content":"+    var item = this._list.getElementsByAttribute(\"type\", lastSelectedType)[0];"},{"type":"add","add":true,"ln":1052,"content":"+    if (!item)"},{"type":"add","add":true,"ln":1053,"content":"+      return;"},{"type":"add","add":true,"ln":1054,"content":"+"},{"type":"add","add":true,"ln":1055,"content":"+    this._list.selectedItem = item;"},{"type":"add","add":true,"ln":1056,"content":"+  },"},{"type":"add","add":true,"ln":1057,"content":"+"},{"type":"normal","normal":true,"ln1":1039,"ln2":1058,"content":"   /**"},{"type":"normal","normal":true,"ln1":1040,"ln2":1059,"content":"    * Whether or not the given handler app is valid."},{"type":"normal","normal":true,"ln1":1041,"ln2":1060,"content":"    *"}],"oldStart":1036,"oldLines":6,"newStart":1036,"newLines":25},{"content":"@@ -1382,8 +1401,9 @@ var gApplicationsPane = {","changes":[{"type":"normal","normal":true,"ln1":1382,"ln2":1401,"content":"   // Mark which item in the list was last selected so we can reselect it"},{"type":"normal","normal":true,"ln1":1383,"ln2":1402,"content":"   // when we rebuild the list or when the user returns to the prefpane."},{"type":"normal","normal":true,"ln1":1384,"ln2":1403,"content":"   onSelectionChanged: function() {"},{"type":"del","del":true,"ln":1385,"content":"-    this._list.setAttribute(\"lastSelectedType\","},{"type":"del","del":true,"ln":1386,"content":"-                            this._list.selectedItem.getAttribute(\"type\"));"},{"type":"add","add":true,"ln":1404,"content":"+    if (this._list.selectedItem)"},{"type":"add","add":true,"ln":1405,"content":"+      this._list.setAttribute(\"lastSelectedType\","},{"type":"add","add":true,"ln":1406,"content":"+                              this._list.selectedItem.getAttribute(\"type\"));"},{"type":"normal","normal":true,"ln1":1387,"ln2":1407,"content":"   },"},{"type":"normal","normal":true,"ln1":1388,"ln2":1408,"content":" "},{"type":"normal","normal":true,"ln1":1389,"ln2":1409,"content":"   _getIconURLForPreferredAction: function(aHandlerInfo) {"}],"oldStart":1382,"oldLines":8,"newStart":1401,"newLines":9}],"deletions":4,"additions":24,"from":"browser/components/preferences/applications.js","to":"browser/components/preferences/applications.js","index":["149b329..8a7ac6c","100755"]},{"chunks":[{"content":"@@ -69,6 +69,9 @@","changes":[{"type":"normal","normal":true,"ln1":69,"ln2":69,"content":"       <preference id=\"browser.feeds.handlers.webservice\""},{"type":"normal","normal":true,"ln1":70,"ln2":70,"content":"                   name=\"browser.feeds.handlers.webservice\""},{"type":"normal","normal":true,"ln1":71,"ln2":71,"content":"                   type=\"string\"/>"},{"type":"add","add":true,"ln":72,"content":"+      <preference id=\"pref.downloads.disable_button.edit_actions\""},{"type":"add","add":true,"ln":73,"content":"+                  name=\"pref.downloads.disable_button.edit_actions\""},{"type":"add","add":true,"ln":74,"content":"+                  type=\"bool\"/>"},{"type":"normal","normal":true,"ln1":72,"ln2":75,"content":"     </preferences>"},{"type":"normal","normal":true,"ln1":73,"ln2":76,"content":" "},{"type":"normal","normal":true,"ln1":74,"ln2":77,"content":"     <script type=\"application/x-javascript\" src=\"chrome://browser/content/preferences/applications.js\"/>"}],"oldStart":69,"oldLines":6,"newStart":69,"newLines":9},{"content":"@@ -88,9 +91,9 @@","changes":[{"type":"normal","normal":true,"ln1":88,"ln2":91,"content":" "},{"type":"normal","normal":true,"ln1":89,"ln2":92,"content":"     <separator class=\"thin\"/>"},{"type":"normal","normal":true,"ln1":90,"ln2":93,"content":" "},{"type":"del","del":true,"ln":91,"content":"-    <richlistbox id=\"handlersView\" orient=\"vertical\""},{"type":"del","del":true,"ln":92,"content":"-                 onselect=\"gApplicationsPane.onSelectionChanged();\""},{"type":"del","del":true,"ln":93,"content":"-                 persist=\"lastSelectedType\">"},{"type":"add","add":true,"ln":94,"content":"+    <richlistbox id=\"handlersView\" orient=\"vertical\" persist=\"lastSelectedType\""},{"type":"add","add":true,"ln":95,"content":"+                 preference=\"pref.downloads.disable_button.edit_actions\""},{"type":"add","add":true,"ln":96,"content":"+                 onselect=\"gApplicationsPane.onSelectionChanged();\">"},{"type":"normal","normal":true,"ln1":94,"ln2":97,"content":"       <listheader equalsize=\"always\" style=\"border: 0; padding: 0;\">"},{"type":"normal","normal":true,"ln1":95,"ln2":98,"content":"         <treecol id=\"typeColumn\" label=\"&typeColumn.label;\" value=\"type\""},{"type":"normal","normal":true,"ln1":96,"ln2":99,"content":"                  accesskey=\"&typeColumn.accesskey;\" persist=\"sortDirection\""}],"oldStart":88,"oldLines":9,"newStart":91,"newLines":9}],"deletions":3,"additions":6,"from":"browser/components/preferences/applications.xul","to":"browser/components/preferences/applications.xul","index":["0452003..335309c","100755"]}]}