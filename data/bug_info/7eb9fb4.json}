{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas7eb9fb4\""},"diff":[{"chunks":[{"content":"@@ -722,10 +722,14 @@ nsPresContext::ClearStyleDataAndReflow()","changes":[{"type":"normal","normal":true,"ln1":722,"ln2":722,"content":"     nsStyleChangeList changeList;"},{"type":"normal","normal":true,"ln1":723,"ln2":723,"content":"     mShell->FrameManager()->ComputeStyleChangeFor(mShell->GetRootFrame(),"},{"type":"normal","normal":true,"ln1":724,"ln2":724,"content":"                                                   &changeList, nsChangeHint(0));"},{"type":"del","del":true,"ln":725,"content":"-    // Tell the style set it's safe to destroy the old rule tree"},{"type":"del","del":true,"ln":726,"content":"-    mShell->StyleSet()->EndReconstruct();"},{"type":"normal","normal":true,"ln1":727,"ln2":725,"content":"     // Tell the frame constructor to process the required changes"},{"type":"normal","normal":true,"ln1":728,"ln2":726,"content":"     mShell->FrameConstructor()->ProcessRestyledFrames(changeList);"},{"type":"add","add":true,"ln":727,"content":"+    // Tell the style set it's safe to destroy the old rule tree.  We"},{"type":"add","add":true,"ln":728,"content":"+    // must do this after the ProcessRestyledFrames call in case the"},{"type":"add","add":true,"ln":729,"content":"+    // change list has frame reconstructs in it (since frames to be"},{"type":"add","add":true,"ln":730,"content":"+    // reconstructed will still have their old style context pointers"},{"type":"add","add":true,"ln":731,"content":"+    // until they are destroyed)."},{"type":"add","add":true,"ln":732,"content":"+    mShell->StyleSet()->EndReconstruct();"},{"type":"normal","normal":true,"ln1":729,"ln2":733,"content":"   }"},{"type":"normal","normal":true,"ln1":730,"ln2":734,"content":" }"},{"type":"normal","normal":true,"ln1":731,"ln2":735,"content":" "}],"oldStart":722,"oldLines":10,"newStart":722,"newLines":14}],"deletions":2,"additions":6,"from":"layout/base/nsPresContext.cpp","to":"layout/base/nsPresContext.cpp","index":["158296b..1debf7d","100644"]}]}