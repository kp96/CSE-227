{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas21a7ac2\""},"diff":[{"chunks":[{"content":"@@ -50,6 +50,7 @@","changes":[{"type":"normal","normal":true,"ln1":50,"ln2":50,"content":" "},{"type":"normal","normal":true,"ln1":51,"ln2":51,"content":" #ifdef DEBUG"},{"type":"normal","normal":true,"ln1":52,"ln2":52,"content":" #define NS_DEBUG"},{"type":"add","add":true,"ln":53,"content":"+#include \"prprf.h\""},{"type":"normal","normal":true,"ln1":53,"ln2":54,"content":" #endif"},{"type":"normal","normal":true,"ln1":54,"ln2":55,"content":" "},{"type":"normal","normal":true,"ln1":55,"ln2":56,"content":" #ifdef DEBUG"}],"oldStart":50,"oldLines":6,"newStart":50,"newLines":7},{"content":"@@ -203,8 +204,29 @@","changes":[{"type":"normal","normal":true,"ln1":203,"ln2":204,"content":" ** Macros for checking results"},{"type":"normal","normal":true,"ln1":204,"ln2":205,"content":" ******************************************************************************/"},{"type":"normal","normal":true,"ln1":205,"ln2":206,"content":" "},{"type":"del","del":true,"ln":206,"content":"-#define NS_ENSURE_SUCCESS(res, ret) \\"},{"type":"del","del":true,"ln":207,"content":"-  NS_ENSURE_TRUE(NS_SUCCEEDED(res), ret)"},{"type":"add","add":true,"ln":207,"content":"+#if defined(DEBUG) && !defined(XPCOM_GLUE_AVOID_NSPR)"},{"type":"add","add":true,"ln":208,"content":"+"},{"type":"add","add":true,"ln":209,"content":"+#define NS_ENSURE_SUCCESS_BODY(res, ret)                                  \\"},{"type":"add","add":true,"ln":210,"content":"+    char *msg = PR_smprintf(\"NS_ENSURE_SUCCESS(%s, %s) failed with \"      \\"},{"type":"add","add":true,"ln":211,"content":"+                            \"result 0x%X\", #res, #ret, __rv);             \\"},{"type":"add","add":true,"ln":212,"content":"+    NS_WARNING(msg);                                                      \\"},{"type":"add","add":true,"ln":213,"content":"+    PR_smprintf_free(msg);"},{"type":"add","add":true,"ln":214,"content":"+"},{"type":"add","add":true,"ln":215,"content":"+#else"},{"type":"add","add":true,"ln":216,"content":"+"},{"type":"add","add":true,"ln":217,"content":"+#define NS_ENSURE_SUCCESS_BODY(res, ret)                                  \\"},{"type":"add","add":true,"ln":218,"content":"+    NS_WARNING(\"NS_ENSURE_SUCCESS(\" #res \", \" #ret \") failed\");"},{"type":"add","add":true,"ln":219,"content":"+"},{"type":"add","add":true,"ln":220,"content":"+#endif"},{"type":"add","add":true,"ln":221,"content":"+"},{"type":"add","add":true,"ln":222,"content":"+#define NS_ENSURE_SUCCESS(res, ret)                                       \\"},{"type":"add","add":true,"ln":223,"content":"+  PR_BEGIN_MACRO                                                          \\"},{"type":"add","add":true,"ln":224,"content":"+    nsresult __rv = res; /* Don't evaluate |res| more than once */        \\"},{"type":"add","add":true,"ln":225,"content":"+    if (NS_FAILED(__rv)) {                                                \\"},{"type":"add","add":true,"ln":226,"content":"+      NS_ENSURE_SUCCESS_BODY(res, ret)                                    \\"},{"type":"add","add":true,"ln":227,"content":"+      return ret;                                                         \\"},{"type":"add","add":true,"ln":228,"content":"+    }                                                                     \\"},{"type":"add","add":true,"ln":229,"content":"+  PR_END_MACRO"},{"type":"normal","normal":true,"ln1":208,"ln2":230,"content":" "},{"type":"normal","normal":true,"ln1":209,"ln2":231,"content":" /******************************************************************************"},{"type":"normal","normal":true,"ln1":210,"ln2":232,"content":" ** Macros for checking state and arguments upon entering interface boundaries"}],"oldStart":203,"oldLines":8,"newStart":204,"newLines":29}],"deletions":2,"additions":24,"from":"xpcom/glue/nsDebug.h","to":"xpcom/glue/nsDebug.h","index":["b5b62d7..ecd5bcc","100644"]}]}