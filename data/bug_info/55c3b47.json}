{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas55c3b47\""},"diff":[{"chunks":[{"content":"@@ -205,8 +205,9 @@ var PlacesCommandHook = {","changes":[{"type":"normal","normal":true,"ln1":205,"ln2":205,"content":"     // it to the content area"},{"type":"normal","normal":true,"ln1":206,"ln2":206,"content":"     var starIcon = document.getElementById(\"star-button\");"},{"type":"normal","normal":true,"ln1":207,"ln2":207,"content":"     if (starIcon && isElementVisible(starIcon)) {"},{"type":"add","add":true,"ln":208,"content":"+      var dockTo = starIcon.parentNode; // urlbar endcap"},{"type":"normal","normal":true,"ln1":208,"ln2":209,"content":"       this.bookmarkPage(getBrowser().selectedBrowser, aParent, aShowEditUI,"},{"type":"del","del":true,"ln":209,"content":"-                        starIcon, \"after_start\");"},{"type":"add","add":true,"ln":210,"content":"+                        dockTo, \"after_start\");"},{"type":"normal","normal":true,"ln1":210,"ln2":211,"content":"     }"},{"type":"normal","normal":true,"ln1":211,"ln2":212,"content":"     else {"},{"type":"normal","normal":true,"ln1":212,"ln2":213,"content":"       this.bookmarkPage(getBrowser().selectedBrowser, aParent, aShowEditUI,"}],"oldStart":205,"oldLines":8,"newStart":205,"newLines":9}],"deletions":1,"additions":2,"from":"browser/base/content/browser-places.js","to":"browser/base/content/browser-places.js","index":["3444c01..91969a3","100644"]},{"chunks":[{"content":"@@ -956,9 +956,9 @@ function delayedStartup()","changes":[{"type":"normal","normal":true,"ln1":956,"ln2":956,"content":"   if (gURLBar && document.documentElement.getAttribute(\"chromehidden\").indexOf(\"toolbar\") != -1) {"},{"type":"normal","normal":true,"ln1":957,"ln2":957,"content":"     gURLBar.setAttribute(\"readonly\", \"true\");"},{"type":"normal","normal":true,"ln1":958,"ln2":958,"content":"     gURLBar.setAttribute(\"enablehistory\", \"false\");"},{"type":"del","del":true,"ln":959,"content":"-    var goButtonStack = document.getElementById(\"go-button-stack\");"},{"type":"del","del":true,"ln":960,"content":"-    if (goButtonStack)"},{"type":"del","del":true,"ln":961,"content":"-      goButtonStack.setAttribute(\"hidden\", \"true\");"},{"type":"add","add":true,"ln":959,"content":"+    var urlbarEndcap = document.getElementById(\"urlbar-endcap\");"},{"type":"add","add":true,"ln":960,"content":"+    if (urlbarEndcap)"},{"type":"add","add":true,"ln":961,"content":"+      urlbarEndcap.setAttribute(\"hidden\", \"true\");"},{"type":"normal","normal":true,"ln1":962,"ln2":962,"content":"   }"},{"type":"normal","normal":true,"ln1":963,"ln2":963,"content":" "},{"type":"normal","normal":true,"ln1":964,"ln2":964,"content":"   if (gURLBar) {"}],"oldStart":956,"oldLines":9,"newStart":956,"newLines":9},{"content":"@@ -5574,9 +5574,9 @@ function showToolbars() {","changes":[{"type":"normal","normal":true,"ln1":5574,"ln2":5574,"content":"     gURLBar.setAttribute(\"enablehistory\", \"true\");"},{"type":"normal","normal":true,"ln1":5575,"ln2":5575,"content":"   }"},{"type":"normal","normal":true,"ln1":5576,"ln2":5576,"content":"   "},{"type":"del","del":true,"ln":5577,"content":"-  var goButtonStack = document.getElementById(\"go-button-stack\");"},{"type":"del","del":true,"ln":5578,"content":"-  if (goButtonStack)"},{"type":"del","del":true,"ln":5579,"content":"-    goButtonStack.removeAttribute(\"hidden\");"},{"type":"add","add":true,"ln":5577,"content":"+  var urlbarEndcap = document.getElementById(\"urlbar-endcap\");"},{"type":"add","add":true,"ln":5578,"content":"+  if (urlbarEndcap)"},{"type":"add","add":true,"ln":5579,"content":"+    urlbarEndcap.removeAttribute(\"hidden\");"},{"type":"normal","normal":true,"ln1":5580,"ln2":5580,"content":"   "},{"type":"normal","normal":true,"ln1":5581,"ln2":5581,"content":"   return false; // Dismiss the notification message"},{"type":"normal","normal":true,"ln1":5582,"ln2":5582,"content":" }"}],"oldStart":5574,"oldLines":9,"newStart":5574,"newLines":9}],"deletions":6,"additions":6,"from":"browser/base/content/browser.js","to":"browser/base/content/browser.js","index":["63de19b..7b1a175","100644"]},{"chunks":[{"content":"@@ -264,20 +264,17 @@","changes":[{"type":"normal","normal":true,"ln1":264,"ln2":264,"content":" #endif"},{"type":"normal","normal":true,"ln1":265,"ln2":265,"content":"             </hbox>"},{"type":"normal","normal":true,"ln1":266,"ln2":266,"content":"           </textbox>"},{"type":"del","del":true,"ln":267,"content":"-          <stack id=\"go-button-stack\" class=\"endcap\">"},{"type":"del","del":true,"ln":268,"content":"-            <box class=\"endcap-box\" chromedir=\"&locale.dir;\"/>"},{"type":"del","del":true,"ln":269,"content":"-            <hbox>"},{"type":"del","del":true,"ln":270,"content":"-              <toolbarbutton id=\"star-button\""},{"type":"del","del":true,"ln":271,"content":"-                             onclick=\"if (event.button == 0) PlacesStarButton.onClick(event);\"/>"},{"type":"del","del":true,"ln":272,"content":"-              <toolbarbutton id=\"go-button\" chromedir=\"&locale.dir;\""},{"type":"del","del":true,"ln":273,"content":"-                             label=\"&goEndCap.label;\""},{"type":"del","del":true,"ln":274,"content":"-                             onclick=\"handleURLBarCommand(event);\""},{"type":"del","del":true,"ln":275,"content":"-                             ondragover=\"nsDragAndDrop.dragOver(event, goButtonObserver);\""},{"type":"del","del":true,"ln":276,"content":"-                             ondragdrop=\"nsDragAndDrop.drop(event, goButtonObserver);\""},{"type":"del","del":true,"ln":277,"content":"-                             ondragexit=\"nsDragAndDrop.dragExit(event, goButtonObserver);\""},{"type":"del","del":true,"ln":278,"content":"-                             tooltiptext=\"&goEndCap.tooltip;\"/>"},{"type":"del","del":true,"ln":279,"content":"-            </hbox>"},{"type":"del","del":true,"ln":280,"content":"-          </stack>"},{"type":"add","add":true,"ln":267,"content":"+          <hbox id=\"urlbar-endcap\" class=\"endcap\" chromedir=\"&locale.dir;\">"},{"type":"add","add":true,"ln":268,"content":"+            <toolbarbutton id=\"star-button\""},{"type":"add","add":true,"ln":269,"content":"+                           onclick=\"if (event.button == 0) PlacesStarButton.onClick(event);\"/>"},{"type":"add","add":true,"ln":270,"content":"+            <toolbarbutton id=\"go-button\" chromedir=\"&locale.dir;\""},{"type":"add","add":true,"ln":271,"content":"+                           label=\"&goEndCap.label;\""},{"type":"add","add":true,"ln":272,"content":"+                           onclick=\"handleURLBarCommand(event);\""},{"type":"add","add":true,"ln":273,"content":"+                           ondragover=\"nsDragAndDrop.dragOver(event, goButtonObserver);\""},{"type":"add","add":true,"ln":274,"content":"+                           ondragdrop=\"nsDragAndDrop.drop(event, goButtonObserver);\""},{"type":"add","add":true,"ln":275,"content":"+                           ondragexit=\"nsDragAndDrop.dragExit(event, goButtonObserver);\""},{"type":"add","add":true,"ln":276,"content":"+                           tooltiptext=\"&goEndCap.tooltip;\"/>"},{"type":"add","add":true,"ln":277,"content":"+          </hbox>"},{"type":"normal","normal":true,"ln1":281,"ln2":278,"content":"         </hbox>"},{"type":"normal","normal":true,"ln1":282,"ln2":279,"content":"       </toolbaritem>"},{"type":"normal","normal":true,"ln1":283,"ln2":280,"content":" "}],"oldStart":264,"oldLines":20,"newStart":264,"newLines":17}],"deletions":14,"additions":11,"from":"browser/base/content/browser.xul","to":"browser/base/content/browser.xul","index":["0dd2062..70ea737","100644"]},{"chunks":[{"content":"@@ -102,15 +102,14 @@","changes":[{"type":"normal","normal":true,"ln1":102,"ln2":102,"content":"           </xul:textbox>"},{"type":"normal","normal":true,"ln1":103,"ln2":103,"content":"         </xul:hbox>"},{"type":"normal","normal":true,"ln1":104,"ln2":104,"content":" "},{"type":"del","del":true,"ln":105,"content":"-        <xul:stack class=\"search-go-button-stack endcap\">"},{"type":"del","del":true,"ln":106,"content":"-          <xul:box class=\"endcap-box\" chromedir=\"&locale.dir;\"/>"},{"type":"add","add":true,"ln":105,"content":"+        <xul:box class=\"endcap\" chromedir=\"&locale.dir;\">"},{"type":"normal","normal":true,"ln1":107,"ln2":106,"content":"           <xul:toolbarbutton class=\"search-go-button\""},{"type":"normal","normal":true,"ln1":108,"ln2":107,"content":"                              anonid=\"search-go-button\""},{"type":"normal","normal":true,"ln1":109,"ln2":108,"content":"                              chromedir=\"&locale.dir;\""},{"type":"normal","normal":true,"ln1":110,"ln2":109,"content":"                              oncommand=\"document.getBindingParent(this).handleSearchCommand(event);\""},{"type":"normal","normal":true,"ln1":111,"ln2":110,"content":"                              onclick=\"checkForMiddleClick(this, event);\""},{"type":"normal","normal":true,"ln1":112,"ln2":111,"content":"                              label=\"&searchEndCap.label;\" />"},{"type":"del","del":true,"ln":113,"content":"-        </xul:stack>"},{"type":"add","add":true,"ln":112,"content":"+        </xul:box>"},{"type":"normal","normal":true,"ln1":114,"ln2":113,"content":"       </xul:hbox>"},{"type":"normal","normal":true,"ln1":115,"ln2":114,"content":"     </content>"},{"type":"normal","normal":true,"ln1":116,"ln2":115,"content":" "}],"oldStart":102,"oldLines":15,"newStart":102,"newLines":14}],"deletions":3,"additions":2,"from":"browser/components/search/content/search.xml","to":"browser/components/search/content/search.xml","index":["639d35a0..e131bb8","100644"]},{"chunks":[{"content":"@@ -1004,10 +1004,7 @@ statusbarpanel#statusbar-display {","changes":[{"type":"normal","normal":true,"ln1":1004,"ln2":1004,"content":" /* ::::: endcaps ::::: */"},{"type":"normal","normal":true,"ln1":1005,"ln2":1005,"content":" "},{"type":"normal","normal":true,"ln1":1006,"ln2":1006,"content":" .endcap {"},{"type":"del","del":true,"ln":1007,"content":"-  padding: 2px 0px 2px 0px;"},{"type":"del","del":true,"ln":1008,"content":"-}"},{"type":"del","del":true,"ln":1009,"content":"-"},{"type":"del","del":true,"ln":1010,"content":"-.endcap-box {"},{"type":"add","add":true,"ln":1007,"content":"+  margin: 2px 0px 2px 0px;"},{"type":"normal","normal":true,"ln1":1011,"ln2":1008,"content":"   -moz-border-radius: 0 4px 4px 0;"},{"type":"normal","normal":true,"ln1":1012,"ln2":1009,"content":"   border: 1px solid ThreeDShadow;"},{"type":"normal","normal":true,"ln1":1013,"ln2":1010,"content":"   border-left-width: 0;"}],"oldStart":1004,"oldLines":10,"newStart":1004,"newLines":7},{"content":"@@ -1016,17 +1013,18 @@ statusbarpanel#statusbar-display {","changes":[{"type":"normal","normal":true,"ln1":1016,"ln2":1013,"content":"   background-position: 50% 50%;"},{"type":"normal","normal":true,"ln1":1017,"ln2":1014,"content":" }"},{"type":"normal","normal":true,"ln1":1018,"ln2":1015,"content":" "},{"type":"del","del":true,"ln":1019,"content":"-toolbar:not([mode=\"text\"]) .endcap:hover > .endcap-box {"},{"type":"del","del":true,"ln":1020,"content":"-  background-image: url(\"chrome://browser/skin/endcap-bkgnd-hover.png\");"},{"type":"del","del":true,"ln":1021,"content":"-}"},{"type":"del","del":true,"ln":1022,"content":"-"},{"type":"del","del":true,"ln":1023,"content":"-.endcap-box[chromedir=\"rtl\"] {"},{"type":"add","add":true,"ln":1016,"content":"+.endcap[chromedir=\"rtl\"] {"},{"type":"normal","normal":true,"ln1":1024,"ln2":1017,"content":"   -moz-border-radius: 4px 0 0 4px;"},{"type":"normal","normal":true,"ln1":1025,"ln2":1018,"content":"   border-left-width: 1px;"},{"type":"normal","normal":true,"ln1":1026,"ln2":1019,"content":"   border-right-width: 0;"},{"type":"normal","normal":true,"ln1":1027,"ln2":1020,"content":" }"},{"type":"normal","normal":true,"ln1":1028,"ln2":1021,"content":" "},{"type":"del","del":true,"ln":1029,"content":"-toolbar[mode=\"text\"] .endcap-box {"},{"type":"add","add":true,"ln":1022,"content":"+toolbar:not([mode=\"text\"]) .endcap:hover {"},{"type":"add","add":true,"ln":1023,"content":"+  background-image: url(\"chrome://browser/skin/endcap-bkgnd-hover.png\");"},{"type":"add","add":true,"ln":1024,"content":"+}"},{"type":"add","add":true,"ln":1025,"content":"+"},{"type":"add","add":true,"ln":1026,"content":"+toolbar[mode=\"text\"] .endcap {"},{"type":"add","add":true,"ln":1027,"content":"+  margin: 0;"},{"type":"normal","normal":true,"ln1":1030,"ln2":1028,"content":"   border: none;"},{"type":"normal","normal":true,"ln1":1031,"ln2":1029,"content":"   background-image: none;"},{"type":"normal","normal":true,"ln1":1032,"ln2":1030,"content":" }"}],"oldStart":1016,"oldLines":17,"newStart":1013,"newLines":18},{"content":"@@ -1062,10 +1060,6 @@ toolbar[mode=\"text\"] #go-button {","changes":[{"type":"normal","normal":true,"ln1":1062,"ln2":1060,"content":"   padding: 3px;"},{"type":"normal","normal":true,"ln1":1063,"ln2":1061,"content":" }"},{"type":"normal","normal":true,"ln1":1064,"ln2":1062,"content":" "},{"type":"del","del":true,"ln":1065,"content":"-toolbar[mode=\"text\"] #go-button-stack {"},{"type":"del","del":true,"ln":1066,"content":"-  padding: 0;"},{"type":"del","del":true,"ln":1067,"content":"-}"},{"type":"del","del":true,"ln":1068,"content":"-"},{"type":"normal","normal":true,"ln1":1069,"ln2":1063,"content":" #go-button > .toolbarbutton-icon {"},{"type":"normal","normal":true,"ln1":1070,"ln2":1064,"content":"   margin: 0;"},{"type":"normal","normal":true,"ln1":1071,"ln2":1065,"content":" }"}],"oldStart":1062,"oldLines":10,"newStart":1060,"newLines":6},{"content":"@@ -1104,8 +1098,7 @@ toolbar:not([mode=\"text\"]) #star-button[starred=\"true\"],","changes":[{"type":"normal","normal":true,"ln1":1104,"ln2":1098,"content":" }"},{"type":"normal","normal":true,"ln1":1105,"ln2":1099,"content":" "},{"type":"normal","normal":true,"ln1":1106,"ln2":1100,"content":" #star-button > .toolbarbutton-icon {"},{"type":"del","del":true,"ln":1107,"content":"-  margin-left: 3px;"},{"type":"del","del":true,"ln":1108,"content":"-  margin-right: 3px;"},{"type":"add","add":true,"ln":1101,"content":"+  margin: 3px;"},{"type":"normal","normal":true,"ln1":1109,"ln2":1102,"content":" }"},{"type":"normal","normal":true,"ln1":1110,"ln2":1103,"content":" "},{"type":"normal","normal":true,"ln1":1111,"ln2":1104,"content":" /* ::::: content area ::::: */"}],"oldStart":1104,"oldLines":8,"newStart":1098,"newLines":7}],"deletions":16,"additions":9,"from":"browser/themes/winstripe/browser/browser.css","to":"browser/themes/winstripe/browser/browser.css","index":["3ab3175..293a65a","100644"]},{"chunks":[{"content":"@@ -163,10 +163,6 @@ toolbar[mode=\"text\"] .search-go-button {","changes":[{"type":"normal","normal":true,"ln1":163,"ln2":163,"content":"   -moz-appearance: toolbarbutton;"},{"type":"normal","normal":true,"ln1":164,"ln2":164,"content":" }"},{"type":"normal","normal":true,"ln1":165,"ln2":165,"content":" "},{"type":"del","del":true,"ln":166,"content":"-toolbar[mode=\"text\"] .search-go-button-stack {"},{"type":"del","del":true,"ln":167,"content":"-  padding: 0px;"},{"type":"del","del":true,"ln":168,"content":"-}"},{"type":"del","del":true,"ln":169,"content":"-"},{"type":"normal","normal":true,"ln1":170,"ln2":166,"content":" toolbar[mode=\"text\"] .search-go-button {"},{"type":"normal","normal":true,"ln1":171,"ln2":167,"content":"   background-image: none;"},{"type":"normal","normal":true,"ln1":172,"ln2":168,"content":"   list-style-image: none;"}],"oldStart":163,"oldLines":10,"newStart":163,"newLines":6}],"deletions":4,"additions":0,"from":"browser/themes/winstripe/browser/searchbar.css","to":"browser/themes/winstripe/browser/searchbar.css","index":["93e6250..2bb518e","100644"]}]}