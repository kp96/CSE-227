Index: mozilla/mailnews/extensions/smime/resources/content/certFetchingStatus.js
===================================================================
RCS file: /cvsroot/mozilla/mailnews/extensions/smime/resources/content/certFetchingStatus.js,v
retrieving revision 1.8
diff -u -u -r1.8 certFetchingStatus.js
--- mozilla/mailnews/extensions/smime/resources/content/certFetchingStatus.js	31 Oct 2006 18:38:52 -0000	1.8
+++ mozilla/mailnews/extensions/smime/resources/content/certFetchingStatus.js	13 Nov 2006 04:10:38 -0000
@@ -314,19 +314,15 @@
 
 
 function getProxyOnUIThread(aObject, aInterface) {
-    var eventQSvc = Components.
-            classes["@mozilla.org/event-queue-service;1"].
-            getService(Components.interfaces.nsIEventQueueService);
-
-    var uiQueue = eventQSvc.
-            getSpecialEventQueue(Components.interfaces.
-            nsIEventQueueService.UI_THREAD_EVENT_QUEUE);
+    var mainThread = Components.
+            classes["@mozilla.org/thread-manager;1"].
+            getService().mainThread;
 
     var proxyMgr = Components.
             classes["@mozilla.org/xpcomproxy;1"].
             getService(Components.interfaces.nsIProxyObjectManager);
 
-    return proxyMgr.getProxyForObject(uiQueue,
+    return proxyMgr.getProxyForObject(mainThread,
             aInterface, aObject, 5);
-    // 5 == PROXY_ALWAYS | PROXY_SYNC
+    // 5 == NS_PROXY_ALWAYS | NS_PROXY_SYNC
 }
