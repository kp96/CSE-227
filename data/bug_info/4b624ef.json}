{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas4b624ef\""},"diff":[{"chunks":[{"content":"@@ -1839,6 +1839,7 @@ NSEvent* gLastDragEvent = nil;","changes":[{"type":"normal","normal":true,"ln1":1839,"ln2":1839,"content":"                                                           NSFilesPromisePboardType,"},{"type":"normal","normal":true,"ln1":1840,"ln2":1840,"content":"                                                           kWildcardPboardType,"},{"type":"normal","normal":true,"ln1":1841,"ln2":1841,"content":"                                                           kCorePboardType_url,"},{"type":"add","add":true,"ln":1842,"content":"+                                                          kCorePboardType_urld,"},{"type":"normal","normal":true,"ln1":1842,"ln2":1843,"content":"                                                           kCorePboardType_urln,"},{"type":"normal","normal":true,"ln1":1843,"ln2":1844,"content":"                                                           nil]];"},{"type":"normal","normal":true,"ln1":1844,"ln2":1845,"content":" "}],"oldStart":1839,"oldLines":6,"newStart":1839,"newLines":7}],"deletions":0,"additions":1,"from":"widget/src/cocoa/nsChildView.mm","to":"widget/src/cocoa/nsChildView.mm","index":["dbbc31d..65be888","100644"]},{"chunks":[{"content":"@@ -492,6 +492,8 @@ nsClipboard::PasteboardDictFromTransferable(nsITransferable* aTransferable)","changes":[{"type":"normal","normal":true,"ln1":492,"ln2":492,"content":"         NSString *nativeTitle = [[NSString alloc] initWithCharacters:urlTitle.get() length:urlTitle.Length()];"},{"type":"normal","normal":true,"ln1":493,"ln2":493,"content":"         // be nice to Carbon apps, normalize the receiver's contents using Form C."},{"type":"normal","normal":true,"ln1":494,"ln2":494,"content":"         [pasteboardOutputDict setObject:[nativeTitle precomposedStringWithCanonicalMapping] forKey:kCorePboardType_urln];"},{"type":"add","add":true,"ln":495,"content":"+        // Also put the title out as 'urld', since some recipients will look for that."},{"type":"add","add":true,"ln":496,"content":"+        [pasteboardOutputDict setObject:[nativeTitle precomposedStringWithCanonicalMapping] forKey:kCorePboardType_urld];"},{"type":"normal","normal":true,"ln1":495,"ln2":497,"content":"         [nativeTitle release];"},{"type":"normal","normal":true,"ln1":496,"ln2":498,"content":"       }"},{"type":"normal","normal":true,"ln1":497,"ln2":499,"content":" "}],"oldStart":492,"oldLines":6,"newStart":492,"newLines":8}],"deletions":0,"additions":2,"from":"widget/src/cocoa/nsClipboard.mm","to":"widget/src/cocoa/nsClipboard.mm","index":["8560309..a66998e","100644"]},{"chunks":[{"content":"@@ -45,6 +45,7 @@","changes":[{"type":"normal","normal":true,"ln1":45,"ln2":45,"content":" "},{"type":"normal","normal":true,"ln1":46,"ln2":46,"content":" extern NSString* const kWildcardPboardType;"},{"type":"normal","normal":true,"ln1":47,"ln2":47,"content":" extern NSString* const kCorePboardType_url;"},{"type":"add","add":true,"ln":48,"content":"+extern NSString* const kCorePboardType_urld;"},{"type":"normal","normal":true,"ln1":48,"ln2":49,"content":" extern NSString* const kCorePboardType_urln;"},{"type":"normal","normal":true,"ln1":49,"ln2":50,"content":" "},{"type":"normal","normal":true,"ln1":50,"ln2":51,"content":" class nsDragService : public nsBaseDragService"}],"oldStart":45,"oldLines":6,"newStart":45,"newLines":7}],"deletions":0,"additions":1,"from":"widget/src/cocoa/nsDragService.h","to":"widget/src/cocoa/nsDragService.h","index":["ce94490..4fe2cf9","100644"]},{"chunks":[{"content":"@@ -84,6 +84,7 @@ nsISupportsArray *gDraggedTransferables = nsnull;","changes":[{"type":"normal","normal":true,"ln1":84,"ln2":84,"content":" "},{"type":"normal","normal":true,"ln1":85,"ln2":85,"content":" NSString* const kWildcardPboardType = @\"MozillaWildcard\";"},{"type":"normal","normal":true,"ln1":86,"ln2":86,"content":" NSString* const kCorePboardType_url  = @\"CorePasteboardFlavorType 0x75726C20\"; // 'url '  url"},{"type":"add","add":true,"ln":87,"content":"+NSString* const kCorePboardType_urld = @\"CorePasteboardFlavorType 0x75726C64\"; // 'urld'  desc"},{"type":"normal","normal":true,"ln1":87,"ln2":88,"content":" NSString* const kCorePboardType_urln = @\"CorePasteboardFlavorType 0x75726C6E\"; // 'urln'  title"},{"type":"normal","normal":true,"ln1":88,"ln2":89,"content":" "},{"type":"normal","normal":true,"ln1":89,"ln2":90,"content":" nsDragService::nsDragService()"}],"oldStart":84,"oldLines":6,"newStart":84,"newLines":7},{"content":"@@ -135,6 +136,7 @@ static nsresult SetUpDragClipboard(nsISupportsArray* aTransferableArray)","changes":[{"type":"normal","normal":true,"ln1":135,"ln2":136,"content":"       id currentValue = [pasteboardOutputDict valueForKey:currentKey];"},{"type":"normal","normal":true,"ln1":136,"ln2":137,"content":"       if (currentKey == NSStringPboardType ||"},{"type":"normal","normal":true,"ln1":137,"ln2":138,"content":"           currentKey == kCorePboardType_url ||"},{"type":"add","add":true,"ln":139,"content":"+          currentKey == kCorePboardType_urld ||"},{"type":"normal","normal":true,"ln1":138,"ln2":140,"content":"           currentKey == kCorePboardType_urln) {"},{"type":"normal","normal":true,"ln1":139,"ln2":141,"content":"         [dragPBoard setString:currentValue forType:currentKey];"},{"type":"normal","normal":true,"ln1":140,"ln2":142,"content":"       }"}],"oldStart":135,"oldLines":6,"newStart":136,"newLines":7}],"deletions":0,"additions":2,"from":"widget/src/cocoa/nsDragService.mm","to":"widget/src/cocoa/nsDragService.mm","index":["f24e684..b6ae738","100644"]}]}