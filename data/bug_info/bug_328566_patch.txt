Index: nsHTMLInputElement.cpp
===================================================================
RCS file: /cvsroot/mozilla/content/html/content/src/nsHTMLInputElement.cpp,v
retrieving revision 1.423
diff -u -8 -p -r1.423 nsHTMLInputElement.cpp
--- nsHTMLInputElement.cpp	9 Feb 2006 16:34:06 -0000	1.423
+++ nsHTMLInputElement.cpp	26 Feb 2006 19:58:56 -0000
@@ -1271,16 +1271,23 @@ nsHTMLInputElement::HandleDOMEvent(nsPre
 
       if (uiStyle->mUserInput == NS_STYLE_USER_INPUT_NONE ||
           uiStyle->mUserInput == NS_STYLE_USER_INPUT_DISABLED) {
         return NS_OK;
       }
     }
   }
 
+  // Don't allow mutation events which are targeted somewhere inside
+  // <input>, except if they are dispatched to the element itself.
+  if (!(NS_EVENT_FLAG_INIT & aFlags) &&
+      aEvent->eventStructType == NS_MUTATION_EVENT) {
+    return NS_OK;
+  }
+
   //
   // Web pages expect the value of a radio button or checkbox to be set
   // *before* onclick and DOMActivate fire, and they expect that if they set
   // the value explicitly during onclick or DOMActivate it will not be toggled
   // or any such nonsense.
   // In order to support that (bug 57137 and 58460 are examples) we toggle
   // the checked attribute *first*, and then fire onclick.  If the user
   // returns false, we reset the control to the old checked value.  Otherwise,
