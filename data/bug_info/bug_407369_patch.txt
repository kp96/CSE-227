Index: browser/base/content/browser.js
===================================================================
RCS file: /cvsroot/mozilla/browser/base/content/browser.js,v
retrieving revision 1.909
diff -p -u -1 -2 -r1.909 browser.js
--- browser/base/content/browser.js	6 Dec 2007 07:36:38 -0000	1.909
+++ browser/base/content/browser.js	10 Dec 2007 21:10:50 -0000
@@ -2145,36 +2145,36 @@ function BrowserOnCommand(event) {
     if (/^about:neterror\?e=nssBadCert/.test(event.originalTarget.ownerDocument.documentURI)) {
       var ot = event.originalTarget;
       var errorDoc = ot.ownerDocument;
       
       if (ot == errorDoc.getElementById('exceptionDialogButton')) {
         var params = { exceptionAdded : false };
         
         try {
           switch (gPrefService.getIntPref("browser.ssl_override_behavior")) {
             case 2 : // Pre-fetch & pre-populate
               params.prefetchCert = true;
             case 1 : // Pre-populate
-              params.location = content.location.href;
+              params.location = errorDoc.location.href;
           }
         } catch (e) {
           Components.utils.reportError("Couldn't get ssl_override pref: " + e);
         }
         
         window.openDialog('chrome://pippki/content/exceptionDialog.xul',
                           '','chrome,centerscreen,modal', params);
         
         // If the user added the exception cert, attempt to reload the page
         if (params.exceptionAdded)
-          content.location.reload();
+          errorDoc.location.reload();
       }
       else if (ot == errorDoc.getElementById('getMeOutOfHereButton')) {
         // Redirect them to a known-functioning page, default start page
         var prefs = Cc["@mozilla.org/preferences-service;1"]
                     .getService(Ci.nsIPrefService).getDefaultBranch(null);
         var url = "about:blank";
         try {
           url = prefs.getComplexValue("browser.startup.homepage",
                                       Ci.nsIPrefLocalizedString).data;
           // If url is a pipe-delimited set of pages, just take the first one.
           if (url.indexOf("|") != -1)
             url = url.split("|")[0];
