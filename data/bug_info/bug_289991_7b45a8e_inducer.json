{"bug_id":289991,"commitHash":"7b45a8e","commit_info":{"sha":"7b45a8e4ba75482de36296fbdaa10e4558d3783d","commit":{"author":{"name":"bzbarsky%mit.edu","email":"bzbarsky%mit.edu","date":"2005-04-12T05:13:26Z"},"committer":{"name":"bzbarsky%mit.edu","email":"bzbarsky%mit.edu","date":"2005-04-12T05:13:26Z"},"message":"Fix crashes when privilegeManager methods are called by setting our our param\non success return.  Bug 289991 and bug 289925, r=caillon, sr=dbaron, a=dbaron","tree":{"sha":"e2bfc12ee375487dcfa570bdc03d4b40b51fdd16","url":"https://api.github.com/repos/mozilla/gecko-dev/git/trees/e2bfc12ee375487dcfa570bdc03d4b40b51fdd16"},"url":"https://api.github.com/repos/mozilla/gecko-dev/git/commits/7b45a8e4ba75482de36296fbdaa10e4558d3783d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/mozilla/gecko-dev/commits/7b45a8e4ba75482de36296fbdaa10e4558d3783d","html_url":"https://github.com/mozilla/gecko-dev/commit/7b45a8e4ba75482de36296fbdaa10e4558d3783d","comments_url":"https://api.github.com/repos/mozilla/gecko-dev/commits/7b45a8e4ba75482de36296fbdaa10e4558d3783d/comments","author":null,"committer":null,"parents":[{"sha":"ac19c30cce33a1de8eb0e1c6770ff4020af2f729","url":"https://api.github.com/repos/mozilla/gecko-dev/commits/ac19c30cce33a1de8eb0e1c6770ff4020af2f729","html_url":"https://github.com/mozilla/gecko-dev/commit/ac19c30cce33a1de8eb0e1c6770ff4020af2f729"}],"stats":{"total":4,"additions":2,"deletions":2},"files":[{"sha":"ecf183cc678c652e99ccdf03a05dab2a8488bdb3","filename":"caps/src/nsScriptSecurityManager.cpp","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/mozilla/gecko-dev/blob/7b45a8e4ba75482de36296fbdaa10e4558d3783d/caps/src/nsScriptSecurityManager.cpp","raw_url":"https://github.com/mozilla/gecko-dev/raw/7b45a8e4ba75482de36296fbdaa10e4558d3783d/caps/src/nsScriptSecurityManager.cpp","contents_url":"https://api.github.com/repos/mozilla/gecko-dev/contents/caps/src/nsScriptSecurityManager.cpp?ref=7b45a8e4ba75482de36296fbdaa10e4558d3783d","patch":"@@ -657,8 +657,7 @@ nsScriptSecurityManager::CheckPropertyAccessImpl(PRUint32 aAction,\n                 nsCOMPtr<nsIPrincipal> objectPrincipal;\n                 if(aJSObject)\n                 {\n-                    objectPrincipal =\n-                        doGetObjectPrincipal(cx, aJSObject);\n+                    objectPrincipal = doGetObjectPrincipal(cx, aJSObject);\n                     if (!objectPrincipal)\n                         return NS_ERROR_FAILURE;\n                 }\n@@ -1910,6 +1909,7 @@ nsScriptSecurityManager::GetPrincipalAndFrame(JSContext *cx,\n             if (result)\n             {\n                 NS_ASSERTION(NS_SUCCEEDED(*rv), \"Weird return\");\n+                *frameResult = fp;\n                 return result;\n             }\n         }"}]},"blames":["4756b716","6d36e81b","b405b527"]}