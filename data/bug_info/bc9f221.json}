{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basbc9f221\""},"diff":[{"chunks":[{"content":"@@ -91,6 +91,7 @@ ACCESSIBILITY_ATOM(area, \"area\")","changes":[{"type":"normal","normal":true,"ln1":91,"ln2":91,"content":" ACCESSIBILITY_ATOM(blockquote, \"blockquote\")"},{"type":"normal","normal":true,"ln1":92,"ln2":92,"content":" ACCESSIBILITY_ATOM(br, \"br\")"},{"type":"normal","normal":true,"ln1":93,"ln2":93,"content":" ACCESSIBILITY_ATOM(body, \"body\")"},{"type":"add","add":true,"ln":94,"content":"+ACCESSIBILITY_ATOM(caption, \"caption\") // XUL"},{"type":"normal","normal":true,"ln1":94,"ln2":95,"content":" ACCESSIBILITY_ATOM(choices, \"choices\") // XForms"},{"type":"normal","normal":true,"ln1":95,"ln2":96,"content":" ACCESSIBILITY_ATOM(description, \"description\")    // XUL"},{"type":"normal","normal":true,"ln1":96,"ln2":97,"content":" ACCESSIBILITY_ATOM(dd, \"dd\")"}],"oldStart":91,"oldLines":6,"newStart":91,"newLines":7}],"deletions":0,"additions":1,"from":"accessible/src/base/nsAccessibilityAtomList.h","to":"accessible/src/base/nsAccessibilityAtomList.h","index":["f940095..c432957","100755"]},{"chunks":[{"content":"@@ -82,6 +82,36 @@ nsXULTextAccessible::GetState(PRUint32 *aState, PRUint32 *aExtraState)","changes":[{"type":"normal","normal":true,"ln1":82,"ln2":82,"content":"   return NS_OK;"},{"type":"normal","normal":true,"ln1":83,"ln2":83,"content":" }"},{"type":"normal","normal":true,"ln1":84,"ln2":84,"content":" "},{"type":"add","add":true,"ln":85,"content":"+NS_IMETHODIMP"},{"type":"add","add":true,"ln":86,"content":"+nsXULTextAccessible::GetAccessibleRelated(PRUint32 aRelationType,"},{"type":"add","add":true,"ln":87,"content":"+                                          nsIAccessible **aRelated)"},{"type":"add","add":true,"ln":88,"content":"+{"},{"type":"add","add":true,"ln":89,"content":"+  nsresult rv ="},{"type":"add","add":true,"ln":90,"content":"+    nsHyperTextAccessibleWrap::GetAccessibleRelated(aRelationType, aRelated);"},{"type":"add","add":true,"ln":91,"content":"+  NS_ENSURE_SUCCESS(rv, rv);"},{"type":"add","add":true,"ln":92,"content":"+  if (*aRelated) {"},{"type":"add","add":true,"ln":93,"content":"+    return NS_OK;"},{"type":"add","add":true,"ln":94,"content":"+  }"},{"type":"add","add":true,"ln":95,"content":"+"},{"type":"add","add":true,"ln":96,"content":"+  nsIContent *content = GetRoleContent(mDOMNode);"},{"type":"add","add":true,"ln":97,"content":"+  if (!content)"},{"type":"add","add":true,"ln":98,"content":"+    return NS_ERROR_FAILURE;"},{"type":"add","add":true,"ln":99,"content":"+"},{"type":"add","add":true,"ln":100,"content":"+  if (aRelationType == nsIAccessibleRelation::RELATION_LABEL_FOR) {"},{"type":"add","add":true,"ln":101,"content":"+    // Caption is the label for groupbox"},{"type":"add","add":true,"ln":102,"content":"+    nsIContent *parent = content->GetParent();"},{"type":"add","add":true,"ln":103,"content":"+    if (parent && parent->Tag() == nsAccessibilityAtoms::caption) {"},{"type":"add","add":true,"ln":104,"content":"+      nsCOMPtr<nsIAccessible> parentAccessible;"},{"type":"add","add":true,"ln":105,"content":"+      GetParent(getter_AddRefs(parentAccessible));"},{"type":"add","add":true,"ln":106,"content":"+      if (Role(parentAccessible) == nsIAccessibleRole::ROLE_GROUPING) {"},{"type":"add","add":true,"ln":107,"content":"+        parentAccessible.swap(*aRelated);"},{"type":"add","add":true,"ln":108,"content":"+      }"},{"type":"add","add":true,"ln":109,"content":"+    }"},{"type":"add","add":true,"ln":110,"content":"+  }"},{"type":"add","add":true,"ln":111,"content":"+"},{"type":"add","add":true,"ln":112,"content":"+  return NS_OK;"},{"type":"add","add":true,"ln":113,"content":"+}"},{"type":"add","add":true,"ln":114,"content":"+"},{"type":"normal","normal":true,"ln1":85,"ln2":115,"content":" /**"},{"type":"normal","normal":true,"ln1":86,"ln2":116,"content":"   * For XUL tooltip"},{"type":"normal","normal":true,"ln1":87,"ln2":117,"content":"   */"}],"oldStart":82,"oldLines":6,"newStart":82,"newLines":36}],"deletions":0,"additions":30,"from":"accessible/src/xul/nsXULTextAccessible.cpp","to":"accessible/src/xul/nsXULTextAccessible.cpp","index":["10c57e5..bf413d8d","100644"]},{"chunks":[{"content":"@@ -54,6 +54,8 @@ public:","changes":[{"type":"normal","normal":true,"ln1":54,"ln2":54,"content":"   NS_IMETHOD GetName(nsAString& _retval); "},{"type":"normal","normal":true,"ln1":55,"ln2":55,"content":"   NS_IMETHOD GetState(PRUint32 *aState, PRUint32 *aExtraState);"},{"type":"normal","normal":true,"ln1":56,"ln2":56,"content":"   NS_IMETHOD GetRole(PRUint32 *aRole) { *aRole = nsIAccessibleRole::ROLE_LABEL; return NS_OK; }"},{"type":"add","add":true,"ln":57,"content":"+  NS_IMETHOD GetAccessibleRelated(PRUint32 aRelationType,"},{"type":"add","add":true,"ln":58,"content":"+                                  nsIAccessible **aRelated);"},{"type":"normal","normal":true,"ln1":57,"ln2":59,"content":" };"},{"type":"normal","normal":true,"ln1":58,"ln2":60,"content":" "},{"type":"normal","normal":true,"ln1":59,"ln2":61,"content":" class nsXULTooltipAccessible : public nsLeafAccessible"}],"oldStart":54,"oldLines":6,"newStart":54,"newLines":8}],"deletions":0,"additions":2,"from":"accessible/src/xul/nsXULTextAccessible.h","to":"accessible/src/xul/nsXULTextAccessible.h","index":["b3a6b5b..fcbbad5","100644"]},{"chunks":[{"content":"@@ -44,15 +44,6 @@","changes":[{"type":"normal","normal":true,"ln1":44,"ln2":44,"content":"                    xbl:inherits=\"default,value=label,crop,accesskey\"/>"},{"type":"normal","normal":true,"ln1":45,"ln2":45,"content":"       </children>"},{"type":"normal","normal":true,"ln1":46,"ln2":46,"content":"     </content>"},{"type":"del","del":true,"ln":47,"content":"-"},{"type":"del","del":true,"ln":48,"content":"-    <implementation>"},{"type":"del","del":true,"ln":49,"content":"-      <constructor>"},{"type":"del","del":true,"ln":50,"content":"-        if (this.parentNode.id) {"},{"type":"del","del":true,"ln":51,"content":"-          document.getAnonymousNodes(this)[1]"},{"type":"del","del":true,"ln":52,"content":"-                  .setAttribute(\"control\", this.parentNode.id);"},{"type":"del","del":true,"ln":53,"content":"-        }"},{"type":"del","del":true,"ln":54,"content":"-      </constructor>"},{"type":"del","del":true,"ln":55,"content":"-    </implementation>"},{"type":"normal","normal":true,"ln1":56,"ln2":47,"content":"   </binding>"},{"type":"normal","normal":true,"ln1":57,"ln2":48,"content":" "},{"type":"normal","normal":true,"ln1":58,"ln2":49,"content":" </bindings>"}],"oldStart":44,"oldLines":15,"newStart":44,"newLines":6}],"deletions":9,"additions":0,"from":"toolkit/content/widgets/groupbox.xml","to":"toolkit/content/widgets/groupbox.xml","index":["de86845..63130ab","100644"]}]}