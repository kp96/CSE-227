{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basecd37da\""},"diff":"\"ecd37da [OS/2] Make debug output in gfxOS2Surface a bit more useful\\ndiff --git a/gfx/thebes/src/gfxOS2Surface.cpp b/gfx/thebes/src/gfxOS2Surface.cpp\\nindex 280da42..a5d8b55 100644\\n--- a/gfx/thebes/src/gfxOS2Surface.cpp\\n+++ b/gfx/thebes/src/gfxOS2Surface.cpp\\n@@ -47,13 +47,14 @@ gfxOS2Surface::gfxOS2Surface(HPS aPS, const gfxIntSize& aSize)\\n     : mOwnsPS(PR_FALSE), mPS(aPS), mSize(aSize)\\n {\\n #ifdef DEBUG_thebes_2\\n-    printf(\\\"gfxOS2Surface::gfxOS2Surface(HPS, ...)\\\\n\\\");\\n+    printf(\\\"gfxOS2Surface[%#x]::gfxOS2Surface(HPS=%#x, ...)\\\\n\\\",\\n+           (unsigned int)this, (unsigned int)aPS);\\n #endif\\n \\n     cairo_surface_t *surf = cairo_os2_surface_create(mPS, mSize.width, mSize.height);\\n #ifdef DEBUG_thebes_2\\n-    printf(\\\"  type(%#x)=%d (own=%d, h/w=%d/%d)\\\\n\\\", (unsigned int)surf,\\n-           cairo_surface_get_type(surf), mOwnsPS, mSize.width, mSize.height);\\n+    printf(\\\"  type(%#x)=%d (own=%d, ID=%#x, h/w=%d/%d)\\\\n\\\", (unsigned int)surf,\\n+           cairo_surface_get_type(surf), mOwnsPS, (unsigned int)mPS, mSize.width, mSize.height);\\n #endif\\n     // XXX for now uncomment the mark_dirty function, see bug 371505\\n     //cairo_surface_mark_dirty(surf);\\n@@ -63,7 +64,8 @@ gfxOS2Surface::gfxOS2Surface(HPS aPS, const gfxIntSize& aSize)\\n gfxOS2Surface::gfxOS2Surface(HWND aWnd)\\n {\\n #ifdef DEBUG_thebes_2\\n-    printf(\\\"gfxOS2Surface::gfxOS2Surface(HWND)\\\\n\\\");\\n+    printf(\\\"gfxOS2Surface[%#x]::gfxOS2Surface(HWND=%#x)\\\\n\\\",\\n+           (unsigned int)this, (unsigned int)aWnd);\\n #endif\\n \\n     if (!mPS) {\\n@@ -82,8 +84,8 @@ gfxOS2Surface::gfxOS2Surface(HWND aWnd)\\n     if (mSize.height == 0) mSize.height = 10; // cairo_os2_surface_create() return something sensible\\n     cairo_surface_t *surf = cairo_os2_surface_create(mPS, mSize.width, mSize.height);\\n #ifdef DEBUG_thebes_2\\n-    printf(\\\"  type(%#x)=%d (own=%d, h/w=%d/%d)\\\\n\\\", (unsigned int)surf,\\n-           cairo_surface_get_type(surf), mOwnsPS, mSize.width, mSize.height);\\n+    printf(\\\"  type(%#x)=%d (own=%d, ID=%#x, h/w=%d/%d)\\\\n\\\", (unsigned int)surf,\\n+           cairo_surface_get_type(surf), mOwnsPS, (unsigned int)mPS, mSize.width, mSize.height);\\n #endif\\n     cairo_os2_surface_set_hwnd(surf, aWnd); // XXX is this needed here??\\n     // XXX for now uncomment the mark_dirty function, see bug 371505\\n@@ -94,7 +96,7 @@ gfxOS2Surface::gfxOS2Surface(HWND aWnd)\\n gfxOS2Surface::~gfxOS2Surface()\\n {\\n #ifdef DEBUG_thebes_2\\n-    printf(\\\"gfxOS2Surface::~gfxOS2Surface()\\\\n\\\");\\n+    printf(\\\"gfxOS2Surface[%#x]::~gfxOS2Surface()\\\\n\\\", (unsigned int)this);\\n #endif\\n \\n     if (mOwnsPS)\\n\""}