{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basa938e5c\""},"diff":"\"a938e5c Bug 387247 - Use toolkit printUtils.js instead of communicator printing.js, SeaMonkey part, r=iann, sr=neil\\ndiff --git a/editor/ui/composer/content/ComposerCommands.js b/editor/ui/composer/content/ComposerCommands.js\\nindex 0cca290..81bc6fb 100644\\n--- a/editor/ui/composer/content/ComposerCommands.js\\n+++ b/editor/ui/composer/content/ComposerCommands.js\\n@@ -2307,7 +2307,7 @@ var nsPrintCommand =\\n     // In editor.js\\n     FinishHTMLSource();\\n     try {\\n-      NSPrint();\\n+      PrintUtils.print();\\n     } catch (e) {}\\n   }\\n };\\n@@ -2327,7 +2327,7 @@ var nsPrintSetupCommand =\\n   {\\n     // In editor.js\\n     FinishHTMLSource();\\n-    NSPrintSetup();\\n+    PrintUtils.showPageSetup();\\n   }\\n };\\n \\ndiff --git a/editor/ui/composer/content/editor.js b/editor/ui/composer/content/editor.js\\nindex c3f2152..0935711 100644\\n--- a/editor/ui/composer/content/editor.js\\n+++ b/editor/ui/composer/content/editor.js\\n@@ -96,12 +96,6 @@ const kEditorToolbarPrefs = \\\"editor.toolbars.showbutton.\\\";\\n const kUseCssPref         = \\\"editor.use_css\\\";\\n const kCRInParagraphsPref = \\\"editor.CR_creates_new_p\\\";\\n \\n-function getEngineWebBrowserPrint()\\n-{\\n-  return content.QueryInterface(Components.interfaces.nsIInterfaceRequestor)\\n-                .getInterface(Components.interfaces.nsIWebBrowserPrint);\\n-}\\n-\\n function ShowHideToolbarSeparators(toolbar) {\\n   var childNodes = toolbar.childNodes;\\n   var separator = null;\\ndiff --git a/editor/ui/composer/content/editor.xul b/editor/ui/composer/content/editor.xul\\nindex 7dcd9f1..57e4ea2 100644\\n--- a/editor/ui/composer/content/editor.xul\\n+++ b/editor/ui/composer/content/editor.xul\\n@@ -86,7 +86,7 @@\\n   <script type=\\\"application/x-javascript\\\" src=\\\"chrome://editor/content/publishprefs.js\\\"/>\\n   <script type=\\\"application/x-javascript\\\" src=\\\"chrome://communicator/content/contentAreaDD.js\\\"/>\\n   <script type=\\\"application/x-javascript\\\" src=\\\"chrome://communicator/content/contentAreaClick.js\\\"/>\\n-  <script type=\\\"application/x-javascript\\\" src=\\\"chrome://communicator/content/printing.js\\\"/>\\n+  <script type=\\\"application/x-javascript\\\" src=\\\"chrome://global/content/printUtils.js\\\"/>\\n   <script type=\\\"application/x-javascript\\\" src=\\\"chrome://global/content/nsDragAndDrop.js\\\"/>\\n \\n   <popupset id=\\\"editorContentContextSet\\\"/>\\n\""}