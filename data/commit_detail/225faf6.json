{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas225faf6\""},"diff":"\"225faf6 Bug 387646 - Endcap cleanup. r+a=mconnor\\ndiff --git a/browser/base/content/browser.xul b/browser/base/content/browser.xul\\nindex 29cd751..4426aff 100644\\n--- a/browser/base/content/browser.xul\\n+++ b/browser/base/content/browser.xul\\n@@ -216,85 +216,65 @@\\n       <toolbaritem id=\\\"urlbar-container\\\" align=\\\"center\\\" flex=\\\"400\\\" persist=\\\"width\\\"\\n                    title=\\\"&locationItem.title;\\\" class=\\\"chromeclass-location\\\">\\n         <hbox id=\\\"urlbar-button-box\\\" flex=\\\"1\\\">\\n-            <textbox id=\\\"urlbar\\\" flex=\\\"1\\\"\\n-                     chromedir=\\\"&locale.dir;\\\"\\n-                     type=\\\"autocomplete\\\"\\n-                     autocompletesearch=\\\"history\\\" \\n-                     autocompletepopup=\\\"PopupAutoComplete\\\"\\n-                     completeselectedindex=\\\"true\\\"\\n-                     tabscrolling=\\\"true\\\"\\n-                     showcommentcolumn=\\\"true\\\"\\n-                     showimagecolumn=\\\"true\\\" \\n-                     enablehistory=\\\"true\\\"\\n-                     maxrows=\\\"10\\\"\\n-                     newlines=\\\"stripsurroundingwhitespace\\\"\\n-                     oninput=\\\"gBrowser.userTypedValue = this.value\\\"\\n-                     ontextentered=\\\"return handleURLBarCommand(param);\\\"\\n-                     ontextreverted=\\\"return handleURLBarRevert();\\\">\\n-              <deck id=\\\"page-proxy-deck\\\" onclick=\\\"PageProxyClickHandler(event);\\\">\\n-                <image id=\\\"page-proxy-button\\\"\\n-                        ondraggesture=\\\"PageProxyDragGesture(event);\\\"\\n-                        tooltiptext=\\\"&proxyIcon.tooltip;\\\"/>\\n-                <image id=\\\"page-proxy-favicon\\\" validate=\\\"never\\\"\\n-                        ondraggesture=\\\"PageProxyDragGesture(event);\\\"\\n-                        onload=\\\"this.parentNode.selectedIndex = 1;\\n-                                event.stopPropagation();\\\"\\n-                        onerror=\\\"gBrowser.addToMissedIconCache(this.src);\\n-                                 this.removeAttribute('src');\\n-                                 this.parentNode.selectedIndex = 0;\\\"\\n-                        tooltiptext=\\\"&proxyIcon.tooltip;\\\"/>\\n-              </deck>\\n-              <hbox id=\\\"urlbar-icons\\\">\\n-                <button type=\\\"menu\\\"\\n-                        style=\\\"-moz-user-focus: none\\\"\\n-                        class=\\\"plain\\\"\\n-                        id=\\\"feed-button\\\"\\n-                        chromedir=\\\"&locale.dir;\\\"\\n-                        onclick=\\\"return FeedHandler.onFeedButtonClick(event);\\\">\\n-                  <menupopup position=\\\"after_end\\\"\\n-                             onpopupshowing=\\\"return FeedHandler.buildFeedList(this);\\\"\\n-                             oncommand=\\\"return FeedHandler.subscribeToFeed(null, event);\\\"\\n-                             onclick=\\\"checkForMiddleClick(this, event);\\\"/>\\n-                </button>\\n-                <image id=\\\"lock-icon\\\" onclick=\\\"if (event.button == 0) displaySecurityInfo(); event.stopPropagation();\\\"/>\\n+          <textbox id=\\\"urlbar\\\" flex=\\\"1\\\"\\n+                   chromedir=\\\"&locale.dir;\\\"\\n+                   type=\\\"autocomplete\\\"\\n+                   autocompletesearch=\\\"history\\\" \\n+                   autocompletepopup=\\\"PopupAutoComplete\\\"\\n+                   completeselectedindex=\\\"true\\\"\\n+                   tabscrolling=\\\"true\\\"\\n+                   showcommentcolumn=\\\"true\\\"\\n+                   showimagecolumn=\\\"true\\\" \\n+                   enablehistory=\\\"true\\\"\\n+                   maxrows=\\\"10\\\"\\n+                   newlines=\\\"stripsurroundingwhitespace\\\"\\n+                   oninput=\\\"gBrowser.userTypedValue = this.value\\\"\\n+                   ontextentered=\\\"return handleURLBarCommand(param);\\\"\\n+                   ontextreverted=\\\"return handleURLBarRevert();\\\">\\n+            <deck id=\\\"page-proxy-deck\\\" onclick=\\\"PageProxyClickHandler(event);\\\">\\n+              <image id=\\\"page-proxy-button\\\"\\n+                     ondraggesture=\\\"PageProxyDragGesture(event);\\\"\\n+                     tooltiptext=\\\"&proxyIcon.tooltip;\\\"/>\\n+              <image id=\\\"page-proxy-favicon\\\" validate=\\\"never\\\"\\n+                     ondraggesture=\\\"PageProxyDragGesture(event);\\\"\\n+                     onload=\\\"this.parentNode.selectedIndex = 1;\\n+                             event.stopPropagation();\\\"\\n+                     onerror=\\\"gBrowser.addToMissedIconCache(this.src);\\n+                              this.removeAttribute('src');\\n+                              this.parentNode.selectedIndex = 0;\\\"\\n+                     tooltiptext=\\\"&proxyIcon.tooltip;\\\"/>\\n+            </deck>\\n+            <hbox id=\\\"urlbar-icons\\\">\\n+              <button type=\\\"menu\\\"\\n+                      style=\\\"-moz-user-focus: none\\\"\\n+                      class=\\\"plain\\\"\\n+                      id=\\\"feed-button\\\"\\n+                      chromedir=\\\"&locale.dir;\\\"\\n+                      onclick=\\\"return FeedHandler.onFeedButtonClick(event);\\\">\\n+                <menupopup position=\\\"after_end\\\"\\n+                           onpopupshowing=\\\"return FeedHandler.buildFeedList(this);\\\"\\n+                           oncommand=\\\"return FeedHandler.subscribeToFeed(null, event);\\\"\\n+                           onclick=\\\"checkForMiddleClick(this, event);\\\"/>\\n+              </button>\\n+              <image id=\\\"lock-icon\\\" onclick=\\\"if (event.button == 0) displaySecurityInfo(); event.stopPropagation();\\\"/>\\n #ifdef MOZ_SAFE_BROWSING\\n-                <image id=\\\"safebrowsing-urlbar-icon\\\" tooltiptext=\\\"&safeb.urlbaricon.tooltip;\\\"\\n-                       level=\\\"safe\\\"\\n-                       onclick=\\\"goDoCommand('safebrowsing-show-warning')\\\" />\\n+              <image id=\\\"safebrowsing-urlbar-icon\\\" tooltiptext=\\\"&safeb.urlbaricon.tooltip;\\\"\\n+                     level=\\\"safe\\\"\\n+                     onclick=\\\"goDoCommand('safebrowsing-show-warning')\\\"/>\\n #endif\\n-              </hbox>\\n-            </textbox>\\n-            <stack id=\\\"go-button-stack\\\">\\n-              <vbox>\\n-                <!-- These image segments allow the button to stretch nicely\\n-                     in larger urlbars. -->\\n-                <image id=\\\"go-button-top\\\"\\n-                       class=\\\"go-button-background\\\"\\n-                       chromedir=\\\"&locale.dir;\\\" />\\n-                <image flex=\\\"1\\\"\\n-                       id=\\\"go-button-mid-top\\\"\\n-                       class=\\\"go-button-background\\\"\\n-                       chromedir=\\\"&locale.dir;\\\" />\\n-                <image flex=\\\"1\\\"\\n-                       id=\\\"go-button-mid-bottom\\\"\\n-                      class=\\\"go-button-background\\\"\\n-                      chromedir=\\\"&locale.dir;\\\" />\\n-                <image id=\\\"go-button-bottom\\\"\\n-                       class=\\\"go-button-background\\\"\\n-                       chromedir=\\\"&locale.dir;\\\" />\\n-              </vbox>\\n-\\t\\t\\t\\t\\t\\t\\t\\n-              <hbox>\\n-                <toolbarbutton id=\\\"star-button\\\" onclick=\\\"if (event.button == 0) PlacesStarButton.onClick(event);\\\"/>\\n-                <toolbarbutton id=\\\"go-button\\\"\\n-                               chromedir=\\\"&locale.dir;\\\"\\n-                               label=\\\"&goEndCap.label;\\\"\\n-                               onclick=\\\"handleURLBarCommand(event);\\\"\\n-                               ondragover=\\\"nsDragAndDrop.dragOver(event, goButtonObserver);\\\"\\n-                               ondragdrop=\\\"nsDragAndDrop.drop(event, goButtonObserver);\\\"\\n-                               ondragexit=\\\"nsDragAndDrop.dragExit(event, goButtonObserver);\\\"\\n-                               tooltiptext=\\\"&goEndCap.tooltip;\\\"/>\\n-              </hbox>\\n+            </hbox>\\n+          </textbox>\\n+          <stack id=\\\"go-button-stack\\\">\\n+            <hbox>\\n+              <toolbarbutton id=\\\"star-button\\\" onclick=\\\"if (event.button == 0) PlacesStarButton.onClick(event);\\\"/>\\n+              <toolbarbutton id=\\\"go-button\\\" chromedir=\\\"&locale.dir;\\\"\\n+                             label=\\\"&goEndCap.label;\\\"\\n+                             onclick=\\\"handleURLBarCommand(event);\\\"\\n+                             ondragover=\\\"nsDragAndDrop.dragOver(event, goButtonObserver);\\\"\\n+                             ondragdrop=\\\"nsDragAndDrop.drop(event, goButtonObserver);\\\"\\n+                             ondragexit=\\\"nsDragAndDrop.dragExit(event, goButtonObserver);\\\"\\n+                             tooltiptext=\\\"&goEndCap.tooltip;\\\"/>\\n+            </hbox>\\n           </stack>\\n         </hbox>\\n       </toolbaritem>\\ndiff --git a/browser/components/search/content/search.xml b/browser/components/search/content/search.xml\\nindex 2d28fdc..9eb5efe 100644\\n--- a/browser/components/search/content/search.xml\\n+++ b/browser/components/search/content/search.xml\\n@@ -102,21 +102,8 @@\\n           </xul:textbox>\\n         </xul:hbox>\\n \\n-        <xul:stack class=\\\"search-go-button-stack\\\">\\n-          <xul:vbox>\\n-            <!-- These image segments allow the button's gradient to stretch\\n-                 nicely in larger urlbars. -->\\n-            <xul:image class=\\\"search-go-button-top search-go-button-bkgnd\\\"\\n-                       chromedir=\\\"&locale.dir;\\\"/>\\n-            <xul:image flex=\\\"1\\\"\\n-                       class=\\\"search-go-button-mid-top search-go-button-bkgnd\\\"\\n-                       chromedir=\\\"&locale.dir;\\\"/>\\n-            <xul:image flex=\\\"1\\\"\\n-                       class=\\\"search-go-button-mid-bottom search-go-button-bkgnd\\\"\\n-                       chromedir=\\\"&locale.dir;\\\"/>\\n-            <xul:image class=\\\"search-go-button-bottom search-go-button-bkgnd\\\"\\n-                       chromedir=\\\"&locale.dir;\\\"/>\\n-          </xul:vbox>\\n+        <xul:stack class=\\\"search-go-button-stack endcap\\\">\\n+          <xul:box class=\\\"endcap-box\\\" chromedir=\\\"&locale.dir;\\\"/>\\n           <xul:toolbarbutton class=\\\"search-go-button\\\"\\n                              anonid=\\\"search-go-button\\\"\\n                              chromedir=\\\"&locale.dir;\\\"\\ndiff --git a/browser/themes/winstripe/browser/Go-bkgnd-rtl.png b/browser/themes/winstripe/browser/Go-bkgnd-rtl.png\\ndeleted file mode 100644\\nindex dce6706..0000000\\nBinary files a/browser/themes/winstripe/browser/Go-bkgnd-rtl.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/Go-bkgnd.png b/browser/themes/winstripe/browser/Go-bkgnd.png\\ndeleted file mode 100644\\nindex a86ffa2..0000000\\nBinary files a/browser/themes/winstripe/browser/Go-bkgnd.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/Go-mid-bottom-rtl.png b/browser/themes/winstripe/browser/Go-mid-bottom-rtl.png\\ndeleted file mode 100644\\nindex fc0cec0..0000000\\nBinary files a/browser/themes/winstripe/browser/Go-mid-bottom-rtl.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/Go-mid-bottom.png b/browser/themes/winstripe/browser/Go-mid-bottom.png\\ndeleted file mode 100644\\nindex 1778721..0000000\\nBinary files a/browser/themes/winstripe/browser/Go-mid-bottom.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/Go-mid-top-rtl.png b/browser/themes/winstripe/browser/Go-mid-top-rtl.png\\ndeleted file mode 100644\\nindex 013534e..0000000\\nBinary files a/browser/themes/winstripe/browser/Go-mid-top-rtl.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/Go-mid-top.png b/browser/themes/winstripe/browser/Go-mid-top.png\\ndeleted file mode 100644\\nindex 0bc26c5..0000000\\nBinary files a/browser/themes/winstripe/browser/Go-mid-top.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/Search-bkgnd-rtl.png b/browser/themes/winstripe/browser/Search-bkgnd-rtl.png\\ndeleted file mode 100644\\nindex 1dcf308..0000000\\nBinary files a/browser/themes/winstripe/browser/Search-bkgnd-rtl.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/Search-bkgnd.png b/browser/themes/winstripe/browser/Search-bkgnd.png\\ndeleted file mode 100644\\nindex 4d8ef34..0000000\\nBinary files a/browser/themes/winstripe/browser/Search-bkgnd.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/Search-mid-bottom-rtl.png b/browser/themes/winstripe/browser/Search-mid-bottom-rtl.png\\ndeleted file mode 100644\\nindex c962c63..0000000\\nBinary files a/browser/themes/winstripe/browser/Search-mid-bottom-rtl.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/Search-mid-bottom.png b/browser/themes/winstripe/browser/Search-mid-bottom.png\\ndeleted file mode 100644\\nindex 9bb7bd5..0000000\\nBinary files a/browser/themes/winstripe/browser/Search-mid-bottom.png and /dev/null differ\\ndiff --git a/browser/themes/winstripe/browser/browser.css b/browser/themes/winstripe/browser/browser.css\\nindex a3e3ced..43cce3b 100644\\n--- a/browser/themes/winstripe/browser/browser.css\\n+++ b/browser/themes/winstripe/browser/browser.css\\n@@ -1001,6 +1001,40 @@ statusbarpanel#statusbar-display {\\n   border-top: 1px solid GrayText;\\n }\\n \\n+/* ::::: endcaps ::::: */\\n+\\n+.endcap {\\n+  padding: 2px 0px 2px 0px;\\n+}\\n+\\n+.endcap-box {\\n+  -moz-border-top-colors: #96969D;\\n+  -moz-border-right-colors: #96969D;\\n+  -moz-border-bottom-colors: #96969D;\\n+  -moz-border-radius: 0 4px 4px 0;\\n+  border: 1px solid;\\n+  border-left: none;\\n+  background-image: url(\\\"chrome://browser/skin/endcap-bkgnd.png\\\");\\n+  background-repeat: repeat-x;\\n+  background-position: 50% 50%;\\n+}\\n+\\n+toolbar:not([mode=\\\"text\\\"]) .endcap:hover > .endcap-box {\\n+  background-image: url(\\\"chrome://browser/skin/endcap-bkgnd-hover.png\\\");\\n+}\\n+\\n+.endcap-box[chromedir=\\\"rtl\\\"] {\\n+  -moz-border-radius: 4px 0 0 4px;\\n+  -moz-border-left-colors: #96969D;\\n+  border-left: 1px solid;\\n+  border-right: none;\\n+}\\n+\\n+toolbar[mode=\\\"text\\\"] .endcap-box {\\n+  border: none;\\n+  background-image: none;\\n+}\\n+\\n /* ::::: go button ::::: */\\n \\n /* In text icon mode, the Go button scales independently of the location bar,\\n@@ -1014,26 +1048,7 @@ toolbar[mode=\\\"text\\\"] #urlbar-button-box {\\n   -moz-box-align: center;\\n }\\n \\n-toolbar[mode=\\\"text\\\"] #go-button {\\n-  -moz-margin-start: 5px;\\n-}\\n-\\n-toolbar[mode=\\\"text\\\"] #go-button,\\n-toolbar[mode=\\\"text\\\"] #go-button-stack .go-button-background {\\n-  list-style-image: none;\\n-  background-image: none;\\n-}\\n-\\n-toolbar[mode=\\\"text\\\"] #go-button-stack {\\n-  padding: 0;\\n-}\\n-\\n-#go-button-stack {\\n-  padding: 2px 0px 2px 0px;\\n-}\\n-\\n-toolbar:not([mode=\\\"text\\\"]) #go-button,\\n-#palette-box #go-button {\\n+#go-button {\\n   -moz-appearance: none;\\n   list-style-image: url(\\\"chrome://browser/skin/Go-arrow.png\\\");\\n   -moz-image-region: rect(0px 25px 22px 0px);\\n@@ -1041,128 +1056,34 @@ toolbar:not([mode=\\\"text\\\"]) #go-button,\\n   padding: 0;\\n }\\n \\n-/* star button */\\n-toolbar:not([mode=\\\"text\\\"]) #star-button,\\n-#palette-box #star-button {\\n-  -moz-appearance: none;\\n-  list-style-image: url(\\\"chrome://browser/skin/places/starPage.png\\\");\\n-  padding: 0;\\n-  border: none;\\n-}\\n-\\n-toolbar:not([mode=\\\"text\\\"]) #star-button[starred=\\\"true\\\"],\\n-#palette-box #star-button[starred=\\\"true\\\"] {\\n-  list-style-image: url(\\\"chrome://browser/skin/places/pageStarred.png\\\");\\n-}\\n-\\n #go-button[chromedir=\\\"rtl\\\"] {\\n   list-style-image: url(\\\"chrome://browser/skin/Go-arrow-rtl.png\\\");\\n }\\n \\n-#go-button-top {\\n-  list-style-image: url(\\\"chrome://browser/skin/Go-bkgnd.png\\\");\\n-  -moz-image-region: rect(0px, 25px, 10px, 0px);\\n-  height: 10px;\\n-}\\n-\\n-/* GTK does not stretch image regions properly, so use background\\n-   images instead.  See bugs 351764 and 254659. */\\n-#go-button-mid-top {\\n-  background-image: url(\\\"chrome://browser/skin/Go-mid-top.png\\\");\\n-}\\n-\\n-#go-button-mid-bottom {\\n-  background-image: url(\\\"chrome://browser/skin/Go-mid-bottom.png\\\");\\n-}\\n-\\n-#go-button-bottom {\\n-  list-style-image: url(\\\"chrome://browser/skin/Go-bkgnd.png\\\");\\n-  -moz-image-region: rect(12px, 25px, 22px, 0px);\\n-  height: 10px;\\n-}\\n-\\n-#go-button-top[chromedir=\\\"rtl\\\"],\\n-#go-button-bottom[chromedir=\\\"rtl\\\"] {\\n-  list-style-image: url(\\\"chrome://browser/skin/Go-bkgnd-rtl.png\\\");\\n-}\\n-\\n-#go-button-mid-top[chromedir=\\\"rtl\\\"] {\\n-  background-image: url(\\\"chrome://browser/skin/Go-mid-top-rtl.png\\\");\\n-}\\n-\\n-#go-button-mid-bottom[chromedir=\\\"rtl\\\"] {\\n-  background-image: url(\\\"chrome://browser/skin/Go-mid-bottom-rtl.png\\\");\\n-}\\n-\\n-#go-button-stack:hover #go-button-top {\\n-  -moz-image-region: rect(0px, 50px, 10px, 25px);\\n-}\\n-\\n-#go-button-stack:hover #go-button-mid-top,\\n-#go-button-stack:hover #go-button-mid-bottom {\\n-  background-position: -25px 0px;\\n-}\\n-\\n-#go-button-stack:hover #go-button-bottom {\\n-  -moz-image-region: rect(12px, 50px, 22px, 25px);\\n-}\\n-\\n-/* Disabled images are not used. */\\n-#go-button-stack[disabled=\\\"true\\\"] #go-button-top {\\n-  -moz-image-region: rect(0px, 75px, 10px, 50px) !important;\\n-}\\n-\\n-#go-button-stack[disabled=\\\"true\\\"] #go-button-mid-top,\\n-#go-button-stack[disabled=\\\"true\\\"] #go-button-mid-bottom {\\n-  background-position: -50px 0px;\\n-}\\n-\\n-#go-button-stack[disabled=\\\"true\\\"] #go-button-bottom {\\n-  -moz-image-region: rect(12px, 75px, 22px, 50px) !important;\\n-}\\n-\\n-\\n-#go-button-stack:hover:active #go-button-top {\\n-  -moz-image-region: rect(0px, 100px, 10px, 75px);\\n-}\\n-\\n-#go-button-stack:hover:active #go-button-mid-top,\\n-#go-button-stack:hover:active #go-button-mid-bottom {\\n-  background-position: -75px;\\n-}\\n-\\n-#go-button-stack:hover:active #go-button-bottom {\\n-  -moz-image-region: rect(12px, 100px, 22px, 75px);\\n+toolbar[mode=\\\"text\\\"] #go-button {\\n+  -moz-appearance: toolbarbutton;\\n+  -moz-margin-start: 5px;\\n+  padding: 3px;\\n }\\n \\n-\\n-toolbar[mode=\\\"text\\\"] #go-button-top,\\n-toolbar[mode=\\\"text\\\"] #go-button-mid-top,\\n-toolbar[mode=\\\"text\\\"] #go-button-mid-bottom,\\n-toolbar[mode=\\\"text\\\"] #go-button-bottom {\\n-  display: none;\\n+toolbar[mode=\\\"text\\\"] #go-button-stack {\\n+  padding: 0;\\n }\\n \\n-toolbar[mode=\\\"text\\\"] #go-button > .toolbarbutton-text {\\n-  display: -moz-box !important;\\n-  -moz-margin-start: 4px !important;\\n+#go-button > .toolbarbutton-icon {\\n+  margin: 0;\\n }\\n \\n-/* Not used. */\\n-#go-button:not([disabled=\\\"true\\\"]):hover {\\n+#go-button:hover {\\n   -moz-image-region: rect(0px 50px 22px 25px);\\n }\\n \\n-#go-button[disabled=\\\"true\\\"] {\\n-  -moz-image-region: rect(0px 75px 22px 50px);\\n-}\\n-\\n-#go-button:not([disabled=\\\"true\\\"]):hover:active {\\n+#go-button:hover:active {\\n   -moz-image-region: rect(0px 100px 22px 75px);\\n }\\n \\n-#go-button > .toolbarbutton-icon {\\n-  margin: 0;\\n+#go-button[disabled=\\\"true\\\"] {\\n+  -moz-image-region: rect(0px 75px 22px 50px);\\n }\\n \\n toolbar:not([mode=\\\"text\\\"]) #go-button,\\n@@ -1172,12 +1093,26 @@ toolbarpaletteitem:not([place=\\\"toolbar\\\"]) .search-go-button {\\n   -moz-binding: url(chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton-image);\\n }\\n \\n-#sidebar {\\n-  background-color: Window;\\n+/* star button */\\n+toolbar:not([mode=\\\"text\\\"]) #star-button,\\n+#palette-box #star-button {\\n+  -moz-appearance: none;\\n+  list-style-image: url(\\\"chrome://browser/skin/places/starPage.png\\\");\\n+  padding: 0;\\n+  border: none;\\n+}\\n+\\n+toolbar:not([mode=\\\"text\\\"]) #star-button[starred=\\\"true\\\"],\\n+#palette-box #star-button[starred=\\\"true\\\"] {\\n+  list-style-image: url(\\\"chrome://browser/skin/places/pageStarred.png\\\");\\n }\\n \\n /* ::::: content area ::::: */\\n \\n+#sidebar {\\n+  background-color: Window;\\n+}\\n+\\n #status-bar {\\n   border-top: none;\\n }\\ndiff --git a/browser/themes/winstripe/browser/Search-mid-top-rtl.png b/browser/themes/winstripe/browser/endcap-bkgnd-hover.png\\nold mode 100644\\nnew mode 100755\\nsimilarity index 94%\\nrename from browser/themes/winstripe/browser/Search-mid-top-rtl.png\\nrename to browser/themes/winstripe/browser/endcap-bkgnd-hover.png\\nindex 7d533da..912fde0\\nBinary files a/browser/themes/winstripe/browser/Search-mid-top-rtl.png and b/browser/themes/winstripe/browser/endcap-bkgnd-hover.png differ\\ndiff --git a/browser/themes/winstripe/browser/Search-mid-top.png b/browser/themes/winstripe/browser/endcap-bkgnd.png\\nold mode 100644\\nnew mode 100755\\nsimilarity index 94%\\nrename from browser/themes/winstripe/browser/Search-mid-top.png\\nrename to browser/themes/winstripe/browser/endcap-bkgnd.png\\nindex 917cf25..3550d4c\\nBinary files a/browser/themes/winstripe/browser/Search-mid-top.png and b/browser/themes/winstripe/browser/endcap-bkgnd.png differ\\ndiff --git a/browser/themes/winstripe/browser/jar.mn b/browser/themes/winstripe/browser/jar.mn\\nindex b15824b..87f27d3 100644\\n--- a/browser/themes/winstripe/browser/jar.mn\\n+++ b/browser/themes/winstripe/browser/jar.mn\\n@@ -2,6 +2,8 @@ classic.jar:\\n % skin browser classic/1.0 %skin/classic/browser/\\n *       skin/classic/browser/browser.css                        (browser.css)\\n         skin/classic/browser/browser.xml\\n+        skin/classic/browser/endcap-bkgnd.png\\n+        skin/classic/browser/endcap-bkgnd-hover.png\\n *       skin/classic/browser/engineManager.css                  (engineManager.css)\\n         skin/classic/browser/Info.png\\n         skin/classic/browser/pageInfo.css\\n@@ -20,21 +22,9 @@ classic.jar:\\n         skin/classic/browser/Toolbar-small.png\\n         skin/classic/browser/Go-arrow.png\\n         skin/classic/browser/Go-arrow-rtl.png\\n-        skin/classic/browser/Go-bkgnd.png\\n-        skin/classic/browser/Go-bkgnd-rtl.png\\n-        skin/classic/browser/Go-mid-top.png\\n-        skin/classic/browser/Go-mid-top-rtl.png\\n-        skin/classic/browser/Go-mid-bottom.png\\n-        skin/classic/browser/Go-mid-bottom-rtl.png\\n *       skin/classic/browser/searchbar.css                      (searchbar.css)\\n         skin/classic/browser/Search-glass.png\\n         skin/classic/browser/Search-glass-rtl.png\\n-        skin/classic/browser/Search-bkgnd.png\\n-        skin/classic/browser/Search-bkgnd-rtl.png\\n-        skin/classic/browser/Search-mid-top.png\\n-        skin/classic/browser/Search-mid-top-rtl.png\\n-        skin/classic/browser/Search-mid-bottom.png\\n-        skin/classic/browser/Search-mid-bottom-rtl.png\\n         skin/classic/browser/Search-provider-bkgnd.png\\n         skin/classic/browser/Search-provider-mid-top.png\\n         skin/classic/browser/Search-provider-mid-bottom.png\\ndiff --git a/browser/themes/winstripe/browser/searchbar.css b/browser/themes/winstripe/browser/searchbar.css\\nindex c9817fc..be20252 100644\\n--- a/browser/themes/winstripe/browser/searchbar.css\\n+++ b/browser/themes/winstripe/browser/searchbar.css\\n@@ -1,11 +1,13 @@\\n-/* *** winstripe *** */\\n-\\n %ifdef MOZ_WIDGET_GTK2\\n #searchbar {\\n   -moz-margin-start: 3px;\\n }\\n %endif\\n \\n+.searchbar-box {\\n+  -moz-padding-end: 5px;\\n+}\\n+\\n .searchbar-textbox {\\n   min-height: 22px;\\n   width: 4em;\\n@@ -133,7 +135,8 @@ toolbar[mode=\\\"text\\\"] .searchbar-box {\\n \\n .search-go-button {\\n   list-style-image: url(\\\"chrome://browser/skin/Search-glass.png\\\");\\n-  border: 0px !important;\\n+  -moz-image-region: rect(0px 25px 22px 0px);\\n+  border: 0px;\\n   padding: 0px;\\n   -moz-appearance: none;\\n }\\n@@ -142,9 +145,16 @@ toolbar[mode=\\\"text\\\"] .searchbar-box {\\n   list-style-image: url(\\\"chrome://browser/skin/Search-glass-rtl.png\\\");\\n }\\n \\n-.search-go-button-stack {\\n-  padding: 2px 0px 2px 0px;\\n-  -moz-padding-end: 5px;\\n+.search-go-button:hover {\\n+  -moz-image-region: rect(0px 50px 22px 25px);\\n+}\\n+\\n+.search-go-button[disabled=\\\"true\\\"] {\\n+  -moz-image-region: rect(0px, 75px, 22px, 50px);\\n+}\\n+\\n+.search-go-button:hover:active {\\n+  -moz-image-region: rect(0px, 100px, 22px, 75px);\\n }\\n \\n toolbar[mode=\\\"text\\\"] .search-go-button {\\n@@ -157,109 +167,14 @@ toolbar[mode=\\\"text\\\"] .search-go-button-stack {\\n   padding: 0px;\\n }\\n \\n-toolbar[mode=\\\"text\\\"] .search-go-button,\\n-toolbar[mode=\\\"text\\\"] .search-go-button-stack .search-go-button-bkgnd {\\n+toolbar[mode=\\\"text\\\"] .search-go-button {\\n   background-image: none;\\n   list-style-image: none;\\n   width: auto;\\n }\\n \\n-.search-go-button-top {\\n-  list-style-image: url(\\\"chrome://browser/skin/Search-bkgnd.png\\\");\\n-  -moz-image-region: rect(0px, 25px, 10px, 0px);\\n-  height: 10px;\\n-}\\n-\\n-/* GTK does not stretch image regions properly, so use background\\n-   images instead.  See bugs 351764 and 254659. */\\n-.search-go-button-mid-top {\\n-  background-image: url(\\\"chrome://browser/skin/Search-mid-top.png\\\");\\n-}\\n-\\n-.search-go-button-mid-bottom {\\n-  background-image: url(\\\"chrome://browser/skin/Search-mid-bottom.png\\\");\\n-}\\n-\\n-.search-go-button-bottom {\\n-  list-style-image: url(\\\"chrome://browser/skin/Search-bkgnd.png\\\");\\n-  -moz-image-region: rect(12px, 25px, 22px, 0px);\\n-  height: 10px;\\n-}\\n-\\n-.search-go-button-top[chromedir=\\\"rtl\\\"],\\n-.search-go-button-bottom[chromedir=\\\"rtl\\\"] {\\n-  list-style-image: url(\\\"chrome://browser/skin/Search-bkgnd-rtl.png\\\");\\n-}\\n-\\n-.search-go-button-mid-top[chromedir=\\\"rtl\\\"] {\\n-  background-image: url(\\\"chrome://browser/skin/Search-mid-top-rtl.png\\\");\\n-}\\n-\\n-.search-go-button-mid-bottom[chromedir=\\\"rtl\\\"] {\\n-  background-image: url(\\\"chrome://browser/skin/Search-mid-bottom-rtl.png\\\");\\n-}\\n-\\n-.search-go-button-stack:hover .search-go-button-top {\\n-  -moz-image-region: rect(0px, 50px, 10px, 25px);\\n-}\\n-\\n-.search-go-button-stack:hover .search-go-button-mid-top,\\n-.search-go-button-stack:hover .search-go-button-mid-bottom  {\\n-  background-position: -25px 0px;\\n-}\\n-\\n-.search-go-button-stack:hover .search-go-button-bottom {\\n-  -moz-image-region: rect(12px, 50px, 22px, 25px);\\n-}\\n-\\n-\\n-/* Disabled images are not used. */\\n-.search-go-button-stack[disabled=\\\"true\\\"] .search-go-button-top {\\n-  -moz-image-region: rect(0px, 75px, 10px, 50px);\\n-}\\n-\\n-.search-go-button-stack[disabled=\\\"true\\\"] .search-go-button-mid-top,\\n-.search-go-button-stack[disabled=\\\"true\\\"] .search-go-button-mid-bottom {\\n-  background-position: -50px 0px;\\n-}\\n-\\n-.search-go-button-stack[disabled=\\\"true\\\"] .search-go-button-bottom {\\n-  -moz-image-region: rect(12px, 75px, 22px, 50px);\\n-}\\n-\\n-\\n-.search-go-button-stack:hover:active .search-go-button-top {\\n-  -moz-image-region: rect(0px, 100px, 10px, 75px);\\n-}\\n-\\n-.search-go-button-stack:hover:active .search-go-button-mid-top,\\n-.search-go-button-stack:hover:active .search-go-button-mid-bottom {\\n-  background-position: -75px 0px;\\n-}\\n-\\n-.search-go-button-stack:hover:active .search-go-button-bottom {\\n-  -moz-image-region: rect(12px, 100px, 22px, 75px);\\n-}\\n-\\n-\\n-.search-go-button {\\n-  -moz-image-region: rect(0px 25px 22px 0px);\\n-}\\n-\\n-.search-go-button:hover {\\n-  -moz-image-region: rect(0px 50px 22px 25px);\\n-}\\n-\\n-.search-go-button[disabled=\\\"true\\\"] {\\n-  -moz-image-region: rect(0px, 75px, 22px, 50px);\\n-}\\n-\\n-.search-go-button:hover:active {\\n-  -moz-image-region: rect(0px, 100px, 22px, 75px);\\n-}\\n-\\n .search-go-button > .toolbarbutton-icon {\\n-  margin: 0px !important;\\n+  margin: 0px;\\n }\\n \\n .searchbar-engine-menuitem[selected=\\\"true\\\"] > .menu-iconic-text {\\n\""}