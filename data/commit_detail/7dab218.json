{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas7dab218\""},"diff":"\"7dab218 Bug 391870 - Have the download manager store the referring uri when appropriate (and use it in the front end).  r=mano\\ndiff --git a/toolkit/components/downloads/src/nsDownloadManager.cpp b/toolkit/components/downloads/src/nsDownloadManager.cpp\\nindex 3b04554..6f385ba 100644\\n--- a/toolkit/components/downloads/src/nsDownloadManager.cpp\\n+++ b/toolkit/components/downloads/src/nsDownloadManager.cpp\\n@@ -306,7 +306,7 @@ nsDownloadManager::InitDB(PRBool *aDoImport)\\n     {\\n       nsCOMPtr<mozIStorageStatement> stmt;\\n       rv = mDBConn->CreateStatement(NS_LITERAL_CSTRING(\\n-        \\\"SELECT id, name, source, target, startTime, endTime, state \\\"\\n+        \\\"SELECT id, name, source, target, startTime, endTime, state, referrer \\\"\\n         \\\"FROM moz_downloads\\\"), getter_AddRefs(stmt));\\n       if (NS_SUCCEEDED(rv))\\n         break;\\n\""}