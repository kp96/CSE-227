{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas36d04e3\""},"diff":"\"36d04e3  [Bug 280419] When a temporary file is created from the download manager it should be readonly. Also applies to attachments in mail. r=cbiesinger, sr=dmose, a=bsmedberg\\ndiff --git a/uriloader/exthandler/nsExternalHelperAppService.cpp b/uriloader/exthandler/nsExternalHelperAppService.cpp\\nindex 6f0f09a..9c939cd 100644\\n--- a/uriloader/exthandler/nsExternalHelperAppService.cpp\\n+++ b/uriloader/exthandler/nsExternalHelperAppService.cpp\\n@@ -1976,6 +1976,9 @@ nsresult nsExternalAppHandler::OpenWithApplication()\\n   // if a stop request was already issued then proceed with launching the application.\\n   if (mStopRequestIssued)\\n   {\\n+    // make the tmp file readonly so users won't edit it and lose the changes\\n+    mFinalFileDestination->SetPermissions(0400);\\n+\\n     rv = mMimeInfo->LaunchWithFile(mFinalFileDestination);        \\n     if (NS_FAILED(rv))\\n     {\\n\""}