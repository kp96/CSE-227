{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas42bf0f3\""},"diff":"\"42bf0f3 bug 389550 - SetupExtraData should create Crash Reports dir if it doesn't exist.  r=bsmedberg\\ndiff --git a/toolkit/crashreporter/nsExceptionHandler.cpp b/toolkit/crashreporter/nsExceptionHandler.cpp\\nindex 657576b..5d7a745 100755\\n--- a/toolkit/crashreporter/nsExceptionHandler.cpp\\n+++ b/toolkit/crashreporter/nsExceptionHandler.cpp\\n@@ -578,6 +578,15 @@ nsresult SetupExtraData(nsILocalFile* aAppDataDirectory,\\n   rv = dataDirectory->Append(NS_LITERAL_STRING(\\\"Crash Reports\\\"));\\n   NS_ENSURE_SUCCESS(rv, rv);\\n \\n+  PRBool exists;\\n+  rv = dataDirectory->Exists(&exists);\\n+  NS_ENSURE_SUCCESS(rv, rv);\\n+\\n+  if (!exists) {\\n+    rv = dataDirectory->Create(nsIFile::DIRECTORY_TYPE, 0600);\\n+    NS_ENSURE_SUCCESS(rv, rv);\\n+  }\\n+\\n   nsCAutoString data;\\n   if(NS_SUCCEEDED(GetOrInit(dataDirectory, NS_LITERAL_STRING(\\\"UserID\\\"),\\n                             data, InitUserID)))\\n\""}