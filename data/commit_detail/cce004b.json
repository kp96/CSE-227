{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bascce004b\""},"diff":"\"cce004b Unit test for bug 394173 based on Martijn Wargers' testcase\\ndiff --git a/layout/generic/test/Makefile.in b/layout/generic/test/Makefile.in\\nindex 48a7630..cf15c9c 100644\\n--- a/layout/generic/test/Makefile.in\\n+++ b/layout/generic/test/Makefile.in\\n@@ -52,6 +52,7 @@ _TEST_FILES = \\ttest_bug323656.html \\\\\\n \\t\\ttest_bug385751.html \\\\\\n \\t\\ttest_bug389630.html \\\\\\n \\t\\ttest_bug391747.html \\\\\\n+\\t\\ttest_bug394173.html \\\\\\n \\t\\t$(NULL)\\n \\n libs:: $(_TEST_FILES)\\ndiff --git a/layout/generic/test/test_bug394173.html b/layout/generic/test/test_bug394173.html\\nnew file mode 100644\\nindex 0000000..90e5351\\n--- /dev/null\\n+++ b/layout/generic/test/test_bug394173.html\\n@@ -0,0 +1,33 @@\\n+<!DOCTYPE HTML>\\n+<html>\\n+<!--\\n+https://bugzilla.mozilla.org/show_bug.cgi?id=394173\\n+-->\\n+<head>\\n+  <title>Test for Bug 394173</title>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/MochiKit/MochiKit.js\\\"></script>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/tests/SimpleTest/SimpleTest.js\\\"></script>        \\n+  <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"/tests/SimpleTest/test.css\\\" />\\n+  <style>.fl:first-letter { }\\n+  </style>\\n+</head>\\n+<body>\\n+<a target=\\\"_blank\\\" href=\\\"https://bugzilla.mozilla.org/show_bug.cgi?id=394173\\\">Mozilla Bug 394173</a>\\n+<div id=\\\"content\\\">\\n+<iframe src=\\\"data:text/html;charset=utf-8,%3Chtml%3E%0A%3Chead%3E%0A%3Cstyle%3E%0Adiv%3A%3Afirst-letter%20%7B%20%7D%0Aspan%3A%3Aafter%20%7B%20content%3A%22before%20text%22%3B%20%7D%0A%3C/style%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%3Cdiv%20style%3D%22position%3A%20fixed%3B%20direction%3A%20rtl%3B%22%3E%0A%20%20%3Cspan%20style%3D%22%20direction%3A%20ltr%3B%20unicode-bidi%3A%20bidi-override%3B%20font-size%3A%2070px%3B%20%22%3E%0A%20%20%20%20%3Cspan%20style%3D%22display%3A%20table%3B%20position%3A%20fixed%3B%22%3E%3C/span%3E%0A%20%20%3C/span%3E%0A%3C/div%3E%0A%3Cscript%3E%0Afunction%20doe%28i%29%7B%0Adocument.documentElement.setAttribute%28%27style%27%2C%20%27%27%29%3B%0A%7D%0AsetTimeout%28doe%2C100%29%3B%0A%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E\\\" style=\\\"width:200px;height: 200px;\\\"></iframe>\\n+</div>\\n+<pre id=\\\"test\\\">\\n+<script class=\\\"testbody\\\" type=\\\"text/javascript\\\">\\n+ function boom()\\n+{\\n+/** Test for Bug 394173 **/\\n+  ok(true, \\\"Should not crash\\\");\\n+  SimpleTest.finish();\\n+}\\n+  setTimeout(boom, 500);\\n+  SimpleTest.waitForExplicitFinish();\\n+</script>\\n+</pre>\\n+</body>\\n+</html>\\n+\\n\""}