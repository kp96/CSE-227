{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basce4cd31\""},"diff":"\"ce4cd31 Bug 395400 - OBJ_FOCUS events no longer fired in context menus (effective August 31, 2007) r=aaronleventhal a=dsicore\\ndiff --git a/accessible/src/xul/nsXULMenuAccessible.cpp b/accessible/src/xul/nsXULMenuAccessible.cpp\\nindex 281d7ff..be287e0 100644\\n--- a/accessible/src/xul/nsXULMenuAccessible.cpp\\n+++ b/accessible/src/xul/nsXULMenuAccessible.cpp\\n@@ -599,6 +599,7 @@ nsXULMenupopupAccessible::GetState(PRUint32 *aState, PRUint32 *aExtraState)\\n   nsresult rv = nsAccessible::GetState(aState, aExtraState);\\n   NS_ENSURE_SUCCESS(rv, rv);\\n \\n+#ifdef DEBUG_A11Y\\n   // We are onscreen if our parent is active\\n   PRBool isActive = PR_FALSE;\\n \\n@@ -614,10 +615,12 @@ nsXULMenupopupAccessible::GetState(PRUint32 *aState, PRUint32 *aExtraState)\\n     if (element)\\n       element->HasAttribute(NS_LITERAL_STRING(\\\"open\\\"), &isActive);\\n   }\\n+  NS_ASSERTION(isActive || *aState & nsIAccessibleStates::STATE_INVISIBLE,\\n+               \\\"XULMenupopup doesn't have STATE_INVISIBLE when it's inactive\\\");\\n+#endif\\n \\n-  if (!isActive)\\n+  if (*aState & nsIAccessibleStates::STATE_INVISIBLE)\\n     *aState |= (nsIAccessibleStates::STATE_OFFSCREEN |\\n-                nsIAccessibleStates::STATE_INVISIBLE |\\n                 nsIAccessibleStates::STATE_COLLAPSED);\\n \\n   return NS_OK;\\n\""}