{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas231b5fb\""},"diff":"\"231b5fb backing out code that snuck in from bug 392303\\ndiff --git a/toolkit/mozapps/installer/windows/nsis/common.nsh b/toolkit/mozapps/installer/windows/nsis/common.nsh\\nindex 009b42f..050148e 100755\\n--- a/toolkit/mozapps/installer/windows/nsis/common.nsh\\n+++ b/toolkit/mozapps/installer/windows/nsis/common.nsh\\n@@ -401,60 +401,6 @@ Exch $R9 ; exchange the new $R9 value with the top of the stack\\n   WriteINIStr \\\"$PLUGINSDIR\\\\options.ini\\\" \\\"Field 7\\\" Bottom \\\"117\\\"\\n !macroend\\n \\n-!macro createSummaryINI\\n-  WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Settings\\\" NumFields \\\"5\\\"\\n-\\n-  WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field 1\\\" Type   \\\"label\\\"\\n-  WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field 1\\\" Text   \\\"$(OPTIONAL_COMPONENTS_LABEL)\\\"\\n-  WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field 1\\\" Left   \\\"0\\\"\\n-  WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field 1\\\" Right  \\\"-1\\\"\\n-  WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field 1\\\" Top    \\\"5\\\"\\n-  WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field 1\\\" Bottom \\\"15\\\"\\n-\\n-  StrCpy $R1 2\\n-  ${If} ${FileExists} \\\"$EXEDIR\\\\optional\\\\extensions\\\\inspector@mozilla.org\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Type   \\\"checkbox\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Text   \\\"$(DOMI_TITLE)\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Left   \\\"15\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Right  \\\"-1\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Top    \\\"20\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Bottom \\\"30\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" State  \\\"1\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Flags  \\\"GROUP\\\"\\n-    IntOp $R1 $R1 + 1\\n-  ${EndIf}\\n-\\n-  ${If} ${FileExists} \\\"$EXEDIR\\\\optional\\\\extensions\\\\talkback@mozilla.org\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Type   \\\"checkbox\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Text   \\\"$(QFA_TITLE)\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Left   \\\"15\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Right  \\\"-1\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Top    \\\"55\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Bottom \\\"65\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" State  \\\"1\\\"\\n-    IntOp $R1 $R1 + 1\\n-  ${EndIf}\\n-\\n-  ${If} ${FileExists} \\\"$EXEDIR\\\\optional\\\\extensions\\\\inspector@mozilla.org\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Type   \\\"label\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Text   \\\"$(DOMI_TEXT)\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Left   \\\"30\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Right  \\\"-1\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Top    \\\"32\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Bottom \\\"52\\\"\\n-    IntOp $R1 $R1 + 1\\n-  ${EndIf}\\n-\\n-  ${If} ${FileExists} \\\"$EXEDIR\\\\optional\\\\extensions\\\\talkback@mozilla.org\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Type   \\\"label\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Text   \\\"$(QFA_TEXT)\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Left   \\\"30\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Right  \\\"-1\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Top    \\\"67\\\"\\n-    WriteINIStr \\\"$PLUGINSDIR\\\\summary.ini\\\" \\\"Field $R1\\\" Bottom \\\"87\\\"\\n-  ${EndIf}\\n-!macroend\\n-\\n !macro GetParentDir\\n   Exch $R0\\n   Push $R1\\n\""}