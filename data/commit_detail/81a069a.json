{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas81a069a\""},"diff":"\"81a069a followup for bug 386790, don't use conflicting constant names, breaks camino\\ndiff --git a/widget/src/cocoa/nsChildView.mm b/widget/src/cocoa/nsChildView.mm\\nindex 842d33e..f1ca3d9 100644\\n--- a/widget/src/cocoa/nsChildView.mm\\n+++ b/widget/src/cocoa/nsChildView.mm\\n@@ -1818,8 +1818,8 @@ NSEvent* gLastDragEvent = nil;\\n                                                           NSURLPboardType,\\n                                                           NSFilesPromisePboardType,\\n                                                           kWildcardPboardType,\\n-                                                          kCorePasteboardFlavorType_url,\\n-                                                          kCorePasteboardFlavorType_urln,\\n+                                                          kCorePboardType_url,\\n+                                                          kCorePboardType_urln,\\n                                                           nil]];\\n \\n   return self;\\ndiff --git a/widget/src/cocoa/nsClipboard.mm b/widget/src/cocoa/nsClipboard.mm\\nindex 9ec71ca..8560309 100644\\n--- a/widget/src/cocoa/nsClipboard.mm\\n+++ b/widget/src/cocoa/nsClipboard.mm\\n@@ -491,7 +491,7 @@ nsClipboard::PasteboardDictFromTransferable(nsITransferable* aTransferable)\\n \\n         NSString *nativeTitle = [[NSString alloc] initWithCharacters:urlTitle.get() length:urlTitle.Length()];\\n         // be nice to Carbon apps, normalize the receiver's contents using Form C.\\n-        [pasteboardOutputDict setObject:[nativeTitle precomposedStringWithCanonicalMapping] forKey:kCorePasteboardFlavorType_urln];\\n+        [pasteboardOutputDict setObject:[nativeTitle precomposedStringWithCanonicalMapping] forKey:kCorePboardType_urln];\\n         [nativeTitle release];\\n       }\\n \\n@@ -505,7 +505,7 @@ nsClipboard::PasteboardDictFromTransferable(nsITransferable* aTransferable)\\n       // printf(\\\"Escaped url is %s, length %d\\\\n\\\", escData.get(), escData.Length());\\n \\n       NSString *nativeURL = [NSString stringWithUTF8String:escData.get()];\\n-      [pasteboardOutputDict setObject:nativeURL forKey:kCorePasteboardFlavorType_url];\\n+      [pasteboardOutputDict setObject:nativeURL forKey:kCorePboardType_url];\\n     }\\n     // If it wasn't a type that we recognize as exportable we don't put it on the system\\n     // clipboard. We'll just access it from our cached transferable when we need it.\\ndiff --git a/widget/src/cocoa/nsDragService.h b/widget/src/cocoa/nsDragService.h\\nindex 5b3285e..ce94490 100644\\n--- a/widget/src/cocoa/nsDragService.h\\n+++ b/widget/src/cocoa/nsDragService.h\\n@@ -44,8 +44,8 @@\\n #include <Cocoa/Cocoa.h>\\n \\n extern NSString* const kWildcardPboardType;\\n-extern NSString* const kCorePasteboardFlavorType_url;\\n-extern NSString* const kCorePasteboardFlavorType_urln;\\n+extern NSString* const kCorePboardType_url;\\n+extern NSString* const kCorePboardType_urln;\\n \\n class nsDragService : public nsBaseDragService\\n {\\ndiff --git a/widget/src/cocoa/nsDragService.mm b/widget/src/cocoa/nsDragService.mm\\nindex 683148e..f24e684 100644\\n--- a/widget/src/cocoa/nsDragService.mm\\n+++ b/widget/src/cocoa/nsDragService.mm\\n@@ -83,8 +83,8 @@ extern NSEvent* gLastDragEvent;\\n nsISupportsArray *gDraggedTransferables = nsnull;\\n \\n NSString* const kWildcardPboardType = @\\\"MozillaWildcard\\\";\\n-NSString* const kCorePasteboardFlavorType_url  = @\\\"CorePasteboardFlavorType 0x75726C20\\\"; // 'url '  url\\n-NSString* const kCorePasteboardFlavorType_urln = @\\\"CorePasteboardFlavorType 0x75726C6E\\\"; // 'urln'  title\\n+NSString* const kCorePboardType_url  = @\\\"CorePasteboardFlavorType 0x75726C20\\\"; // 'url '  url\\n+NSString* const kCorePboardType_urln = @\\\"CorePasteboardFlavorType 0x75726C6E\\\"; // 'urln'  title\\n \\n nsDragService::nsDragService()\\n {\\n@@ -134,8 +134,8 @@ static nsresult SetUpDragClipboard(nsISupportsArray* aTransferableArray)\\n       NSString* currentKey = [types objectAtIndex:i];\\n       id currentValue = [pasteboardOutputDict valueForKey:currentKey];\\n       if (currentKey == NSStringPboardType ||\\n-          currentKey == kCorePasteboardFlavorType_url ||\\n-          currentKey == kCorePasteboardFlavorType_urln) {\\n+          currentKey == kCorePboardType_url ||\\n+          currentKey == kCorePboardType_urln) {\\n         [dragPBoard setString:currentValue forType:currentKey];\\n       }\\n       else if (currentKey == NSTIFFPboardType) {\\n\""}