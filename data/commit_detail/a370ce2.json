{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basa370ce2\""},"diff":"\"a370ce2 bug 397690: display full executable name instead of leaf name for applications in Applications prefpane; Patch by Jim Mathies, r=myk, a=mconnor\\ndiff --git a/browser/components/preferences/applications.js b/browser/components/preferences/applications.js\\nindex 8a7ac6c..39c70ac 100755\\n--- a/browser/components/preferences/applications.js\\n+++ b/browser/components/preferences/applications.js\\n@@ -1005,7 +1005,7 @@ var gApplicationsPane = {\\n         return this._prefsBundle.getString(\\\"saveFile\\\");\\n \\n       case Ci.nsIHandlerInfo.useHelperApp:\\n-        return aHandlerInfo.preferredApplicationHandler.name;\\n+        return getDisplayNameForFile(aHandlerInfo.preferredApplicationHandler.executable);\\n \\n       case Ci.nsIHandlerInfo.handleInternally:\\n         // For the feed type, handleInternally means live bookmarks.\\n@@ -1065,7 +1065,7 @@ var gApplicationsPane = {\\n   isValidHandlerApp: function(aHandlerApp) {\\n     if (!aHandlerApp)\\n       return false;\\n-\\n+\\r\\n     if (aHandlerApp instanceof Ci.nsILocalHandlerApp)\\n       return aHandlerApp.executable &&\\n              aHandlerApp.executable.exists() &&\\n@@ -1150,7 +1150,10 @@ var gApplicationsPane = {\\n \\n       let menuItem = document.createElementNS(kXULNS, \\\"menuitem\\\");\\n       menuItem.setAttribute(\\\"action\\\", Ci.nsIHandlerInfo.useHelperApp);\\n-      menuItem.setAttribute(\\\"label\\\", possibleApp.name);\\n+      if (possibleApp instanceof Ci.nsILocalHandlerApp)\\n+        menuItem.setAttribute(\\\"label\\\", getDisplayNameForFile(possibleApp.executable));\\n+      else\\n+        menuItem.setAttribute(\\\"label\\\", possibleApp.name);\\n       menuItem.setAttribute(\\\"image\\\", this._getIconURLForHandlerApp(possibleApp));\\n \\n       // Attach the handler app object to the menu item so we can use it\\n\""}