{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas51d834f\""},"diff":"\"51d834f Bug 394500, followup to previous patch to prevent removal of batch1/mar, r=coop\\ndiff --git a/tools/release/Bootstrap/Step/Stage.pm b/tools/release/Bootstrap/Step/Stage.pm\\nindex ed5159c9..a7ca261 100644\\n--- a/tools/release/Bootstrap/Step/Stage.pm\\n+++ b/tools/release/Bootstrap/Step/Stage.pm\\n@@ -449,13 +449,17 @@ sub LeaveOnlyUpdateMarsCallback {\\n     my $this = shift;\\n     my $dirent = $File::Find::name;\\n \\n+    my $marsDir = catfile($this->GetStageDir(), 'batch1', 'mar');\\n+\\n     if (-f $dirent) {\\n         if ($dirent !~ /\\\\.mar$/) {\\n             $this->Log(msg => \\\"Unlinking non-mar deliverable: $dirent\\\");\\n             unlink($dirent) or die(\\\"Couldn't unlink $dirent\\\");\\n         }\\n     } elsif (-d $dirent) {\\n-        push(@{$this->{'leaveOnlyMarsDirDeleteList'}}, $dirent);\\n+        if ($dirent ne $marsDir) {\\n+          push(@{$this->{'leaveOnlyMarsDirDeleteList'}}, $dirent);\\n+        }\\n     } else {\\n         $this->Log(msg => 'WARNING: LeaveOnlyUpdateMarsCallback(): '. \\n          \\\"Unknown dirent type: $dirent\\\");\\n\""}