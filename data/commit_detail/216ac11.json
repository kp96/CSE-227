{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas216ac11\""},"diff":"\"216ac11 bug 395140: leave preferred app as-is when the user sets the action for a type to something other than useHelperApp in Applications prefpane; r=gavin, a=mconnor\\ndiff --git a/browser/components/preferences/applications.js b/browser/components/preferences/applications.js\\nindex 55c9ead..85cc77d 100755\\n--- a/browser/components/preferences/applications.js\\n+++ b/browser/components/preferences/applications.js\\n@@ -1320,15 +1320,13 @@ var gApplicationsPane = {\\n         handlerInfo.disablePluginType();\\n \\n       // Set the preferred application handler.\\n-      // FIXME: consider leaving the existing preferred app in the list\\n-      // when we set the preferred action to something other than useHelperApp\\n-      // so that legacy datastores that don't have the preferred app in the list\\n+      // We leave the existing preferred app in the list when we set\\n+      // the preferred action to something other than useHelperApp so that\\n+      // legacy datastores that don't have the preferred app in the list\\n       // of possible apps still include the preferred app in the list of apps\\n-      // the user can use to handle the type.  Filed as bug 395140.\\n+      // the user can choose to handle the type.\\n       if (action == Ci.nsIHandlerInfo.useHelperApp)\\n         handlerInfo.preferredApplicationHandler = actionItem.handlerApp;\\n-      else\\n-        handlerInfo.preferredApplicationHandler = null;\\n \\n       // Set the \\\"always ask\\\" flag.\\n       handlerInfo.alwaysAskBeforeHandling = false;\\n\""}