{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basb87dd3f\""},"diff":"\"b87dd3f Bug 346623 - Add overflow attribute to tabbrowser-tabs. r=mconnor.\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex d513e2e..5c15bca 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -2494,7 +2494,7 @@\\n         <xul:toolbarbutton class=\\\"close-button tabs-closebutton\\\"/>\\n       </xul:hbox>\\n     </content>\\n-    <implementation implements=\\\"nsITimerCallback\\\">\\n+    <implementation implements=\\\"nsITimerCallback, nsIDOMEventListener\\\">\\n       <constructor>\\n         <![CDATA[\\n           var pb2 =\\n@@ -2530,6 +2530,14 @@\\n             }\\n           }\\n           window.addEventListener(\\\"resize\\\", onResize, false);\\n+\\n+          // Listen to overflow/underflow events on the tabstrip,\\n+          // we cannot put these as xbl handlers on the entire binding because\\n+          // they would also get called for the all-tabs popup scrollbox.\\n+          // Also, we can't rely on event.target becuase these are all\\n+          // anonymous nodes.\\n+          this.mTabstrip.addEventListener(\\\"overflow\\\", this, false);\\n+          this.mTabstrip.addEventListener(\\\"underflow\\\", this, false);\\n         ]]>\\n       </constructor>\\n \\n@@ -2540,6 +2548,9 @@\\n             this._animateTimer.cancel();\\n             this._animateTimer = null;\\n           }\\n+\\n+          this.mTabstrip.removeEventListener(\\\"overflow\\\", this, false);\\n+          this.mTabstrip.removeEventListener(\\\"underflow\\\", this, false);\\n         ]]>\\n       </destructor>\\n \\n@@ -2670,7 +2681,20 @@\\n                         .ensureElementIsVisible(this.selectedItem);\\n         ]]></body>\\n       </method>\\n-        \\n+\\n+      <method name=\\\"handleEvent\\\">\\n+        <parameter name=\\\"aEvent\\\"/>\\n+        <body><![CDATA[\\n+          switch (aEvent.type) {\\n+            case \\\"overflow\\\":\\n+              this.setAttribute(\\\"overflow\\\", \\\"true\\\");\\n+              break;\\n+            case \\\"underflow\\\":\\n+              this.removeAttribute(\\\"overflow\\\");\\n+          }\\n+        ]]></body>\\n+      </method>\\n+\\n       <field name=\\\"mAllTabsPopup\\\">\\n         document.getAnonymousElementByAttribute(this, \\n                                                 \\\"anonid\\\", \\\"alltabs-popup\\\");\\n\""}