{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basfce06cd\""},"diff":"\"fce06cd Bug 393662 - Removal of Old GFX and obsolete codes in nsBaseWidget.cpp p=Jonathan Steele <xfsunoles@gmail.com> r+sr+a=roc\\ndiff --git a/widget/src/xpwidgets/nsBaseWidget.cpp b/widget/src/xpwidgets/nsBaseWidget.cpp\\nindex 80daf21..1f1d50e 100644\\n--- a/widget/src/xpwidgets/nsBaseWidget.cpp\\n+++ b/widget/src/xpwidgets/nsBaseWidget.cpp\\n@@ -612,13 +612,9 @@ nsIRenderingContext* nsBaseWidget::GetRenderingContext()\\n \\n   rv = mContext->CreateRenderingContextInstance(*getter_AddRefs(renderingCtx));\\n   if (NS_SUCCEEDED(rv)) {\\n-#if defined(MOZ_CAIRO_GFX)\\n     gfxASurface* surface = GetThebesSurface();\\n     NS_ENSURE_TRUE(surface, nsnull);\\n     rv = renderingCtx->Init(mContext, surface);\\n-#else\\n-    rv = renderingCtx->Init(mContext, this);\\n-#endif\\n     if (NS_SUCCEEDED(rv)) {\\n       nsIRenderingContext *ret = renderingCtx;\\n       /* Increment object refcount that the |ret| object is still a valid one\\n@@ -658,7 +654,6 @@ nsIDeviceContext* nsBaseWidget::GetDeviceContext()\\n   return mContext; \\n }\\n \\n-#ifdef MOZ_CAIRO_GFX\\n //-------------------------------------------------------------------------\\n //\\n // Get the thebes surface\\n@@ -666,15 +661,11 @@ nsIDeviceContext* nsBaseWidget::GetDeviceContext()\\n //-------------------------------------------------------------------------\\n gfxASurface *nsBaseWidget::GetThebesSurface()\\n {\\n-  nsIWidget *parent = GetParent();\\n-  if (!parent)\\n-    return nsnull;\\n-\\n   // in theory we should get our parent's surface,\\n   // clone it, and set a device offset before returning\\n   return nsnull;\\n }\\n-#endif\\n+\\n \\n //-------------------------------------------------------------------------\\n //\\n\""}