{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas6501468\""},"diff":"\"6501468 Bug 393149 - Some registry keys aren't removed under HKEY_LOCAL_MACHINE\\\\SOFTWARE\\\\Mozilla\\\\ [win32 only]. r=sspitzer\\ndiff --git a/toolkit/mozapps/installer/windows/nsis/common.nsh b/toolkit/mozapps/installer/windows/nsis/common.nsh\\nindex 9128d89..218d35e 100755\\n--- a/toolkit/mozapps/installer/windows/nsis/common.nsh\\n+++ b/toolkit/mozapps/installer/windows/nsis/common.nsh\\n@@ -819,8 +819,9 @@ Exch $R9 ; exchange the new $R9 value with the top of the stack\\n       ${GetParentDir}\\n       Pop $R9\\n \\n-      IfFileExists \\\"$R8\\\" 0 +2\\n-      StrCmp $R9 $INSTDIR 0 outerloop\\n+      IfFileExists \\\"$R8\\\" 0 +3\\n+      ${${_MOZFUNC_UN}GetLongPath} \\\"$R9\\\" $R9\\n+      StrCmp \\\"$R9\\\" \\\"$R1\\\" 0 outerloop\\n       ClearErrors\\n       DeleteRegKey SHCTX \\\"$R2\\\\$R3\\\"\\n       IfErrors outerloop\\n\""}