{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas0e82975\""},"diff":"\"0e82975 Bug 289553 Make dynamically changing the favicon update the icon in the tab r=mconnor a=asa\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 06f3d0b..57a878b 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -394,6 +394,13 @@\\n               }\\n             },\\n \\n+            setIcon : function(aURI)\\n+            {\\n+              this.mIcon = aURI;\\n+              if (!this.mTab.hasAttribute(\\\"busy\\\"))\\n+                this.mTab.setAttribute(\\\"image\\\", aURI);\\n+            },\\n+\\n             QueryInterface : function(aIID)\\n             {\\n               if (aIID.equals(Components.interfaces.nsIWebProgressListener) ||\\n@@ -785,7 +792,7 @@\\n             }\\n \\n             if (listener)\\n-              listener.mIcon = href;\\n+              listener.setIcon(href);\\n \\n             if (tabBrowser.mProgressListeners) {\\n               var targetBrowser = tabBrowser.getBrowserAtIndex(browserIndex);\\n\""}