{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas3d4db88\""},"diff":"\"3d4db88 Importing Opera bookmarks missed the last one on Linux. b=397768 r=gavin.sharp r+a=mconnor\\ndiff --git a/browser/components/migration/src/nsOperaProfileMigrator.cpp b/browser/components/migration/src/nsOperaProfileMigrator.cpp\\nindex 3490261..5dd5ea5 100644\\n--- a/browser/components/migration/src/nsOperaProfileMigrator.cpp\\n+++ b/browser/components/migration/src/nsOperaProfileMigrator.cpp\\n@@ -1278,8 +1278,6 @@ nsOperaProfileMigrator::ParseBookmarksFolder(nsILineInputStream* aStream,\\n     rv = aStream->ReadLine(cBuffer, &moreData);\\n     if (NS_FAILED(rv)) return rv;\\n     \\n-    if (!moreData) break;\\n-\\n     CopyUTF8toUTF16(cBuffer, buffer);\\n     nsString data;\\n     LineType type = GetLineType(buffer, getter_Copies(data));\\n@@ -1317,6 +1315,7 @@ nsOperaProfileMigrator::ParseBookmarksFolder(nsILineInputStream* aStream,\\n       // Assuming it's in UTF-8 is rather safe because it covers two cases \\n       // (UTF-8 and ASCII) out of three cases (the last is a non-UTF-8\\n       // multibyte encoding).\\n+      // XXX Todo: |description| is not saved.\\n       if (entryType == EntryType_BOOKMARK) {\\n         if (!name.IsEmpty() && !url.IsEmpty()) {\\n           nsCOMPtr<nsIURI> uri;\\n@@ -1353,7 +1352,7 @@ nsOperaProfileMigrator::ParseBookmarksFolder(nsILineInputStream* aStream,\\n       break;\\n     }\\n   }\\n-  while (1);\\n+  while (moreData);\\n \\n done:\\n   return rv;\\n\""}