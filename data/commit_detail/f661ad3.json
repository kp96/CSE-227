{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basf661ad3\""},"diff":"\"f661ad3 Bug 395064. STATE_EDITABLE should be exposed on all descendants of an editable area. r=evan.yan, a=dsicore\\ndiff --git a/accessible/src/html/nsHyperTextAccessible.cpp b/accessible/src/html/nsHyperTextAccessible.cpp\\nindex fd0200c..f4f9e0b 100644\\n--- a/accessible/src/html/nsHyperTextAccessible.cpp\\n+++ b/accessible/src/html/nsHyperTextAccessible.cpp\\n@@ -1280,6 +1280,19 @@ nsHyperTextAccessible::GetAssociatedEditor(nsIEditor **aEditor)\\n   NS_ENSURE_TRUE(content, NS_ERROR_FAILURE);\\n \\n   if (!content->HasFlag(NODE_IS_EDITABLE)) {\\n+    // If we're inside an editable container, then return that container's editor\\n+    nsCOMPtr<nsIAccessible> ancestor, current = this;\\n+    while (NS_SUCCEEDED(current->GetParent(getter_AddRefs(ancestor))) && ancestor) {\\n+      nsRefPtr<nsHyperTextAccessible> ancestorTextAccessible;\\n+      ancestor->QueryInterface(NS_GET_IID(nsHyperTextAccessible),\\n+                               getter_AddRefs(ancestorTextAccessible));\\n+      if (ancestorTextAccessible) {\\n+        // Recursion will stop at container doc because it has its own impl\\n+        // of GetAssociatedEditor()\\n+        return ancestorTextAccessible->GetAssociatedEditor(aEditor);\\n+      }\\n+      current = ancestor;\\n+    }\\n     return NS_OK;\\n   }\\n \\n\""}