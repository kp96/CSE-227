{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas4a26edd\""},"diff":"\"4a26edd Bug 392359 - some values of pointer-events not working. r=longsonr, sr=roc, a=vlad\\ndiff --git a/layout/svg/base/src/nsSVGPathGeometryFrame.cpp b/layout/svg/base/src/nsSVGPathGeometryFrame.cpp\\nindex a3f9c36..1a39fdc 100644\\n--- a/layout/svg/base/src/nsSVGPathGeometryFrame.cpp\\n+++ b/layout/svg/base/src/nsSVGPathGeometryFrame.cpp\\n@@ -329,7 +329,7 @@ nsSVGPathGeometryFrame::GetFrameForPointSVG(float x, float y, nsIFrame** hit)\\n   *hit = nsnull;\\n \\n   PRUint16 mask = GetHittestMask();\\n-  if (!mask || !mRect.Contains(x, y))\\n+  if (!mask || (!(mask & HITTEST_MASK_FORCE_TEST) && !mRect.Contains(x, y)))\\n     return NS_OK;\\n \\n   PRBool isHit = PR_FALSE;\\n@@ -691,18 +691,20 @@ nsSVGPathGeometryFrame::GetHittestMask()\\n       break;\\n     case NS_STYLE_POINTER_EVENTS_VISIBLEFILL:\\n       if (GetStyleVisibility()->IsVisible()) {\\n-        mask |= HITTEST_MASK_FILL;\\n+        mask |= HITTEST_MASK_FILL | HITTEST_MASK_FORCE_TEST;\\n       }\\n       break;\\n     case NS_STYLE_POINTER_EVENTS_VISIBLESTROKE:\\n       if (GetStyleVisibility()->IsVisible()) {\\n-        mask |= HITTEST_MASK_STROKE;\\n+        mask |= HITTEST_MASK_STROKE | HITTEST_MASK_FORCE_TEST;\\n       }\\n       break;\\n     case NS_STYLE_POINTER_EVENTS_VISIBLE:\\n       if (GetStyleVisibility()->IsVisible()) {\\n-        mask |= HITTEST_MASK_FILL;\\n-        mask |= HITTEST_MASK_STROKE;\\n+        mask |=\\n+          HITTEST_MASK_FILL |\\n+          HITTEST_MASK_STROKE |\\n+          HITTEST_MASK_FORCE_TEST;\\n       }\\n       break;\\n     case NS_STYLE_POINTER_EVENTS_PAINTED:\\n@@ -712,14 +714,16 @@ nsSVGPathGeometryFrame::GetHittestMask()\\n         mask |= HITTEST_MASK_STROKE;\\n       break;\\n     case NS_STYLE_POINTER_EVENTS_FILL:\\n-      mask |= HITTEST_MASK_FILL;\\n+      mask |= HITTEST_MASK_FILL | HITTEST_MASK_FORCE_TEST;\\n       break;\\n     case NS_STYLE_POINTER_EVENTS_STROKE:\\n-      mask |= HITTEST_MASK_STROKE;\\n+      mask |= HITTEST_MASK_STROKE | HITTEST_MASK_FORCE_TEST;\\n       break;\\n     case NS_STYLE_POINTER_EVENTS_ALL:\\n-      mask |= HITTEST_MASK_FILL;\\n-      mask |= HITTEST_MASK_STROKE;\\n+      mask |=\\n+        HITTEST_MASK_FILL |\\n+        HITTEST_MASK_STROKE |\\n+        HITTEST_MASK_FORCE_TEST;\\n       break;\\n     default:\\n       NS_ERROR(\\\"not reached\\\");\\ndiff --git a/layout/svg/base/src/nsSVGPathGeometryFrame.h b/layout/svg/base/src/nsSVGPathGeometryFrame.h\\nindex 859c888..e421c5b 100644\\n--- a/layout/svg/base/src/nsSVGPathGeometryFrame.h\\n+++ b/layout/svg/base/src/nsSVGPathGeometryFrame.h\\n@@ -53,8 +53,9 @@ class nsSVGMarkerProperty;\\n \\n typedef nsSVGGeometryFrame nsSVGPathGeometryFrameBase;\\n \\n-#define HITTEST_MASK_FILL 1\\n-#define HITTEST_MASK_STROKE 2\\n+#define HITTEST_MASK_FILL        0x01\\n+#define HITTEST_MASK_STROKE      0x02\\n+#define HITTEST_MASK_FORCE_TEST  0x04\\n \\n class nsSVGPathGeometryFrame : public nsSVGPathGeometryFrameBase,\\n                                public nsISVGChildFrame\\n\""}