{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Baseb3f613\""},"diff":"\"eb3f613 Bug 345257 - add tooltip to 'all tabs' menu button. patch from Michael Ventnor <ventnors_dogs234@yahoo.com.au>, r=me.\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 48dad66..9555815 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -2452,7 +2452,8 @@\\n       </xul:arrowscrollbox>\\n       <xul:hbox class=\\\"tabs-alltabs-box\\\" align=\\\"center\\\" pack=\\\"end\\\" \\n                 anonid=\\\"alltabs-box\\\">\\n-        <xul:toolbarbutton class=\\\"tabs-alltabs-button\\\" type=\\\"menu\\\">\\n+        <xul:toolbarbutton class=\\\"tabs-alltabs-button\\\" type=\\\"menu\\\" tooltip=\\\"_child\\\">\\n+          <xul:tooltip anonid=\\\"alltabs-tooltip\\\" label=\\\"&listAllTabs.label;\\\"/>\\n           <xul:menupopup class=\\\"tabs-alltabs-popup\\\"\\n                          anonid=\\\"alltabs-popup\\\" \\n                          position=\\\"after_end\\\"/>\\n@@ -2648,6 +2649,11 @@\\n         document.getAnonymousElementByAttribute(this, \\n                                                 \\\"anonid\\\", \\\"alltabs-box\\\");\\n       </field>\\n+      \\n+      <field name=\\\"mAllTabsTooltip\\\">\\n+        document.getAnonymousElementByAttribute(this, \\n+                                                \\\"anonid\\\", \\\"alltabs-tooltip\\\");\\n+      </field>\\n \\n       <field name=\\\"mFlashTimer\\\">null</field>\\n       <field name=\\\"mFlashStage\\\">0</field>\\n@@ -2705,6 +2711,11 @@\\n     </implementation>\\n     <handlers>\\n       <handler event=\\\"TabSelect\\\" action=\\\"this._handleTabSelect();\\\"/>\\n+      <handler event=\\\"popupshowing\\\"><![CDATA[\\n+        if (event.originalTarget == this.mAllTabsTooltip &&\\n+            document.tooltipNode.parentNode == this.mAllTabsPopup)\\n+          event.preventDefault();\\n+      ]]></handler>\\n     </handlers>\\n   </binding>\\n \\ndiff --git a/browser/locales/en-US/chrome/browser/tabbrowser.dtd b/browser/locales/en-US/chrome/browser/tabbrowser.dtd\\nindex ab09e6d..cd641b8 100644\\n--- a/browser/locales/en-US/chrome/browser/tabbrowser.dtd\\n+++ b/browser/locales/en-US/chrome/browser/tabbrowser.dtd\\n@@ -10,3 +10,4 @@\\n <!ENTITY  reloadTab.label        \\\"Reload Tab\\\">\\n <!ENTITY  reloadTab.accesskey         \\\"r\\\">\\n <!ENTITY  newTabButton.tooltip   \\\"Open a new tab\\\">\\n+<!ENTITY  listAllTabs.label      \\\"List all tabs\\\">\\ndiff --git a/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml b/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\nindex 883d692..14d4036 100644\\n--- a/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\n+++ b/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\n@@ -64,7 +64,8 @@\\n             </xul:arrowscrollbox>\\n             <xul:hbox class=\\\"tabs-alltabs-box\\\" pack=\\\"end\\\" align=\\\"center\\\"\\n                       anonid=\\\"alltabs-box\\\">\\n-              <xul:toolbarbutton class=\\\"tabs-alltabs-button\\\" type=\\\"menu\\\">\\n+              <xul:toolbarbutton class=\\\"tabs-alltabs-button\\\" type=\\\"menu\\\" tooltip=\\\"_child\\\">\\n+                <xul:tooltip anonid=\\\"alltabs-tooltip\\\" label=\\\"&listAllTabs.label;\\\"/>\\n                 <xul:menupopup class=\\\"tabs-alltabs-popup\\\"\\n                   anonid=\\\"alltabs-popup\\\" position=\\\"after_end\\\"/>\\n               </xul:toolbarbutton>\\n\""}