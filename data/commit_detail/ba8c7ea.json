{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basba8c7ea\""},"diff":"\"ba8c7ea Bug 181160: Drop unused variables to stop assertions. r=dveditz, a=bzbarsky.\\ndiff --git a/xpinstall/src/nsInstall.cpp b/xpinstall/src/nsInstall.cpp\\nindex 71fa606..32b81ae 100644\\n--- a/xpinstall/src/nsInstall.cpp\\n+++ b/xpinstall/src/nsInstall.cpp\\n@@ -197,17 +197,15 @@ nsInstallInfo::nsInstallInfo(PRUint32           aInstallType,\\n     if (NS_SUCCEEDED(rv)) {\\n       mChromeRegistry = cr;\\n \\n+#ifndef MOZ_XUL_APP\\n       nsCAutoString spec;\\n       rv = NS_GetURLSpecFromFile(aFile, spec);\\n       if (NS_SUCCEEDED(rv)) {\\n         spec.Insert(NS_LITERAL_CSTRING(\\\"jar:\\\"), 0);\\n         spec.AppendLiteral(\\\"!/\\\");\\n-#ifdef MOZ_XUL_APP\\n-        NS_NewURI(getter_AddRefs(mFileJARURL), spec);\\n-#else\\n         mFileJARSpec.Assign(spec);\\n-#endif\\n       }\\n+#endif\\n     }\\n \\n #ifdef MOZ_XUL_APP\\n@@ -216,11 +214,6 @@ nsInstallInfo::nsInstallInfo(PRUint32           aInstallType,\\n                                    thread, &rv);\\n     if (NS_SUCCEEDED(rv))\\n       mExtensionManager = em;\\n-\\n-    nsCOMPtr<nsIFile> manifest;\\n-    rv = NS_GetSpecialDirectory(NS_APP_CHROME_DIR, getter_AddRefs(manifest));\\n-    if (NS_SUCCEEDED(rv))\\n-      NS_NewFileURI(getter_AddRefs(mManifestURL), manifest);\\n #endif\\n }\\n \\ndiff --git a/xpinstall/src/nsInstall.h b/xpinstall/src/nsInstall.h\\nindex bef51d8..b710893 100644\\n--- a/xpinstall/src/nsInstall.h\\n+++ b/xpinstall/src/nsInstall.h\\n@@ -114,8 +114,6 @@ class nsInstallInfo\\n \\n #ifdef MOZ_XUL_APP\\n     nsIExtensionManager* GetExtensionManager()  { return mExtensionManager; }\\n-    nsIURI*              GetFileJARURL()        { return mFileJARURL; }\\n-    nsIURI*              GetManifestURL()       { return mManifestURL; }\\n #else\\n     const nsCString&     GetFileJARSpec()       { return mFileJARSpec; }\\n #endif\\n@@ -136,8 +134,6 @@ class nsInstallInfo\\n     nsCOMPtr<CHROMEREG_IFACE>   mChromeRegistry;\\n \\n #ifdef MOZ_XUL_APP\\n-    nsCOMPtr<nsIURI>              mFileJARURL;\\n-    nsCOMPtr<nsIURI>              mManifestURL;\\n     nsCOMPtr<nsIExtensionManager> mExtensionManager;\\n #else\\n     nsCString                     mFileJARSpec;\\ndiff --git a/xpinstall/src/nsSoftwareUpdate.cpp b/xpinstall/src/nsSoftwareUpdate.cpp\\nindex e378512..aabe0b0 100644\\n--- a/xpinstall/src/nsSoftwareUpdate.cpp\\n+++ b/xpinstall/src/nsSoftwareUpdate.cpp\\n@@ -337,9 +337,7 @@ nsSoftwareUpdate::InstallChrome( PRUint32 aType,\\n \\n     if (!info->GetChromeRegistry() ||\\n #ifdef MOZ_XUL_APP\\n-        !info->GetExtensionManager() ||\\n-        !info->GetFileJARURL() ||\\n-        !info->GetManifestURL()\\n+        !info->GetExtensionManager()\\n #else\\n         info->GetFileJARSpec().IsEmpty()\\n #endif\\n\""}