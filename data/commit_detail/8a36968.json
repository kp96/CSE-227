{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas8a36968\""},"diff":"\"8a36968 Bug 389575 - Add WARNINGS_AS_ERRORS compile time flag.  r=bsmedberg NPOTFB.\\ndiff --git a/config/autoconf.mk.in b/config/autoconf.mk.in\\nindex f0299b2..7fc3bb8 100644\\n--- a/config/autoconf.mk.in\\n+++ b/config/autoconf.mk.in\\n@@ -266,6 +266,8 @@ OS_INCLUDES\\t= $(NSPR_CFLAGS) $(JPEG_CFLAGS) $(PNG_CFLAGS) $(ZLIB_CFLAGS) $(LCMS_\\n OS_LIBS\\t\\t= @LIBS@\\n ACDEFINES\\t= @MOZ_DEFINES@\\n \\n+WARNINGS_AS_ERRORS = @WARNINGS_AS_ERRORS@\\n+\\n MOZ_OPTIMIZE\\t= @MOZ_OPTIMIZE@\\n MOZ_OPTIMIZE_FLAGS = @MOZ_OPTIMIZE_FLAGS@\\n MOZ_OPTIMIZE_LDFLAGS = @MOZ_OPTIMIZE_LDFLAGS@\\ndiff --git a/configure.in b/configure.in\\nindex 331fa3d..a960530 100644\\n--- a/configure.in\\n+++ b/configure.in\\n@@ -1214,6 +1214,7 @@ if test \\\"$GNU_CC\\\"; then\\n         # Don't allow undefined symbols in libraries\\n         DSO_LDOPTS=\\\"$DSO_LDOPTS -Wl,-z,defs\\\"\\n     fi\\n+    WARNINGS_AS_ERRORS='-Werror'\\n     DSO_CFLAGS=''\\n     DSO_PIC_CFLAGS='-fPIC'\\n     _MOZ_RTTI_FLAGS_ON=${_COMPILER_PREFIX}-frtti\\n@@ -1734,6 +1735,7 @@ case \\\"$target\\\" in\\n     HOST_AR='lib -OUT:$@'\\n     HOST_RANLIB='echo ranlib'\\n         \\n+    WARNINGS_AS_ERRORS='/WX'\\n \\tMOZ_OPTIMIZE_FLAGS='-O1'\\n     AR_FLAGS='-NOLOGO -OUT:\\\"$@\\\"'\\n     ASM_SUFFIX=asm\\n@@ -1759,7 +1761,6 @@ case \\\"$target\\\" in\\n     MOZ_DEBUG_LDFLAGS='-DEBUG -DEBUGTYPE:CV'\\n     MOZ_FIX_LINK_PATHS=\\n     MOZ_JS_LIBS='$(LIBXUL_DIST)/lib/js$(MOZ_BITS)$(VERSION_NUMBER).lib'\\n-    MOZ_OPTIMIZE_FLAGS='-O1'\\n     MOZ_XPCOM_OBSOLETE_LIBS='$(LIBXUL_DIST)/lib/xpcom_compat.lib'\\n     OBJ_SUFFIX=obj\\n     RANLIB='echo not_ranlib'\\n@@ -1851,6 +1852,7 @@ case \\\"$target\\\" in\\n         LIBS=\\\"$LIBS kernel32.lib user32.lib gdi32.lib winmm.lib wsock32.lib advapi32.lib\\\"\\n         MOZ_DEBUG_FLAGS='-Zi'\\n         MOZ_DEBUG_LDFLAGS='-DEBUG -DEBUGTYPE:CV'\\n+        WARNINGS_AS_ERRORS='/WX'\\n     \\tMOZ_OPTIMIZE_FLAGS='-O1'\\n         MOZ_JS_LIBS='$(LIBXUL_DIST)/lib/js$(MOZ_BITS)$(VERSION_NUMBER).lib'\\n         MOZ_FIX_LINK_PATHS=\\n@@ -2042,6 +2044,7 @@ case \\\"$target\\\" in\\n \\tAC_DEFINE(_QNX_SOURCE)\\n \\tAC_DEFINE(_i386)\\n \\tOS_TARGET=NTO\\n+\\tWARNINGS_AS_ERRORS=''\\n \\tMOZ_OPTIMIZE_FLAGS=\\\"-O\\\"\\n \\tMOZ_DEBUG_FLAGS=\\\"-gstabs\\\"\\n \\tUSE_PTHREADS=1\\n@@ -2136,6 +2139,7 @@ case \\\"$target\\\" in\\n         IMPLIB='emximp -o'\\n         FILTER='emxexp -o'\\n         LDFLAGS='-Zmap'\\n+        WARNINGS_AS_ERRORS='-Werror'\\n         MOZ_DEBUG_FLAGS=\\\"-g -fno-inline\\\"\\n         MOZ_OPTIMIZE_FLAGS=\\\"-O2 -s\\\"\\n         MOZ_OPTIMIZE_LDFLAGS=\\\"-Zlinker /EXEPACK:2 -Zlinker /PACKCODE -Zlinker /PACKDATA\\\"\\n@@ -2181,6 +2185,7 @@ case \\\"$target\\\" in\\n         CFLAGS=\\\"/Q /qlibansi /Gm+ /Su4 /Mp /Tl9\\\"\\n         CXXFLAGS=\\\"/Q /qlibansi /Gm+ /Su4 /Mp /Tl9 /Gx+\\\"\\n         MOZ_DEBUG_FLAGS=\\\"/Ti+\\\"\\n+        WARNINGS_AS_ERRORS='/WX'\\n         MOZ_OPTIMIZE_FLAGS=\\\"/O+ /Gl+ /G5 /qarch=pentium\\\"\\n         LDFLAGS=\\\"/NOL /M\\\"\\n         MOZ_DEBUG_LDFLAGS=\\\"/DE\\\"\\n@@ -2279,6 +2284,7 @@ dnl the qsort routine under solaris is faulty\\n                        ,\\n                        [LDFLAGS=$_SAVE_LDFLAGS])\\n        fi\\n+       WARNINGS_AS_ERRORS='-Werror'\\n        MOZ_OPTIMIZE_FLAGS=\\\"-xO4\\\"\\n        MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_FLAGS) $(DSO_LDOPTS) -h $@ -o $@'\\n        MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_FLAGS) -G -z muldefs -h $@ -o $@'\\n@@ -7455,6 +7461,7 @@ AC_SUBST(MOZ_DEBUG_ENABLE_DEFS)\\n AC_SUBST(MOZ_DEBUG_DISABLE_DEFS)\\n AC_SUBST(MOZ_DEBUG_FLAGS)\\n AC_SUBST(MOZ_DEBUG_LDFLAGS)\\n+AC_SUBST(WARNINGS_AS_ERRORS)\\n AC_SUBST(MOZ_DBGRINFO_MODULES)\\n AC_SUBST(MOZ_EXTENSIONS)\\n AC_SUBST(MOZ_IMG_DECODERS)\\ndiff --git a/netwerk/cookie/src/Makefile.in b/netwerk/cookie/src/Makefile.in\\nindex e15191e..1974ab1 100644\\n--- a/netwerk/cookie/src/Makefile.in\\n+++ b/netwerk/cookie/src/Makefile.in\\n@@ -60,4 +60,5 @@ CPPSRCS\\t\\t= \\\\\\n \\n include $(topsrcdir)/config/rules.mk\\n \\n+CXXFLAGS += $(WARNINGS_AS_ERRORS)\\n DEFINES += -DIMPL_NS_NET\\n\""}