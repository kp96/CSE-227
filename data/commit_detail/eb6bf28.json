{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Baseb6bf28\""},"diff":"\"eb6bf28 Bug 393300. DOMStorage leaks mozStorage classes on shutdown. r+sr+a=jst\\ndiff --git a/dom/src/storage/nsDOMStorage.cpp b/dom/src/storage/nsDOMStorage.cpp\\nindex aa753d4..e7b1ca8 100644\\n--- a/dom/src/storage/nsDOMStorage.cpp\\n+++ b/dom/src/storage/nsDOMStorage.cpp\\n@@ -162,6 +162,9 @@ nsDOMStorageManager::Shutdown()\\n {\\n   NS_IF_RELEASE(gStorageManager);\\n   gStorageManager = nsnull;\\n+\\n+  delete nsDOMStorage::gStorageDB;\\n+  nsDOMStorage::gStorageDB = nsnull;\\n }\\n \\n PR_STATIC_CALLBACK(PLDHashOperator)\\n\""}