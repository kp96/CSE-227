{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basbb3e660\""},"diff":"\"bb3e660 fix for bug #394226: can't drag favicon to an empty bookmarks toolbar r=dietrich, mconnor a=mconnor for m8\\ndiff --git a/browser/components/places/content/toolbar.xml b/browser/components/places/content/toolbar.xml\\nindex 908dd4c..b4adfeb 100755\\n--- a/browser/components/places/content/toolbar.xml\\n+++ b/browser/components/places/content/toolbar.xml\\n@@ -794,14 +794,16 @@\\n             var ind = ib.firstChild;\\n             var direction = document.defaultView.getComputedStyle(this._self.parentNode, \\\"\\\").direction;\\n             if (direction == \\\"ltr\\\") {\\n-              if (dropPoint.beforeIndex == -1)\\n+              if (!this._self.childNodes.length)\\n+                ind.style.marginLeft = 0 - this._self.boxObject.x - 7 + 'px'\\n+              else if (dropPoint.beforeIndex == -1)\\n                 ind.style.marginLeft = this._self.lastChild.boxObject.x + \\n                                        this._self.lastChild.boxObject.width - this._self.boxObject.x - 7 + 'px';\\n               else\\n                 ind.style.marginLeft = this._self.childNodes[dropPoint.beforeIndex].boxObject.x -\\n                                        this._self.boxObject.x - 7 + 'px';\\n             } else {\\n-              if (dropPoint.beforeIndex == -1)\\n+              if (dropPoint.beforeIndex == -1 || !this._self.childNodes.length)\\n                 ind.style.marginRight = '0px';\\n               else\\n                 ind.style.marginRight = (this._self.childNodes[this._self.childNodes.length - 1].boxObject.x +\\n\""}