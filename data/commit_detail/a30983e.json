{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basa30983e\""},"diff":"\"a30983e Bug 397221  nsNavHistoryQuery leaks opening bookmark/places organizer (for asqueella@gmail.com, r=sayrer, a=mconnor)\\ndiff --git a/toolkit/components/places/src/nsNavHistoryResult.cpp b/toolkit/components/places/src/nsNavHistoryResult.cpp\\nindex 855cec4e..ba61a316 100644\\n--- a/toolkit/components/places/src/nsNavHistoryResult.cpp\\n+++ b/toolkit/components/places/src/nsNavHistoryResult.cpp\\n@@ -2790,8 +2790,11 @@ nsNavHistoryFolderResultNode::GetUri(nsACString& aURI)\\n \\n   nsNavHistory* history = nsNavHistory::GetHistoryService();\\n   NS_ENSURE_TRUE(history, NS_ERROR_OUT_OF_MEMORY);\\n-  nsCAutoString queryString;\\n+\\n   rv = history->QueriesToQueryString(queries, queryCount, mOptions, aURI);\\n+  for (PRUint32 queryIndex = 0; queryIndex < queryCount;  queryIndex ++) {\\n+    NS_RELEASE(queries[queryIndex]);\\n+  }\\n   nsMemory::Free(queries);\\n   return rv;\\n }\\n\""}