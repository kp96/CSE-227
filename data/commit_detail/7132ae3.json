{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas7132ae3\""},"diff":"\"7132ae3 Don't assume that redirect URIs are ASCII (though they should be). Bug 317254, r+sr+a=jst\\ndiff --git a/content/base/src/nsDocument.cpp b/content/base/src/nsDocument.cpp\\nindex c5888a8..1e6b1dd 100644\\n--- a/content/base/src/nsDocument.cpp\\n+++ b/content/base/src/nsDocument.cpp\\n@@ -1958,7 +1958,7 @@ nsDocument::SetHeaderData(nsIAtom* aHeaderField, const nsAString& aData)\\n       // before the current URI of the webnavigation has been updated, so we\\n       // can't assert equality here.\\n       refresher->SetupRefreshURIFromHeader(mDocumentURI,\\n-                                           NS_LossyConvertUTF16toASCII(aData));\\n+                                           NS_ConvertUTF16toUTF8(aData));\\n     }\\n   }\\n }\\n\""}