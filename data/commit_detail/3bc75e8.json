{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas3bc75e8\""},"diff":"\"3bc75e8 fix for bug #343054, js errors when changing certain browser.tabs.* prefs\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 3590b48..a4876e2 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -2388,7 +2388,7 @@\\n       <xul:hbox class=\\\"tabs-closebutton-box\\\" align=\\\"center\\\" pack=\\\"end\\\" anonid=\\\"tabstrip-closebutton\\\">\\n         <xul:toolbarbutton ondblclick=\\\"event.stopPropagation();\\\"\\n                            class=\\\"close-button tabs-closebutton\\\"\\n-                           oncommand=\\\"this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.removeCurrentTab()\\\"/>\\n+                           oncommand=\\\"this.parentNode.parentNode.parentNode.parentNode.parentNode.removeCurrentTab()\\\"/>\\n       </xul:hbox>\\n     </content>\\n     <implementation>\\n@@ -2449,14 +2449,14 @@\\n           if (topic == \\\"nsPref:changed\\\") {\\n             switch (data) {\\n             case \\\"browser.tabs.disableBackgroundClose\\\":\\n-              this._updateDisableBackgroundClose();\\n+              this.tabbox._updateDisableBackgroundClose();\\n               break;\\n             case \\\"browser.tabs.closeButtons\\\":\\n               var pb2 =\\n                   Components.classes['@mozilla.org/preferences-service;1'].\\n                   getService(Components.interfaces.nsIPrefBranch2);\\n-              this.mCloseButtons = pb2.getIntPref(\\\"browser.tabs.closeButtons\\\");\\n-              this.adjustTabstrip(false);\\n+              this.tabbox.mCloseButtons = pb2.getIntPref(\\\"browser.tabs.closeButtons\\\");\\n+              this.tabbox.adjustTabstrip(false);\\n               break;\\n             }\\n           }\\ndiff --git a/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml b/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\nindex 6e9dd11..4d7a60c 100644\\n--- a/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\n+++ b/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\n@@ -65,7 +65,7 @@\\n             <xul:hbox class=\\\"tabs-closebutton-box\\\" align=\\\"center\\\" pack=\\\"end\\\" anonid=\\\"tabstrip-closebutton\\\">\\n               <xul:toolbarbutton ondblclick=\\\"event.stopPropagation();\\\"\\n                            class=\\\"close-button tabs-closebutton\\\"\\n-                           oncommand=\\\"this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.removeCurrentTab()\\\"/>\\n+                           oncommand=\\\"this.parentNode.parentNode.parentNode.parentNode.parentNode.removeCurrentTab()\\\"/>\\n             </xul:hbox>\\n           </xul:hbox>\\n           <xul:spacer class=\\\"tabs-bottom-spacer\\\"/>\\n\""}