{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas19db0dc\""},"diff":"\"19db0dc Fix leak of PRAddrInfos.  Bug 397716, r+sr=biesi, a=bsmedberg\\ndiff --git a/netwerk/dns/src/nsHostResolver.cpp b/netwerk/dns/src/nsHostResolver.cpp\\nindex 0d797f3..6f800a8 100644\\n--- a/netwerk/dns/src/nsHostResolver.cpp\\n+++ b/netwerk/dns/src/nsHostResolver.cpp\\n@@ -612,7 +612,10 @@ nsHostResolver::OnLookupComplete(nsHostRecord *rec, nsresult status, PRAddrInfo\\n         // grab list of callbacks to notify\\n         MoveCList(rec->callbacks, cbs);\\n \\n-        // update record fields\\n+        // update record fields.  We might have a rec->addr_info already if a\\n+        // previous lookup result expired and we're reresolving it..\\n+\\tif (rec->addr_info)\\n+\\t  PR_FreeAddrInfo(rec->addr_info);\\n         rec->addr_info = result;\\n         rec->expiration = NowInMinutes() + mMaxCacheLifetime;\\n         rec->resolving = PR_FALSE;\\n\""}