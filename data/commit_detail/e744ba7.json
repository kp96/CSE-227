{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Base744ba7\""},"diff":"\"e744ba7 Let only top level documents call this code, bug 391043, r=jst, sr=bzbarsky, a=dbaron\\ndiff --git a/content/xul/content/src/nsXULElement.cpp b/content/xul/content/src/nsXULElement.cpp\\nindex 6d5e263..7ff8297 100644\\n--- a/content/xul/content/src/nsXULElement.cpp\\n+++ b/content/xul/content/src/nsXULElement.cpp\\n@@ -2234,6 +2234,10 @@ nsXULElement::HideWindowChrome(PRBool aShouldHide)\\n     if (!doc || doc->GetRootContent() != this)\\n       return NS_ERROR_UNEXPECTED;\\n \\n+    // only top level chrome documents can hide the window chrome\\n+    if (doc->GetParentDocument())\\n+      return NS_OK;\\n+\\n     nsIPresShell *shell = doc->GetPrimaryShell();\\n \\n     if (shell) {\\n@@ -2242,7 +2246,7 @@ nsXULElement::HideWindowChrome(PRBool aShouldHide)\\n \\n         nsPresContext *presContext = shell->GetPresContext();\\n \\n-        if (frame && presContext) {\\n+        if (frame && presContext && presContext->IsChrome()) {\\n             nsIView* view = frame->GetClosestView();\\n \\n             if (view) {\\n\""}