{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas2d33f85\""},"diff":"\"2d33f85 Bug 394802: mark the property only when tracing from GC. r=brendan\\ndiff --git a/js/src/jsscope.c b/js/src/jsscope.c\\nindex 7578536..614bb68 100644\\n--- a/js/src/jsscope.c\\n+++ b/js/src/jsscope.c\\n@@ -1557,7 +1557,8 @@ PrintPropertyGetterOrSetter(JSTracer *trc, char *buf, size_t bufsize)\\n void\\n js_TraceScopeProperty(JSTracer *trc, JSScopeProperty *sprop)\\n {\\n-    sprop->flags |= SPROP_MARK;\\n+    if (IS_GC_MARKING_TRACER(trc))\\n+        sprop->flags |= SPROP_MARK;\\n     TRACE_ID(trc, sprop->id);\\n \\n #if JS_HAS_GETTER_SETTER\\n\""}