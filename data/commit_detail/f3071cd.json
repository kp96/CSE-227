{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basf3071cd\""},"diff":"\"f3071cd Bug 396761. Fix buffer length. r=smontagu,a=bz\\ndiff --git a/intl/locale/src/nsLocaleService.cpp b/intl/locale/src/nsLocaleService.cpp\\nindex 6e8eea9..b390da3 100644\\n--- a/intl/locale/src/nsLocaleService.cpp\\n+++ b/intl/locale/src/nsLocaleService.cpp\\n@@ -267,7 +267,7 @@ nsLocaleService::nsLocaleService(void)\\n \\n     nsAutoTArray<UniChar, 32> buffer;\\n     int size = ::CFStringGetLength(userLocaleStr);\\n-    if (buffer.SetLength(size))\\n+    if (buffer.SetLength(size + 1))\\n     {\\n         CFRange range = ::CFRangeMake(0, size);\\n         ::CFStringGetCharacters(userLocaleStr, range, buffer.Elements());\\n\""}