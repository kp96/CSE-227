{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas1255c77\""},"diff":"\"1255c77 fix for bug #343370.  additional scenario where tab scrolling does not handle window resize well.  cache the tab strip width and only adjust the tabstrip, scroll and ensure the selected tab is visible if the width changes.  r=asaf\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 56aee8e..a43df2d 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -2414,14 +2414,21 @@\\n \\n           var self = this;\\n           function onResize() {\\n-            self.adjustTabstrip(false);\\n-            self.mTabstrip.scrollBoxObject\\n-                          .ensureElementIsVisible(self.selectedItem);\\n+            var width = self.mTabstrip.boxObject.width;\\n+            if (width != self.mTabstripWidth) {\\n+              self.adjustTabstrip(false);\\n+              self.mTabstrip.scrollByIndex(1);\\n+              self.mTabstrip.scrollBoxObject\\n+                            .ensureElementIsVisible(self.selectedItem);\\n+              self.mTabstripWidth = width;\\n+            }\\n           }\\n           window.addEventListener(\\\"resize\\\", onResize, false);\\n         ]]>\\n       </constructor>\\n \\n+      <field name=\\\"mTabstripWidth\\\">0</field>\\n+\\n       <field name=\\\"mTabstrip\\\">\\n         document.getAnonymousElementByAttribute(this, \\\"anonid\\\", \\\"arrowscrollbox\\\");\\n       </field>\\n@@ -2563,7 +2570,7 @@\\n     <handlers>\\n       <handler event=\\\"TabOpen\\\"   action=\\\"this.adjustTabstrip(false);\\\"/>\\n       <handler event=\\\"TabClose\\\"  action=\\\"this.adjustTabstrip(true);\\\"/>\\n-      <handler event=\\\"TabSelect\\\" action=\\\"this._handleTabSelect()\\\"/>\\n+      <handler event=\\\"TabSelect\\\" action=\\\"this._handleTabSelect();\\\"/>\\n     </handlers>\\n   </binding>\\n \\n\""}