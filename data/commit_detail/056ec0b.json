{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas056ec0b\""},"diff":"\"056ec0b Bug 395407 - \\\"Symbol upload and unpack can conflict if builds have the same buildid\\\". r=luser, a=damons.\\ndiff --git a/Makefile.in b/Makefile.in\\nindex a0e9d39..8a166b1 100644\\n--- a/Makefile.in\\n+++ b/Makefile.in\\n@@ -54,7 +54,7 @@ TIERS += base\\n \\n #\\n # tier \\\"base\\\" - basic setup\\n-# \\n+#\\n tier_base_dirs = \\\\\\n \\tconfig \\\\\\n \\tbuild \\\\\\n@@ -64,7 +64,7 @@ include $(topsrcdir)/$(MOZ_BUILD_APP)/build.mk\\n \\n TIERS += testharness\\n \\n-# test harnesses \\n+# test harnesses\\n ifdef ENABLE_TESTS\\n tier_testharness_dirs += tools/test-harness\\n endif\\n@@ -74,7 +74,7 @@ DIST_GARBAGE = config.cache config.log config.status config-defs.h \\\\\\n    dependencies.beos config/autoconf.mk config/myrules.mk config/myconfig.mk \\\\\\n    unallmakefiles mozilla-config.h \\\\\\n    gfx/gfx-config.h netwerk/necko-config.h xpcom/xpcom-config.h xpcom/xpcom-private.h \\\\\\n-   $(topsrcdir)/.mozconfig.mk $(topsrcdir)/.mozconfig.out \\n+   $(topsrcdir)/.mozconfig.mk $(topsrcdir)/.mozconfig.out\\n \\n # Build pseudo-external modules first when export is explicitly called\\n export::\\n@@ -163,6 +163,9 @@ ifdef MOZ_SYMBOLS_EXTRA_BUILDID\\n EXTRA_BUILDID := -$(MOZ_SYMBOLS_EXTRA_BUILDID)\\n endif\\n \\n+SYMBOL_ARCHIVE_BASENAME := \\\\\\n+  $(MOZ_APP_NAME)-$(MOZ_APP_VERSION)-$(OS_ARCH)-$(BUILDID)$(EXTRA_BUILDID)\\n+\\n buildsymbols:\\n ifdef MOZ_CRASHREPORTER\\n \\techo building symbol store\\n@@ -171,18 +174,18 @@ ifdef MOZ_CRASHREPORTER\\n \\t  $(MAKE_SYM_STORE_ARGS) -s $(topsrcdir) $(DUMP_SYMS_BIN)     \\\\\\n \\t  $(DIST)/crashreporter-symbols/$(BUILDID)                    \\\\\\n \\t  $(MAKE_SYM_STORE_PATH) >                                    \\\\\\n-\\t  $(DIST)/crashreporter-symbols/$(BUILDID)/$(MOZ_APP_NAME)-$(MOZ_APP_VERSION)-$(OS_ARCH)-$(BUILDID)$(EXTRA_BUILDID)-symbols.txt\\n+\\t  $(DIST)/crashreporter-symbols/$(BUILDID)/$(SYMBOL_ARCHIVE_BASENAME)-symbols.txt\\n \\techo packing symbols\\n \\tmkdir -p $(topsrcdir)/../$(BUILDID)\\n \\tcd $(DIST)/crashreporter-symbols/$(BUILDID) && \\\\\\n-          zip -r9D ../crashreporter-symbols-$(BUILDID).zip .\\n-\\tmv $(DIST)/crashreporter-symbols/crashreporter-symbols-$(BUILDID).zip \\\\\\n+          zip -r9D ../crashreporter-symbols-$(SYMBOL_ARCHIVE_BASENAME).zip .\\n+\\tmv $(DIST)/crashreporter-symbols/crashreporter-symbols-$(SYMBOL_ARCHIVE_BASENAME).zip \\\\\\n           $(topsrcdir)/../$(BUILDID)\\n endif # MOZ_CRASHREPORTER\\n \\n uploadsymbols:\\n ifdef MOZ_CRASHREPORTER\\n-\\t$(topsrcdir)/toolkit/crashreporter/tools/upload_symbols.sh $(topsrcdir)/../$(BUILDID)/crashreporter-symbols-$(BUILDID).zip\\n+\\t$(topsrcdir)/toolkit/crashreporter/tools/upload_symbols.sh $(topsrcdir)/../$(BUILDID)/crashreporter-symbols-$(SYMBOL_ARCHIVE_BASENAME).zip\\n endif\\n \\n ifeq ($(OS_ARCH),WINNT)\\n\""}