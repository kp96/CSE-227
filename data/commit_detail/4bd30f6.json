{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas4bd30f6\""},"diff":"\"4bd30f6 Bug 394547. Giving focus to a tree in an autocomplete causes absence of future caret-moved events for the entry. r=evan.yan, a=dsicore\\ndiff --git a/accessible/src/base/nsRootAccessible.cpp b/accessible/src/base/nsRootAccessible.cpp\\nindex 55b322e..40075d6 100644\\n--- a/accessible/src/base/nsRootAccessible.cpp\\n+++ b/accessible/src/base/nsRootAccessible.cpp\\n@@ -442,6 +442,12 @@ PRBool nsRootAccessible::FireAccessibleFocusEvent(nsIAccessible *aAccessible,\\n       nsCOMPtr<nsIDOMEventTarget> domEventTarget;\\n       nsevent->GetOriginalTarget(getter_AddRefs(domEventTarget));\\n       nsCOMPtr<nsIDOMNode> realFocusedNode(do_QueryInterface(domEventTarget));\\n+      if (!realFocusedNode) {\\n+        // When FireCurrentFocusEvent() synthesizes a focus event,\\n+        // the orignal target does not exist, so use the passed-in node\\n+        // which is the relevant focused node\\n+        realFocusedNode = aNode;\\n+      }\\n       if (realFocusedNode) {\\n         mCaretAccessible->SetControlSelectionListener(realFocusedNode);\\n       }\\n\""}