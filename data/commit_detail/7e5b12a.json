{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas7e5b12a\""},"diff":"\"7e5b12a Re-enable the actual distribution/bundles loading code from bug 392251, now that the Ts regression is fixed.\\ndiff --git a/toolkit/xre/nsXREDirProvider.cpp b/toolkit/xre/nsXREDirProvider.cpp\\nindex b2255b0..6d6a944 100644\\n--- a/toolkit/xre/nsXREDirProvider.cpp\\n+++ b/toolkit/xre/nsXREDirProvider.cpp\\n@@ -547,9 +547,7 @@ nsXREDirProvider::LoadBundleDirectories()\\n   if (mXULAppDir) {\\n     LoadPlatformDirectory(mXULAppDir, mAppBundleDirectories);\\n \\n-#ifdef LOAD_DISTRO_BUNDLES\\n     LoadAppBundleDirs();\\n-#endif\\n   }\\n \\n   if (mProfileDir && !gSafeMode) {\\n@@ -575,7 +573,6 @@ nsXREDirProvider::LoadBundleDirectories()\\n   }\\n }\\n \\n-#ifdef LOAD_DISTRO_BUNDLES\\n void\\n nsXREDirProvider::LoadAppBundleDirs()\\n {\\n@@ -609,7 +606,6 @@ nsXREDirProvider::LoadAppBundleDirs()\\n     LoadPlatformDirectory(subdir, mAppBundleDirectories);\\n   }\\n }\\n-#endif // LOAD_DISTRO_BUNDLES\\n \\n static const char *const kAppendPrefDir[] = { \\\"defaults\\\", \\\"preferences\\\", nsnull };\\n \\ndiff --git a/toolkit/xre/nsXREDirProvider.h b/toolkit/xre/nsXREDirProvider.h\\nindex 65defab..b4563ea 100644\\n--- a/toolkit/xre/nsXREDirProvider.h\\n+++ b/toolkit/xre/nsXREDirProvider.h\\n@@ -122,10 +122,7 @@ protected:\\n   // Calculate all bundle directories, including distribution bundles,\\n   // extensions, and themes\\n   void LoadBundleDirectories();\\n-\\n-#ifdef LOAD_DISTRO_BUNDLES\\n   void LoadAppBundleDirs();\\n-#endif\\n \\n   void Append(nsIFile* aDirectory);\\n \\n\""}