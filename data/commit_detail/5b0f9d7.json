{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas5b0f9d7\""},"diff":"\"5b0f9d7 fix for bug #393952:  crash when I try to VACUUM (StorageUnicodeFunctions::likeFunction() should handle null aArgv[0] and aArgv[1]) r=sdwilsh\\ndiff --git a/storage/src/mozStorageUnicodeFunctions.cpp b/storage/src/mozStorageUnicodeFunctions.cpp\\nindex d6dd55a..bfc172b 100644\\n--- a/storage/src/mozStorageUnicodeFunctions.cpp\\n+++ b/storage/src/mozStorageUnicodeFunctions.cpp\\n@@ -188,6 +188,9 @@ StorageUnicodeFunctions::likeFunction(sqlite3_context *p,\\n     return;\\n   }\\n \\n+  if (!sqlite3_value_text16(aArgv[0]) || !sqlite3_value_text16(aArgv[1]))\\n+    return;\\n+\\n   nsDependentString A(static_cast<const PRUnichar *>(sqlite3_value_text16(aArgv[1])));\\n   nsDependentString B(static_cast<const PRUnichar *>(sqlite3_value_text16(aArgv[0])));\\n   NS_ASSERTION(!B.IsEmpty(), \\\"LIKE string must not be null!\\\");\\n\""}