{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas8441a8c\""},"diff":"\"8441a8c Bug 391485 - memory leak in nsToolkitProfileService::Flush p=brian.lu@sun.com (Boying Lu) r=benjamin@smedbergs.us (Benjamin Smedberg) a=bzbarsky@mit.edu (Boris Zbarsky)\\ndiff --git a/toolkit/profile/src/nsToolkitProfileService.cpp b/toolkit/profile/src/nsToolkitProfileService.cpp\\nindex f72fdfc..d4a46fe 100644\\n--- a/toolkit/profile/src/nsToolkitProfileService.cpp\\n+++ b/toolkit/profile/src/nsToolkitProfileService.cpp\\n@@ -763,8 +763,8 @@ nsToolkitProfileService::Flush()\\n         ++pCount;\\n \\n     PRUint32 length;\\n+    nsAutoArrayPtr<char> buffer (new char[100+MAXPATHLEN*pCount]);\\n \\n-    char* buffer = (char*) malloc(100 + MAXPATHLEN * pCount);\\n     NS_ENSURE_TRUE(buffer, NS_ERROR_OUT_OF_MEMORY);\\n \\n     char *end = buffer;\\n\""}