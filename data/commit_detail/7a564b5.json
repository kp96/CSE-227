{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas7a564b5\""},"diff":"\"7a564b5 Bug 394505. Crash [@ nsCaret::GetCaretCoordinates] with designMode iframe and changing display. r=evan.yan, a=dsicore\\ndiff --git a/accessible/src/base/nsCaretAccessible.cpp b/accessible/src/base/nsCaretAccessible.cpp\\nindex 40cdaa4..134fe96 100644\\n--- a/accessible/src/base/nsCaretAccessible.cpp\\n+++ b/accessible/src/base/nsCaretAccessible.cpp\\n@@ -252,6 +252,8 @@ nsCaretAccessible::GetCaretRect(nsIWidget **aOutWidget)\\n   PRBool isCollapsed;\\n   nsIView *view;\\n   nsCOMPtr<nsISelection> caretSelection(do_QueryReferent(mLastUsedSelection));\\n+  NS_ENSURE_TRUE(caretSelection, caretRect);\\n+  \\n   caret->GetCaretCoordinates(nsICaret::eRenderingViewCoordinates, caretSelection,\\n                              &caretRect, &isCollapsed, &view);\\n   if (!view || caretRect.IsEmpty()) {\\n\""}