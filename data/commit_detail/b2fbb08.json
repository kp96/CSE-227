{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basb2fbb08\""},"diff":"\"b2fbb08 wall paper fix for bug #348183 nsGlobalWindow:Focus() can return NS_ERROR_FAILURE if we try to focus a disabled element.  the unhandled exception in tabbrowser.xml can lead to problems, such as \\\"canceling the 'do you want to close the window with open tabs' prompt still closes the window\\\" r=bryner\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 7ca88bb..18ef234 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -765,7 +765,12 @@\\n \\n             function setFocus(element) {\\n               document.commandDispatcher.suppressFocusScroll = true;\\n-              element.focus();\\n+              try {\\n+                element.focus();\\n+              }\\n+              catch(ex) {\\n+                dump(\\\"XXX focus() failed, see bug #348183: ex = \\\" + ex + \\\"\\\\n\\\");\\n+              }\\n               document.commandDispatcher.suppressFocusScroll = false;\\n             }\\n \\n\""}