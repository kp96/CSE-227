{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas96121b6\""},"diff":"\"96121b6 Bug 394546 - \\\"Paused retried downloads keep updating status\\\" [p=edilee@gmail.com (Edward Lee [Mardak]) r=sdwilsh a1.9=mconnor]\\ndiff --git a/toolkit/mozapps/downloads/content/downloads.js b/toolkit/mozapps/downloads/content/downloads.js\\nindex ef4d688..4073506 100644\\n--- a/toolkit/mozapps/downloads/content/downloads.js\\n+++ b/toolkit/mozapps/downloads/content/downloads.js\\n@@ -227,10 +227,14 @@ function resumeDownload(aDownload)\\n \\n function removeDownload(aDownload)\\n {\\n+  removeFromView(aDownload);\\n   gDownloadManager.removeDownload(aDownload.getAttribute(\\\"dlid\\\"));\\n-  let index = gDownloadsView.selectedIndex;\\n-  gDownloadsView.removeChild(aDownload);\\n-  gDownloadsView.selectedIndex = Math.min(index, gDownloadsView.itemCount - 1);\\n+}\\n+\\n+function retryDownload(aDownload)\\n+{\\n+  removeFromView(aDownload);\\n+  gDownloadManager.retryDownload(aDownload.getAttribute(\\\"dlid\\\"));\\n }\\n \\n function showDownload(aDownload)\\n@@ -359,11 +363,6 @@ function showDownloadInfo(aDownload)\\n   gDownloadInfoPopup.openPopup(button, \\\"after_end\\\", 0, 0, false, false);\\n }\\n \\n-function retryDownload(aDownload)\\n-{\\n-  gDownloadManager.retryDownload(aDownload.getAttribute(\\\"dlid\\\"));\\n-}\\n-\\n function copySourceLocation(aDownload)\\n {\\n   var uri = aDownload.getAttribute(\\\"uri\\\");\\n@@ -663,6 +662,13 @@ function openExternal(aFile)\\n ///////////////////////////////////////////////////////////////////////////////\\n //// Utility functions\\n \\n+function removeFromView(aDownload)\\n+{\\n+  let index = gDownloadsView.selectedIndex;\\n+  gDownloadsView.removeChild(aDownload);\\n+  gDownloadsView.selectedIndex = Math.min(index, gDownloadsView.itemCount - 1);\\n+}\\n+\\n /**\\n  * Builds the default view that the download manager starts out with.\\n  */\\n\""}