{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basd220c5b\""},"diff":"\"d220c5b Bug 394198. Crash in nsDocAccessible::TakeFocus(). Patch by Evan Yan, r=aaronlev, a=dsicore. Leaving open for a better fix\\ndiff --git a/accessible/src/base/nsDocAccessible.cpp b/accessible/src/base/nsDocAccessible.cpp\\nindex 6d7c055..ed2058c 100644\\n--- a/accessible/src/base/nsDocAccessible.cpp\\n+++ b/accessible/src/base/nsDocAccessible.cpp\\n@@ -284,6 +284,10 @@ NS_IMETHODIMP nsDocAccessible::TakeFocus()\\n   NS_ENSURE_TRUE(docShell, NS_ERROR_FAILURE);\\n \\n   nsCOMPtr<nsIPresShell> shell(GetPresShell());\\n+  if (!shell) {\\n+    NS_WARNING(\\\"Was not shutdown properly via InvalidateCacheSubtree()\\\");\\n+    return NS_ERROR_FAILURE;\\n+  }\\n   nsIEventStateManager *esm = shell->GetPresContext()->EventStateManager();\\n   NS_ENSURE_TRUE(esm, NS_ERROR_FAILURE);\\n \\n\""}