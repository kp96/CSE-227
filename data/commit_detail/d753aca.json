{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basd753aca\""},"diff":"\"d753aca Bug 393205 - Don't keep a sandbox around all the time, patch by Simon BÃ¼nzli <zeniko@gmail.com>, r=gavin\\ndiff --git a/browser/components/sessionstore/src/nsSessionStore.js b/browser/components/sessionstore/src/nsSessionStore.js\\nindex 4dd109d..00de359 100644\\n--- a/browser/components/sessionstore/src/nsSessionStore.js\\n+++ b/browser/components/sessionstore/src/nsSessionStore.js\\n@@ -100,9 +100,6 @@ const CAPABILITIES = [\\n   \\\"Subframes\\\", \\\"Plugins\\\", \\\"Javascript\\\", \\\"MetaRedirects\\\", \\\"Images\\\"\\n ];\\n \\n-// sandbox to evaluate JavaScript code from non-trustable sources\\n-var EVAL_SANDBOX = new Cu.Sandbox(\\\"about:blank\\\");\\n-\\n // module for JSON conversion (needed for the nsISessionStore API)\\n Cu.import(\\\"resource://gre/modules/JSON.jsm\\\");\\n \\n@@ -1913,7 +1910,7 @@ SessionStoreService.prototype = {\\n    * safe eval'ing\\n    */\\n   _safeEval: function sss_safeEval(aStr) {\\n-    return Cu.evalInSandbox(aStr, EVAL_SANDBOX);\\n+    return Cu.evalInSandbox(aStr, new Cu.Sandbox(\\\"about:blank\\\"));\\n   },\\n \\n   /**\\n\""}