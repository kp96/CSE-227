{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas208add1\""},"diff":"\"208add1 Bug 396318 - Livemark feed items without title or link get the value from the previous item, r=dietrich, a=mconnor.\\ndiff --git a/toolkit/components/places/src/nsLivemarkService.js b/toolkit/components/places/src/nsLivemarkService.js\\nindex 30f0edf..22315cc 100644\\n--- a/toolkit/components/places/src/nsLivemarkService.js\\n+++ b/toolkit/components/places/src/nsLivemarkService.js\\n@@ -515,28 +515,28 @@ LivemarkLoadListener.prototype = {\\n \\n     this.deleteLivemarkChildren(this._livemark.folderId);\\n     this._livemark.loadingId = -1;\\n-    var title, href, entry;\\n     var feed = result.doc.QueryInterface(Ci.nsIFeed);\\n     // Loop through and check for a link and a title\\n     // as the old code did\\n     for (var i = 0; i < feed.items.length; ++i) {\\n-      entry = feed.items.queryElementAt(i, Ci.nsIFeedEntry);\\n-      if (entry.title)\\n-        title = entry.title.plainText();\\n-      else if (entry.updated)\\n-        title = entry.updated;\\n-\\n-      if (entry.link) {\\n-        try {\\n-          secMan.checkLoadURIStr(this._livemark.feedURI.spec, entry.link.spec,\\n-                                 SEC_FLAGS);\\n-          href = entry.link;\\n-        }\\n-        catch (ex) { }\\n+      let entry = feed.items.queryElementAt(i, Ci.nsIFeedEntry);\\n+      let href = entry.link;\\n+      if (!href)\\n+        continue;\\n+\\n+      let title = entry.title ? entry.title.plainText() : entry.updated;\\n+      if (!title)\\n+        continue;\\n+\\n+      try {\\n+        secMan.checkLoadURIStr(this._livemark.feedURI.spec, href.spec,\\n+                               SEC_FLAGS);\\n+      }\\n+      catch(ex) {\\n+        continue;\\n       }\\n \\n-      if (href && title)\\n-        this.insertLivemarkChild(this._livemark.folderId, href, title);\\n+      this.insertLivemarkChild(this._livemark.folderId, href, title);\\n     }\\n   },\\n \\n\""}