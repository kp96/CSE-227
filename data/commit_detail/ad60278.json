{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basad60278\""},"diff":"\"ad60278 Bug 251513. Content of tabs not focused to keyboard scrolling when switching tabs. r=mconner, no sr= needed\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 9190ede..0243066 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -51,7 +51,7 @@\\n \\n     <content>\\n       <xul:stringbundle src=\\\"chrome://global/locale/tabbrowser.properties\\\"/>\\n-      <xul:tabbox flex=\\\"1\\\" xbl:inherits=\\\"handleCtrlPageUpDown\\\"\\n+      <xul:tabbox flex=\\\"1\\\" xbl:inherits=\\\"handleCtrlPageUpDown\\\" eventnode=\\\"document\\\"\\n                   onselect=\\\"if (!('updateCurrentBrowser' in this.parentNode) || event.target.localName != 'tabpanels') return; this.parentNode.updateCurrentBrowser();\\\">\\n         <xul:hbox class=\\\"tabbrowser-strip chromeclass-toolbar\\\" collapsed=\\\"true\\\" tooltip=\\\"_child\\\" context=\\\"_child\\\">\\n           <xul:tooltip onpopupshowing=\\\"event.preventBubble(); if (document.tooltipNode.hasAttribute('label')) { this.setAttribute('label', document.tooltipNode.getAttribute('label')); return true; } return false;\\\"/>\\n@@ -493,12 +493,7 @@\\n             }\\n \\n             function setFocus(element) {\\n-              if (document.commandDispatcher.focusedElement && \\n-                  document.commandDispatcher.focusedElement.parentNode == \\n-                  this.mCurrentTab.parentNode) {\\n-                // The focus is on a tab in the same tab panel\\n-                return;  // If focus was on a tab, switching tabs focuses the new tab\\n-              }\\n+               Components.lookupMethod(element, \\\"focus\\\").call(element);\\n             }\\n             \\n             var whatToFocus = window.content;\\n@@ -1355,6 +1350,7 @@\\n         <![CDATA[\\n           this.mCurrentBrowser = this.mPanelContainer.firstChild;\\n           this.mCurrentTab = this.mTabContainer.firstChild;\\n+          this.mTabBox.handleCtrlTab = !/Mac/.test(navigator.platform);\\n         ]]>\\n       </constructor>\\n \\n\""}