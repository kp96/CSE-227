{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas5347590\""},"diff":"\"5347590 Bug 372298 - xpcom/io: 10K codesize reduction by fixing string array p=Alfred Kayser <alfredkayser@nl.ibm.com> r+a=bsmedberg\\ndiff --git a/xpcom/io/nsLocalFileWin.cpp b/xpcom/io/nsLocalFileWin.cpp\\nindex 898882ae7..9958b42 100644\\n--- a/xpcom/io/nsLocalFileWin.cpp\\n+++ b/xpcom/io/nsLocalFileWin.cpp\\n@@ -2291,7 +2291,7 @@ nsLocalFile::IsExecutable(PRBool *_retval)\\n             *p +=  (*p >= L'A' && *p <= L'Z') ? 'a' - 'A' : 0; \\n         \\n         // Search for any of the set of executable extensions.\\n-        const char * const executableExts[] = {\\n+        static const char * const executableExts[] = {\\n             \\\"ad\\\",\\n             \\\"ade\\\",         // access project extension\\n             \\\"adp\\\",\\n@@ -2363,10 +2363,10 @@ nsLocalFile::IsExecutable(PRBool *_retval)\\n             \\\"ws\\\",\\n             \\\"wsc\\\",\\n             \\\"wsf\\\",\\n-            \\\"wsh\\\",\\n-            0 };\\n-        for ( int i = 0; executableExts[i]; i++ ) {\\n-            if ( Substring(path, dotIdx + 1).EqualsASCII(executableExts[i])) {\\n+            \\\"wsh\\\"};\\n+        nsDependentSubstring ext = Substring(path, dotIdx + 1);\\n+        for ( int i = 0; i < NS_ARRAY_LENGTH(executableExts); i++ ) {\\n+            if ( ext.EqualsASCII(executableExts[i])) {\\n                 // Found a match.  Set result and quit.\\n                 *_retval = PR_TRUE;\\n                 break;\\n\""}