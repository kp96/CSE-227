{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basa671023\""},"diff":"\"a671023 Try to avoid really hiding menus b=127244 r=gavin a=mconnor\\ndiff --git a/toolkit/content/widgets/toolbar.xml b/toolkit/content/widgets/toolbar.xml\\nindex c660df0..e8a73e2 100644\\n--- a/toolkit/content/widgets/toolbar.xml\\n+++ b/toolkit/content/widgets/toolbar.xml\\n@@ -267,6 +267,11 @@\\n   </binding>\\n \\n   <binding id=\\\"menubar\\\" extends=\\\"chrome://global/content/bindings/toolbar.xml#toolbar-base\\\" display=\\\"xul:menubar\\\">\\n+    <content height=\\\"0\\\">\\n+      <xul:hbox flex=\\\"1\\\">\\n+        <children/>\\n+      </xul:hbox>\\n+    </content>\\n     <implementation implements=\\\"nsIAccessibleProvider\\\">\\n       <property name=\\\"accessibleType\\\" readonly=\\\"true\\\">\\n         <getter>\\ndiff --git a/toolkit/content/xul.css b/toolkit/content/xul.css\\nindex 8bd0d9d..4fb39b6 100644\\n--- a/toolkit/content/xul.css\\n+++ b/toolkit/content/xul.css\\n@@ -33,7 +33,6 @@\\n    :: kinds of windows (not JUST browser windows) with toolbars\\n    ::::: */\\n \\n-window[chromehidden~=\\\"menubar\\\"] .chromeclass-menubar,\\n window[chromehidden~=\\\"directories\\\"] .chromeclass-directories,\\n window[chromehidden~=\\\"status\\\"] .chromeclass-status,\\n window[chromehidden~=\\\"extrachrome\\\"] .chromeclass-extrachrome,\\n@@ -255,6 +254,17 @@ toolbarpaletteitem[place=\\\"palette\\\"] {\\n \\n menubar {\\n   -moz-binding: url(\\\"chrome://global/content/bindings/toolbar.xml#menubar\\\");\\n+  -moz-box-orient: vertical;\\n+  -moz-box-pack: end;\\n+}\\n+\\n+window[chromehidden~=\\\"menubar\\\"] .chromeclass-menubar,\\n+menubar[hidden=\\\"true\\\"],\\n+menubar[_moz_collapsed=\\\"true\\\"],\\n+menubar[collapsed=\\\"true\\\"] {\\n+  min-height: 0%;\\n+  display: -moz-box;\\n+  visibility: visible;\\n }\\n \\n /********* menu ***********/\\n\""}