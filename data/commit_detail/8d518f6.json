{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas8d518f6\""},"diff":"\"8d518f6 Bug 397223 - Double-click on empty space or a twisty in the content tree should not open the selected node in the browser. r=dietrich, a=mconnor.\\ndiff --git a/browser/components/places/content/places.js b/browser/components/places/content/places.js\\nindex bd10ed9..7345211 100755\\n--- a/browser/components/places/content/places.js\\n+++ b/browser/components/places/content/places.js\\n@@ -296,7 +296,7 @@ var PlacesOrganizer = {\\n    * @param   aEvent\\n    *          The mouse event.\\n    */\\n-  onTreeClick: function PO_onTreeClicked(aEvent) {\\n+  onTreeClick: function PO_onTreeClick(aEvent) {\\n     var currentView = aEvent.currentTarget;\\n     var controller = currentView.controller;\\n \\n@@ -319,6 +319,20 @@ var PlacesOrganizer = {\\n     }\\n   },\\n \\n+  onTreeDblClick: function PO_onTreeDblClick(aEvent) {\\n+    if (aEvent.button != 0 || !this._content.hasSingleSelection ||\\n+        aEvent.originalTarget.localName != \\\"treechildren\\\")\\n+      return;\\n+\\n+    var row = { }, col = { }, obj = { };\\n+    this._content.treeBoxObject.getCellAt(aEvent.clientX, aEvent.clientY, row,\\n+                                         col, obj);\\n+    if (row.value == -1  || obj.value == \\\"twisty\\\")\\n+      return;\\n+\\n+    this._content.controller.openSelectedNodeWithEvent(aEvent);\\n+  },\\n+\\n   /**\\n    * Returns the options associated with the query currently loaded in the\\n    * main places pane.\\ndiff --git a/browser/components/places/content/places.xul b/browser/components/places/content/places.xul\\nindex 12e7167..25cfc54 100755\\n--- a/browser/components/places/content/places.xul\\n+++ b/browser/components/places/content/places.xul\\n@@ -399,7 +399,7 @@\\n           <vbox flex=\\\"1\\\">\\n             <tree id=\\\"placeContent\\\" class=\\\"placesTree\\\" context=\\\"placesContext\\\" \\n                   flex=\\\"1\\\" type=\\\"places\\\" \\n-                  ondblclick=\\\"this.controller.openSelectedNodeWithEvent(event);\\\"\\n+                  ondblclick=\\\"PlacesOrganizer.onTreeDblClick(event);\\\"\\n                   onclick=\\\"PlacesOrganizer.onTreeClick(event);\\\"\\n                   onselect=\\\"PlacesOrganizer.onContentTreeSelect();\\\">\\n               <treecols id=\\\"placeContentColumns\\\">\\n\""}