{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas9b26b83\""},"diff":"\"9b26b83 Bug 395402 - Remove theme-specific bindings. r+a=mconnor\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex aa2935d..8ff4ead 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -2585,26 +2585,38 @@\\n   <binding id=\\\"tabbrowser-tabs\\\"\\n            extends=\\\"chrome://global/content/bindings/tabbox.xml#tabs\\\">\\n     <content>\\n-      <xul:arrowscrollbox anonid=\\\"arrowscrollbox\\\" class=\\\"tabbrowser-arrowscrollbox\\\" flex=\\\"1\\\"\\n-                          xbl:inherits=\\\"smoothscroll\\\" orient=\\\"horizontal\\\" style=\\\"min-width: 1px;\\\">\\n-        <children includes=\\\"tab\\\"/>\\n-      </xul:arrowscrollbox>\\n-      <xul:stack align=\\\"center\\\" pack=\\\"end\\\" class=\\\"tabs-alltabs-stack\\\">\\n-        <xul:hbox flex=\\\"1\\\" class=\\\"tabs-alltabs-box\\\" anonid=\\\"alltabs-box\\\"/>\\n-        <xul:hbox flex=\\\"1\\\" class=\\\"tabs-alltabs-box-animate\\\" \\n-                  anonid=\\\"alltabs-box-animate\\\"/>\\n-        <xul:toolbarbutton class=\\\"tabs-alltabs-button\\\" type=\\\"menu\\\"\\n-                           anonid=\\\"alltabs-button\\\"\\n-                           tooltipstring=\\\"&listAllTabs.label;\\\">\\n-          <xul:menupopup class=\\\"tabs-alltabs-popup\\\"\\n-                         anonid=\\\"alltabs-popup\\\" \\n-                         position=\\\"after_end\\\"/>\\n-        </xul:toolbarbutton>\\n+      <xul:stack flex=\\\"1\\\" class=\\\"tabs-stack\\\">\\n+        <xul:vbox>\\n+          <xul:spacer flex=\\\"1\\\"/>\\n+          <xul:hbox class=\\\"tabs-bottom\\\" align=\\\"center\\\"/>\\n+        </xul:vbox>\\n+        <xul:vbox>\\n+          <xul:hbox>\\n+            <xul:stack>\\n+              <xul:spacer class=\\\"tabs-left\\\"/>\\n+            </xul:stack>\\n+            <xul:arrowscrollbox anonid=\\\"arrowscrollbox\\\" orient=\\\"horizontal\\\" flex=\\\"1\\\"\\n+                                style=\\\"min-width: 1px;\\\" chromedir=\\\"&locale.dir;\\\"\\n+                                class=\\\"tabbrowser-arrowscrollbox\\\">\\n+              <children/>\\n+            </xul:arrowscrollbox>\\n+            <xul:stack align=\\\"center\\\" pack=\\\"end\\\" chromedir=\\\"&locale.dir;\\\">\\n+              <xul:hbox flex=\\\"1\\\" class=\\\"tabs-alltabs-box\\\" anonid=\\\"alltabs-box\\\"/>\\n+              <xul:hbox flex=\\\"1\\\" class=\\\"tabs-alltabs-box-animate\\\" anonid=\\\"alltabs-box-animate\\\"/>\\n+              <xul:toolbarbutton class=\\\"tabs-alltabs-button\\\" type=\\\"menu\\\" anonid=\\\"alltabs-button\\\"\\n+                                 tooltipstring=\\\"&listAllTabs.label;\\\">\\n+                <xul:menupopup class=\\\"tabs-alltabs-popup\\\" anonid=\\\"alltabs-popup\\\"\\n+                               position=\\\"after_end\\\"/>\\n+              </xul:toolbarbutton>\\n+            </xul:stack>\\n+            <xul:hbox anonid=\\\"tabstrip-closebutton\\\" class=\\\"tabs-closebutton-box\\\"\\n+                      align=\\\"center\\\" pack=\\\"end\\\" chromedir=\\\"&locale.dir;\\\">\\n+              <xul:toolbarbutton class=\\\"close-button tabs-closebutton\\\"/>\\n+            </xul:hbox>\\n+          </xul:hbox>\\n+          <xul:spacer class=\\\"tabs-bottom-spacer\\\"/>\\n+        </xul:vbox>\\n       </xul:stack>\\n-      <xul:hbox anonid=\\\"tabstrip-closebutton\\\" class=\\\"tabs-closebutton-box\\\"\\n-                align=\\\"center\\\" pack=\\\"end\\\" chromedir=\\\"&locale.dir;\\\">\\n-        <xul:toolbarbutton class=\\\"close-button tabs-closebutton\\\"/>\\n-      </xul:hbox>\\n     </content>\\n     <implementation implements=\\\"nsITimerCallback, nsIDOMEventListener\\\">\\n       <constructor>\\n@@ -3168,11 +3180,16 @@\\n            extends=\\\"chrome://global/content/bindings/tabbox.xml#tab\\\">\\n     <content chromedir=\\\"&locale.dir;\\\"\\n              closetabtext=\\\"&closeTab.label;\\\">\\n-      <xul:hbox class=\\\"tab-middle box-inherit\\\" xbl:inherits=\\\"align,dir,pack,orient,selected\\\" flex=\\\"1\\\">\\n-        <xul:image class=\\\"tab-icon\\\" xbl:inherits=\\\"validate,src=image\\\"/>\\n-        <xul:label class=\\\"tab-text\\\" xbl:inherits=\\\"value=label,accesskey,crop,disabled\\\" flex=\\\"1\\\"/>\\n+      <xul:hbox class=\\\"tab-image-left\\\" xbl:inherits=\\\"selected\\\"/>\\n+      <xul:hbox flex=\\\"1\\\" class=\\\"tab-image-middle\\\" align=\\\"center\\\" xbl:inherits=\\\"selected\\\">\\n+        <xul:stack class=\\\"tab-icon\\\">\\n+          <xul:image xbl:inherits=\\\"validate,src=image\\\" class=\\\"tab-icon-image\\\"/>\\n+          <xul:image class=\\\"tab-extra-status\\\"/>\\n+        </xul:stack>\\n+        <xul:label flex=\\\"1\\\" xbl:inherits=\\\"value=label,crop,accesskey\\\" crop=\\\"right\\\" class=\\\"tab-text\\\"/>\\n       </xul:hbox>\\n       <xul:toolbarbutton anonid=\\\"close-button\\\" tabindex=\\\"-1\\\" class=\\\"tab-close-button\\\"/>\\n+      <xul:hbox class=\\\"tab-image-right\\\" xbl:inherits=\\\"selected\\\"/>\\n     </content>\\n \\n     <implementation>\\ndiff --git a/browser/themes/pinstripe/browser/browser.css b/browser/themes/pinstripe/browser/browser.css\\nindex e32b030..bd1a494 100755\\n--- a/browser/themes/pinstripe/browser/browser.css\\n+++ b/browser/themes/pinstripe/browser/browser.css\\n@@ -1267,7 +1267,6 @@ toolbarbutton.chevron > .toolbarbutton-menu-dropmarker {\\n }\\n \\n .tabbrowser-tab {\\n-  -moz-binding: url(\\\"chrome://browser/skin/tabbrowser/tabbrowserBindings.xml#tabbrowser-tab\\\") !important;\\n   -moz-appearance: none;\\n   color: #383838;\\n   -moz-box-pack: center;\\n@@ -1376,7 +1375,6 @@ toolbarbutton.chevron > .toolbarbutton-menu-dropmarker {\\n }\\n \\n .tabbrowser-tabs {\\n-  -moz-binding: url(\\\"chrome://browser/skin/tabbrowser/tabbrowserBindings.xml#tabbrowser-tabs\\\");\\n   border: none;\\n   padding: 0;\\n   margin: 0;\\ndiff --git a/browser/themes/pinstripe/browser/jar.mn b/browser/themes/pinstripe/browser/jar.mn\\nindex e720d2a..e0944fc 100644\\n--- a/browser/themes/pinstripe/browser/jar.mn\\n+++ b/browser/themes/pinstripe/browser/jar.mn\\n@@ -73,7 +73,6 @@ classic.jar:\\n   skin/classic/browser/tabbrowser/tab-arrow-end.png                      (tabbrowser/tab-arrow-end.png)\\n   skin/classic/browser/tabbrowser/tab-arrow-end-bkgnd.png                (tabbrowser/tab-arrow-end-bkgnd.png)\\n   skin/classic/browser/tabbrowser/tab-arrow-end-bkgnd-animate.png        (tabbrowser/tab-arrow-end-bkgnd-animate.png)\\n-  skin/classic/browser/tabbrowser/tabbrowserBindings.xml                 (tabbrowser/tabbrowserBindings.xml)\\n   skin/classic/browser/tabbrowser/tabbrowser-tabs-bkgnd.png              (tabbrowser/tabbrowser-tabs-bkgnd.png)\\n   skin/classic/browser/tabbrowser/tabDragIndicator.png                   (tabbrowser/tabDragIndicator.png)\\n   skin/classic/browser/tabbrowser/tab-left.png                           (tabbrowser/tab-left.png)\\ndiff --git a/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml b/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\ndeleted file mode 100644\\nindex a6e8ce2..0000000\\n--- a/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\n+++ /dev/null\\n@@ -1,69 +0,0 @@\\n-<?xml version=\\\"1.0\\\"?>\\n-\\n-<!DOCTYPE bindings [\\n-<!ENTITY % tabBrowserDTD SYSTEM \\\"chrome://browser/locale/tabbrowser.dtd\\\" >\\n-%tabBrowserDTD;\\n-<!ENTITY % globalDTD SYSTEM \\\"chrome://global/locale/global.dtd\\\">\\n-%globalDTD;\\n-]>\\n-\\n-<bindings id=\\\"globalBindings\\\"\\n-   xmlns=\\\"http://www.mozilla.org/xbl\\\"\\n-   xmlns:xul=\\\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\\\"\\n-   xmlns:xbl=\\\"http://www.mozilla.org/xbl\\\">\\n-\\n-  <binding id=\\\"tabbrowser-tab\\\" extends=\\\"chrome://browser/content/tabbrowser.xml#tabbrowser-tab\\\">\\n-    <content chromedir=\\\"&locale.dir;\\\"\\n-             closetabtext=\\\"&closeTab.label;\\\">\\n-      <xul:hbox class=\\\"tab-image-left\\\" xbl:inherits=\\\"selected\\\"/>\\n-      <xul:hbox flex=\\\"1\\\" class=\\\"tab-image-middle\\\" align=\\\"center\\\" xbl:inherits=\\\"selected\\\">\\n-        <xul:stack class=\\\"tab-icon\\\">\\n-          <xul:image xbl:inherits=\\\"validate,src=image\\\" class=\\\"tab-icon-image\\\"/>\\n-          <xul:image class=\\\"tab-extra-status\\\"/>\\n-        </xul:stack>\\n-        <xul:label flex=\\\"1\\\" xbl:inherits=\\\"value=label,crop,accesskey\\\" crop=\\\"right\\\" class=\\\"tab-text\\\"/>\\n-      </xul:hbox>\\n-      <xul:toolbarbutton anonid=\\\"close-button\\\" class=\\\"tab-close-button\\\" tabindex=\\\"-1\\\"/>\\n-        <xul:hbox class=\\\"tab-image-right\\\" xbl:inherits=\\\"selected\\\"/>\\n-    </content>\\n-  </binding>\\n-\\n-   <binding id=\\\"tabbrowser-tabs\\\"  \\n-            extends=\\\"chrome://browser/content/tabbrowser.xml#tabbrowser-tabs\\\">\\n-    <content>\\n-      <xul:stack flex=\\\"1\\\" class=\\\"tabs-stack\\\">\\n-        <xul:vbox>\\n-          <xul:spacer flex=\\\"1\\\"/>\\n-          <xul:hbox class=\\\"tabs-bottom\\\" align=\\\"center\\\"/>\\n-        </xul:vbox>\\n-        <xul:vbox>\\n-          <xul:hbox>\\n-            <xul:stack>\\n-              <xul:spacer class=\\\"tabs-left\\\"/>\\n-            </xul:stack>\\n-            <xul:arrowscrollbox anonid=\\\"arrowscrollbox\\\" orient=\\\"horizontal\\\" flex=\\\"1\\\" style=\\\"min-width: 1px;\\\" class=\\\"tabbrowser-arrowscrollbox\\\">\\n-              <children/>\\n-            </xul:arrowscrollbox>\\n-            <xul:stack align=\\\"center\\\" pack=\\\"end\\\">\\n-              <xul:hbox flex=\\\"1\\\" class=\\\"tabs-alltabs-box\\\" \\n-                        anonid=\\\"alltabs-box\\\"/>\\n-              <xul:hbox flex=\\\"1\\\" class=\\\"tabs-alltabs-box-animate\\\" \\n-                        anonid=\\\"alltabs-box-animate\\\"/>\\n-              <xul:toolbarbutton class=\\\"tabs-alltabs-button\\\"\\n-                                 type=\\\"menu\\\"\\n-                                 anonid=\\\"alltabs-button\\\"\\n-                                 tooltipstring=\\\"&listAllTabs.label;\\\">\\n-                <xul:menupopup class=\\\"tabs-alltabs-popup\\\"\\n-                               anonid=\\\"alltabs-popup\\\" position=\\\"after_end\\\"/>\\n-              </xul:toolbarbutton>\\n-            </xul:stack>\\n-            <xul:hbox class=\\\"tabs-closebutton-box\\\" align=\\\"center\\\" pack=\\\"end\\\" anonid=\\\"tabstrip-closebutton\\\">\\n-              <xul:toolbarbutton class=\\\"close-button tabs-closebutton\\\"/>\\n-            </xul:hbox>\\n-          </xul:hbox>\\n-          <xul:spacer class=\\\"tabs-bottom-spacer\\\"/>\\n-        </xul:vbox>\\n-      </xul:stack>\\n-    </content>\\n-  </binding>\\n-</bindings>\\ndiff --git a/browser/themes/winstripe/browser/browser.css b/browser/themes/winstripe/browser/browser.css\\nindex 4a6eaa3..a3e3ced 100644\\n--- a/browser/themes/winstripe/browser/browser.css\\n+++ b/browser/themes/winstripe/browser/browser.css\\n@@ -1263,7 +1263,6 @@ toolbar[mode=\\\"text\\\"] #navigator-throbber[busy=\\\"true\\\"] {\\n  */\\n \\n .tabbrowser-tabs {\\n-  -moz-binding: url(\\\"chrome://browser/skin/tabbrowser/tabbrowserBindings.xml#tabbrowser-tabs\\\") !important;\\n   padding-top: 0px;\\n   background: -moz-dialog url(\\\"chrome://browser/skin/tabbrowser/tabbrowser-tabs-bkgnd.png\\\") !important;\\n   -moz-padding-start: 0px;\\n@@ -1279,7 +1278,6 @@ toolbar[mode=\\\"text\\\"] #navigator-throbber[busy=\\\"true\\\"] {\\n \\n .tabbrowser-tab {\\n   -moz-appearance: none !important;\\n-  -moz-binding: url(\\\"chrome://browser/skin/tabbrowser/tabbrowserBindings.xml#tabbrowser-tab\\\") !important;\\n   background: transparent !important;\\n   margin: 0px 0px 1px !important;\\n   padding: 0px !important;\\ndiff --git a/browser/themes/winstripe/browser/jar.mn b/browser/themes/winstripe/browser/jar.mn\\nindex ee254d9..b15824b 100644\\n--- a/browser/themes/winstripe/browser/jar.mn\\n+++ b/browser/themes/winstripe/browser/jar.mn\\n@@ -85,7 +85,6 @@ classic.jar:\\n         skin/classic/browser/tabbrowser/tab-arrow-start-bkgnd-disabled.png (tabbrowser/tab-arrow-start-bkgnd-disabled.png)\\n         skin/classic/browser/tabbrowser/tab-arrow-start-bkgnd-enabled.png  (tabbrowser/tab-arrow-start-bkgnd-enabled.png)\\n         skin/classic/browser/tabbrowser/tab-arrow-start-bkgnd-hover.png    (tabbrowser/tab-arrow-start-bkgnd-hover.png)\\n-        skin/classic/browser/tabbrowser/tabbrowserBindings.xml             (tabbrowser/tabbrowserBindings.xml)\\n         skin/classic/browser/tabbrowser/tabbrowser-tabs-bkgnd.png          (tabbrowser/tabbrowser-tabs-bkgnd.png)\\n         skin/classic/browser/tabbrowser/tabDragIndicator.png               (tabbrowser/tabDragIndicator.png)\\n         skin/classic/browser/tabbrowser/tab-left.png                       (tabbrowser/tab-left.png)\\ndiff --git a/browser/themes/winstripe/browser/tabbrowser/tabbrowserBindings.xml b/browser/themes/winstripe/browser/tabbrowser/tabbrowserBindings.xml\\ndeleted file mode 100644\\nindex 615c93c..0000000\\n--- a/browser/themes/winstripe/browser/tabbrowser/tabbrowserBindings.xml\\n+++ /dev/null\\n@@ -1,75 +0,0 @@\\n-<?xml version=\\\"1.0\\\"?>\\n-\\n-<!DOCTYPE bindings [\\n-<!ENTITY % tabBrowserDTD SYSTEM \\\"chrome://browser/locale/tabbrowser.dtd\\\" >\\n-%tabBrowserDTD;\\n-<!ENTITY % globalDTD SYSTEM \\\"chrome://global/locale/global.dtd\\\">\\n-%globalDTD;\\n-]>\\n-\\n-<bindings id=\\\"globalBindings\\\"\\n-   xmlns=\\\"http://www.mozilla.org/xbl\\\"\\n-   xmlns:xul=\\\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\\\"\\n-   xmlns:xbl=\\\"http://www.mozilla.org/xbl\\\">\\n-\\n-  <binding id=\\\"tabbrowser-tab\\\" extends=\\\"chrome://browser/content/tabbrowser.xml#tabbrowser-tab\\\">\\n-    <content chromedir=\\\"&locale.dir;\\\"\\n-             closetabtext=\\\"&closeTab.label;\\\">\\n-      <xul:hbox class=\\\"tab-image-left\\\" xbl:inherits=\\\"selected\\\"/>\\n-      <xul:hbox flex=\\\"1\\\" class=\\\"tab-image-middle\\\" align=\\\"center\\\" xbl:inherits=\\\"selected\\\">\\n-        <xul:stack class=\\\"tab-icon\\\">\\n-          <xul:image xbl:inherits=\\\"validate,src=image\\\" class=\\\"tab-icon-image\\\"/>\\n-          <xul:image class=\\\"tab-extra-status\\\"/>\\n-        </xul:stack>\\n-        <xul:label flex=\\\"1\\\" xbl:inherits=\\\"value=label,crop,accesskey\\\" crop=\\\"right\\\" class=\\\"tab-text\\\"/>\\n-      </xul:hbox>\\n-      <xul:toolbarbutton anonid=\\\"close-button\\\" class=\\\"tab-close-button\\\" tabindex=\\\"-1\\\"/>\\n-        <xul:hbox class=\\\"tab-image-right\\\" xbl:inherits=\\\"selected\\\"/>\\n-    </content>\\n-  </binding>\\n-\\n-   <binding id=\\\"tabbrowser-tabs\\\"  \\n-            extends=\\\"chrome://browser/content/tabbrowser.xml#tabbrowser-tabs\\\">\\n-    <content>\\n-      <xul:stack flex=\\\"1\\\" class=\\\"tabs-stack\\\">\\n-        <xul:vbox>\\n-          <xul:spacer flex=\\\"1\\\"/>\\n-          <xul:hbox class=\\\"tabs-bottom\\\" align=\\\"center\\\"/>\\n-        </xul:vbox>\\n-        <xul:vbox>\\n-          <xul:hbox>\\n-            <xul:stack>\\n-              <xul:spacer class=\\\"tabs-left\\\"/>\\n-            </xul:stack>\\n-            <xul:arrowscrollbox anonid=\\\"arrowscrollbox\\\"\\n-                                orient=\\\"horizontal\\\"\\n-                                flex=\\\"1\\\"\\n-                                style=\\\"min-width: 1px;\\\"\\n-                                chromedir=\\\"&locale.dir;\\\"\\n-                                class=\\\"tabbrowser-arrowscrollbox\\\">\\n-              <children/>\\n-            </xul:arrowscrollbox>\\n-            <xul:stack align=\\\"center\\\" pack=\\\"end\\\" chromedir=\\\"&locale.dir;\\\">\\n-              <xul:hbox flex=\\\"1\\\"\\n-                        class=\\\"tabs-alltabs-box\\\"\\n-                        anonid=\\\"alltabs-box\\\"/>\\n-              <xul:hbox flex=\\\"1\\\" class=\\\"tabs-alltabs-box-animate\\\"\\n-                        anonid=\\\"alltabs-box-animate\\\"/>\\n-              <xul:toolbarbutton class=\\\"tabs-alltabs-button\\\" type=\\\"menu\\\"\\n-                                 anonid=\\\"alltabs-button\\\" \\n-                                 tooltipstring=\\\"&listAllTabs.label;\\\">\\n-                <xul:menupopup class=\\\"tabs-alltabs-popup\\\"\\n-                               anonid=\\\"alltabs-popup\\\" position=\\\"after_end\\\"/>\\n-              </xul:toolbarbutton>\\n-            </xul:stack>\\n-            <xul:hbox anonid=\\\"tabstrip-closebutton\\\" class=\\\"tabs-closebutton-box\\\"\\n-                      align=\\\"center\\\" pack=\\\"end\\\" chromedir=\\\"&locale.dir;\\\">\\n-              <xul:toolbarbutton class=\\\"close-button tabs-closebutton\\\"/>\\n-            </xul:hbox>\\n-          </xul:hbox>\\n-          <xul:spacer class=\\\"tabs-bottom-spacer\\\"/>\\n-        </xul:vbox>\\n-      </xul:stack>\\n-    </content>\\n-  </binding>\\n-</bindings>\\n\""}