{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas93258a7\""},"diff":"\"93258a7 Bug 336959. Exit properly if we get OOM. patch by Theppitak Karoonboonyanan, r+sr=roc,a=damon\\ndiff --git a/intl/lwbrk/src/nsPangoBreaker.cpp b/intl/lwbrk/src/nsPangoBreaker.cpp\\nindex 85adfd6..b624305 100644\\n--- a/intl/lwbrk/src/nsPangoBreaker.cpp\\n+++ b/intl/lwbrk/src/nsPangoBreaker.cpp\\n@@ -49,14 +49,11 @@ NS_GetComplexLineBreaks(const PRUnichar* aText, PRUint32 aLength,\\n {\\n   NS_ASSERTION(aText, \\\"aText shouldn't be null\\\");\\n \\n+  memset(aBreakBefore, PR_FALSE, aLength * sizeof(PRPackedBool));\\n+\\n   nsAutoTArray<PangoLogAttr, 2000> attrBuffer;\\n   if (!attrBuffer.AppendElements(aLength + 1))\\n-  {\\n-    // out of memory, behave as if there were no complex line breaker\\n-    for (PRUint32 i = 0; i < aLength; ++i) {\\n-      aBreakBefore[i] = PR_FALSE;\\n-    }\\n-  }\\n+    return;\\n \\n   NS_ConvertUTF16toUTF8 aUTF8(aText, aLength);\\n \\n\""}