{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas891b541\""},"diff":"\"891b541 bug 253481 - xul:textb ox attribute to specify what happens to pasted line breaks - mochichrome test.  r=enndeakin\\ndiff --git a/toolkit/content/tests/chrome/Makefile.in b/toolkit/content/tests/chrome/Makefile.in\\nindex c3902f6..42b96b7 100644\\n--- a/toolkit/content/tests/chrome/Makefile.in\\n+++ b/toolkit/content/tests/chrome/Makefile.in\\n@@ -46,6 +46,7 @@ include $(topsrcdir)/config/rules.mk\\n \\n _TEST_FILES = \\tbug288254_window.xul \\\\\\n \\t\\ttest_bug288254.xul \\\\\\n+\\t\\ttest_bug253481.xul \\\\\\n \\t\\tbug304188_window.xul \\\\\\n \\t\\ttest_bug304188.xul \\\\\\n \\t\\tbug360437_window.xul \\\\\\ndiff --git a/toolkit/content/tests/chrome/test_bug253481.xul b/toolkit/content/tests/chrome/test_bug253481.xul\\nnew file mode 100644\\nindex 0000000..6648ac4e\\n--- /dev/null\\n+++ b/toolkit/content/tests/chrome/test_bug253481.xul\\n@@ -0,0 +1,79 @@\\n+<?xml version=\\\"1.0\\\"?>\\n+<?xml-stylesheet href=\\\"chrome://global/skin\\\" type=\\\"text/css\\\"?>\\n+<?xml-stylesheet \\n+  href=\\\"chrome://mochikit/content/tests/SimpleTest/test.css\\\"\\n+  type=\\\"text/css\\\"?>\\n+<!--\\n+https://bugzilla.mozilla.org/show_bug.cgi?id=253481\\n+-->\\n+<window title=\\\"Mozilla Bug 253481\\\"\\n+  xmlns:html=\\\"http://www.w3.org/1999/xhtml\\\"\\n+  xmlns=\\\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\\\">\\n+\\n+  <script type=\\\"application/javascript\\\" \\n+          src=\\\"chrome://mochikit/content/MochiKit/packed.js\\\"></script>\\n+  <script type=\\\"application/javascript\\\" \\n+          src=\\\"chrome://mochikit/content/tests/SimpleTest/SimpleTest.js\\\"></script>      \\n+  <script type=\\\"application/javascript\\\" \\n+          src=\\\"chrome://mochikit/content/tests/SimpleTest/EventUtils.js\\\"></script>      \\n+\\n+<body  xmlns=\\\"http://www.w3.org/1999/xhtml\\\">\\n+<a target=\\\"_blank\\\" href=\\\"https://bugzilla.mozilla.org/show_bug.cgi?id=253481\\\">Mozilla Bug 253481</a>\\n+<p id=\\\"display\\\"></p>\\n+<div id=\\\"content\\\" style=\\\"display: none\\\">\\n+  \\n+</div>\\n+</body>\\n+\\n+<description>\\n+  Tests pasting of multi-line content into a single-line xul:textbox.\\n+</description>\\n+\\n+<vbox>\\n+<textbox id=\\\"pasteintact\\\" newlines=\\\"pasteintact\\\"/>\\n+<textbox id=\\\"pastetofirst\\\" newlines=\\\"pastetofirst\\\"/>\\n+<textbox id=\\\"replacewithspaces\\\" newlines=\\\"replacewithspaces\\\"/>\\n+<textbox id=\\\"strip\\\" newlines=\\\"strip\\\"/>\\n+<textbox id=\\\"replacewithcommas\\\" newlines=\\\"replacewithcommas\\\"/>\\n+<textbox id=\\\"stripsurroundingwhitespace\\\" newlines=\\\"stripsurroundingwhitespace\\\"/>\\n+</vbox>\\n+<script class=\\\"testbody\\\" type=\\\"application/javascript;version=1.7\\\">\\n+<![CDATA[\\n+/** Test for Bug 253481 **/\\n+function testPaste(name, element, expected) {\\n+  element.focus();\\n+  synthesizeKey(\\\"v\\\", { accelKey: true });\\n+  is(element.value, expected, name);\\n+}\\n+\\n+SimpleTest.waitForExplicitFinish();\\n+\\n+addLoadEvent(function() {\\n+setTimeout(function() {\\n+var testString = \\\"  hello hello  \\\\n  world\\\\nworld  \\\";\\n+var expectedResults = {\\n+\\\"pasteintact\\\": testString,\\n+\\\"pastetofirst\\\": testString.split(/\\\\n/)[0],\\n+\\\"replacewithspaces\\\": testString.replace('\\\\n',' ','g'),\\n+\\\"strip\\\": testString.replace('\\\\n','','g'),\\n+\\\"replacewithcommas\\\": testString.replace('\\\\n',',','g'),\\n+\\\"stripsurroundingwhitespace\\\": testString.replace(/\\\\s*\\\\n\\\\s*/g,'')\\n+};\\n+\\n+// Put a multi-line string in the clipboard\\n+Components.classes[\\\"@mozilla.org/widget/clipboardhelper;1\\\"]\\n+          .getService(Components.interfaces.nsIClipboardHelper)\\n+          .copyString(testString);\\n+\\n+for (let [item, expected] in Iterator(expectedResults)) {\\n+   testPaste(item, $(item), expected);\\n+}\\n+\\n+SimpleTest.finish();\\n+}, 0);\\n+});\\n+\\n+]]>\\n+</script>\\n+\\n+</window>\\n\""}