{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas72530b9\""},"diff":"\"72530b9 Bug 256856 - Focusing field using access key displays autocomplete popup, r=mano, a=mconnor\\ndiff --git a/toolkit/components/satchel/src/nsFormFillController.cpp b/toolkit/components/satchel/src/nsFormFillController.cpp\\nindex b362701..348c8db 100644\\n--- a/toolkit/components/satchel/src/nsFormFillController.cpp\\n+++ b/toolkit/components/satchel/src/nsFormFillController.cpp\\n@@ -812,36 +812,6 @@ nsFormFillController::Input(nsIDOMEvent* aEvent)\\n NS_IMETHODIMP\\n nsFormFillController::MouseDown(nsIDOMEvent* aMouseEvent)\\n {\\n-  mIgnoreClick = PR_FALSE;\\n-\\n-  nsCOMPtr<nsIDOMEventTarget> target;\\n-  aMouseEvent->GetTarget(getter_AddRefs(target));\\n-\\n-  nsCOMPtr<nsIDOMHTMLInputElement> targetInput = do_QueryInterface(target);\\n-  if (!targetInput || (targetInput && targetInput != mFocusedInput)) {\\n-    // A new input will be taking focus.  Ignore the first click\\n-    // so that the popup is not shown.\\n-    mIgnoreClick = PR_TRUE;\\n-    return NS_OK;\\n-  }\\n-\\n-  return NS_OK;\\n-}\\n-\\n-NS_IMETHODIMP\\n-nsFormFillController::MouseUp(nsIDOMEvent* aMouseEvent)\\n-{\\n-  return NS_OK;\\n-}\\n-\\n-NS_IMETHODIMP\\n-nsFormFillController::MouseClick(nsIDOMEvent* aMouseEvent)\\n-{\\n-  if (mIgnoreClick) {\\n-    mIgnoreClick = PR_FALSE;\\n-    return NS_OK;\\n-  }\\n-\\n   if (!mFocusedInput)\\n     return NS_OK;\\n \\n@@ -881,6 +851,18 @@ nsFormFillController::MouseClick(nsIDOMEvent* aMouseEvent)\\n }\\n \\n NS_IMETHODIMP\\n+nsFormFillController::MouseUp(nsIDOMEvent* aMouseEvent)\\n+{\\n+  return NS_OK;\\n+}\\n+\\n+NS_IMETHODIMP\\n+nsFormFillController::MouseClick(nsIDOMEvent* aMouseEvent)\\n+{\\n+  return NS_OK;\\n+}\\n+\\n+NS_IMETHODIMP\\n nsFormFillController::MouseDblClick(nsIDOMEvent* aMouseEvent)\\n { \\n     return NS_OK;\\ndiff --git a/toolkit/components/satchel/src/nsFormFillController.h b/toolkit/components/satchel/src/nsFormFillController.h\\nindex bbe0ccb..d8a8cd7 100644\\n--- a/toolkit/components/satchel/src/nsFormFillController.h\\n+++ b/toolkit/components/satchel/src/nsFormFillController.h\\n@@ -163,7 +163,6 @@ protected:\\n   PRPackedBool mCompleteSelectedIndex;\\n   PRPackedBool mForceComplete;\\n   PRPackedBool mSuppressOnInput;\\n-  PRPackedBool mIgnoreClick;\\n };\\n \\n #endif // __nsFormFillController__\\n\""}