{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas6efb45d\""},"diff":"\"6efb45d Unit tests for bug 394239 (based on Martijn Wargers' testcase) and bug 392923\\ndiff --git a/layout/generic/test/Makefile.in b/layout/generic/test/Makefile.in\\nindex cf15c9c..39ad5d7 100644\\n--- a/layout/generic/test/Makefile.in\\n+++ b/layout/generic/test/Makefile.in\\n@@ -52,7 +52,9 @@ _TEST_FILES = \\ttest_bug323656.html \\\\\\n \\t\\ttest_bug385751.html \\\\\\n \\t\\ttest_bug389630.html \\\\\\n \\t\\ttest_bug391747.html \\\\\\n+\\t\\ttest_bug392923.html \\\\\\n \\t\\ttest_bug394173.html \\\\\\n+\\t\\ttest_bug394239.html \\\\\\n \\t\\t$(NULL)\\n \\n libs:: $(_TEST_FILES)\\ndiff --git a/layout/generic/test/test_bug392923.html b/layout/generic/test/test_bug392923.html\\nnew file mode 100644\\nindex 0000000..fd7e0fc\\n--- /dev/null\\n+++ b/layout/generic/test/test_bug392923.html\\n@@ -0,0 +1,41 @@\\n+<!DOCTYPE HTML>\\n+<html>\\n+<!--\\n+https://bugzilla.mozilla.org/show_bug.cgi?id=392923\\n+-->\\n+<head>\\n+  <title>Test for Bug 392923</title>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/MochiKit/MochiKit.js\\\"></script>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/tests/SimpleTest/SimpleTest.js\\\"></script>        \\n+  <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"/tests/SimpleTest/test.css\\\" />\\n+  <style>p { -moz-column-count: 2; }\\n+  </style>\\n+</head>\\n+<body>\\n+<a target=\\\"_blank\\\" href=\\\"https://bugzilla.mozilla.org/show_bug.cgi?id=392923\\\">Mozilla Bug 392923</a>\\n+<div id=\\\"content\\\">\\n+<p>&#x5E2;&#x5D1;&#x5E8;&#x5D9;&#x5EA; Lorem ipsum dolor sit\\n+amet, consectetuer adipiscing elit. Maecenas volutpat. Duis purus lectus,\\n+hendrerit vitae, blandit ac, tristique quis, neque. Cras a nisl. Cum sociis\\n+natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In\\n+consectetuer lorem sit amet quam facilisis mollis. Etiam dolor. Donec\\n+elementum leo in ligula. Duis lacus diam, sodales vitae, rutrum a,\\n+feugiat non, tortor. Maecenas cursus lobortis diam. Mauris in pede eu\\n+purus ultricies vehicula. &#x5E2;&#x5D1;&#x5E8;&#x5D9;&#x5EA;</p>\\n+</div>\\n+<pre id=\\\"test\\\">\\n+<script class=\\\"testbody\\\" type=\\\"text/javascript\\\">\\n+ function test()\\n+{\\n+/** Test for Bug 392923 **/\\n+  ok(true, \\\"Should not crash\\\");\\n+  SimpleTest.finish();\\n+}\\n+\\n+  setTimeout(test, 500);\\n+  SimpleTest.waitForExplicitFinish();\\n+</script>\\n+</pre>\\n+</body>\\n+</html>\\n+\\ndiff --git a/layout/generic/test/test_bug394239.html b/layout/generic/test/test_bug394239.html\\nnew file mode 100644\\nindex 0000000..854fcf6\\n--- /dev/null\\n+++ b/layout/generic/test/test_bug394239.html\\n@@ -0,0 +1,43 @@\\n+<!DOCTYPE HTML>\\n+<html>\\n+<!--\\n+https://bugzilla.mozilla.org/show_bug.cgi?id=394239\\n+-->\\n+<head>\\n+  <title>Test for Bug 394239</title>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/MochiKit/MochiKit.js\\\"></script>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/tests/SimpleTest/SimpleTest.js\\\"></script>        \\n+  <script type=\\\"text/javascript\\\" src=\\\"/tests/SimpleTest/EventUtils.js\\\"></script>        \\n+  <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"/tests/SimpleTest/test.css\\\" />\\n+  <style>\\n+   #a::after { content:\\\"anonymous text\\\"; }\\n+  </style>\\n+</head>\\n+<body>\\n+<div id=\\\"content\\\">\\n+ <object id=\\\"a\\\" style=\\\"position: relative;\\\">\\n+  <div style=\\\"position: absolute;\\\">\\n+   <input>\\n+  </div>&#1593;\\n+  <div style=\\\"position: absolute;\\\">\\n+    <span style=\\\"position: fixed;\\\">t</span>\\n+  </div>\\n+ </object>\\n+</div>\\n+<a target=\\\"_blank\\\" href=\\\"https://bugzilla.mozilla.org/show_bug.cgi?id=394239\\\">Mozilla Bug 394239</a>\\n+<pre id=\\\"test\\\">\\n+<script class=\\\"testbody\\\" type=\\\"text/javascript\\\">\\n+/** Test for Bug 394239 **/\\n+function test()\\n+{\\n+  $(\\\"a\\\").style.direction=\\\"rtl\\\";\\n+  ok(true, \\\"Should not crash\\\");\\n+  SimpleTest.finish();\\n+}\\n+  setTimeout(test, 500);\\n+  SimpleTest.waitForExplicitFinish();\\n+</script>\\n+</pre>\\n+</body>\\n+</html>\\n+\\n\""}