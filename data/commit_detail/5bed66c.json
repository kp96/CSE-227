{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas5bed66c\""},"diff":"\"5bed66c evalcx uses JS_BeginRequest/JS_EndRequest. bug 398045, r=mrbkap, not a part of the build.\\ndiff --git a/js/src/js.c b/js/src/js.c\\nindex dd35107..0cb3126 100644\\n--- a/js/src/js.c\\n+++ b/js/src/js.c\\n@@ -2372,6 +2372,9 @@ EvalInContext(JSContext *cx, JSObject *obj, uintN argc, jsval *argv,\\n         return JS_FALSE;\\n     }\\n \\n+#ifdef JS_THREADSAFE\\n+    JS_BeginRequest(scx);\\n+#endif\\n     src = JS_GetStringChars(str);\\n     srclen = JS_GetStringLength(str);\\n     lazy = JS_FALSE;\\n@@ -2406,6 +2409,9 @@ EvalInContext(JSContext *cx, JSObject *obj, uintN argc, jsval *argv,\\n     }\\n \\n out:\\n+#ifdef JS_THREADSAFE\\n+    JS_EndRequest(scx);\\n+#endif\\n     JS_DestroyContext(scx);\\n     return ok;\\n }\\n\""}