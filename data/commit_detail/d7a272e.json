{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basd7a272e\""},"diff":"\"d7a272e Bug 343097 - Cleaner arrowscrollbox-clicktoscroll binding. r=sspitzer/mconnor.\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex a43df2d..2444eac 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -1607,21 +1607,24 @@\\n         <body>\\n           <![CDATA[\\n             if (aDragSession.canDrop && aDragSession.sourceNode) {\\n-              // autoscroll the tab strip if we drag over the autorepeat\\n+              var tabStrip = this.mTabContainer.mTabstrip;\\n+\\n+              // autoscroll the tab strip if we drag over the scroll\\n               // buttons, even if we aren't dragging a tab, but then\\n               // return to avoid drawing the drop indicator\\n-              var isTabDrag = (aDragSession.sourceNode.parentNode == this.mTabContainer);\\n               var pixelsToScroll = 0;\\n-              var tabStrip = this.mTabContainer.mTabstrip;\\n-              if (aEvent.originalTarget.localName == \\\"autorepeatbutton\\\") {\\n-                if (aEvent.originalTarget.getAttribute(\\\"class\\\") == \\n-                    \\\"autorepeatbutton-up\\\")\\n-                  pixelsToScroll = tabStrip.scrollIncrement * -1;\\n-                else\\n-                  pixelsToScroll = tabStrip.scrollIncrement;\\n+\\n+              var targetAnonid = aEvent.originalTarget.getAttribute(\\\"anonid\\\");\\n+              if (targetAnonid == \\\"scrollbutton-up\\\") {\\n+                pixelsToScroll = tabStrip.scrollIncrement * -1;\\n+                tabStrip.scrollByPixels(pixelsToScroll);\\n+              }\\n+              else if (targetAnonid == \\\"scrollbutton-down\\\") {\\n+                pixelsToScroll = tabStrip.scrollIncrement;\\n                 tabStrip.scrollByPixels(pixelsToScroll);\\n               }\\n \\n+              var isTabDrag = (aDragSession.sourceNode.parentNode == this.mTabContainer);\\n               if (!isTabDrag)\\n                 return;\\n \\n\""}