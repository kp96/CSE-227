{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas5459e4e\""},"diff":"\"5459e4e bug 395713: show 'Save to Disk' option for applicable types in Applications prefpane; r=gavin, a=mconnor\\ndiff --git a/browser/components/preferences/applications.js b/browser/components/preferences/applications.js\\nindex 6754b08..b1e79f8 100755\\n--- a/browser/components/preferences/applications.js\\n+++ b/browser/components/preferences/applications.js\\n@@ -175,6 +175,7 @@ HandlerInfoWrapper.prototype = {\\n   // we haven't (yet?) implemented, so we make it a public property.\\n   wrappedHandlerInfo: null,\\n \\n+\\n   //**************************************************************************//\\n   // Convenience Utils\\n \\n@@ -196,20 +197,6 @@ HandlerInfoWrapper.prototype = {\\n \\n \\n   //**************************************************************************//\\n-  // nsISupports\\n-\\n-  QueryInterface: function(aIID) {\\n-    if (aIID.equals(Ci.nsIHandlerInfo) ||\\n-        aIID.equals(Ci.nsISupports) ||\\n-        (aIID.equals(Ci.nsIMIMEInfo) &&\\n-         this.wrappedHandlerInfo instanceof Ci.nsIMIMEInfo))\\n-      return this;\\n-\\n-    throw Cr.NS_ERROR_NO_INTERFACE;\\n-  },\\n-\\n-\\n-  //**************************************************************************//\\n   // nsIHandlerInfo\\n \\n   // The MIME type or protocol scheme.\\n@@ -1172,7 +1159,7 @@ var gApplicationsPane = {\\n     // And it's not available to types handled only by plugins either, although\\n     // I would think we'd want to give users the ability to redirect that stuff\\n     // to disk (so maybe we should revisit that decision).\\n-    if ((handlerInfo instanceof Ci.nsIMIMEInfo) &&\\n+    if ((handlerInfo.wrappedHandlerInfo instanceof Ci.nsIMIMEInfo) &&\\n         handlerInfo.type != TYPE_MAYBE_FEED &&\\n         !handlerInfo.handledOnlyByPlugin) {\\n       let menuItem = document.createElementNS(kXULNS, \\\"menuitem\\\");\\n\""}