{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas2d804d8\""},"diff":"\"2d804d8 Bug 393036, re-unpack ab-CD.xpi when doing update verification with 1.5.0.x win32 installers, r=rhelmer\\ndiff --git a/testing/release/common/check_updates.sh b/testing/release/common/check_updates.sh\\nindex 4aaf587..d16dbf7 100755\\n--- a/testing/release/common/check_updates.sh\\n+++ b/testing/release/common/check_updates.sh\\n@@ -3,17 +3,18 @@ check_updates () {\\n   update_platform=$1\\n   source_package=$2\\n   target_package=$3\\n+  locale=$4\\n \\n   # cleanup\\n   rm -rf source/*\\n   rm -rf target/*\\n \\n-  unpack_build $update_platform source \\\"$source_package\\\" \\n+  unpack_build $update_platform source \\\"$source_package\\\" $locale\\n   if [ \\\"$?\\\" != \\\"0\\\" ]; then\\n     echo \\\"FAILED: cannot unpack_build $update_platform source $source_package\\\"\\n     return 1\\n   fi\\n-  unpack_build $update_platform target \\\"$target_package\\\" \\n+  unpack_build $update_platform target \\\"$target_package\\\" $locale \\n   if [ \\\"$?\\\" != \\\"0\\\" ]; then\\n     echo \\\"FAILED: cannot unpack_build $update_platform target $target_package\\\"\\n     return 1\\ndiff --git a/testing/release/common/unpack.sh b/testing/release/common/unpack.sh\\nindex d2994ea..3e54d0a 100755\\n--- a/testing/release/common/unpack.sh\\n+++ b/testing/release/common/unpack.sh\\n@@ -3,6 +3,7 @@ unpack_build () {\\n     unpack_platform=\\\"$1\\\"\\n     dir_name=\\\"$2\\\"\\n     pkg_file=\\\"$3\\\"\\n+    locale=$4\\n \\n     mkdir -p $dir_name\\n     pushd $dir_name > /dev/null\\n@@ -29,6 +30,7 @@ unpack_build () {\\n               do\\n                 unzip -o $file > /dev/null\\n               done\\n+              unzip -o ${locale}.xpi > /dev/null\\n             fi\\n             ;;\\n         linux-i686|linux|Linux_x86-gcc|Linux_x86-gcc3)\\ndiff --git a/testing/release/updates/verify.sh b/testing/release/updates/verify.sh\\nindex 9ffd630..d7a38c2 100755\\n--- a/testing/release/updates/verify.sh\\n+++ b/testing/release/updates/verify.sh\\n@@ -128,7 +128,7 @@ do\\n         fi\\n         source_file=`basename \\\"$from_path\\\"`\\n         target_file=`basename \\\"$to_path\\\"`\\n-        check_updates \\\"$platform\\\" \\\"downloads/$source_file\\\" \\\"downloads/$target_file\\\"\\n+        check_updates \\\"$platform\\\" \\\"downloads/$source_file\\\" \\\"downloads/$target_file\\\" $locale\\n         err=$?\\n         if [ \\\"$err\\\" != \\\"0\\\" ]; then\\n           echo \\\"WARN: check_update returned non-zero exit code for $platform downloads/$source_file vs. downloads/$target_file: $err\\\"\\n\""}