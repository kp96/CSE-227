{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basd59b719\""},"diff":"\"d59b719 Bug 387392 - Remove overrides from extensions.xml. r=dtownsend\\ndiff --git a/toolkit/mozapps/extensions/content/extensions.js b/toolkit/mozapps/extensions/content/extensions.js\\nindex f9ed35a..326cb78 100644\\n--- a/toolkit/mozapps/extensions/content/extensions.js\\n+++ b/toolkit/mozapps/extensions/content/extensions.js\\n@@ -1108,15 +1108,6 @@ function onViewDoubleClick(aEvent)\\n   }\\n }\\n \\n-function onViewGroupKeypress(aEvent) {\\n-  // prevent focus from being taken over by the richlistbox\\n-  gExtensionsView.suppressFocus = true;\\n-}\\n-\\n-function onViewGroupClick(aEvent) {\\n-  gExtensionsView.suppressFocus = false;\\n-}\\n-\\n function onAddonSelect(aEvent)\\n {\\n   var viewButton = document.getElementById(\\\"viewGroup\\\").selectedItem;\\ndiff --git a/toolkit/mozapps/extensions/content/extensions.xml b/toolkit/mozapps/extensions/content/extensions.xml\\nindex 7fe2538..e85ec7c 100644\\n--- a/toolkit/mozapps/extensions/content/extensions.xml\\n+++ b/toolkit/mozapps/extensions/content/extensions.xml\\n@@ -80,42 +80,7 @@\\n           return this._appVersion;\\n         </body>\\n       </method>\\n-\\n-      <field name=\\\"suppressFocus\\\">false</field>\\n-\\n-<!-- Override of richlistbox's _setItemSelection. Allows us to prevent focus\\n-     when using the keyboard to navigate views and to ensure an element is\\n-     visible after it has had a chance to reflow. -->\\n-      <method name=\\\"_setItemSelection\\\">\\n-        <parameter name=\\\"aItem\\\"/>\\n-        <body>\\n-          <![CDATA[\\n-            // unselect current item\\n-            if (this._selectedItem)\\n-              this._selectedItem.selected = false\\n-\\n-            this._selectedItem = aItem;\\n-            this._selectedIndex = this.getIndexOf(aItem);\\n-\\n-            if (aItem) {\\n-              aItem.selected = true;\\n-              if (!this.suppressFocus)\\n-                aItem.focus();\\n-            }\\n-          ]]>\\n-        </body>\\n-      </method>\\n     </implementation>\\n-    <handlers>\\n-      <handler event=\\\"focus\\\">\\n-        if (!this.hasAttribute(\\\"focused\\\"))\\n-          this.setAttribute(\\\"focused\\\", \\\"true\\\");\\n-      </handler>\\n-      <handler event=\\\"blur\\\">\\n-        if (this.hasAttribute(\\\"focused\\\"))\\n-          this.removeAttribute(\\\"focused\\\");\\n-      </handler>\\n-    </handlers>\\n   </binding>\\n \\n   <binding id=\\\"addon-base\\\" extends=\\\"chrome://global/content/bindings/richlistbox.xml#richlistitem\\\">\\n@@ -400,13 +365,6 @@\\n     </implementation>\\n \\n     <handlers>\\n-      <handler event=\\\"focus\\\">\\n-      <![CDATA[\\n-        if (this.parentNode.suppressFocus)\\n-          event.preventDefault();\\n-      ]]>\\n-    </handler>\\n-\\n <!-- When an add-on displays a status messages the element may extend below the\\n      bottom of the list This will ensure that the element is visible for the\\n      most common cases. -->\\ndiff --git a/toolkit/mozapps/extensions/content/extensions.xul b/toolkit/mozapps/extensions/content/extensions.xul\\nindex 4fac28d..8998d9b 100644\\n--- a/toolkit/mozapps/extensions/content/extensions.xul\\n+++ b/toolkit/mozapps/extensions/content/extensions.xul\\n@@ -151,8 +151,7 @@\\n \\n   <stack id=\\\"topStackBar\\\">\\n     <radiogroup id=\\\"viewGroup\\\" xhtml2:role=\\\"wairole:list\\\" persist=\\\"last-selected\\\"\\n-                class=\\\"viewSelector chromeclass-toolbar\\\" orient=\\\"horizontal\\\"\\n-                onkeypress=\\\"onViewGroupKeypress();\\\" onclick=\\\"onViewGroupClick();\\\">\\n+                class=\\\"viewSelector chromeclass-toolbar\\\" orient=\\\"horizontal\\\">\\n       <radio id=\\\"extensions-view\\\" label=\\\"&extensions.label;\\\" oncommand=\\\"showView('extensions');\\\" persist=\\\"last-selected\\\"/>\\n       <radio id=\\\"themes-view\\\" label=\\\"&themes.label;\\\" oncommand=\\\"showView('themes');\\\" persist=\\\"last-selected\\\"/>\\n       <radio id=\\\"locales-view\\\" label=\\\"&locales.label;\\\" oncommand=\\\"showView('locales');\\\" persist=\\\"last-selected\\\"/>\\ndiff --git a/toolkit/themes/pinstripe/mozapps/extensions/extensions.css b/toolkit/themes/pinstripe/mozapps/extensions/extensions.css\\nindex 7704828..1aa1f12 100644\\n--- a/toolkit/themes/pinstripe/mozapps/extensions/extensions.css\\n+++ b/toolkit/themes/pinstripe/mozapps/extensions/extensions.css\\n@@ -54,12 +54,12 @@ richlistitem[selected=\\\"true\\\"] {\\n   color: -moz-DialogText;\\n }\\n \\n-richlistbox[focused] richlistitem[selected=\\\"true\\\"] {\\n+richlistbox:focus richlistitem[selected=\\\"true\\\"] {\\n   background-color: Highlight;\\n   color: HighlightText;\\n }\\n \\n-richlistbox[focused] richlistitem[selected=\\\"true\\\"][isDisabled=\\\"true\\\"] {\\n+richlistbox:focus richlistitem[selected=\\\"true\\\"][isDisabled=\\\"true\\\"] {\\n   background-image: url(\\\"chrome://mozapps/skin/extensions/itemDisabledFader.png\\\");\\n }\\n \\ndiff --git a/toolkit/themes/winstripe/mozapps/extensions/extensions.css b/toolkit/themes/winstripe/mozapps/extensions/extensions.css\\nindex 1867345..293fb2d 100644\\n--- a/toolkit/themes/winstripe/mozapps/extensions/extensions.css\\n+++ b/toolkit/themes/winstripe/mozapps/extensions/extensions.css\\n@@ -111,13 +111,13 @@ richlistitem[selected=\\\"true\\\"] {\\n   color: -moz-DialogText;\\n }\\n \\n-richlistbox[focused] richlistitem[selected=\\\"true\\\"] {\\n+richlistbox:focus richlistitem[selected=\\\"true\\\"] {\\n   background-image: url(\\\"chrome://mozapps/skin/extensions/itemEnabledFader.png\\\");\\n   background-color: Highlight;\\n   color: HighlightText;\\n }\\n \\n-richlistbox[focused] richlistitem[selected=\\\"true\\\"][isDisabled=\\\"true\\\"] {\\n+richlistbox:focus richlistitem[selected=\\\"true\\\"][isDisabled=\\\"true\\\"] {\\n   background-image: url(\\\"chrome://mozapps/skin/extensions/itemDisabledFader.png\\\");\\n }\\n \\n\""}