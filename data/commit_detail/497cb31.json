{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas497cb31\""},"diff":"\"497cb31 Bug 386949 - Browsers should share autoscroll popups when possible; otherwise, a browser should delete its popup when it's closed r=mano\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 958f173..82a5f08 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -198,6 +198,9 @@\\n       <field name=\\\"_blockDblClick\\\">\\n         false\\n       </field>\\n+      <field name=\\\"_autoScrollPopup\\\">\\n+        null\\n+      </field>\\n \\n       <method name=\\\"getBrowserAtIndex\\\">\\n         <parameter name=\\\"aIndex\\\"/>\\n@@ -1217,6 +1220,7 @@\\n             b.setAttribute(\\\"tooltip\\\", this.getAttribute(\\\"contenttooltip\\\"));\\n             if (this.hasAttribute(\\\"autocompletepopup\\\"))\\n               b.setAttribute(\\\"autocompletepopup\\\", this.getAttribute(\\\"autocompletepopup\\\"));\\n+            b.setAttribute(\\\"autoscrollpopup\\\", this._autoScrollPopup.id);\\n \\n             // Add the Message and the Browser to the box\\n             var notificationbox = document.createElementNS(\\n@@ -2452,6 +2456,11 @@\\n           this.mTabContainer.childNodes[0].linkedPanel = uniqueId;\\n           this.mTabContainer.childNodes[0]._tPos = 0;\\n           this.mTabContainer.childNodes[0].linkedBrowser = this.mPanelContainer.childNodes[0].firstChild;\\n+\\n+          // set up the shared autoscroll popup\\n+          this._autoScrollPopup = this.mCurrentBrowser._createAutoScrollPopup();\\n+          this.appendChild(this._autoScrollPopup);\\n+          this.mCurrentBrowser.setAttribute(\\\"autoscrollpopup\\\", this._autoScrollPopup.id);\\n         ]]>\\n       </constructor>\\n \\n\""}