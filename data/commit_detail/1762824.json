{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas1762824\""},"diff":"\"1762824 Bug 396121 - make Applications prefpane the right height on all primary platforms. r=mconnor, a1.9=mconnor\\ndiff --git a/browser/components/preferences/applications.xul b/browser/components/preferences/applications.xul\\nindex 955d423..e432d56 100755\\n--- a/browser/components/preferences/applications.xul\\n+++ b/browser/components/preferences/applications.xul\\n@@ -53,7 +53,7 @@\\n <overlay id=\\\"ApplicationsPaneOverlay\\\"\\n          xmlns=\\\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\\\">\\n \\n-  <prefpane id=\\\"paneApplications\\\" onpaneload=\\\"gApplicationsPane.init();\\\"\\n+  <prefpane id=\\\"paneApplications\\\" onpaneload=\\\"gApplicationsPane.init();\\\" flex=\\\"1\\\"\\n             helpTopic=\\\"prefs-applications\\\" helpURI=\\\"chrome://browser/locale/help/help.rdf\\\">\\n \\n     <preferences id=\\\"feedsPreferences\\\">\\n@@ -78,37 +78,34 @@\\n       <key key=\\\"&focusSearch2.key;\\\" modifiers=\\\"accel\\\" oncommand=\\\"gApplicationsPane.focusFilterBox();\\\"/>\\n     </keyset>\\n \\n-    <vbox flex=\\\"1\\\" class=\\\"contentPane\\\">\\n-      <hbox align=\\\"center\\\">\\n-        <label accesskey=\\\"&filter.accesskey;\\\" control=\\\"filter\\\">&filter.label;</label>\\n-        <textbox id=\\\"filter\\\" flex=\\\"1\\\" oninput=\\\"gApplicationsPane.onFilterInput();\\\" \\n-                onkeypress=\\\"gApplicationsPane.onFilterKeyPress(event);\\\"/>\\n-        <button id=\\\"clearFilter\\\" icon=\\\"clear\\\" label=\\\"&clear.label;\\\" accesskey=\\\"&clear.accesskey;\\\" \\n-                oncommand=\\\"gApplicationsPane.clearFilter();\\\" disabled=\\\"true\\\"/>\\n-      </hbox>\\n+    <hbox align=\\\"center\\\">\\n+      <label accesskey=\\\"&filter.accesskey;\\\" control=\\\"filter\\\">&filter.label;</label>\\n+      <textbox id=\\\"filter\\\" flex=\\\"1\\\" oninput=\\\"gApplicationsPane.onFilterInput();\\\" \\n+              onkeypress=\\\"gApplicationsPane.onFilterKeyPress(event);\\\"/>\\n+      <button id=\\\"clearFilter\\\" icon=\\\"clear\\\" label=\\\"&clear.label;\\\" accesskey=\\\"&clear.accesskey;\\\" \\n+              oncommand=\\\"gApplicationsPane.clearFilter();\\\" disabled=\\\"true\\\"/>\\n+    </hbox>\\n \\n-      <separator class=\\\"thin\\\"/>\\n+    <separator class=\\\"thin\\\"/>\\n \\n-      <label id=\\\"filterActiveLabel\\\" hidden=\\\"true\\\">\\n-        &filterActive.label;\\n-      </label>\\n+    <label id=\\\"filterActiveLabel\\\" hidden=\\\"true\\\">\\n+      &filterActive.label;\\n+    </label>\\n \\n-      <separator class=\\\"thin\\\"/>\\n-\\n-      <richlistbox id=\\\"handlersView\\\" orient=\\\"vertical\\\" style=\\\"height: 300px\\\"\\n-                   onselect=\\\"gApplicationsPane.onSelectionChanged();\\\"\\n-                   persist=\\\"lastSelectedType\\\">\\n-        <listheader equalsize=\\\"always\\\" style=\\\"border: 0; padding: 0;\\\">\\n-          <treecol id=\\\"typeColumn\\\" label=\\\"&typeColumn.label;\\\" value=\\\"type\\\"\\n-                   accesskey=\\\"&typeColumn.accesskey;\\\" persist=\\\"sortDirection\\\"\\n-                   flex=\\\"1\\\" onclick=\\\"gApplicationsPane.sort(event);\\\"\\n-                   sortDirection=\\\"ascending\\\"/>\\n-          <treecol id=\\\"actionColumn\\\" label=\\\"&actionColumn.label;\\\" value=\\\"action\\\"\\n-                   accesskey=\\\"&actionColumn.accesskey;\\\" persist=\\\"sortDirection\\\"\\n-                   flex=\\\"1\\\" onclick=\\\"gApplicationsPane.sort(event);\\\"/>\\n-        </listheader>\\n-      </richlistbox>\\n-    </vbox>\\n+    <separator class=\\\"thin\\\"/>\\n \\n+    <richlistbox id=\\\"handlersView\\\" orient=\\\"vertical\\\"\\n+                 onselect=\\\"gApplicationsPane.onSelectionChanged();\\\"\\n+                 persist=\\\"lastSelectedType\\\">\\n+      <listheader equalsize=\\\"always\\\" style=\\\"border: 0; padding: 0;\\\">\\n+        <treecol id=\\\"typeColumn\\\" label=\\\"&typeColumn.label;\\\" value=\\\"type\\\"\\n+                 accesskey=\\\"&typeColumn.accesskey;\\\" persist=\\\"sortDirection\\\"\\n+                 flex=\\\"1\\\" onclick=\\\"gApplicationsPane.sort(event);\\\"\\n+                 sortDirection=\\\"ascending\\\"/>\\n+        <treecol id=\\\"actionColumn\\\" label=\\\"&actionColumn.label;\\\" value=\\\"action\\\"\\n+                 accesskey=\\\"&actionColumn.accesskey;\\\" persist=\\\"sortDirection\\\"\\n+                 flex=\\\"1\\\" onclick=\\\"gApplicationsPane.sort(event);\\\"/>\\n+      </listheader>\\n+    </richlistbox>\\n   </prefpane>\\n </overlay>\\ndiff --git a/browser/themes/pinstripe/browser/preferences/preferences.css b/browser/themes/pinstripe/browser/preferences/preferences.css\\nindex 40271927..4f521d8 100644\\n--- a/browser/themes/pinstripe/browser/preferences/preferences.css\\n+++ b/browser/themes/pinstripe/browser/preferences/preferences.css\\n@@ -160,6 +160,15 @@ radio[pane=paneAdvanced][selected=\\\"true\\\"] {\\n \\n \\n \\n+/* ----- APPLICATIONS PREFPANE ----- */\\n+#BrowserPreferences[animated=\\\"true\\\"] #handlersView {\\n+  height: 25em;\\n+}\\n+\\n+#BrowserPreferences[animated=\\\"false\\\"] #handlersView {\\n+  -moz-box-flex: 1;\\n+}\\n+\\n .content-box > separator {\\n   border: 1px solid red;\\n }\\ndiff --git a/browser/themes/winstripe/browser/preferences/preferences.css b/browser/themes/winstripe/browser/preferences/preferences.css\\nindex 5bd0e83..e304d9d 100644\\n--- a/browser/themes/winstripe/browser/preferences/preferences.css\\n+++ b/browser/themes/winstripe/browser/preferences/preferences.css\\n@@ -108,6 +108,15 @@ radio[pane=paneAdvanced][selected=\\\"true\\\"] {\\n   background-color: -moz-Dialog;\\n }\\n \\n+/* Applications Pane */\\n+#BrowserPreferences[animated=\\\"true\\\"] #handlersView {\\n+  height: 25em;\\n+}\\n+\\n+#BrowserPreferences[animated=\\\"false\\\"] #handlersView {\\n+  -moz-box-flex: 1;\\n+}\\n+\\n /* File Field Widget */\\n filefield {\\n   margin: 2px 4px;\\ndiff --git a/toolkit/content/widgets/preferences.xml b/toolkit/content/widgets/preferences.xml\\nindex 2fb1e1f..6a95aae 100644\\n--- a/toolkit/content/widgets/preferences.xml\\n+++ b/toolkit/content/widgets/preferences.xml\\n@@ -573,6 +573,7 @@\\n #endif\\n           }\\n         }\\n+        this.setAttribute(\\\"animated\\\", this._shouldAnimate ? \\\"true\\\" : \\\"false\\\");\\n         var panes = this.preferencePanes;\\n \\n         var lastPane = null;\\n@@ -735,6 +736,9 @@\\n               this._paneDeck.selectedIndex = i;\\n               \\n               if (this.type != \\\"child\\\") {\\n+                if (aPaneElement.hasAttribute(\\\"flex\\\") && this._shouldAnimate &&\\n+                    prefpanes.length > 1)\\n+                  aPaneElement.removeAttribute(\\\"flex\\\");\\n                 // Calling sizeToContent after the first prefpane is loaded\\n                 // will size the windows contents so style information is\\n                 // available to calculate correct sizing.\\n\""}