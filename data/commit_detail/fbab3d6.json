{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basfbab3d6\""},"diff":"\"fbab3d6 relanding bug 361735 - middleclick on a search suggestion should open the result in a new tab p=Simon Bunzli (busy) <zeniko@gmail.com> r=gavin\\ndiff --git a/browser/base/content/urlbarBindings.xml b/browser/base/content/urlbarBindings.xml\\nindex 632ded9..c576c23 100644\\n--- a/browser/base/content/urlbarBindings.xml\\n+++ b/browser/base/content/urlbarBindings.xml\\n@@ -518,13 +518,32 @@\\n           }\\n           // completely ignore right-clicks\\n           else if (aEvent.button != 2) {\\n-            var url = controller.getValueAt(this.tree.view.selection.currentIndex);\\n-\\n-            // close the autocomplete popup and revert the entered address\\n-            this.closePopup();\\n-            controller.handleEscape();\\n-            // respect the usual clicking subtleties\\n-            openUILink(url, aEvent);\\n+            if (gURLBar && this.mInput == gURLBar) {\\n+              // handle address bar click\\n+              var url = controller.getValueAt(this.tree.view.selection.currentIndex);\\n+\\n+              // close the autocomplete popup and revert the entered address\\n+              this.closePopup();\\n+              controller.handleEscape();\\n+              // respect the usual clicking subtleties\\n+              openUILink(url, aEvent);\\n+            }\\n+            else if (this.mInput._getParentSearchbar) {\\n+              // handle search bar click\\n+              var search = controller.getValueAt(this.tree.view.selection.currentIndex);\\n+              var textbox = this.mInput;\\n+\\n+              // close the autocomplete popup and copy the selected value to the search box\\n+              this.closePopup();\\n+              textbox.value = search;\\n+              // open the search results according to the clicking subtlety\\n+              var where = whereToOpenLink(aEvent, false, true);\\n+              textbox._getParentSearchbar().doSearch(search, where);\\n+            }\\n+            else {\\n+              // everybody else (i.e. browser content) gets unmodified behavior\\n+              controller.handleEnter();\\n+            }\\n           }\\n         ]]></body>\\n       </method>\\n\""}