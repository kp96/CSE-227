{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basca4efec\""},"diff":"\"ca4efec bug 395636: don't provide UI for removing entries from the list of types in the Applications prefpane; r=gavin, a=mconnor\\ndiff --git a/browser/components/preferences/applications.js b/browser/components/preferences/applications.js\\nindex 85cc77d..885a35c 100755\\n--- a/browser/components/preferences/applications.js\\n+++ b/browser/components/preferences/applications.js\\n@@ -416,10 +416,6 @@ HandlerInfoWrapper.prototype = {\\n     this._handlerSvc.store(this.wrappedHandlerInfo);\\n   },\\n \\n-  remove: function() {\\n-    this._handlerSvc.remove(this.wrappedHandlerInfo);\\n-  },\\n-\\n \\n   //**************************************************************************//\\n   // Icons\\n@@ -693,9 +689,6 @@ var feedHandlerInfo = {\\n   // XXX Should we hold off on making the changes until this method gets called?\\n   store: function() {},\\n \\n-  // The feed type cannot be removed.\\n-  remove: function() {},\\n-\\n \\n   //**************************************************************************//\\n   // Icons\\n@@ -1182,17 +1175,6 @@ var gApplicationsPane = {\\n       menuItem.setAttribute(\\\"label\\\", this._bundle.getString(\\\"chooseApp\\\"));\\n       menuPopup.appendChild(menuItem);\\n     }\\n-\\n-    // Create a menu item for removing this entry unless it's a plugin\\n-    // or the feed type, which cannot be removed.\\n-    // XXX Should this perhaps be a button on the entry, or should we perhaps\\n-    // provide no UI for removing entries at all?\\n-    if (!handlerInfo.plugin && handlerInfo.type != TYPE_MAYBE_FEED) {\\n-      let menuItem = document.createElementNS(kXULNS, \\\"menuitem\\\");\\n-      menuItem.setAttribute(\\\"oncommand\\\", \\\"gApplicationsPane.removeType(event)\\\");\\n-      menuItem.setAttribute(\\\"label\\\", this._bundle.getString(\\\"removeType\\\"));\\n-      menuPopup.appendChild(menuItem);\\n-    }\\n   },\\n \\n \\n@@ -1388,40 +1370,6 @@ var gApplicationsPane = {\\n     this.rebuildActionsMenu();\\n   },\\n \\n-  removeType: function() {\\n-    var promptService = Cc[\\\"@mozilla.org/embedcomp/prompt-service;1\\\"].\\n-                        getService(Ci.nsIPromptService);\\n-    var flags = Ci.nsIPromptService.BUTTON_TITLE_IS_STRING * Ci.nsIPromptService.BUTTON_POS_0;\\n-    flags += Ci.nsIPromptService.BUTTON_TITLE_CANCEL * Ci.nsIPromptService.BUTTON_POS_1;\\n-\\n-    var title = this._bundle.getString(\\\"removeTitle\\\");\\n-    var message = this._bundle.getString(\\\"removeMessage\\\");\\n-    var button = this._bundle.getString(\\\"removeButton\\\");\\n-    var rv = promptService.confirmEx(window, title, message, flags, button, \\n-                                     null, null, null, { value: 0 });\\n-\\n-    if (rv == 0) {\\n-      // Remove information about the type from the handlers datastore.\\n-      let listItem = this._list.selectedItem;\\n-      let handlerInfo = this._handledTypes[listItem.type];\\n-      handlerInfo.remove();\\n-\\n-      // Select the next item in the list (or the previous item if the item\\n-      // being removed is the last item).\\n-      if (this._list.selectedIndex == this._list.getRowCount() - 1)\\n-        this._list.selectedIndex = this._list.selectedIndex - 1;\\n-      else\\n-        this._list.selectedIndex = this._list.selectedIndex + 1;\\n-\\n-      // Remove the item from the list.\\n-      this._list.removeChild(listItem);\\n-    }\\n-    else {\\n-      // Rebuild the actions menu so we go back to their previous selection.\\n-      this.rebuildActionsMenu();\\n-    }\\n-  },\\n-\\n   // Mark which item in the list was last selected so we can reselect it\\n   // when we rebuild the list or when the user returns to the prefpane.\\n   onSelectionChanged: function() {\\ndiff --git a/browser/locales/en-US/chrome/browser/preferences/preferences.properties b/browser/locales/en-US/chrome/browser/preferences/preferences.properties\\nindex de7000c..395af4f 100644\\n--- a/browser/locales/en-US/chrome/browser/preferences/preferences.properties\\n+++ b/browser/locales/en-US/chrome/browser/preferences/preferences.properties\\n@@ -45,10 +45,6 @@ chooseDownloadFolderTitle=Choose Download Folder:\\n \\n #### Applications\\n \\n-removeType=Remove this entry...\\n-removeButton=Remove Entry\\n-removeTitle=Remove Entry\\n-removeMessage=If you remove this entry, Firefox will ask you what to do next time you access content of this type.  Are you sure you want to remove this entry?\\n fileEnding=%S file\\n saveToDisk=Save to Disk\\n chooseApp=Choose application...\\n\""}