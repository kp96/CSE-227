{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basb3bb455\""},"diff":"\"b3bb455 Bug 396236: don't try to remove an observer if it wasn't added, r=mano, a=mconnor\\ndiff --git a/browser/components/search/content/search.xml b/browser/components/search/content/search.xml\\nindex 9eb5efe..ff5b665 100644\\n--- a/browser/components/search/content/search.xml\\n+++ b/browser/components/search/content/search.xml\\n@@ -133,15 +133,19 @@\\n                Components.classes[\\\"@mozilla.org/observer-service;1\\\"]\\n                          .getService(Components.interfaces.nsIObserverService);\\n           os.addObserver(this, \\\"browser-search-engine-modified\\\", false);\\n+          \\n+          this._addedObserver = true;\\n         ]]></body>\\n       </method>\\n \\n       <destructor><![CDATA[\\n-        var os = Components.classes[\\\"@mozilla.org/observer-service;1\\\"]\\n-                           .getService(Components.interfaces.nsIObserverService);\\n-        os.removeObserver(this, \\\"browser-search-engine-modified\\\");\\n+        if (this._addedObserver) {\\n+          var os = Components.classes[\\\"@mozilla.org/observer-service;1\\\"]\\n+                             .getService(Components.interfaces.nsIObserverService);\\n+          os.removeObserver(this, \\\"browser-search-engine-modified\\\");\\n+        }\\n \\n-        // Make sure to break the cycle from _texbox to us.  Otherwise we leak\\n+        // Make sure to break the cycle from _texbox to us. Otherwise we leak\\n         // the world.\\n         this._textbox.mController.input = null;\\n       ]]></destructor>\\n\""}