{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basdcd754b\""},"diff":"\"dcd754b fix for bug #389487: Add favicons on recently closed tabs list patch=Michael Wu <flamingice@sourmilk.net> r=sspitzer\\ndiff --git a/browser/base/content/browser.js b/browser/base/content/browser.js\\nindex f969399f..861226b 100644\\n--- a/browser/base/content/browser.js\\n+++ b/browser/base/content/browser.js\\n@@ -5380,6 +5380,9 @@ HistoryMenu.populateUndoSubmenu = function PHM_populateUndoSubmenu() {\\n   for (var i = 0; i < undoItems.length; i++) {\\n     var m = undoPopup.appendChild(document.createElement(\\\"menuitem\\\"));\\n     m.setAttribute(\\\"label\\\", undoItems[i].title);\\n+    if (undoItems[i].image)\\n+      m.setAttribute(\\\"image\\\", undoItems[i].image);\\n+    m.setAttribute(\\\"class\\\", \\\"menuitem-iconic bookmark-item\\\");\\n     m.setAttribute(\\\"value\\\", i);\\n     m.setAttribute(\\\"oncommand\\\", \\\"undoCloseTab(\\\" + i + \\\");\\\");\\n     m.addEventListener(\\\"click\\\", undoCloseMiddleClick, false);\\ndiff --git a/browser/components/sessionstore/src/nsSessionStore.js b/browser/components/sessionstore/src/nsSessionStore.js\\nindex a84f202..611ad85 100644\\n--- a/browser/components/sessionstore/src/nsSessionStore.js\\n+++ b/browser/components/sessionstore/src/nsSessionStore.js\\n@@ -553,6 +553,7 @@ SessionStoreService.prototype = {\\n       this._windows[aWindow.__SSi]._closedTabs.unshift({\\n         state: tabState,\\n         title: aTab.getAttribute(\\\"label\\\"),\\n+        image: aTab.getAttribute(\\\"image\\\"),\\n         pos: aTab._tPos\\n       });\\n       var length = this._windows[aWindow.__SSi]._closedTabs.length;\\n\""}