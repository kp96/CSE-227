{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas16e1723\""},"diff":"\"16e1723 Part of Bug 381343 - move the composer debug options to the debugQA extension, remove now redundant files r=KaiRo,sr=Neil\\ndiff --git a/editor/ui/composer/content/EditorCommandsDebug.js b/editor/ui/composer/content/EditorCommandsDebug.js\\ndeleted file mode 100644\\nindex 317640a..0000000\\n--- a/editor/ui/composer/content/EditorCommandsDebug.js\\n+++ /dev/null\\n@@ -1,569 +0,0 @@\\n-/* -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\\n-/* ***** BEGIN LICENSE BLOCK *****\\n- * Version: MPL 1.1/GPL 2.0/LGPL 2.1\\n- *\\n- * The contents of this file are subject to the Mozilla Public License Version\\n- * 1.1 (the \\\"License\\\"); you may not use this file except in compliance with\\n- * the License. You may obtain a copy of the License at\\n- * http://www.mozilla.org/MPL/\\n- *\\n- * Software distributed under the License is distributed on an \\\"AS IS\\\" basis,\\n- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\\n- * for the specific language governing rights and limitations under the\\n- * License.\\n- *\\n- * The Original Code is mozilla.org code.\\n- *\\n- * The Initial Developer of the Original Code is\\n- * Netscape Communications Corporation.\\n- * Portions created by the Initial Developer are Copyright (C) 2000\\n- * the Initial Developer. All Rights Reserved.\\n- *\\n- * Contributor(s):\\n- *\\n- * Alternatively, the contents of this file may be used under the terms of\\n- * either of the GNU General Public License Version 2 or later (the \\\"GPL\\\"),\\n- * or the GNU Lesser General Public License Version 2.1 or later (the \\\"LGPL\\\"),\\n- * in which case the provisions of the GPL or the LGPL are applicable instead\\n- * of those above. If you wish to allow use of your version of this file only\\n- * under the terms of either the GPL or the LGPL, and not to allow others to\\n- * use your version of this file under the terms of the MPL, indicate your\\n- * decision by deleting the provisions above and replace them with the notice\\n- * and other provisions required by the GPL or the LGPL. If you do not delete\\n- * the provisions above, a recipient may use your version of this file under\\n- * the terms of any one of the MPL, the GPL or the LGPL.\\n- *\\n- * ***** END LICENSE BLOCK ***** */\\n-\\n-/* Main Composer window debug menu functions */\\n-\\n-// --------------------------- Output ---------------------------\\n-\\n-\\n-function EditorGetText()\\n-{\\n-  try {\\n-    dump(\\\"Getting text\\\\n\\\");\\n-    var  outputText = GetCurrentEditor().outputToString(\\\"text/plain\\\", kOutputFormatted);\\n-    dump(\\\"<<\\\" + outputText + \\\">>\\\\n\\\");\\n-  } catch (e) {}\\n-}\\n-\\n-function EditorGetHTML()\\n-{\\n-  try {\\n-    dump(\\\"Getting HTML\\\\n\\\");\\n-    var  outputHTML = GetCurrentEditor().outputToString(\\\"text/html\\\", kOutputEncodeW3CEntities);\\n-    dump(outputHTML + \\\"\\\\n\\\");\\n-  } catch (e) {}\\n-}\\n-\\n-function EditorDumpContent()\\n-{\\n-  dump(\\\"==============  Content Tree: ================\\\\n\\\");\\n-  GetCurrentEditor().dumpContentTree();\\n-}\\n-\\n-function EditorInsertText(textToInsert)\\n-{\\n-  GetCurrentEditor().insertText(textToInsert);\\n-}\\n-\\n-function EditorTestSelection()\\n-{\\n-  dump(\\\"Testing selection\\\\n\\\");\\n-  var selection = GetCurrentEditor().selection;\\n-  if (!selection)\\n-  {\\n-    dump(\\\"No selection!\\\\n\\\");\\n-    return;\\n-  }\\n-\\n-  dump(\\\"Selection contains:\\\\n\\\");\\n-  // 3rd param = column to wrap\\n-  dump(selection.QueryInterface(Components.interfaces.nsISelectionPrivate)\\n-       .toStringWithFormat(\\\"text/plain\\\",\\n-                           kOutputFormatted | kOutputSelectionOnly,\\n-                           0) + \\\"\\\\n\\\");\\n-\\n-  var output, i;\\n-\\n-  dump(\\\"====== Selection as node and offsets==========\\\\n\\\");\\n-  dump(\\\"rangeCount = \\\" + selection.rangeCount + \\\"\\\\n\\\");\\n-  for (i = 0; i < selection.rangeCount; i++)\\n-  {\\n-    var range = selection.getRangeAt(i);\\n-    if (range)\\n-    {\\n-      dump(\\\"Range \\\"+i+\\\": StartParent=\\\"+range.startContainer.nodeName+\\\", offset=\\\"+range.startOffset+\\\"\\\\n\\\");\\n-      dump(\\\"Range \\\"+i+\\\":   EndParent=\\\"+range.endContainer.nodeName+\\\", offset=\\\"+range.endOffset+\\\"\\\\n\\\\n\\\");\\n-    }\\n-  }\\n-\\n-  var editor = GetCurrentEditor();\\n-\\n-  dump(\\\"====== Selection as unformatted text ==========\\\\n\\\");\\n-  output = editor.outputToString(\\\"text/plain\\\", kOutputSelectionOnly);\\n-  dump(output + \\\"\\\\n\\\\n\\\");\\n-\\n-  dump(\\\"====== Selection as formatted text ============\\\\n\\\");\\n-  output = editor.outputToString(\\\"text/plain\\\", kOutputFormatted | kOutputSelectionOnly);\\n-  dump(output + \\\"\\\\n\\\\n\\\");\\n-\\n-  dump(\\\"====== Selection as HTML ======================\\\\n\\\");\\n-  output = editor.outputToString(\\\"text/html\\\", kOutputSelectionOnly);\\n-  dump(output + \\\"\\\\n\\\\n\\\");\\n-\\n-  dump(\\\"====== Selection as prettyprinted HTML ========\\\\n\\\");\\n-  output = editor.outputToString(\\\"text/html\\\", kOutputFormatted | kOutputSelectionOnly);\\n-  dump(output + \\\"\\\\n\\\\n\\\");\\n-\\n-  dump(\\\"====== Length and status =====================\\\\n\\\");\\n-  output = \\\"Document is \\\";\\n-  if (editor.documentIsEmpty)\\n-    output += \\\"empty\\\\n\\\";\\n-  else\\n-    output += \\\"not empty\\\\n\\\";\\n-  output += \\\"Text length is \\\" + editor.textLength + \\\" characters\\\";\\n-  dump(output + \\\"\\\\n\\\\n\\\");\\n-}\\n-\\n-function EditorTestTableLayout()\\n-{\\n-  dump(\\\"\\\\n\\\\n\\\\n************ Dump Selection Ranges ************\\\\n\\\");\\n-  var selection = GetCurrentEditor().selection;\\n-  var i;\\n-  for (i = 0; i < selection.rangeCount; i++)\\n-  {\\n-    var range = selection.getRangeAt(i);\\n-    if (range)\\n-    {\\n-      dump(\\\"Range \\\"+i+\\\": StartParent=\\\"+range.startParent+\\\", offset=\\\"+range.startOffset+\\\"\\\\n\\\");\\n-    }\\n-  }\\n-  dump(\\\"\\\\n\\\\n\\\");\\n-\\n-  var editor = GetCurrentEditor();\\n-  var table = editor.getElementOrParentByTagName(\\\"table\\\", null);\\n-  if (!table) {\\n-    dump(\\\"Enclosing Table not found: Place caret in a table cell to do this test\\\\n\\\\n\\\");\\n-    return;\\n-  }\\n-\\n-  var cell;\\n-  var startRowIndexObj = { value: null };\\n-  var startColIndexObj = { value: null };\\n-  var rowSpanObj = { value: null };\\n-  var colSpanObj = { value: null };\\n-  var actualRowSpanObj = { value: null };\\n-  var actualColSpanObj = { value: null };\\n-  var isSelectedObj = { value: false };\\n-  var startRowIndex = 0;\\n-  var startColIndex = 0;\\n-  var rowSpan;\\n-  var colSpan;\\n-  var actualRowSpan;\\n-  var actualColSpan;\\n-  var isSelected;\\n-  var col = 0;\\n-  var row = 0;\\n-  var rowCount = 0;\\n-  var maxColCount = 0;\\n-  var doneWithRow = false;\\n-  var doneWithCol = false;\\n-\\n-  dump(\\\"\\\\n\\\\n\\\\n************ Starting Table Layout test ************\\\\n\\\");\\n-\\n-  // Note: We could also get the number of rows, cols and use for loops,\\n-  //   but this tests using out-of-bounds offsets to detect end of row or column\\n-\\n-  while (!doneWithRow)  // Iterate through rows\\n-  {\\n-    dump(\\\"* Data for ROW=\\\"+row+\\\":\\\\n\\\");\\n-    while(!doneWithCol)  // Iterate through cells in the row\\n-    {\\n-      try {\\n-        cell = editor.getCellDataAt(table, row, col,\\n-                                    startRowIndexObj, startColIndexObj,\\n-                                    rowSpanObj, colSpanObj,\\n-                                    actualRowSpanObj, actualColSpanObj,\\n-                                    isSelectedObj);\\n-\\n-        if (cell)\\n-        {\\n-          rowSpan = rowSpanObj.value;\\n-          colSpan = colSpanObj.value;\\n-          actualRowSpan = actualRowSpanObj.value;\\n-          actualColSpan = actualColSpanObj.value;\\n-          isSelected = isSelectedObj.value;\\n-\\n-          dump(\\\" Row=\\\"+row+\\\", Col=\\\"+col+\\\"  StartRow=\\\"+startRowIndexObj.value+\\\", StartCol=\\\"+startColIndexObj.value+\\\"\\\\n\\\");\\n-          dump(\\\"  RowSpan=\\\"+rowSpan+\\\", ColSpan=\\\"+colSpan+\\\"  ActualRowSpan=\\\"+actualRowSpan+\\\", ActualColSpan=\\\"+actualColSpan);\\n-          if (isSelected)\\n-            dump(\\\"  Cell is selected\\\\n\\\");\\n-          else\\n-            dump(\\\"  Cell is NOT selected\\\\n\\\");\\n-\\n-          // Save the indexes of a cell that will span across the cellmap grid\\n-          if (rowSpan > 1)\\n-            startRowIndex = startRowIndexObj.value;\\n-          if (colSpan > 1)\\n-            startColIndex = startColIndexObj.value;\\n-\\n-          // Initialize these for efficient spanned-cell search\\n-          startRowIndexObj.value = startRowIndex;\\n-          startColIndexObj.value = startColIndex;\\n-\\n-          col++;\\n-        } else {\\n-          doneWithCol = true;\\n-          // Get maximum number of cells in any row\\n-          if (col > maxColCount)\\n-            maxColCount = col;\\n-          dump(\\\"  End of row found\\\\n\\\\n\\\");\\n-        }\\n-      }\\n-      catch (e) {\\n-        dump(\\\"  *** GetCellDataAt failed at Row=\\\"+row+\\\", Col=\\\"+col+\\\" ***\\\\n\\\\n\\\");\\n-        return;\\n-      }\\n-    }\\n-    if (col == 0) {\\n-      // Didn't find a cell in the first col of a row,\\n-      // thus no more rows in table\\n-      doneWithRow = true;\\n-      rowCount = row;\\n-      dump(\\\"No more rows in table\\\\n\\\\n\\\");\\n-    } else {\\n-      // Setup for next row\\n-      col = 0;\\n-      row++;\\n-      doneWithCol = false;\\n-    }\\n-  }\\n-  dump(\\\"Counted during scan: Number of rows=\\\"+rowCount+\\\" Number of Columns=\\\"+maxColCount+\\\"\\\\n\\\");\\n-  rowCount = editor.getTableRowCount(table);\\n-  maxColCount = editor.getTableColumnCount(table);\\n-  dump(\\\"From nsITableLayout: Number of rows=\\\"+rowCount+\\\" Number of Columns=\\\"+maxColCount+\\\"\\\\n****** End of Table Layout Test *****\\\\n\\\\n\\\");\\n-}\\n-\\n-function EditorShowEmbeddedObjects()\\n-{\\n-  dump(\\\"\\\\nEmbedded Objects:\\\\n\\\");\\n-  try {\\n-    var objectArray = GetCurrentEditor().getEmbeddedObjects();\\n-    dump(objectArray.Count() + \\\" embedded objects\\\\n\\\");\\n-    for (var i=0; i < objectArray.Count(); ++i)\\n-      dump(objectArray.GetElementAt(i) + \\\"\\\\n\\\");\\n-  } catch(e) {}\\n-}\\n-\\n-function EditorUnitTests()\\n-{\\n-  dump(\\\"Running Unit Tests\\\\n\\\");\\n-  var numTests       = { value:0 };\\n-  var numTestsFailed = { value:0 };\\n-  GetCurrentEditor().debugUnitTests(numTests, numTestsFailed);\\n-}\\n-\\n-function EditorTestDocument()\\n-{\\n-  dump(\\\"Getting document\\\\n\\\");\\n-  var theDoc = GetCurrentEditor().document;\\n-  if (theDoc)\\n-  {\\n-    dump(\\\"Got the doc\\\\n\\\");\\n-    dump(\\\"Document name:\\\" + theDoc.nodeName + \\\"\\\\n\\\");\\n-    dump(\\\"Document type:\\\" + theDoc.doctype + \\\"\\\\n\\\");\\n-  }\\n-  else\\n-  {\\n-    dump(\\\"Failed to get the doc\\\\n\\\");\\n-  }\\n-}\\n-\\n-// --------------------------- Logging stuff ---------------------------\\n-\\n-function EditorExecuteScript(theFile)\\n-{\\n-  var inputStream = Components.classes[\\\"@mozilla.org/network/file-input-stream;1\\\"].createInstance();\\n-  inputStream = inputStream.QueryInterface(Components.interfaces.nsIFileInputStream);\\n-\\n-  inputStream.init(theFile, 1, 0, false);    // open read only\\n-\\n-  var scriptableInputStream = Components.classes[\\\"@mozilla.org/scriptableinputstream;1\\\"].createInstance();\\n-  scriptableInputStream = scriptableInputStream.QueryInterface(Components.interfaces.nsIScriptableInputStream);\\n-\\n-  scriptableInputStream.init(inputStream);    // open read only\\n-\\n-  var buf         = { value:null };\\n-  var tmpBuf      = { value:null };\\n-  var didTruncate = { value:false };\\n-  var lineNum     = 0;\\n-  var ex;\\n-\\n-/*\\n-  // Log files can be quite huge, so read in a line\\n-  // at a time and execute it:\\n-\\n-  while (!inputStream.eof())\\n-  {\\n-    buf.value         = \\\"\\\";\\n-    didTruncate.value = true;\\n-\\n-    // Keep looping until we get a complete line of\\n-    // text, or we hit the end of file:\\n-\\n-    while (didTruncate.value && !inputStream.eof())\\n-    {\\n-      didTruncate.value = false;\\n-      fileSpec.readLine(tmpBuf, 1024, didTruncate);\\n-      buf.value += tmpBuf.value;\\n-\\n-      // XXX Need to null out tmpBuf.value to avoid crashing\\n-      // XXX in some JavaScript string allocation method.\\n-      // XXX This is probably leaking the buffer allocated\\n-      // XXX by the readLine() implementation.\\n-\\n-      tmpBuf.value = null;\\n-    }\\n-\\n-    ++lineNum;\\n-*/\\n-  {\\n-    // suck in the entire file\\n-    var fileSize = scriptableInputStream.available();\\n-    var fileContents = scriptableInputStream.read(fileSize);\\n-\\n-    dump(fileContents);\\n-\\n-    try       { eval(fileContents); }\\n-    catch(ex) { dump(\\\"Playback ERROR: Line \\\" + lineNum + \\\"  \\\" + ex + \\\"\\\\n\\\"); return; }\\n-  }\\n-\\n-  buf.value = null;\\n-}\\n-\\n-function EditorGetScriptFileSpec()\\n-{\\n-  var dirServ = Components.classes['@mozilla.org/file/directory_service;1'].createInstance();\\n-  dirServ = dirServ.QueryInterface(Components.interfaces.nsIProperties);\\n-  var processDir = dirServ.get(\\\"Home\\\", Components.interfaces.nsIFile);\\n-  processDir.append(\\\"journal.js\\\");\\n-  return processDir;\\n-}\\n-\\n-function EditorStartLog()\\n-{\\n-  try {\\n-    var edlog = GetCurrentEditor().QueryInterface(Components.interfaces.nsIEditorLogging);\\n-    var fs = EditorGetScriptFileSpec();\\n-    edlog.startLogging(fs);\\n-    window.content.focus();\\n-\\n-    fs = null;\\n-  }\\n-  catch(ex) { dump(\\\"Can't start logging!:\\\\n\\\" + ex + \\\"\\\\n\\\"); }\\n-}\\n-\\n-function EditorStopLog()\\n-{\\n-  try {\\n-    var edlog = GetCurrentEditor().QueryInterface(Components.interfaces.nsIEditorLogging);\\n-    edlog.stopLogging();\\n-    window.content.focus();\\n-  }\\n-  catch(ex) { dump(\\\"Can't stop logging!:\\\\n\\\" + ex + \\\"\\\\n\\\"); }\\n-}\\n-\\n-function EditorRunLog()\\n-{\\n-  var fs;\\n-  fs = EditorGetScriptFileSpec();\\n-  EditorExecuteScript(fs);\\n-  window.content.focus();\\n-}\\n-\\n-// --------------------------- TransactionManager ---------------------------\\n-\\n-\\n-function DumpUndoStack()\\n-{\\n-  try {\\n-    var txmgr = GetCurrentEditor().transactionManager;\\n-\\n-    if (!txmgr)\\n-    {\\n-      dump(\\\"**** Editor has no TransactionManager!\\\\n\\\");\\n-      return;\\n-    }\\n-\\n-    dump(\\\"---------------------- BEGIN UNDO STACK DUMP\\\\n\\\");\\n-    dump(\\\"<!-- Bottom of Stack -->\\\\n\\\");\\n-    PrintTxnList(txmgr.getUndoList(), \\\"\\\");\\n-    dump(\\\"<!--  Top of Stack  -->\\\\n\\\");\\n-    dump(\\\"Num Undo Items: \\\" + txmgr.numberOfUndoItems + \\\"\\\\n\\\");\\n-    dump(\\\"---------------------- END   UNDO STACK DUMP\\\\n\\\");\\n-  } catch (e) {\\n-    dump(\\\"ERROR: DumpUndoStack() failed: \\\" + e);\\n-  }\\n-}\\n-\\n-function DumpRedoStack()\\n-{\\n-  try {\\n-    var txmgr = GetCurrentEditor().transactionManager;\\n-\\n-    if (!txmgr)\\n-    {\\n-      dump(\\\"**** Editor has no TransactionManager!\\\\n\\\");\\n-      return;\\n-    }\\n-\\n-    dump(\\\"---------------------- BEGIN REDO STACK DUMP\\\\n\\\");\\n-    dump(\\\"<!-- Bottom of Stack -->\\\\n\\\");\\n-    PrintTxnList(txmgr.getRedoList(), \\\"\\\");\\n-    dump(\\\"<!--  Top of Stack  -->\\\\n\\\");\\n-    dump(\\\"Num Redo Items: \\\" + txmgr.numberOfRedoItems + \\\"\\\\n\\\");\\n-    dump(\\\"---------------------- END   REDO STACK DUMP\\\\n\\\");\\n-  } catch (e) {\\n-    dump(\\\"ERROR: DumpUndoStack() failed: \\\" + e);\\n-  }\\n-}\\n-\\n-function PrintTxnList(txnList, prefixStr)\\n-{\\n-  var i;\\n-\\n-  for (i=0 ; i < txnList.numItems; i++)\\n-  {\\n-    var txn = txnList.getItem(i);\\n-    var desc = \\\"TXMgr Batch\\\";\\n-\\n-    if (txn)\\n-    {\\n-      try {\\n-        txn = txn.QueryInterface(Components.interfaces.nsPIEditorTransaction);\\n-        desc = txn.txnDescription;\\n-      } catch(e) {\\n-        desc = \\\"UnknownTxnType\\\";\\n-      }\\n-    }\\n-    dump(prefixStr + \\\"+ \\\" + desc + \\\"\\\\n\\\");\\n-    PrintTxnList(txnList.getChildListForItem(i), prefixStr + \\\"|    \\\");\\n-  }\\n-}\\n-\\n-// ------------------------ 3rd Party Transaction Test ------------------------\\n-\\n-\\n-function sampleJSTransaction()\\n-{\\n-  this.wrappedJSObject = this;\\n-}\\n-\\n-sampleJSTransaction.prototype = {\\n-\\n-  isTransient: false,\\n-  mStrData:    \\\"[Sample-JS-Transaction-Content]\\\",\\n-  mObject:     null,\\n-  mContainer:  null,\\n-  mOffset:     null,\\n-\\n-  doTransaction: function()\\n-  {\\n-    if (this.mContainer.nodeType != Node.TEXT_NODE)\\n-    {\\n-      // We're not in a text node, so create one and\\n-      // we'll just insert it at (mContainer, mOffset).\\n-\\n-      this.mObject = this.mContainer.ownerDocument.createTextNode(this.mStrData);\\n-    }\\n-\\n-    this.redoTransaction();\\n-  },\\n-\\n-  undoTransaction: function()\\n-  {\\n-    if (!this.mObject)\\n-      this.mContainer.deleteData(this.mOffset, this.mStrData.length);\\n-    else\\n-      this.mContainer.removeChild(this.mObject);\\n-  },\\n-\\n-  redoTransaction: function()\\n-  {\\n-    if (!this.mObject)\\n-      this.mContainer.insertData(this.mOffset, this.mStrData);\\n-    else\\n-      this.insert_node_at_point(this.mObject, this.mContainer, this.mOffset);\\n-  },\\n-\\n-  merge: function(aTxn)\\n-  {\\n-    // We don't do any merging!\\n-\\n-    return false;\\n-  },\\n-\\n-  QueryInterface: function(aIID, theResult)\\n-  {\\n-    if (aIID.equals(Components.interfaces.nsITransaction) ||\\n-        aIID.equals(Components.interfaces.nsISupports))\\n-      return this;\\n-\\n-    Components.returnCode = Components.results.NS_ERROR_NO_INTERFACE;\\n-    return null;\\n-  },\\n-\\n-  insert_node_at_point: function(node, container, offset)\\n-  {\\n-    var childList = container.childNodes;\\n-\\n-    if (childList.length == 0 || offset >= childList.length)\\n-      container.appendChild(node);\\n-    else\\n-      container.insertBefore(node, childList.item(offset));\\n-  }\\n-}\\n-\\n-function ExecuteJSTransactionViaTxmgr()\\n-{\\n-  try {\\n-    var editor = GetCurrentEditor();\\n-    var txmgr = editor.transactionManager;\\n-    txmgr = txmgr.QueryInterface(Components.interfaces.nsITransactionManager);\\n-\\n-    var selection = editor.selection;\\n-    var range =  selection.getRangeAt(0);\\n-\\n-    var txn = new sampleJSTransaction();\\n-\\n-    txn.mContainer = range.startContainer;\\n-    txn.mOffset = range.startOffset;\\n-\\n-    txmgr.doTransaction(txn);\\n-  } catch (e) {\\n-    dump(\\\"ExecuteJSTransactionViaTxmgr() failed!\\\");\\n-  }\\n-}\\n-\\n-function ExecuteJSTransactionViaEditor()\\n-{\\n-  try {\\n-    var editor = GetCurrentEditor();\\n-\\n-    var selection = editor.selection;\\n-    var range =  selection.getRangeAt(0);\\n-\\n-    var txn = new sampleJSTransaction();\\n-\\n-    txn.mContainer = range.startContainer;\\n-    txn.mOffset = range.startOffset;\\n-\\n-    editor.doTransaction(txn);\\n-  } catch (e) {\\n-    dump(\\\"ExecuteJSTransactionViaEditor() failed!\\\");\\n-  }\\n-}\\n-\\ndiff --git a/editor/ui/composer/content/EditorInitPage.html b/editor/ui/composer/content/EditorInitPage.html\\ndeleted file mode 100644\\nindex 65e6619..0000000\\n--- a/editor/ui/composer/content/EditorInitPage.html\\n+++ /dev/null\\n@@ -1,191 +0,0 @@\\n-<!-- ***** BEGIN LICENSE BLOCK *****\\n-   - Version: MPL 1.1/GPL 2.0/LGPL 2.1\\n-   -\\n-   - The contents of this file are subject to the Mozilla Public License Version\\n-   - 1.1 (the \\\"License\\\"); you may not use this file except in compliance with\\n-   - the License. You may obtain a copy of the License at\\n-   - http://www.mozilla.org/MPL/\\n-   -\\n-   - Software distributed under the License is distributed on an \\\"AS IS\\\" basis,\\n-   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\\n-   - for the specific language governing rights and limitations under the\\n-   - License.\\n-   -\\n-   - The Original Code is mozilla.org code.\\n-   -\\n-   - The Initial Developer of the Original Code is\\n-   - Netscape Communications Corporation.\\n-   - Portions created by the Initial Developer are Copyright (C) 1999\\n-   - the Initial Developer. All Rights Reserved.\\n-   -\\n-   - Contributor(s):\\n-   -\\n-   - Alternatively, the contents of this file may be used under the terms of\\n-   - either the GNU General Public License Version 2 or later (the \\\"GPL\\\"), or\\n-   - the GNU Lesser General Public License Version 2.1 or later (the \\\"LGPL\\\"),\\n-   - in which case the provisions of the GPL or the LGPL are applicable instead\\n-   - of those above. If you wish to allow use of your version of this file only\\n-   - under the terms of either the GPL or the LGPL, and not to allow others to\\n-   - use your version of this file under the terms of the MPL, indicate your\\n-   - decision by deleting the provisions above and replace them with the notice\\n-   - and other provisions required by the LGPL or the GPL. If you do not delete\\n-   - the provisions above, a recipient may use your version of this file under\\n-   - the terms of any one of the MPL, the GPL or the LGPL.\\n-   -\\n-   - ***** END LICENSE BLOCK ***** -->\\n-\\n-<html>\\n-<head>\\n-<title>Ender HTML Test Page</title>\\n-<META HTTP-EQUIV=\\\"Content-Type\\\" CONTENT=\\\"text/html; charset=utf-8\\\">\\n-\\n-<style type=\\\"text/css\\\">\\n-/* Don't set attributes here, or they can't be changed! */\\n-p.note:before { content: \\\"Note: \\\"; }\\n-\\n-</style>\\n-\\n-</head>\\n-<body>\\n-\\n-<h2>Here's the deal...</h2>\\n-\\n-<p>This is a good place to add in <b>html</b> to aid in testing features \\n-under development.  It's also a great place to not use latin.\\n-</p>\\n-\\n-<!-- This is a comment;\\n-     Here is more of the comment.\\n--->\\n-\\n-<p>\\n-Here is an acute entity: \\\"&aacute;\\\".\\n-This&nbsp;&nbsp;sentence&nbsp;&nbsp;has&nbsp;&nbsp;two&nbsp;&nbsp;&amp;nbsp;&nbsp;&nbsp;tags&nbsp;&nbsp;between&nbsp;&nbsp;each&nbsp;&nbsp;word.\\n-</p>\\n-<hr size=\\\"2\\\" width=\\\"100%\\\"/>\\n-<div>\\n-<p>\\n-This paragraph is inside a &lt;div&gt;. <a href=\\\"http://www.mozilla.org\\\">Here is some\\n-rather boring text that is a link.</a>  Now is the time for all good men (and women)\\n-to come to the mozilla.org party.  And bring the quick brown fox and the lazy dog with you.\\n-For your editing pleasure, here is some <span style=\\\"font-weight:bold;\\\">inline style</span> for you.\\n-<a name=\\\"test1\\\"></a>A Named Anchor is just before this sentence.\\n-</p>\\n-</div>\\n-\\n-<p class=\\\"note\\\">\\n-&quot;This paragraph has &quot;class=note&quot;, so that we can play with styles.&quot;\\n-For example, we might insert generated content, like &quot;Note:  &quot; before this\\n-paragraph.\\n-</p>\\n-\\n-<p>\\n-Here is some very run-o-the-mill text in a paragraph tag, for those\\n-of you who are into that kind of thing. I think at this point I shall\\n-regale you with some of my inestimable poetry, which will be presented\\n-in blockquote mode for your reading pleasure.  This particular sample\\n-was written when I was eleven years old, but is remarkably similar to \\n-the writings of my later \\\"hard-livin\\\" years.  It's titled \\\"Reruns\\\":\\n-</p>\\n-\\n-<blockquote class=\\\"poem\\\" type=\\\"cite\\\">\\n-<h4>Reruns</h4>\\n-Reruns are about as much fun,<br>\\n-as your dad taking all your mun,<br>\\n-and giving it to a nun,<br>\\n-as a contribution.\\n-</blockquote>\\n-\\n-<br>\\n-<br>\\n-<br>\\n-<br>\\n-There are 4 br tags on either side of this sentence.\\n-<br>\\n-<br>\\n-<br>\\n-<br>\\n-  \\n-This  text  has  two  spaces  between  every  word\\n-<u>Underlined text with space at end </u><b> and bold text with a space at front</b>\\n-\\n-<p>A random list of things to do</p>\\n-<ul>\\n-<li>Status report</li>\\n-<li>Fix bugs</li>\\n-<li>Call home</li>\\n-</ul>\\n-\\n-<pre>\\n-  Here is some \\n-    preformatted text.\\n-      Here is some \\n-        preformatted text.\\n-</pre>\\n-\\n-<ol>\\n-<li>list item 1</li>\\n-<li>list item 2</li>\\n-<li>list item 3</li>\\n-</ol>\\n-\\n-<ol class=\\\"roman\\\">\\n-<li>list item with child paragraphs\\n-    <p>\\n-    First child paragraph\\n-\\t</p>\\n-    <p>\\n-    Second child paragraph\\n-\\t</p>\\n-    <p>\\n-    Third child paragraph\\n-\\t</p>\\n-</li>\\n-<li>\\n-Another list item\\n-</li>\\n-<li>\\n-Something else.\\n-</li>\\n-<li>\\n-Another thing.\\n-</li>\\n-</ol>\\n-\\n-\\n-<table border=\\\"1\\\">\\n-<tr><td>cell 1 </td><td>cell 2 </td><td>cell 3 </td></tr>\\n-<tr><td>cell 4 </td><td>cell 5 </td><td>cell 6 </td></tr>\\n-<tr><td>cell 7 </td><td>cell 8 </td><td>cell 9 </td></tr>\\n-</table>\\n-\\n-\\n-<table border=\\\"1\\\" id=\\\"bigtable\\\">\\n-<tr><td>big cell 1 </td>\\n-<td>\\n-\\t<table BORDER>\\n-\\t<tr><td>nested cell 1 </td><td>nested cell 2 </td></tr>\\n-\\t<tr><td>nested cell 3 </td><td>nested cell 4 </td></tr>\\n-\\t</table>\\n-</td>\\n-</tr>\\n-<tr><td>\\n-\\t<table BORDER>\\n-\\t<tr><td>nested cell 5 </td><td>nested cell 6 </td></tr>\\n-\\t<tr><td>nested cell 7 </td><td>nested cell 8 </td></tr>\\n-\\t</table>\\n-</td><td>big cell 4 </td></tr>\\n-</table>\\n-\\n-<p>\\n-Japanese for ya: プロ野球速報\\n-</p>\\n-<p>\\n-One more paragraph for the road.  A true Klingon fears not the atrocious\\n-editing file format hoisted on us by html.  Well, maybe he does, a little.\\n-But he hides it well.\\n-</p>\\n-\\n-</body>\\n-</html>\\n-\\ndiff --git a/editor/ui/composer/content/EditorInitPagePlain.html b/editor/ui/composer/content/EditorInitPagePlain.html\\ndeleted file mode 100644\\nindex 6752410..0000000\\n--- a/editor/ui/composer/content/EditorInitPagePlain.html\\n+++ /dev/null\\n@@ -1,63 +0,0 @@\\n-<!-- ***** BEGIN LICENSE BLOCK *****\\n-   - Version: MPL 1.1/GPL 2.0/LGPL 2.1\\n-   -\\n-   - The contents of this file are subject to the Mozilla Public License Version\\n-   - 1.1 (the \\\"License\\\"); you may not use this file except in compliance with\\n-   - the License. You may obtain a copy of the License at\\n-   - http://www.mozilla.org/MPL/\\n-   -\\n-   - Software distributed under the License is distributed on an \\\"AS IS\\\" basis,\\n-   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\\n-   - for the specific language governing rights and limitations under the\\n-   - License.\\n-   -\\n-   - The Original Code is Mozilla Communicator client code, released\\n-   - March 31, 1998.\\n-   -\\n-   - The Initial Developer of the Original Code is\\n-   - Netscape Communications Corporation.\\n-   - Portions created by the Initial Developer are Copyright (C) 1998-1999\\n-   - the Initial Developer. All Rights Reserved.\\n-   -\\n-   - Contributor(s):\\n-   -\\n-   - Alternatively, the contents of this file may be used under the terms of\\n-   - either the GNU General Public License Version 2 or later (the \\\"GPL\\\"), or\\n-   - the GNU Lesser General Public License Version 2.1 or later (the \\\"LGPL\\\"),\\n-   - in which case the provisions of the GPL or the LGPL are applicable instead\\n-   - of those above. If you wish to allow use of your version of this file only\\n-   - under the terms of either the GPL or the LGPL, and not to allow others to\\n-   - use your version of this file under the terms of the MPL, indicate your\\n-   - decision by deleting the provisions above and replace them with the notice\\n-   - and other provisions required by the LGPL or the GPL. If you do not delete\\n-   - the provisions above, a recipient may use your version of this file under\\n-   - the terms of any one of the MPL, the GPL or the LGPL.\\n-   -\\n-   - ***** END LICENSE BLOCK ***** -->\\n-\\n-<html>\\n-<head>\\n-<title>Ender Plain Text Test Page</title>\\n-\\n-\\n-\\n-</head>\\n-\\n-<body>\\n-\\n-80 char width (for reference only)\\n----------|---------|---------|---------|---------|---------|---------|---------|\\n-\\n-Welcome to the Gecko Plaintext Editor.\\n-\\n-This message has the wrapping set to 72 columns using a style sheet.\\n-\\n-Typed text will wrap to the current wrap setting.  You can view or set the wrap settings by typing various characters, as such:\\n--  alt-C:  print the current wrap column setting.\\n--  alt-]:  increase the wrap setting by 5\\n--  alt-[:  decrease the wrap setting by 5\\n-- ctrl-\\\\:  wrap to window width (wrapcolumn = -1)\\n--  alt-\\\\:  turn off wrapping (wrapcolumn = 0)\\n-\\n-</body>\\n-</html>\\ndiff --git a/editor/ui/composer/content/TextEditorAppShell.xul b/editor/ui/composer/content/TextEditorAppShell.xul\\ndeleted file mode 100644\\nindex 19bc722..0000000\\n--- a/editor/ui/composer/content/TextEditorAppShell.xul\\n+++ /dev/null\\n@@ -1,173 +0,0 @@\\n-<?xml version=\\\"1.0\\\"?> \\n-\\n-<!-- ***** BEGIN LICENSE BLOCK *****\\n-   - Version: MPL 1.1/GPL 2.0/LGPL 2.1\\n-   -\\n-   - The contents of this file are subject to the Mozilla Public License Version\\n-   - 1.1 (the \\\"License\\\"); you may not use this file except in compliance with\\n-   - the License. You may obtain a copy of the License at\\n-   - http://www.mozilla.org/MPL/\\n-   -\\n-   - Software distributed under the License is distributed on an \\\"AS IS\\\" basis,\\n-   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\\n-   - for the specific language governing rights and limitations under the\\n-   - License.\\n-   -\\n-   - The Original Code is Mozilla Communicator client code, released\\n-   - March 31, 1998.\\n-   -\\n-   - The Initial Developer of the Original Code is\\n-   - Netscape Communications Corporation.\\n-   - Portions created by the Initial Developer are Copyright (C) 1998-1999\\n-   - the Initial Developer. All Rights Reserved.\\n-   -\\n-   - Contributor(s):\\n-   -   Ryan Cassin (rcassin@supernova.org)\\n-   -\\n-   - Alternatively, the contents of this file may be used under the terms of\\n-   - either of the GNU General Public License Version 2 or later (the \\\"GPL\\\"),\\n-   - or the GNU Lesser General Public License Version 2.1 or later (the \\\"LGPL\\\"),\\n-   - in which case the provisions of the GPL or the LGPL are applicable instead\\n-   - of those above. If you wish to allow use of your version of this file only\\n-   - under the terms of either the GPL or the LGPL, and not to allow others to\\n-   - use your version of this file under the terms of the MPL, indicate your\\n-   - decision by deleting the provisions above and replace them with the notice\\n-   - and other provisions required by the GPL or the LGPL. If you do not delete\\n-   - the provisions above, a recipient may use your version of this file under\\n-   - the terms of any one of the MPL, the GPL or the LGPL.\\n-   -\\n-   - ***** END LICENSE BLOCK ***** -->\\n-\\n-<?xml-stylesheet href=\\\"chrome://editor/skin/editor.css\\\" type=\\\"text/css\\\"?> \\n-<?xml-stylesheet href=\\\"chrome://editor/skin/textEditor.css\\\" type=\\\"text/css\\\"?> \\n-\\n-<?xml-stylesheet href=\\\"chrome://editor/skin/editorPrimaryToolbar.css\\\" type=\\\"text/css\\\"?> \\n-<?xul-overlay href=\\\"chrome://editor/content/editorOverlay.xul\\\"?>\\n-<?xul-overlay href=\\\"chrome://global/content/globalOverlay.xul\\\"?>\\n-<?xul-overlay href=\\\"chrome://global/content/charsetOverlay.xul\\\"?>\\n-<?xul-overlay href=\\\"chrome://communicator/content/utilityOverlay.xul\\\"?>\\n-<?xul-overlay href=\\\"chrome://communicator/content/tasksOverlay.xul\\\"?>\\n-<?xul-overlay href=\\\"chrome://communicator/content/contentAreaContextOverlay.xul\\\"?>\\n-<?xul-overlay href=\\\"chrome://communicator/content/sidebar/sidebarOverlay.xul\\\"?>\\n-\\n-<!DOCTYPE window SYSTEM \\\"chrome://editor/locale/editor.dtd\\\"> \\n-\\n-<!-- NOTE: If we don't have \\\"title\\\" set, text editor doesn't work! -->\\n-<window id=\\\"main-window\\\"\\n-        xmlns=\\\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\\\"\\n-        onload=\\\"TextEditorOnLoad()\\\"\\n-        onunload=\\\"EditorShutdown()\\\"\\n-        onclose=\\\"return EditorCanClose()\\\"\\n-        onfocus=\\\"EditorOnFocus()\\\"\\n-        contenttitlesetting=\\\"true\\\"\\n-        title=\\\"\\\"\\n-        titlemodifier=\\\"&textEditorWindow.titlemodifier;\\\"\\n-        titlemenuseparator=\\\"&editorWindow.titlemodifiermenuseparator;\\\"\\n-        windowtype=\\\"composer:text\\\"\\n-        width=\\\"640\\\" height=\\\"480\\\"\\n-        screenX=\\\"10\\\" screenY=\\\"10\\\"\\n-        persist=\\\"screenX screenY width height sizemode\\\"\\n-        >\\n-\\n-  <script type=\\\"application/x-javascript\\\" src=\\\"chrome://editor/content/editor.js\\\"/>\\n-  <script type=\\\"application/x-javascript\\\" src=\\\"chrome://editor/content/ComposerCommands.js\\\"/>\\n-  <script type=\\\"application/x-javascript\\\" src=\\\"chrome://editor/content/EditorCommandsDebug.js\\\"/>\\n-  <script type=\\\"application/x-javascript\\\" src=\\\"chrome://global/content/nsDragAndDrop.js\\\"/>\\n-  <script type=\\\"application/x-javascript\\\" src=\\\"chrome://communicator/content/contentAreaDD.js\\\"/>\\n-<!--\\n-editor.xul has these - do we need them?\\n-  <script type=\\\"application/x-javascript\\\" src=\\\"chrome://communicator/content/contentAreaUtils.js\\\"/>\\n--->\\n-\\n-  <commands id=\\\"commands\\\">\\n-    <commandset id=\\\"globalEditMenuItems\\\"/>\\n-    <commandset id=\\\"selectEditMenuItems\\\"/>\\n-    <commandset id=\\\"undoEditMenuItems\\\"/>\\n-    <commandset id=\\\"clipboardEditMenuItems\\\"/>\\n-    <commandset id=\\\"commonEditorMenuItems\\\"/>\\n-    <commandset id=\\\"composerEditMenuItems\\\"/>\\n-    <commandset id=\\\"composerSaveMenuItems\\\"/>    \\n-    <commandset id=\\\"composerMenuItems\\\"/>\\n-  </commands>\\n-\\n-  <broadcaster id=\\\"args\\\" value=\\\"chrome://editor/content/EditorInitPagePlain.html\\\"/>\\n-  <broadcaster id=\\\"canPrint\\\"/>\\n-  \\n-<!-- Interim hack to transition from nsIXULWindowCallbacks/ShowWindowWithArgs\\n-  <broadcaster id=\\\"dialog.start\\\" ready=\\\"false\\\"/>\\n-  <observes element=\\\"dialog.start\\\" attribute=\\\"ready\\\" onbroadcast=\\\"EditorStartup('text')\\\"/>\\n- -->\\n-   \\n-  <!-- broadcaster nodes are appended here from the overlays -->\\n-  <broadcasterset id=\\\"broadcasterset\\\">\\n-    <broadcaster id=\\\"Editor:Throbber\\\" busy=\\\"false\\\"/>\\n-  </broadcasterset>\\n-\\n-  <!-- keys are appended from the overlay -->\\n-  <keyset id=\\\"keyset\\\"/>\\n-\\n-  <toolbox id=\\\"EditorToolbox\\\">\\n-    <menubar id=\\\"main-menubar\\\" class=\\\"chromeclass-menubar\\\">\\n-      <menu id=\\\"fileMenu\\\"/>\\n-      <menu id=\\\"editMenu\\\"/>\\n-\\n-      <menu label=\\\"&viewMenu.label;\\\" accesskey=\\\"&viewmenu.accesskey;\\\">\\n-        <!-- id pulls in \\\"Show Sidebar\\\" item from sidebarOverlay -->\\n-        <menupopup id=\\\"menu_View_Popup\\\">\\n-          <menu id=\\\"viewToolbar\\\"/>\\n-          <menuseparator/>\\n-          <menu id = \\\"composerCharsetMenu\\\" />\\n-        </menupopup>\\n-      </menu>\\n-\\n-      <menu id=\\\"insertMenuPlainText\\\"/>\\n-\\n-      <!-- tasks menu filled from tasksOverlay -->\\n-      <menu accesskey=\\\"t\\\" id=\\\"tasksMenu\\\"/>\\n-\\n-      <!-- DEBUG only -->\\n-      <menu id=\\\"debugMenu\\\" />\\n-      <!-- end DEBUG only -->\\n-\\n-      <!-- help menu filled from globalOverlay -->\\n-      <menu accesskey=\\\"h\\\" id=\\\"menu_Help\\\"/>\\n-\\n-      <spacer flex=\\\"1\\\"/>\\n-    </menubar>\\n-\\n-     <!-- toolbar filled out from editorOverlay -->\\n-    <toolbar class=\\\"toolbar-primary\\\" id=\\\"EditToolbar\\\" persist=\\\"collapsed\\\">\\n-      <toolbarbutton id=\\\"newButton\\\"/>\\n-      <toolbarbutton id=\\\"openButton\\\"/>\\n-      <toolbarbutton id=\\\"saveButton\\\"/>\\n-      <spacer class=\\\"separator-small\\\"/>\\n-      <toolbarbutton id=\\\"printButton\\\"/>\\n-      <toolbarbutton id=\\\"spellingButton\\\"/>\\n-      <spacer flex=\\\"1\\\"/>\\n-    </toolbar>    \\n-  </toolbox>\\n-\\n-  <hbox id=\\\"sidebar-parent\\\" flex=\\\"1\\\">\\n-    <!-- From sidebarOverlay.xul -->\\n-    <vbox id=\\\"sidebar-box\\\" class=\\\"chromeclass-extrachrome\\\" hidden=\\\"true\\\"/>\\n-    <splitter id=\\\"sidebar-splitter\\\" class=\\\"chromeclass-extrachrome\\\" hidden=\\\"true\\\"/>\\n-    <vbox id=\\\"appcontent\\\" flex=\\\"1\\\">\\n-\\n-      <editor editortype=\\\"text\\\" type=\\\"content-primary\\\" id=\\\"content-frame\\\" src=\\\"about:blank\\\" flex=\\\"1\\\"/>\\n-\\n-      <statusbar id=\\\"status-bar\\\">\\n-        <statusbarpanel class=\\\"statusbarpanel-iconic\\\" id=\\\"offline-status\\\"/>\\n-        <statusbarpanel class=\\\"statusbarpanel-progress\\\">\\n-          <progressmeter class=\\\"progressmeter-statusbar\\\" id=\\\"statusbar-icon\\\" mode=\\\"normal\\\" value=\\\"0\\\">\\n-              <observes element=\\\"Editor:Throbber\\\" attribute=\\\"busy\\\"/>\\n-          </progressmeter>\\n-        </statusbarpanel>\\n-        <statusbarpanel id=\\\"statusText\\\" label=\\\"&statusText.label;\\\" flex=\\\"1\\\" crop=\\\"right\\\"/>\\n-      </statusbar>\\n-\\n-    </vbox> <!-- appcontent -->\\n-  </hbox><!-- sidebar-parent -->\\n-\\n-  <hbox id=\\\"taskbar\\\" class=\\\"toolbox-bottom\\\"/>\\n-\\n-</window>\\n\""}