{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas517ebea\""},"diff":"\"517ebea stop native listboxes from drawing outside their frame. part 1 of the fix for this bug. b=382142 sr=pav\\ndiff --git a/widget/src/cocoa/nsNativeThemeCocoa.mm b/widget/src/cocoa/nsNativeThemeCocoa.mm\\nindex c19fc5b..0160ed1 100644\\n--- a/widget/src/cocoa/nsNativeThemeCocoa.mm\\n+++ b/widget/src/cocoa/nsNativeThemeCocoa.mm\\n@@ -258,6 +258,14 @@ nsNativeThemeCocoa::DrawFrame(CGContextRef cgContext, HIThemeFrameKind inKind,\\n     drawRect.size.width -= frameOutset * 2;\\n     drawRect.size.height -= frameOutset * 2;\\n   }\\n+  else if (inKind == kHIThemeFrameListBox) {\\n+    SInt32 frameOutset = 0;\\n+    ::GetThemeMetric(kThemeMetricListBoxFrameOutset, &frameOutset);\\n+    drawRect.origin.x += frameOutset;\\n+    drawRect.origin.y += frameOutset;\\n+    drawRect.size.width -= frameOutset * 2;\\n+    drawRect.size.height -= frameOutset * 2;\\n+  }\\n \\n #if DRAW_IN_FRAME_DEBUG\\n   CGContextSetRGBFillColor(cgContext, 0.0, 0.0, 0.5, 0.8);\\n\""}