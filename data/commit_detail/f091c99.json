{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basf091c99\""},"diff":"\"f091c99 bug 310696 suppress \\\"view-source:\\\" scheme in title, r=mconnor, sr=neil.parkwaycc\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 4cdeaa6..410a964 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -583,12 +583,13 @@\\n             // If location bar is hidden and the URL type supports a host,\\n             // add the scheme and host to the title to prevent spoofing.\\n             // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=22183#c239\\n+            // (only for schemes that support a host)\\n             try {\\n               if (docElement.getAttribute(\\\"chromehidden\\\").indexOf(\\\"location\\\") != -1) {\\n-                var host = this.mURIFixup.createExposableURI(\\n-                             this.mCurrentBrowser.currentURI).prePath;\\n-                if (host)\\n-                  newTitle = host + sep + newTitle;\\n+                var uri = this.mURIFixup.createExposableURI(\\n+                            this.mCurrentBrowser.currentURI);\\n+                if (uri.host)\\n+                  newTitle = uri.prePath + sep + newTitle;\\n               }\\n             } catch (e) {}\\n                         \\n\""}