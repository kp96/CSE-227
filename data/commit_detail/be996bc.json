{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basbe996bc\""},"diff":"\"be996bc fix for bug #350299:  After clicking \\\"Restart Now\\\", the software update wizard can obscure the \\\"confirm close\\\" prompt from browser windows with multiple tabs. additional, after clicking \\\"Restart Now\\\", we need to disable the \\\"Restart Now\\\" and \\\"Later\\\" buttons, so that the user can't click on them again (while they are dealing with the \\\"confirm close\\\" prompts. finally, improve the prompt scenario (by first focusing the wizard) where the user has paused in the middle downloading a software update, minimized the software update wizard, and then quit the app. r=gavin.sharp, sr=mconnor\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 0ebd124..ba715a9 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -1277,6 +1277,12 @@\\n \\n             var messageKey = (tabsToClose == 1) ? \\\"tabs.closeWarningOne\\\" : \\\"tabs.closeWarningMultiple\\\";\\n             var closeKey = (tabsToClose == 1) ? \\\"tabs.closeButtonOne\\\" : \\\"tabs.closeButtonMultiple\\\";\\n+            // focus the window before prompting.\\n+            // this will raise any minimized window, which will\\n+            // make it obvious which window the prompt is for and will\\n+            // solve the problem of windows \\\"obscuring\\\" the prompt.\\n+            // see bug #350299 for more details\\n+            window.focus();\\n             var buttonPressed = promptService.confirmEx(window,\\n                                                         bundle.getString('tabs.closeWarningTitle'),\\n                                                         bundle.getFormattedString(messageKey, [tabsToClose]),\\n\""}