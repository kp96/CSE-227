{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas9e10bb4\""},"diff":"\"9e10bb4 Bug 351965: Disable background close looks evil in the new themes, patch by Phil Ringnalda <philringnalda@gmail.com>, r=mano\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex ba715a9..34f5d8c 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -2548,11 +2548,8 @@\\n           }\\n \\n           this.firstChild.minWidth = this.mTabMinWidth;\\n-          this._updateDisableBackgroundClose();\\n           this.adjustTabstrip();\\n \\n-          pb2.addObserver(\\\"browser.tabs.disableBackgroundClose\\\", \\n-                          this._prefObserver, true);\\n           pb2.addObserver(\\\"browser.tabs.closeButtons\\\", \\n                           this._prefObserver, true);\\n \\n@@ -2602,23 +2599,6 @@\\n         document.getAnonymousElementByAttribute(this, \\\"anonid\\\", \\\"tabstrip-closebutton\\\");\\n       </field>\\n \\n-      <method name=\\\"_updateDisableBackgroundClose\\\">\\n-        <body><![CDATA[\\n-          var prefs =\\n-              Components.classes['@mozilla.org/preferences-service;1'].\\n-              getService(Components.interfaces.nsIPrefBranch);\\n-          try {\\n-            if (prefs.getBoolPref(\\\"browser.tabs.disableBackgroundClose\\\"))\\n-              this.setAttribute(\\\"disablebackgroundclose\\\", \\\"true\\\");\\n-            else\\n-              this.removeAttribute(\\\"disablebackgroundclose\\\");\\n-          }\\n-          catch (e) {\\n-            this.setAttribute(\\\"disablebackgroundclose\\\", \\\"true\\\");\\n-          }\\n-        ]]></body>\\n-      </method>\\n-\\n       <field name=\\\"_prefObserver\\\">({\\n         tabbox: this,\\n   \\n@@ -2626,9 +2606,6 @@\\n         {\\n           if (topic == \\\"nsPref:changed\\\") {\\n             switch (data) {\\n-            case \\\"browser.tabs.disableBackgroundClose\\\":\\n-              this.tabbox._updateDisableBackgroundClose();\\n-              break;\\n             case \\\"browser.tabs.closeButtons\\\":\\n               var pb2 =\\n                   Components.classes['@mozilla.org/preferences-service;1'].\\n@@ -3013,7 +2990,6 @@\\n         <xul:image class=\\\"tab-icon\\\" xbl:inherits=\\\"validate,src=image\\\"/>\\n         <xul:label class=\\\"tab-text\\\" xbl:inherits=\\\"value=label,accesskey,crop,disabled\\\" flex=\\\"1\\\"/>\\n       </xul:hbox>\\n-      <xul:image anonid=\\\"close-button-placeholder\\\" class=\\\"tab-close-button-placeholder\\\"/>\\n       <xul:toolbarbutton anonid=\\\"close-button\\\" tabindex=\\\"-1\\\" class=\\\"tab-close-button\\\"/>\\n     </content>\\n \\ndiff --git a/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml b/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\nindex d44b33f..9caaf94 100644\\n--- a/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\n+++ b/browser/themes/pinstripe/browser/tabbrowser/tabbrowserBindings.xml\\n@@ -16,9 +16,6 @@\\n     <content chromedir=\\\"&locale.dir;\\\"\\n              closetabtext=\\\"&closeTab.label;\\\">\\n       <xul:hbox class=\\\"tab-image-left\\\" xbl:inherits=\\\"selected\\\"/>\\n-      <xul:hbox pack=\\\"center\\\" align=\\\"center\\\">\\n-        <xul:image anonid=\\\"close-button-placeholder\\\" class=\\\"tab-close-button-placeholder\\\"/>\\n-      </xul:hbox>\\n       <xul:toolbarbutton anonid=\\\"close-button\\\" class=\\\"tab-close-button\\\" tabindex=\\\"-1\\\"/>\\n       <xul:hbox flex=\\\"1\\\" class=\\\"tab-image-middle\\\" align=\\\"center\\\" xbl:inherits=\\\"selected\\\">\\n         <xul:stack class=\\\"tab-icon\\\">\\n\""}