{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas9109873\""},"diff":"\"9109873 Bug 385178. Memory leak when viewing feeds. r=gavin\\ndiff --git a/browser/components/feeds/src/FeedConverter.js b/browser/components/feeds/src/FeedConverter.js\\nindex 3cdbd04..1e9edb0 100644\\n--- a/browser/components/feeds/src/FeedConverter.js\\n+++ b/browser/components/feeds/src/FeedConverter.js\\n@@ -132,6 +132,7 @@ FeedConverter.prototype = {\\n   _releaseHandles: function FC__releaseHandles() {\\n     this._listener = null;\\n     this._request = null;\\n+    this._processor = null;\\n   },\\n   \\n   /**\\ndiff --git a/browser/components/feeds/src/FeedWriter.js b/browser/components/feeds/src/FeedWriter.js\\nindex b1f9e7b..fff21f1 100755\\n--- a/browser/components/feeds/src/FeedWriter.js\\n+++ b/browser/components/feeds/src/FeedWriter.js\\n@@ -847,6 +847,12 @@ FeedWriter.prototype = {\\n    * See nsIFeedWriter\\n    */\\n   close: function FW_close() {\\n+    this._document\\n+        .getElementById(\\\"handlersMenuPopup\\\")\\n+        .removeEventListener(\\\"command\\\", this, false);\\n+    this._document\\n+        .getElementById(\\\"subscribeButton\\\")\\n+        .removeEventListener(\\\"command\\\", this, false);\\n     this._document = null;\\n     this._window = null;\\n     var prefs =   \\n@@ -857,7 +863,11 @@ FeedWriter.prototype = {\\n     prefs.removeObserver(PREF_SELECTED_WEB, this);\\n     prefs.removeObserver(PREF_SELECTED_APP, this);\\n     this._removeFeedFromCache();\\n-\\n+    this.__faviconService = null;\\n+    this.__bundle = null;\\n+    this._selectedApplicationItemWrapped = null;\\n+    this._defaultSystemReaderItemWrapped = null;\\n+    this._FeedURI = null;\\n     var historySvc = Cc[NH_CONTRACTID].getService(Ci.nsINavHistoryService);\\n     historySvc.removeObserver(this);\\n   },\\n\""}