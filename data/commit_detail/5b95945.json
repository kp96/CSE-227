{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas5b95945\""},"diff":"\"5b95945 Bug 396745 nsILDAPConnection::Init should take an nsILDAPURL as a parameter instead of three others. r/sr=bienvenu NPOTDFFB\\ndiff --git a/extensions/pref/autoconfig/src/nsLDAPSyncQuery.cpp b/extensions/pref/autoconfig/src/nsLDAPSyncQuery.cpp\\nindex 5d6e411..b0beb9f 100644\\n--- a/extensions/pref/autoconfig/src/nsLDAPSyncQuery.cpp\\n+++ b/extensions/pref/autoconfig/src/nsLDAPSyncQuery.cpp\\n@@ -380,31 +380,6 @@ nsresult nsLDAPSyncQuery::InitConnection()\\n         return NS_ERROR_NOT_INITIALIZED;\\n     }\\n \\n-    // host to connect to\\n-    //\\n-    nsCAutoString host;\\n-    rv = mServerURL->GetAsciiHost(host);\\n-    if (NS_FAILED(rv)) {\\n-        FinishLDAPQuery();\\n-        return NS_ERROR_FAILURE;\\n-    }\\n-\\n-    // on which port\\n-    //\\n-    PRInt32 port;\\n-    rv = mServerURL->GetPort(&port);\\n-    if (NS_FAILED(rv)) {\\n-        FinishLDAPQuery();\\n-        return NS_ERROR_FAILURE;\\n-    }\\n-        \\n-    PRUint32 options;\\n-    rv = mServerURL->GetOptions(&options);\\n-    if (NS_FAILED(rv)) {\\n-        FinishLDAPQuery();\\n-        return NS_ERROR_FAILURE;\\n-    }\\n-\\n     // get a proxy object so the callback happens on the main thread\\n     //\\n     rv = NS_GetProxyForObject(NS_PROXY_TO_CURRENT_THREAD,\\n@@ -419,9 +394,7 @@ nsresult nsLDAPSyncQuery::InitConnection()\\n         return NS_ERROR_FAILURE;\\n     }\\n \\n-    rv = mConnection->Init(host.get(), port, \\n-                           (options & nsILDAPURL::OPT_SECURE) \\n-                           ? PR_TRUE : PR_FALSE, EmptyCString(), selfProxy,\\n+    rv = mConnection->Init(mServerURL, EmptyCString(), selfProxy,\\n                            nsnull, mProtocolVersion);\\n     if (NS_FAILED(rv)) {\\n         FinishLDAPQuery();\\n\""}