{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basf6f8318\""},"diff":"\"f6f8318 - super fun spinning throbber goodness!\\ndiff --git a/services/sync/nsBookmarksSyncService.js b/services/sync/nsBookmarksSyncService.js\\nindex 73a4620..9820fbc 100644\\n--- a/services/sync/nsBookmarksSyncService.js\\n+++ b/services/sync/nsBookmarksSyncService.js\\n@@ -601,6 +601,7 @@ BookmarksSyncService.prototype = {\\n     var generator = yield;\\n     var handlers = this._handlersForGenerator(generator);\\n \\n+    this._os.notifyObservers(null, \\\"bookmarks-sync:start\\\", \\\"\\\");\\n     LOG(\\\"Beginning sync\\\");\\n \\n     try {\\n@@ -620,9 +621,11 @@ BookmarksSyncService.prototype = {\\n \\n       LOG(\\\"server: \\\" + uneval(server));\\n       if (server['status'] == 2) {\\n+        this._os.notifyObservers(null, \\\"bookmarks-sync:end\\\", \\\"\\\");\\n         LOG(\\\"Sync complete\\\");\\n         return;\\n       } else if (server['status'] != 0 && server['status'] != 1) {\\n+        this._os.notifyObservers(null, \\\"bookmarks-sync:end\\\", \\\"\\\");\\n         LOG(\\\"Sync error\\\");\\n         return;\\n       }\\n@@ -636,6 +639,7 @@ BookmarksSyncService.prototype = {\\n       var localUpdates = this._detectUpdates(this._snapshot, localJson);\\n       LOG(\\\"updates: \\\" + uneval(localUpdates));\\n       if (!(server['status'] == 1 || localUpdates.length > 0)) {\\n+        this._os.notifyObservers(null, \\\"bookmarks-sync:end\\\", \\\"\\\");\\n         LOG(\\\"Sync complete (1): no changes needed on client or server\\\");\\n         return;\\n       }\\n@@ -673,6 +677,7 @@ BookmarksSyncService.prototype = {\\n \\n       if (!(clientChanges.length || serverChanges.length ||\\n             clientConflicts.length || serverConflicts.length)) {\\n+        this._os.notifyObservers(null, \\\"bookmarks-sync:end\\\", \\\"\\\");\\n         LOG(\\\"Sync complete (2): no changes needed on client or server\\\");\\n         this._snapshot = this._wrapNode(localBookmarks);\\n         this._snapshotVersion = server['version'];\\n@@ -716,6 +721,7 @@ BookmarksSyncService.prototype = {\\n           LOG(\\\"Error: could not update deltas on server\\\");\\n         }\\n       }\\n+      this._os.notifyObservers(null, \\\"bookmarks-sync:end\\\", \\\"\\\");\\n       LOG(\\\"Sync complete\\\");\\n     } finally {\\n       //this._dav.unlock(handlers);\\n\""}