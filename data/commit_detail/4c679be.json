{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas4c679be\""},"diff":"\"4c679be Bug 392303 - Simplify installer changes (fix includes for older versions of NSIS). r=sspitzer\\ndiff --git a/toolkit/mozapps/installer/windows/nsis/common.nsh b/toolkit/mozapps/installer/windows/nsis/common.nsh\\nindex 1a6a372..009b42f 100755\\n--- a/toolkit/mozapps/installer/windows/nsis/common.nsh\\n+++ b/toolkit/mozapps/installer/windows/nsis/common.nsh\\n@@ -67,11 +67,15 @@ Exch 1   ; exchange the top of the stack with 2 below the top of the stack\\n Exch $R9 ; exchange the new $R9 value with the top of the stack\\n */\\n \\n-# Commented out until the Thunderbird, Seamonkey, and Calendar Tinderboxes\\n-# have been updated to MozillaBuild which includes an updated version of\\n-# NSIS\\n-# !include TextFunc.nsh\\n-# !include FileFunc.nsh\\n+; When including a file provided by NSIS check if its verbose macro is defined\\n+; to prevent loading the file a second time.\\n+!ifmacrondef TEXTFUNC_VERBOSE\\n+!include TextFunc.nsh\\n+!endif\\n+\\n+!ifmacrondef FILEFUNC_VERBOSE\\n+!include FileFunc.nsh\\n+!endif\\n \\n ; NSIS provided macros that we have overridden.\\n !include overrides.nsh\\ndiff --git a/toolkit/mozapps/installer/windows/nsis/overrides.nsh b/toolkit/mozapps/installer/windows/nsis/overrides.nsh\\nindex a3bf090..899e71d 100755\\n--- a/toolkit/mozapps/installer/windows/nsis/overrides.nsh\\n+++ b/toolkit/mozapps/installer/windows/nsis/overrides.nsh\\n@@ -4,11 +4,15 @@\\n !ifndef OVERRIDES_INCLUDED\\n !define OVERRIDES_INCLUDED\\n \\n-# Commented out until the Thunderbird, Seamonkey, and Calendar Tinderboxes\\n-# have been updated to MozillaBuild which includes an updated version of\\n-# NSIS\\n-# !include TextFunc.nsh\\n-# !include FileFunc.nsh\\n+; When including a file check if its verbose macro is defined to prevent\\n+; loading the file a second time.\\n+!ifmacrondef TEXTFUNC_VERBOSE\\n+!include TextFunc.nsh\\n+!endif\\n+\\n+!ifmacrondef FILEFUNC_VERBOSE\\n+!include FileFunc.nsh\\n+!endif\\n \\n ; Modified version of Locate from the NSIS File Functions Header v3.2\\n ; This version has the calls to SetDetailsPrint and DetailsPrint commented out.\\n\""}