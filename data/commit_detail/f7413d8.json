{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basf7413d8\""},"diff":"\"f7413d8 Fix bustage from previous checkin for bug 392055. Move #define of XPCOM_GLUE_AVOID_NSPR from nsISupportsImpl.h to nscore.h. r/a=bsmedberg\\ndiff --git a/xpcom/base/nscore.h b/xpcom/base/nscore.h\\nindex 7e01a4d..7329fd1 100644\\n--- a/xpcom/base/nscore.h\\n+++ b/xpcom/base/nscore.h\\n@@ -462,4 +462,13 @@ typedef PRUint32 nsrefcnt;\\n #define NS_UNLIKELY(x)  (!!(x))\\n #endif\\n \\n+ /*\\n+  * If we're being linked as standalone glue, we don't want a dynamic dependency\\n+  * on NSPR libs, so we skip the debug thread-safety checks, and we cannot use\\n+  * the THREADSAFE_ISUPPORTS macros.\\n+  */\\n+#if defined(XPCOM_GLUE) && !defined(XPCOM_GLUE_USE_NSPR)\\n+#define XPCOM_GLUE_AVOID_NSPR\\n+#endif\\n+\\n #endif /* nscore_h___ */\\ndiff --git a/xpcom/glue/nsISupportsImpl.h b/xpcom/glue/nsISupportsImpl.h\\nindex 9d1c766..663d916 100644\\n--- a/xpcom/glue/nsISupportsImpl.h\\n+++ b/xpcom/glue/nsISupportsImpl.h\\n@@ -50,15 +50,6 @@\\n #include \\\"nsISupportsUtils.h\\\"\\n #endif\\n \\n-#if defined(XPCOM_GLUE) && !defined(XPCOM_GLUE_USE_NSPR)\\n-// If we're being linked as standalone glue, we don't want a dynamic dependency\\n-// on NSPR libs, so we skip the debug thread-safety checks, and we cannot use\\n-// the THREADSAFE_ISUPPORTS macros.\\n-\\n-#define XPCOM_GLUE_AVOID_NSPR\\n-\\n-#endif\\n-\\n \\n #if !defined(XPCOM_GLUE_AVOID_NSPR)\\n #include \\\"prthread.h\\\" /* needed for thread-safety checks */\\n\""}