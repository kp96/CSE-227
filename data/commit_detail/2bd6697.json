{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas2bd6697\""},"diff":"\"2bd6697 stop native comboboxes from drawing outside of their frames. b=396101 r=cbarrett sr=roc\\ndiff --git a/widget/src/cocoa/nsNativeThemeCocoa.mm b/widget/src/cocoa/nsNativeThemeCocoa.mm\\nindex c133786..9686a45 100644\\n--- a/widget/src/cocoa/nsNativeThemeCocoa.mm\\n+++ b/widget/src/cocoa/nsNativeThemeCocoa.mm\\n@@ -199,8 +199,15 @@ nsNativeThemeCocoa::DrawButton(CGContextRef cgContext, ThemeButtonKind inKind,\\n   }\\n   else {\\n     HIRect drawFrame = inBoxRect;\\n-    if (inKind == kThemePushButton)\\n+    if (inKind == kThemePushButton) {\\n       drawFrame.size.height -= NATIVE_PUSH_BUTTON_HEIGHT_DIFF;\\n+    }\\n+    else if (inKind == kThemePopupButton) {\\n+      // popup buttons draw outside their frame by 1 pixel on each side and two on the bottom\\n+      drawFrame.size.width -= 2;\\n+      drawFrame.origin.x += 1;\\n+      drawFrame.size.height -= NATIVE_PUSH_BUTTON_HEIGHT_DIFF;\\n+    }\\n \\n     HIThemeDrawButton(&drawFrame, &bdi, cgContext, kHIThemeOrientationNormal, NULL);\\n   }\\n@@ -918,9 +925,7 @@ nsNativeThemeCocoa::GetWidgetBorder(nsIDeviceContext* aContext,\\n \\n     case NS_THEME_DROPDOWN:\\n     case NS_THEME_DROPDOWN_BUTTON:\\n-      // We need to shift the text up a single pixel. For native form control drawing,\\n-      // the borders need not actually reflect the size of the drawn border.\\n-      aResult->SizeTo(kAquaDropdownLeftBorder, 1, kAquaDropdownRightBorder, 1);\\n+      aResult->SizeTo(kAquaDropdownLeftBorder, 2, kAquaDropdownRightBorder, 2);\\n       break;\\n \\n     case NS_THEME_TEXTFIELD:\\n\""}