{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas5baaf562\""},"diff":"\"5baaf562 fix for bug #395541:  when searching previous autocomplete results, if we find any, tell the front end immediately, instead of waiting for our first db query to return r=dietrich, a=mconnor for m8\\ndiff --git a/toolkit/components/places/src/nsNavHistoryAutoComplete.cpp b/toolkit/components/places/src/nsNavHistoryAutoComplete.cpp\\nindex 9f8b90d..388981d 100644\\n--- a/toolkit/components/places/src/nsNavHistoryAutoComplete.cpp\\n+++ b/toolkit/components/places/src/nsNavHistoryAutoComplete.cpp\\n@@ -362,8 +362,14 @@ nsNavHistory::StartSearch(const nsAString & aSearchString,\\n     mCurrentResult->GetMatchCount(&count); \\n \\n     if (count > 0) {\\n+      // when searching previous autocomplete results, \\n+      // if we found any matches, tell the front end immediately, \\n+      // instead of waiting until our first query returns.\\n       mCurrentResult->SetSearchResult(nsIAutoCompleteResult::RESULT_SUCCESS_ONGOING);\\n       mCurrentResult->SetDefaultIndex(0);\\n+      rv = mCurrentResult->SetListener(this);\\n+      NS_ENSURE_SUCCESS(rv, rv);\\n+      mCurrentListener->OnSearchResult(this, mCurrentResult);\\n     }\\n   }\\n   else if (!mCurrentSearchString.IsEmpty()) {\\n\""}