{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basd8609f8\""},"diff":"\"d8609f8 Treat the pseudo frame even more like a real frame. bug 390597, r+a=brendan\\ndiff --git a/js/src/jsdbgapi.c b/js/src/jsdbgapi.c\\nindex d29c3b7..8e6ef22 100644\\n--- a/js/src/jsdbgapi.c\\n+++ b/js/src/jsdbgapi.c\\n@@ -609,6 +609,13 @@ js_watch_set(JSContext *cx, JSObject *obj, jsval id, jsval *vp)\\n                       ? js_InternalCall(cx, obj, OBJECT_TO_JSVAL(wp->setter),\\n                                         1, vp, vp)\\n                       : wp->setter(cx, OBJ_THIS_OBJECT(cx, obj), userid, vp));\\n+\\n+                /* Evil code can cause us to have an arguments object. */\\n+                if (frame.callobj)\\n+                    ok &= js_PutCallObject(cx, &frame);\\n+                if (frame.argsobj)\\n+                    ok &= js_PutArgsObject(cx, &frame);\\n+\\n                 cx->fp = frame.down;\\n                 if (argv != smallv)\\n                     JS_free(cx, argv);\\n\""}