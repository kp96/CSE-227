{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas58deed6\""},"diff":"\"58deed6 Revoke presentation restore events even if we just get a network stop.  Bug 306283, r+sr=biesi\\ndiff --git a/docshell/base/nsDocShell.cpp b/docshell/base/nsDocShell.cpp\\nindex 0a166bf..fa2f62e 100644\\n--- a/docshell/base/nsDocShell.cpp\\n+++ b/docshell/base/nsDocShell.cpp\\n@@ -3223,10 +3223,10 @@ nsDocShell::Reload(PRUint32 aReloadFlags)\\n NS_IMETHODIMP\\n nsDocShell::Stop(PRUint32 aStopFlags)\\n {\\n-    if (nsIWebNavigation::STOP_CONTENT & aStopFlags) {\\n-        // Revoke any pending event related to content viewer restoration\\n-        mRestorePresentationEvent.Revoke();\\n+    // Revoke any pending event related to content viewer restoration\\n+    mRestorePresentationEvent.Revoke();\\n \\n+    if (nsIWebNavigation::STOP_CONTENT & aStopFlags) {\\n         // Stop the document loading\\n         if (mContentViewer)\\n             mContentViewer->Stop();\\n\""}