{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basdca0f40\""},"diff":"\"dca0f40 Bug 392493 - \\\"Add forget() method to nsCOMPtr and nsRefPtr\\\". r=dbaron, a=bzbarsky.\\ndiff --git a/xpcom/base/nsAutoPtr.h b/xpcom/base/nsAutoPtr.h\\nindex dec4942..5b37575 100644\\n--- a/xpcom/base/nsAutoPtr.h\\n+++ b/xpcom/base/nsAutoPtr.h\\n@@ -1032,6 +1032,16 @@ class nsRefPtr\\n           mRawPtr = temp;\\n         }\\n \\n+      already_AddRefed<T>\\n+      forget()\\n+          // return the value of mRawPtr and null out mRawPtr. Useful for\\n+          // already_AddRefed return values.\\n+        {\\n+          T* temp = 0;\\n+          swap(temp);\\n+          return temp;\\n+        }\\n+\\n       T*\\n       get() const\\n           /*\\ndiff --git a/xpcom/glue/nsCOMPtr.h b/xpcom/glue/nsCOMPtr.h\\nindex 2f290c3..f9415ca 100644\\n--- a/xpcom/glue/nsCOMPtr.h\\n+++ b/xpcom/glue/nsCOMPtr.h\\n@@ -819,6 +819,16 @@ class nsCOMPtr\\n \\n         // Other pointer operators\\n \\n+      already_AddRefed<T>\\n+      forget()\\n+          // return the value of mRawPtr and null out mRawPtr. Useful for\\n+          // already_AddRefed return values.\\n+        {\\n+          T* temp = 0;\\n+          swap(temp);\\n+          return temp;\\n+        }\\n+\\n       T*\\n       get() const\\n           /*\\n\""}