{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basb4202b8\""},"diff":"\"b4202b8 Make this test actually test something\\ndiff --git a/content/base/test/test_bug392318.html b/content/base/test/test_bug392318.html\\nindex a316ecb..23810a3 100644\\n--- a/content/base/test/test_bug392318.html\\n+++ b/content/base/test/test_bug392318.html\\n@@ -8,6 +8,28 @@ https://bugzilla.mozilla.org/show_bug.cgi?id=392318\\n   <script type=\\\"text/javascript\\\" src=\\\"/MochiKit/MochiKit.js\\\"></script>\\n   <script type=\\\"text/javascript\\\" src=\\\"/tests/SimpleTest/SimpleTest.js\\\"></script>\\n   <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"/tests/SimpleTest/test.css\\\" />\\n+  <script class=\\\"testbody\\\" type=\\\"text/javascript\\\">\\n+  /** Test for Bug 392318 **/\\n+  \\n+  SimpleTest.waitForExplicitFinish();\\n+  var testRan = false;\\n+  \\n+  function runTest() {\\n+    isnot($(\\\"t\\\").offsetWidth, 0, \\\"Unexpected offsetWidth\\\");\\n+    testRan = true;\\n+  }\\n+  \\n+  document.addEventListener(\\\"DOMContentLoaded\\\", runTest, false);\\n+  \\n+  addLoadEvent(function() {\\n+    is(testRan, true, \\\"Onload firing too early\\\");\\n+  });\\n+  \\n+  addLoadEvent(SimpleTest.finish);\\n+  </script>\\n+  <!-- IMPORTANT: This sheet must come after the test that sets up the\\n+       DOMContentLoaded handler and before the <body> -->\\n+  <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"data:text/css;%20charset=utf-8,%23t%20%7B%0Awidth%3A%20200px%3B%0Aborder%3A%201px%20solid%20black%3B%0Aheight%3A%20100px%3B%0A%7D\\\">\\n </head>\\n <body>\\n <a target=\\\"_blank\\\" href=\\\"https://bugzilla.mozilla.org/show_bug.cgi?id=392318\\\">Mozilla Bug 392318</a>\\n@@ -16,28 +38,6 @@ https://bugzilla.mozilla.org/show_bug.cgi?id=392318\\n   \\n </div>\\n <pre id=\\\"test\\\">\\n-<script class=\\\"testbody\\\" type=\\\"text/javascript\\\">\\n-/** Test for Bug 392318 **/\\n-\\n-SimpleTest.waitForExplicitFinish();\\n-var testRan = false;\\n-\\n-function runTest() {\\n-  isnot($(\\\"t\\\").offsetWidth, 0, \\\"Unexpected offsetWidth\\\");\\n-  testRan = true;\\n-}\\n-\\n-document.addEventListener(\\\"DOMContentLoaded\\\", runTest, false);\\n-\\n-addLoadEvent(function() {\\n-  is(testRan, true, \\\"Onload firing too early\\\");\\n-});\\n-\\n-addLoadEvent(SimpleTest.finish);\\n-</script>\\n-<!-- IMPORTANT: This sheet must come after the test that sets up the\\n-     DOMContentLoaded handler -->\\n-<link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"data:text/css;%20charset=utf-8,%23t%20%7B%0Awidth%3A%20200px%3B%0Aborder%3A%201px%20solid%20black%3B%0Aheight%3A%20100px%3B%0A%7D\\\">\\n <div id=\\\"t\\\"></div>\\n </pre>\\n </body>\\n\""}