{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basfd719c1\""},"diff":"\"fd719c1 Bug 243893 - Open in Tab is unusable when toolbars are not present. r=mconnor, a=asa\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 5726955..b6b128d 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -60,7 +60,7 @@\\n         <xul:hbox id=\\\"tab-drop-indicator-bar\\\">\\n           <xul:hbox id=\\\"tab-drop-indicator\\\"/>\\n         </xul:hbox>          \\n-        <xul:hbox class=\\\"tabbrowser-strip chromeclass-toolbar\\\" collapsed=\\\"true\\\" tooltip=\\\"_child\\\" context=\\\"_child\\\"\\n+        <xul:hbox class=\\\"tabbrowser-strip\\\" collapsed=\\\"true\\\" tooltip=\\\"_child\\\" context=\\\"_child\\\"\\n                   ondraggesture=\\\"nsDragAndDrop.startDrag(event, this.parentNode.parentNode); event.stopPropagation();\\\"\\n                   ondragover=\\\"nsDragAndDrop.dragOver(event, this.parentNode.parentNode); event.stopPropagation();\\\"\\n                   ondragdrop=\\\"nsDragAndDrop.drop(event, this.parentNode.parentNode); event.stopPropagation();\\\"\\n@@ -1147,7 +1147,8 @@\\n \\n             if (l == 2) {\\n               var autohide = this.mPrefs.getBoolPref(\\\"browser.tabs.autoHide\\\");\\n-              if (autohide)\\n+              var tabStripHide = !window.toolbar.visible;\\n+              if (autohide || tabStripHide)\\n                 this.setStripVisibilityTo(false);\\n             }\\n \\n@@ -1276,9 +1277,10 @@\\n           <![CDATA[\\n             if (!this.mProgressListeners) {\\n               this.mProgressListeners = [];\\n-              const autoHide = this.mPrefs.getBoolPref(\\\"browser.tabs.autoHide\\\");\\n-              const forceHide = this.mPrefs.getBoolPref(\\\"browser.tabs.forceHide\\\");\\n-              if (!autoHide && !forceHide)\\n+              var autoHide = this.mPrefs.getBoolPref(\\\"browser.tabs.autoHide\\\");\\n+              var forceHide = this.mPrefs.getBoolPref(\\\"browser.tabs.forceHide\\\");\\n+              var tabStripHide = !window.toolbar.visible;\\n+              if (!autoHide && !forceHide && !tabStripHide)\\n                 this.setStripVisibilityTo(true);\\n \\n               // Hook up a listener for <link>s.\\n\""}