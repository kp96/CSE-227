{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basaa4b04b\""},"diff":"\"aa4b04b Bug 393146. Make libxul builds work with --disable-xmlextras. r=luser,a=bz\\ndiff --git a/toolkit/library/libxul-config.mk b/toolkit/library/libxul-config.mk\\nindex ee51be7..9641cf7 100644\\n--- a/toolkit/library/libxul-config.mk\\n+++ b/toolkit/library/libxul-config.mk\\n@@ -114,7 +114,6 @@ COMPONENT_LIBS += \\\\\\n \\thtmlpars \\\\\\n \\timglib2 \\\\\\n \\tgklayout \\\\\\n-\\txmlextras \\\\\\n \\tdocshell \\\\\\n \\tembedcomponents \\\\\\n \\twebbrwsr \\\\\\n@@ -127,6 +126,12 @@ COMPONENT_LIBS += \\\\\\n \\tpipnss \\\\\\n \\t$(NULL)\\n \\n+ifdef MOZ_XMLEXTRAS\\n+COMPONENT_LIBS += \\\\\\n+\\txmlextras \\\\\\n+\\t$(NULL)\\n+endif\\n+  \\n ifdef MOZ_PLUGINS\\n DEFINES += -DMOZ_PLUGINS\\n COMPONENT_LIBS += \\\\\\ndiff --git a/toolkit/library/nsStaticXULComponents.cpp b/toolkit/library/nsStaticXULComponents.cpp\\nindex 3ff403f..bf5aa94 100644\\n--- a/toolkit/library/nsStaticXULComponents.cpp\\n+++ b/toolkit/library/nsStaticXULComponents.cpp\\n@@ -250,6 +250,12 @@\\n #define SPELLCHECK_MODULE\\n #endif\\n \\n+#ifdef MOZ_XMLEXTRAS\\n+#define XMLEXTRAS_MODULE MODULE(nsXMLExtrasModule)\\n+#else\\n+#define XMLEXTRAS_MODULE\\n+#endif\\n+\\n #define XUL_MODULES                          \\\\\\n     MODULE(xpconnect)                        \\\\\\n     MATHML_MODULES                           \\\\\\n@@ -273,7 +279,6 @@\\n     ICON_MODULE                              \\\\\\n     PLUGINS_MODULES                          \\\\\\n     MODULE(nsLayoutModule)                   \\\\\\n-    MODULE(nsXMLExtrasModule)                \\\\\\n     WEBSERVICES_MODULES                      \\\\\\n     MODULE(docshell_provider)                \\\\\\n     MODULE(embedcomponents)                  \\\\\\n@@ -299,6 +304,7 @@\\n     MODULE(NSS)                              \\\\\\n     SYSTEMPREF_MODULES                       \\\\\\n     SPELLCHECK_MODULE                        \\\\\\n+    XMLEXTRAS_MODULE                         \\\\\\n     LAYOUT_DEBUG_MODULE                      \\\\\\n     /* end of list */\\n \\n\""}