{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas2734931\""},"diff":"\"2734931 bug 379327 - have mochitest print test filename in FAIL lines.  r=sayrer\\ndiff --git a/testing/mochitest/tests/SimpleTest/SimpleTest.js b/testing/mochitest/tests/SimpleTest/SimpleTest.js\\nindex aa9efba..0096c62 100644\\n--- a/testing/mochitest/tests/SimpleTest/SimpleTest.js\\n+++ b/testing/mochitest/tests/SimpleTest/SimpleTest.js\\n@@ -65,9 +65,13 @@ SimpleTest.todo = function(condition, name, diag) {\\n SimpleTest._logResult = function(test, passString, failString) {\\n   var msg = test.result ? passString : failString;\\n   msg += \\\" | \\\" + test.name;\\n+  var url = \\\"\\\";\\n+  if (parentRunner.currentTestURL)\\n+    url = \\\" | \\\" + parentRunner.currentTestURL;\\n+\\n   if (test.result) {\\n       if (test.todo)\\n-          parentRunner.logger.error(msg)\\n+          parentRunner.logger.error(msg + url)\\n       else\\n           parentRunner.logger.log(msg);\\n   } else {\\n@@ -75,7 +79,7 @@ SimpleTest._logResult = function(test, passString, failString) {\\n       if (test.todo)\\n           parentRunner.logger.log(msg)\\n       else\\n-          parentRunner.logger.error(msg);\\n+          parentRunner.logger.error(msg + url);\\n   }\\n }\\n \\ndiff --git a/testing/mochitest/tests/SimpleTest/TestRunner.js b/testing/mochitest/tests/SimpleTest/TestRunner.js\\nindex 8e4441f..94caeed 100644\\n--- a/testing/mochitest/tests/SimpleTest/TestRunner.js\\n+++ b/testing/mochitest/tests/SimpleTest/TestRunner.js\\n@@ -9,6 +9,7 @@\\n var TestRunner = {};\\n TestRunner.logEnabled = false;\\n TestRunner._currentTest = 0;\\n+TestRunner.currentTestURL = \\\"\\\";\\n TestRunner._urls = [];\\n \\n /**\\n@@ -86,6 +87,8 @@ TestRunner.runTests = function (/*url...*/) {\\n TestRunner.runNextTest = function() {\\n     if (TestRunner._currentTest < TestRunner._urls.length) {\\n         var url = TestRunner._urls[TestRunner._currentTest];\\n+        TestRunner.currentTestURL = url;\\n+\\n         $(\\\"current-test-path\\\").innerHTML = url;\\n         \\n         if (TestRunner.logEnabled)\\n\""}