{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basbd4104a\""},"diff":"\"bd4104a Bug 394491 - send feed: URLs on all platforms, not just Mac (can't subscribe to feeds in Outlook 2007), r=mano\\ndiff --git a/browser/components/feeds/src/FeedConverter.js b/browser/components/feeds/src/FeedConverter.js\\nindex 02bdc80..37cf9be 100644\\n--- a/browser/components/feeds/src/FeedConverter.js\\n+++ b/browser/components/feeds/src/FeedConverter.js\\n@@ -357,27 +357,25 @@ var FeedResultService = {\\n     switch (handler) {\\n     case \\\"client\\\":\\n       var clientApp = prefs.getComplexValue(PREF_SELECTED_APP, Ci.nsILocalFile);\\n-#ifdef XP_MACOSX\\n-      // On OS X, the built in feed dispatcher (Safari) sends feeds to other\\n-      // applications (When Default Reader is adjusted) in the following format:\\n+\\n+      // For the benefit of applications that might know how to deal with more\\n+      // URLs than just feeds, send feed: URLs in the following format:\\n       //\\n       // http urls: replace scheme with feed, e.g.\\n       // http://foo.com/index.rdf -> feed://foo.com/index.rdf\\n-      // other urils: prepend feed: scheme, e.g.\\n+      // other urls: prepend feed: scheme, e.g.\\n       // https://foo.com/index.rdf -> feed:https://foo.com/index.rdf\\n-      //\\n-      // We duplicate this here for compatibility. \\n       var ios = \\n           Cc[\\\"@mozilla.org/network/io-service;1\\\"].\\n           getService(Ci.nsIIOService);\\n-      var macURI = ios.newURI(spec, null, null);\\n-      if (macURI.schemeIs(\\\"http\\\")) {\\n-        macURI.scheme = \\\"feed\\\";\\n-        spec = macURI.spec;\\n+      var feedURI = ios.newURI(spec, null, null);\\n+      if (feedURI.schemeIs(\\\"http\\\")) {\\n+        feedURI.scheme = \\\"feed\\\";\\n+        spec = feedURI.spec;\\n       }\\n       else\\n         spec = \\\"feed:\\\" + spec;\\n-#endif\\n+\\n       var ss = \\n           Cc[\\\"@mozilla.org/browser/shell-service;1\\\"].\\n           getService(Ci.nsIShellService);\\n\""}