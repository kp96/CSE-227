{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basabe3712\""},"diff":"\"abe3712 Bug 377781, make sure batch1 subdir exists before pulling key, p=joduinn, r=cf\\ndiff --git a/tools/release/Bootstrap/Step/Stage.pm b/tools/release/Bootstrap/Step/Stage.pm\\nindex 63a3101..a06a951 100644\\n--- a/tools/release/Bootstrap/Step/Stage.pm\\n+++ b/tools/release/Bootstrap/Step/Stage.pm\\n@@ -240,6 +240,12 @@ sub Execute {\\n     }\\n \\n     # Copy the PUBLIC KEY file from the cvs repo.\\n+    my $batch1Dir = catfile($stageDir, 'batch1');\\n+    if (not -d $batch1Dir) {\\n+        MkdirWithPath(dir => $batch1Dir) \\n+          or die \\\"Cannot create $batch1Dir: $!\\\";\\n+        $this->Log(msg => \\\"Created directory $batch1Dir\\\");\\n+    }\\n     $this->Shell(\\n       cmd => 'cvs',\\n       cmdArgs => [ '-d', $mofoCvsroot, \\n@@ -247,7 +253,7 @@ sub Execute {\\n                    CvsCatfile('release', 'keys', 'pgp',\\n                               'PUBLIC-KEY')],\\n       logFile => catfile($logDir, 'stage_publickey_checkout.log'),\\n-      dir => catfile($stageDir, 'batch1'),\\n+      dir => $batch1Dir\\n     );\\n     $this->Shell(\\n       cmd => 'cvs',\\n@@ -293,7 +299,7 @@ sub Execute {\\n       cmd => 'rsync',\\n       cmdArgs => ['-av', 'prestage/', 'prestage-trimmed/'],\\n       logFile => catfile($logDir, 'stage_collect_trimmed.log'),\\n-      dir => catfile($stageDir, 'batch1'),\\n+      dir => $batch1Dir\\n     );\\n \\n     # Remove unknown/unrecognized directories from the -candidates dir; after\\n@@ -364,7 +370,7 @@ sub Execute {\\n       cmd => 'rsync',\\n       cmdArgs => ['-av', 'stage-unsigned/', 'stage-signed/'],\\n       logFile => catfile($logDir, 'stage_unsigned_to_sign.log'),\\n-      dir => catfile($stageDir, 'batch1'),\\n+      dir => $batch1Dir\\n     );\\n \\n \\n@@ -377,7 +383,7 @@ sub Execute {\\n       cmd => 'rsync',\\n       cmdArgs => ['-av', 'prestage-trimmed/', 'mar/'],\\n       logFile => catfile($logDir, 'stage_trimmed_to_mars.log'),\\n-      dir => catfile($stageDir, 'batch1'),\\n+      dir => $batch1Dir\\n     );\\n \\n     $this->{'leaveOnlyMarsDirDeleteList'} = [];\\n\""}