{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas0aeda30\""},"diff":"\"0aeda30 Bug 362641: patch from Edward Lee to fix wrong precision warning. r=myself,brendan\\ndiff --git a/js/src/jsdtoa.c b/js/src/jsdtoa.c\\nindex 231790d..e8bb185 100644\\n--- a/js/src/jsdtoa.c\\n+++ b/js/src/jsdtoa.c\\n@@ -2350,8 +2350,13 @@ js_dtoa(double d, int mode, JSBool biasUp, int ndigits,\\n                 *s++ = '0' + (char)L;\\n                 if (d < eps)\\n                     goto ret1;\\n-                if (1. - d < eps)\\n+                if (1. - d < eps) {\\n+#ifdef DEBUG\\n+                    /* Clear d to avoid precision warning. */\\n+                    d = 0;\\n+#endif\\n                     goto bump_up;\\n+                }\\n                 if (++i >= ilim)\\n                     break;\\n                 eps *= 10.;\\n@@ -2367,8 +2372,13 @@ js_dtoa(double d, int mode, JSBool biasUp, int ndigits,\\n                 d -= L;\\n                 *s++ = '0' + (char)L;\\n                 if (i == ilim) {\\n-                    if (d > 0.5 + eps)\\n+                    if (d > 0.5 + eps) {\\n+#ifdef DEBUG\\n+                        /* Clear d to avoid precision warning. */\\n+                        d = 0;\\n+#endif\\n                         goto bump_up;\\n+                    }\\n                     else if (d < 0.5 - eps) {\\n                         while(*--s == '0') ;\\n                         s++;\\n\""}