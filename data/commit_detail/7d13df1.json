{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas7d13df1\""},"diff":"\"7d13df1 Reftests for bidi diacritics (bugs: 378351, 387653, 395676)\\ndiff --git a/layout/reftests/bidi/bidi-000-ref.html b/layout/reftests/bidi/bidi-000-ref.html\\nindex 117b3af..9ae628d 100644\\n--- a/layout/reftests/bidi/bidi-000-ref.html\\n+++ b/layout/reftests/bidi/bidi-000-ref.html\\n@@ -10,7 +10,7 @@ body {\\n   font-family: serif;\\n   font-size: 24pt;\\n }\\n-  </style\\n+  </style>\\n  <body>\\n   <p>god yzal eht revo spmuj xof nworb kciuq eht</p>\\n  </body>\\ndiff --git a/layout/reftests/bidi/bidi-004.html b/layout/reftests/bidi/bidi-004.html\\nindex d5615f6..7f4ba97 100644\\n--- a/layout/reftests/bidi/bidi-004.html\\n+++ b/layout/reftests/bidi/bidi-004.html\\n@@ -5,11 +5,11 @@\\n   <meta http-equiv=\\\"content-type\\\" content=\\\"text/html; charset=utf-8\\\";\\n  </head>\\n   <style type=\\\"text/css\\\">\\n-body {\\n+body {   \\n   font-family: serif;\\n   font-size: 24pt;\\n }\\n-  </style\\n+  </style>\\n  <body>\\n   <p lang=\\\"he\\\" style=\\\"direction: rtl;\\\">אַבּוּשׁ</p>\\n  </body>\\ndiff --git a/layout/reftests/bidi/bidi-006-j.html b/layout/reftests/bidi/bidi-006-j.html\\nnew file mode 100644\\nindex 0000000..0e1d402\\n--- /dev/null\\n+++ b/layout/reftests/bidi/bidi-006-j.html\\n@@ -0,0 +1,32 @@\\n+<!DOCTYPE html>\\r\\n+<!-- Bidi reftest 006: rtl text with diacritics. This is hard to reftest\\r\\n+     because if there is a bug it will typically be exhibited in the reference\\r\\n+     rendering as well as in the test. The approach adopted here is to use\\r\\n+     \\\"overflow-x: hidden\\\", so that if the diacritic is shifted to the right or\\r\\n+     left it will disappear from the test rendering and be visible (even if in\\r\\n+     the wrong place) in the reference rendering.\\r\\n+\\r\\n+     Relevant bugs:\\r\\n+     378351 (Windows)\\r\\n+     386573 (Mac)\\r\\n+     387653 (Linux)\\r\\n+     395676 (Windows)\\r\\n+ -->\\r\\n+<html>\\r\\n+ <head>\\r\\n+  <meta http-equiv=\\\"content-type\\\" content=\\\"text/html; charset=utf-8\\\";\\r\\n+ </head>\\r\\n+  <style type=\\\"text/css\\\">\\r\\n+p {   \\r\\n+  font-family: sans-serif;\\r\\n+  font-size: 36pt;\\r\\n+  width: 9pt;\\r\\n+  overflow-x: hidden;\\r\\n+  text-align: justify;\\r\\n+  margin: 48pt;\\r\\n+}\\r\\n+  </style>\\r\\n+ <body>\\r\\n+  <p>&#x5d9;&#x5b8;</p>\\r\\n+ </body>\\r\\n+</html>\\r\\ndiff --git a/layout/reftests/bidi/bidi-006-ref.html b/layout/reftests/bidi/bidi-006-ref.html\\nnew file mode 100644\\nindex 0000000..0be3ba6\\n--- /dev/null\\n+++ b/layout/reftests/bidi/bidi-006-ref.html\\n@@ -0,0 +1,30 @@\\n+<!DOCTYPE html>\\r\\n+<!-- Bidi reftest 006: rtl text with diacritics. This is hard to reftest\\r\\n+     because if there is a bug it will typically be exhibited in the reference\\r\\n+     rendering as well as in the test. The approach adopted here is to use\\r\\n+     \\\"overflow-x: hidden\\\", so that if the diacritic is shifted to the right or\\r\\n+     left it will disappear from the test rendering and be visible (even if in\\r\\n+     the wrong place) in the reference rendering.\\r\\n+\\r\\n+     Relevant bugs:\\r\\n+     378351 (Windows)\\r\\n+     386573 (Mac)\\r\\n+     387653 (Linux)\\r\\n+     395676 (Windows)\\r\\n+ -->\\r\\n+<html>\\r\\n+ <head>\\r\\n+  <meta http-equiv=\\\"content-type\\\" content=\\\"text/html; charset=utf-8\\\";\\r\\n+ </head>\\r\\n+  <style type=\\\"text/css\\\">\\r\\n+p {   \\r\\n+  font-family: sans-serif;\\r\\n+  font-size: 36pt;\\r\\n+  width: 9pt;\\r\\n+  margin: 48pt;\\r\\n+}\\r\\n+  </style>\\r\\n+ <body>\\r\\n+  <p>&#x5d9;&#x5b8;</p>\\r\\n+ </body>\\r\\n+</html>\\r\\ndiff --git a/layout/reftests/bidi/bidi-006.html b/layout/reftests/bidi/bidi-006.html\\nnew file mode 100644\\nindex 0000000..74d0660\\n--- /dev/null\\n+++ b/layout/reftests/bidi/bidi-006.html\\n@@ -0,0 +1,31 @@\\n+<!DOCTYPE html>\\r\\n+<!-- Bidi reftest 006: rtl text with diacritics. This is hard to reftest\\r\\n+     because if there is a bug it will typically be exhibited in the reference\\r\\n+     rendering as well as in the test. The approach adopted here is to use\\r\\n+     \\\"overflow-x: hidden\\\", so that if the diacritic is shifted to the right or\\r\\n+     left it will disappear from the test rendering and be visible (even if in\\r\\n+     the wrong place) in the reference rendering.\\r\\n+\\r\\n+     Relevant bugs:\\r\\n+     378351 (Windows)\\r\\n+     386573 (Mac)\\r\\n+     387653 (Linux)\\r\\n+     395676 (Windows)\\r\\n+ -->\\r\\n+<html>\\r\\n+ <head>\\r\\n+  <meta http-equiv=\\\"content-type\\\" content=\\\"text/html; charset=utf-8\\\";\\r\\n+ </head>\\r\\n+  <style type=\\\"text/css\\\">\\r\\n+p {   \\r\\n+  font-family: sans-serif;\\r\\n+  font-size: 36pt;\\r\\n+  width: 9pt;\\r\\n+  overflow-x: hidden;\\r\\n+  margin: 48pt;\\r\\n+}\\r\\n+  </style>\\r\\n+ <body>\\r\\n+  <p>&#x5d9;&#x5b8;</p>\\r\\n+ </body>\\r\\n+</html>\\r\\ndiff --git a/layout/reftests/bidi/reftest.list b/layout/reftests/bidi/reftest.list\\nindex 73ac82c..6bdaf1c 100644\\n--- a/layout/reftests/bidi/reftest.list\\n+++ b/layout/reftests/bidi/reftest.list\\n@@ -7,5 +7,7 @@\\n fails-if(MOZ_WIDGET_TOOLKIT!=\\\"windows\\\") == bidi-004.html bidi-004-ref.html # Bug 386567 (Linux), bug 386573 (Mac)\\n fails-if(MOZ_WIDGET_TOOLKIT!=\\\"windows\\\") == bidi-004-j.html bidi-004-ref.html\\n == bidi-005.html bidi-005-ref.html\\n+fails-if(MOZ_WIDGET_TOOLKIT==\\\"cocoa\\\") == bidi-006.html bidi-006-ref.html # Bug 386573\\n+fails-if(MOZ_WIDGET_TOOLKIT==\\\"cocoa\\\") == bidi-006-j.html bidi-006-ref.html # Bug 386573\\n == 386339.html 386339-ref.html\\n fails-if(MOZ_WIDGET_TOOLKIT!=\\\"gtk2\\\") == 387653.html 387653-ref.html # Linux-specific bug\\n\""}