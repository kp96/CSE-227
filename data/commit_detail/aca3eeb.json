{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basaca3eeb\""},"diff":"\"aca3eeb Bug 396630 - places keyboard shortcuts in the places organizer are broken on mac. r=dietrich, a=mconnor.\\ndiff --git a/browser/components/places/content/places.js b/browser/components/places/content/places.js\\nindex d1c335f..bd10ed9 100755\\n--- a/browser/components/places/content/places.js\\n+++ b/browser/components/places/content/places.js\\n@@ -85,6 +85,19 @@ var PlacesOrganizer = {\\n \\n     // Set up the advanced query builder UI\\n     PlacesQueryBuilder.init();\\n+\\n+#ifdef XP_MACOSX\\n+    // 1. Make Edit->Find focus the organizer search field\\n+    var findCommand = document.getElementById(\\\"cmd_find\\\");\\n+    findCommand.setAttribute(\\\"oncommand\\\", \\\"PlacesSearchBox.findCurrent();\\\");\\n+    findCommand.removeAttribute(\\\"disabled\\\");\\n+\\n+    // 2. Disable some keybindings from browser.xul\\n+    var elements = [\\\"cmd_handleBackspace\\\", \\\"cmd_handleShiftBackspace\\\"];\\n+    for (var i=0; i < elements.length; i++) {\\n+      document.getElementById(elements[i]).setAttribute(\\\"disabled\\\", \\\"true\\\");\\n+    }\\n+#endif\\n   },\\n \\n   destroy: function PO_destroy() {\\ndiff --git a/browser/components/places/content/places.xul b/browser/components/places/content/places.xul\\nindex aa8e38f..12e7167 100755\\n--- a/browser/components/places/content/places.xul\\n+++ b/browser/components/places/content/places.xul\\n@@ -137,24 +137,13 @@\\n          modifiers=\\\"accel,shift\\\"/>\\n     <key id=\\\"placesKey_open\\\"\\n          command=\\\"placesCmd_open\\\" \\n-         keycode=\\\"VK_ENTER\\\"/>\\n-    <key id=\\\"placesKey_open\\\"\\n-         command=\\\"placesCmd_open\\\" \\n          keycode=\\\"VK_RETURN\\\"/>\\n     <key id=\\\"placesKey_open:window\\\"\\n          command=\\\"placesCmd_open:window\\\" \\n-         keycode=\\\"VK_ENTER\\\"\\n-         modifiers=\\\"shift\\\"/>\\n-    <key id=\\\"placesKey_open:window\\\"\\n-         command=\\\"placesCmd_open:window\\\" \\n          keycode=\\\"VK_RETURN\\\"\\n          modifiers=\\\"shift\\\"/>\\n     <key id=\\\"placesKey_open:tab\\\"\\n          command=\\\"placesCmd_open:tab\\\" \\n-         keycode=\\\"VK_ENTER\\\"\\n-         modifiers=\\\"accel\\\"/>\\n-    <key id=\\\"placesKey_open:tab\\\"\\n-         command=\\\"placesCmd_open:tab\\\" \\n          keycode=\\\"VK_RETURN\\\"\\n          modifiers=\\\"accel\\\"/>\\n     <key id=\\\"placesKey_show:info\\\"\\n\""}