{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas7c3bf62\""},"diff":"\"7c3bf62 Bug 394117. Warnings when accessible relations queryied. r=surkov, a=dsicore\\ndiff --git a/accessible/public/nsIAccessibleRelation.idl b/accessible/public/nsIAccessibleRelation.idl\\nindex 1ae8473..3d4e7d5 100755\\n--- a/accessible/public/nsIAccessibleRelation.idl\\n+++ b/accessible/public/nsIAccessibleRelation.idl\\n@@ -57,6 +57,9 @@ interface nsIAccessibleRelation : nsISupports\\n    */\\n   const unsigned long RELATION_CONTROLLED_BY = 0x01;\\n \\n+  // First relation\\n+  const unsigned long RELATION_FIRST = RELATION_CONTROLLED_BY;\\n+\\n   /**\\n    * This object is interactive and controls some attribute of a target object.\\n    */\\n@@ -135,6 +138,9 @@ interface nsIAccessibleRelation : nsISupports\\n    */\\n   const unsigned long RELATION_DESCRIPTION_FOR = 0x0f;\\n \\n+  // Last relation that is standard to desktop accessibility APIs\\n+  const unsigned long RELATION_LAST = RELATION_DESCRIPTION_FOR;\\n+\\n   /**\\n    * Part of a form/dialog with a related default button. It is used for\\n    * MSAA only, no for IA2 nor ATK.\\ndiff --git a/accessible/src/base/nsAccessible.cpp b/accessible/src/base/nsAccessible.cpp\\nindex 0514862..1a2a81a 100644\\n--- a/accessible/src/base/nsAccessible.cpp\\n+++ b/accessible/src/base/nsAccessible.cpp\\n@@ -2786,11 +2786,11 @@ nsAccessible::GetRelations(nsIArray **aRelations)\\n   nsCOMPtr<nsIMutableArray> relations = do_CreateInstance(NS_ARRAY_CONTRACTID);\\n   NS_ENSURE_TRUE(relations, NS_ERROR_OUT_OF_MEMORY);\\n \\n-  // Latest nsIAccessibleRelation is RELATION_DESCRIPTION_FOR (0xof)\\n-  for (PRUint32 relType = 0; relType < 0x0f; ++relType) {\\n+  for (PRUint32 relType = nsIAccessibleRelation::RELATION_FIRST;\\n+       relType < nsIAccessibleRelation::RELATION_LAST;\\n+       ++relType) {\\n     nsCOMPtr<nsIAccessible> accessible;\\n-    nsresult rv = GetAccessibleRelated(relType, getter_AddRefs(accessible));\\n-    NS_ENSURE_SUCCESS(rv, rv);\\n+    GetAccessibleRelated(relType, getter_AddRefs(accessible));\\n \\n     if (accessible) {\\n       nsCOMPtr<nsIAccessibleRelation> relation =\\n\""}