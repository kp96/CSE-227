{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basce400dd\""},"diff":"\"ce400dd Back out a small part of bug 391848 to fix bustage for some people (and add a comment warning about the problem).\\ndiff --git a/xpcom/base/nsStackWalk.cpp b/xpcom/base/nsStackWalk.cpp\\nindex 7bced5c..5e10f4b 100644\\n--- a/xpcom/base/nsStackWalk.cpp\\n+++ b/xpcom/base/nsStackWalk.cpp\\n@@ -810,7 +810,9 @@ BOOL SymGetModuleInfoEspecial(HANDLE aProcess, DWORD aAddr, PIMAGEHLP_MODULE aMo\\n          * Not loaded, here's the magic.\\n          * Go through all the modules.\\n          */\\n-        enumRes = _EnumerateLoadedModules(aProcess, callbackEspecial, (PVOID)&aAddr);\\n+        // Need to cast to PENUMLOADED_MODULES_CALLBACK for some compiler\\n+        // or platform SDK; see bug 391848.\\n+        enumRes = _EnumerateLoadedModules(aProcess, (PENUMLOADED_MODULES_CALLBACK)callbackEspecial, (PVOID)&aAddr);\\n         if (FALSE != enumRes)\\n         {\\n             /*\\n@@ -877,7 +879,9 @@ BOOL SymGetModuleInfoEspecial64(HANDLE aProcess, DWORD64 aAddr, PIMAGEHLP_MODULE\\n          * Not loaded, here's the magic.\\n          * Go through all the modules.\\n          */\\n-        enumRes = _EnumerateLoadedModules64(aProcess, callbackEspecial64, (PVOID)&aAddr);\\n+        // Need to cast to PENUMLOADED_MODULES_CALLBACK for some compiler\\n+        // or platform SDK; see bug 391848.\\n+        enumRes = _EnumerateLoadedModules64(aProcess, (PENUMLOADED_MODULES_CALLBACK64)callbackEspecial64, (PVOID)&aAddr);\\n         if (FALSE != enumRes)\\n         {\\n             /*\\n\""}