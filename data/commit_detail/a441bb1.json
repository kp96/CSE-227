{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basa441bb1\""},"diff":"\"a441bb1 bug 383083 - post-process symbol files to add source file revision numbers - handle mixed-case srcdir on win32.  r=mento\\ndiff --git a/toolkit/crashreporter/tools/symbolstore.py b/toolkit/crashreporter/tools/symbolstore.py\\nindex 2398be2..94bc55c 100755\\n--- a/toolkit/crashreporter/tools/symbolstore.py\\n+++ b/toolkit/crashreporter/tools/symbolstore.py\\n@@ -113,13 +113,17 @@ def GetVCSFilename(file, srcdir):\\n             if srcdir is not None:\\n                 # strip the base path off\\n                 # but we actually want the last dir in srcdir\\n-                # also, we want forward slashes on win32 paths\\n                 file = os.path.normpath(file)\\n-                file = file.replace(srcdir, \\\"\\\", 1)\\n+                # the lower() is to handle win32+vc8, where\\n+                # the source filenames come out all lowercase,\\n+                # but the srcdir can be mixed case\\n+                if file.lower().startswith(srcdir.lower()):\\n+                    file = file[len(srcdir):]\\n                 (head, tail) = os.path.split(srcdir)\\n                 if tail == \\\"\\\":\\n                     tail = os.path.basename(head)\\n                 file = tail + file\\n+            # we want forward slashes on win32 paths\\n             file = file.replace(\\\"\\\\\\\\\\\", \\\"/\\\")\\n             return \\\"cvs:%s:%s:%s\\\" % (root, file, rev)\\n     file = file.replace(\\\"\\\\\\\\\\\", \\\"/\\\")\\n\""}