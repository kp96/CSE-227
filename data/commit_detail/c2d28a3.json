{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basc2d28a3\""},"diff":"\"c2d28a3 Bug 374489 - after clicking a close button, double-clicking doesn't open a new tab until you move the mouse p=Dao Gottwald <dao@design-noir.de> r=mano\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 7bb44d7..5eb2259 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -3178,15 +3178,21 @@\\n              * double-clicks this button, the dblclick event will be dispatched\\n              * with the tabbar as its event target (and explicit/originalTarget),\\n              * which treats that as a mouse gesture for opening a new tab.\\n-             * In this context, there is no way to prevent the dispatching\\n-             * of the dblclick event, so we're manually blocking it (see\\n-             * onTabBarDblClick) until the mouse is moved.\\n+             * In this context, we're manually blocking the dblclick event\\n+             * (see onTabBarDblClick).\\n              */\\n-            function mouseMoveHandler() {\\n-              tabbedBrowser._blockDblClick = false;\\n-              tabbedBrowser.removeEventListener(\\\"mousemove\\\", mouseMoveHandler, false);\\n+            var clickedOnce = false;\\n+            function enableDblClick(event) {\\n+              if (event.detail == 1 && !clickedOnce) {\\n+                clickedOnce = true;\\n+                return;\\n+              }\\n+              setTimeout(function() {\\n+                tabbedBrowser._blockDblClick = false;\\n+              }, 0);\\n+              tabbedBrowser.removeEventListener(\\\"click\\\", enableDblClick, false);\\n             }\\n-            tabbedBrowser.addEventListener(\\\"mousemove\\\",  mouseMoveHandler, false);\\n+            tabbedBrowser.addEventListener(\\\"click\\\", enableDblClick, false);\\n           }\\n           else // \\\"tabs\\\"\\n             tabbedBrowser.removeCurrentTab();\\n\""}