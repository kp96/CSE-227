{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basac76806\""},"diff":"\"ac76806 Bug 393459 Can't use <splitter resizeafter=\\\"grow\\\"> without a next subling r=Enn sr=bz a=dbaron\\ndiff --git a/layout/xul/base/src/nsSplitterFrame.cpp b/layout/xul/base/src/nsSplitterFrame.cpp\\nindex cc6e2f4..5f1fa6b 100644\\n--- a/layout/xul/base/src/nsSplitterFrame.cpp\\n+++ b/layout/xul/base/src/nsSplitterFrame.cpp\\n@@ -734,10 +734,13 @@ nsSplitterFrameInner::MouseDown(nsIDOMEvent* aMouseEvent)\\n   // get our index\\n   nsPresContext* outerPresContext = mOuter->PresContext();\\n   nscoord childIndex = nsFrameNavigator::IndexOf(outerPresContext, mParentBox, mOuter);\\n-  PRInt32 childCount = nsFrameNavigator::CountFrames(outerPresContext, mParentBox);\\n+  // if it's 0 then stop right here.\\n+  if (childIndex == 0)\\n+    return NS_OK;\\n \\n-  // if it's 0 or the last index then stop right here.\\n-  if (childIndex == 0 || childIndex == childCount - 1)\\n+  PRInt32 childCount = nsFrameNavigator::CountFrames(outerPresContext, mParentBox);\\n+  // if it's the last index then we need to allow for resizeafter=\\\"grow\\\"\\n+  if (childIndex == childCount - 1 && GetResizeAfter() != Grow)\\n     return NS_OK;\\n \\n   nsCOMPtr<nsIRenderingContext> rc;\\n\""}