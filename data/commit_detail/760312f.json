{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas760312f\""},"diff":"\"760312f Adding test.\\ndiff --git a/browser/base/content/test/Makefile.in b/browser/base/content/test/Makefile.in\\nindex 7c2ad4e..2b14520 100644\\n--- a/browser/base/content/test/Makefile.in\\n+++ b/browser/base/content/test/Makefile.in\\n@@ -43,9 +43,11 @@ relativesrcdir  = browser/base/content/test\\n include $(DEPTH)/config/autoconf.mk\\n include $(topsrcdir)/config/rules.mk\\n \\n-_TEST_FILES = \\ttest_feed_discovery.html \\\\\\n-\\t   feed_discovery.html \\\\\\n-    $(NULL)\\n+_TEST_FILES =\\ttest_feed_discovery.html \\\\\\n+\\t\\tfeed_discovery.html \\\\\\n+\\t\\ttest_bug395533.html \\\\\\n+\\t\\tbug395533-data.txt \\\\\\n+\\t\\t$(NULL)\\n \\n _BROWSER_FILES = browser_bug321000.js \\\\\\n     $(NULL)\\ndiff --git a/browser/base/content/test/bug395533-data.txt b/browser/base/content/test/bug395533-data.txt\\nnew file mode 100644\\nindex 0000000..e0ed398\\n--- /dev/null\\n+++ b/browser/base/content/test/bug395533-data.txt\\n@@ -0,0 +1,6 @@\\n+<rss version=\\\"2.0\\\">\\n+  <channel>\\n+    <link>http://example.org/</link>\\n+    <title>t</title>\\n+  </channel>\\n+</rss>\\ndiff --git a/browser/base/content/test/test_bug395533.html b/browser/base/content/test/test_bug395533.html\\nnew file mode 100644\\nindex 0000000..1c2626f\\n--- /dev/null\\n+++ b/browser/base/content/test/test_bug395533.html\\n@@ -0,0 +1,40 @@\\n+<!DOCTYPE HTML>\\n+<html>\\n+<!--\\n+https://bugzilla.mozilla.org/show_bug.cgi?id=395533\\n+-->\\n+<head>\\n+  <title>Test for Bug 395533</title>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/MochiKit/MochiKit.js\\\"></script>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/tests/SimpleTest/SimpleTest.js\\\"></script>\\n+  <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"/tests/SimpleTest/test.css\\\" />\\n+</head>\\n+<body>\\n+<a target=\\\"_blank\\\" href=\\\"https://bugzilla.mozilla.org/show_bug.cgi?id=395533\\\">Mozilla Bug 395533</a>\\n+<p id=\\\"display\\\"><iframe id=\\\"testFrame\\\" src=\\\"bug395533-data.txt\\\"></iframe></p>\\n+<div id=\\\"content\\\" style=\\\"display: none\\\">\\n+  \\n+</div>\\n+<pre id=\\\"test\\\">\\n+<script class=\\\"testbody\\\" type=\\\"text/javascript\\\">\\n+\\n+/** Test for Bug 395533 **/\\n+SimpleTest.waitForExplicitFinish();\\n+\\n+addLoadEvent(function() {\\n+  // Need privs because the feed seems to have an about:feeds principal or some\\n+  // such.  It's not same-origin with us in any case.\\n+  netscape.security.PrivilegeManager.enablePrivilege(\\\"UniversalBrowserRead\\\");\\n+  is($(\\\"testFrame\\\").contentDocument.documentElement.id, \\\"feedHandler\\\",\\n+     \\\"Text didn't get sniffed as a feed?\\\");\\n+});\\n+addLoadEvent(SimpleTest.finish);\\n+\\n+\\n+\\n+\\n+</script>\\n+</pre>\\n+</body>\\n+</html>\\n+\\n\""}