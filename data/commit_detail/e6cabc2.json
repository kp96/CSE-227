{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Base6cabc2\""},"diff":"\"e6cabc2 Bug 271824: do_GetFastLoadService should use nsGetServiceByCID. r=/sr=/a=bsmedberg\\ndiff --git a/content/xul/document/src/nsXULContentSink.cpp b/content/xul/document/src/nsXULContentSink.cpp\\nindex 507e716..8481fd7 100644\\n--- a/content/xul/document/src/nsXULContentSink.cpp\\n+++ b/content/xul/document/src/nsXULContentSink.cpp\\n@@ -83,9 +83,8 @@\\n #include \\\"jscntxt.h\\\"  // for JSVERSION_HAS_XML\\n #include \\\"nsCRT.h\\\"\\n \\n-#include \\\"nsIFastLoadService.h\\\"         // XXXbe temporary\\n-#include \\\"nsIObjectInputStream.h\\\"       // XXXbe temporary\\n-#include \\\"nsXULDocument.h\\\"              // XXXbe temporary\\n+#include \\\"nsXULPrototypeDocument.h\\\"     // XXXbe temporary\\n+#include \\\"nsICSSLoader.h\\\"\\n \\n #include \\\"nsUnicharUtils.h\\\"\\n #include \\\"nsGkAtoms.h\\\"\\ndiff --git a/content/xul/document/src/nsXULDocument.cpp b/content/xul/document/src/nsXULDocument.cpp\\nindex 8674859..e41b989 100644\\n--- a/content/xul/document/src/nsXULDocument.cpp\\n+++ b/content/xul/document/src/nsXULDocument.cpp\\n@@ -104,7 +104,6 @@\\n #include \\\"nsIXBLService.h\\\"\\n #include \\\"nsCExternalHandlerService.h\\\"\\n #include \\\"nsMimeTypes.h\\\"\\n-#include \\\"nsIFastLoadService.h\\\"\\n #include \\\"nsIObjectInputStream.h\\\"\\n #include \\\"nsIObjectOutputStream.h\\\"\\n #include \\\"nsIFocusController.h\\\"\\ndiff --git a/content/xul/document/src/nsXULDocument.h b/content/xul/document/src/nsXULDocument.h\\nindex f9e8d7f..cf4cb0e 100644\\n--- a/content/xul/document/src/nsXULDocument.h\\n+++ b/content/xul/document/src/nsXULDocument.h\\n@@ -79,8 +79,6 @@ class nsIXULPrototypeScript;\\n struct JSObject;\\n struct PRLogModuleInfo;\\n \\n-#include \\\"nsIFastLoadService.h\\\"         // XXXbe temporary?\\n-\\n /**\\n  * The XUL document class\\n  */\\ndiff --git a/js/src/xpconnect/loader/mozJSComponentLoader.h b/js/src/xpconnect/loader/mozJSComponentLoader.h\\nindex 9d66cec..a0361a9 100644\\n--- a/js/src/xpconnect/loader/mozJSComponentLoader.h\\n+++ b/js/src/xpconnect/loader/mozJSComponentLoader.h\\n@@ -59,8 +59,6 @@\\n #include \\\"nsIPrincipal.h\\\"\\n #endif\\n \\n-class nsIFastLoadService;\\n-\\n /* 6bd13476-1dd2-11b2-bbef-f0ccb5fa64b6 (thanks, mozbot) */\\n \\n #define MOZJSCOMPONENTLOADER_CID \\\\\\ndiff --git a/xpcom/io/nsIFastLoadService.idl b/xpcom/io/nsIFastLoadService.idl\\nindex 3ef555fe..dbde0ba 100644\\n--- a/xpcom/io/nsIFastLoadService.idl\\n+++ b/xpcom/io/nsIFastLoadService.idl\\n@@ -133,11 +133,17 @@ interface nsIFastLoadService : nsISupports\\n # include \\\"nsIServiceManager.h\\\"\\n #endif\\n \\n-inline const nsGetServiceByCIDWithError\\n-do_GetFastLoadService(nsresult *aResultCode = 0)\\n+inline const nsGetServiceByContractID\\n+do_GetFastLoadService()\\n {\\n-    static NS_DEFINE_CID(kFastLoadServiceCID, NS_FASTLOADSERVICE_CID);\\n-    return nsGetServiceByCIDWithError(kFastLoadServiceCID, aResultCode);\\n+    return nsGetServiceByContractID(NS_FASTLOADSERVICE_CONTRACTID);\\n+}\\n+\\n+inline const nsGetServiceByContractIDWithError\\n+do_GetFastLoadService(nsresult *aResultCode)\\n+{\\n+    return nsGetServiceByContractIDWithError(NS_FASTLOADSERVICE_CONTRACTID,\\n+                                             aResultCode);\\n }\\n \\n inline nsresult\\n\""}