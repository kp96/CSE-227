{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas1495d66\""},"diff":"\"1495d66 Bug 393665 Fix crash regression from bug 306990 r=Enn sr+a=roc\\ndiff --git a/layout/xul/base/src/tree/src/nsTreeBodyFrame.cpp b/layout/xul/base/src/tree/src/nsTreeBodyFrame.cpp\\nindex 1e702f8..0036cc7 100644\\n--- a/layout/xul/base/src/tree/src/nsTreeBodyFrame.cpp\\n+++ b/layout/xul/base/src/tree/src/nsTreeBodyFrame.cpp\\n@@ -2443,16 +2443,16 @@ nsTreeBodyFrame::CalcHorzWidth(const ScrollParts& aParts)\\n       width = 0;\\n   }\\n \\n-  // If no horz scrolling periphery is present, then just\\n-  // return the width of the columns\\n+  // If no horz scrolling periphery is present, then just return our width\\n   if (width == 0) {\\n-    width = aParts.mColumnsFrame->GetRect().width;\\n+    mAdjustWidth = 0;\\n+    width = mRect.width;\\n+  } else {\\n+    // Compute the adjustment to the last column. This varies depending on the\\n+    // visibility of the columnpicker and the scrollbar.\\n+    mAdjustWidth = mRect.width - aParts.mColumnsFrame->GetRect().width;\\n   }\\n \\n-  // Compute the adjustment to the last column. This varies depending on the\\n-  // visibility of the columnpicker and the scrollbar.\\n-  mAdjustWidth = mRect.width - aParts.mColumnsFrame->GetRect().width;\\n-\\n   return width;\\n }\\n \\n\""}