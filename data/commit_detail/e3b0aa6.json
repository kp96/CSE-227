{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Base3b0aa6\""},"diff":"\"e3b0aa6 relanding the fix for bug #390244: code to drop the user_title column from moz_places table (see bug #389876) makes the places.sqlite file 30% bigger backed out earlier due to tbox orange, but robcee has removed the 122 MB places.sqlite files that kept growing for the unit test tinderboxen.  bug #393410 covers the tinderboxen fix. r=dietrich\\ndiff --git a/toolkit/components/places/src/nsNavHistory.cpp b/toolkit/components/places/src/nsNavHistory.cpp\\nindex b03a787..1d8c074 100644\\n--- a/toolkit/components/places/src/nsNavHistory.cpp\\n+++ b/toolkit/components/places/src/nsNavHistory.cpp\\n@@ -3349,11 +3349,10 @@ nsNavHistory::PerformVacuumIfIdle()\\n       NS_ENSURE_SUCCESS(rv, rv);\\n     }\\n     else {\\n-#if 0\\n-      // Currently commented out because compression is very slow\\n+      // if our database was created before incremental vacuuming\\n+      // do a full vacuum on idle\\n       rv = mDBConn->ExecuteSimpleSQL(NS_LITERAL_CSTRING(\\\"VACUUM;\\\"));\\n       NS_ENSURE_SUCCESS(rv, rv);\\n-#endif\\n     }\\n   }\\n   return NS_OK;\\n\""}