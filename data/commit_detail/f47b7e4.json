{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basf47b7e4\""},"diff":"\"f47b7e4 Bug 385275, fix test on Mac by clicking on the document first, r=gavin\\ndiff --git a/toolkit/content/tests/chrome/Makefile.in b/toolkit/content/tests/chrome/Makefile.in\\nindex c3902f6..b37ec87 100644\\n--- a/toolkit/content/tests/chrome/Makefile.in\\n+++ b/toolkit/content/tests/chrome/Makefile.in\\n@@ -58,15 +58,12 @@ _TEST_FILES = \\tbug288254_window.xul \\\\\\n \\t\\twindow_popup_preventdefault_chrome.xul \\\\\\n \\t\\ttest_largemenu.xul \\\\\\n \\t\\twindow_largemenu.xul \\\\\\n+\\t\\ttest_panel_focus.xul \\\\\\n+\\t\\twindow_panel_focus.xul\\n \\t\\ttest_popup_anchor.xul \\\\\\n \\t\\twindow_popup_anchor.xul \\\\\\n \\t\\tframe_popup_anchor.xul \\\\\\n \\t\\t$(NULL)\\n \\n-ifeq (,$(filter mac cocoa,$(MOZ_WIDGET_TOOLKIT)))\\n-_TEST_FILES += test_panel_focus.xul \\\\\\n-               window_panel_focus.xul\\n-endif\\n-\\n libs:: $(_TEST_FILES)\\n \\t$(INSTALL) $(foreach f,$^,\\\"$f\\\") $(DEPTH)/_tests/testing/mochitest/chrome/$(relativesrcdir)\\ndiff --git a/toolkit/content/tests/chrome/window_panel_focus.xul b/toolkit/content/tests/chrome/window_panel_focus.xul\\nindex 37aafa7..539d697 100644\\n--- a/toolkit/content/tests/chrome/window_panel_focus.xul\\n+++ b/toolkit/content/tests/chrome/window_panel_focus.xul\\n@@ -1,6 +1,6 @@\\n <?xml version=\\\"1.0\\\"?>\\n <?xml-stylesheet href=\\\"chrome://global/skin\\\" type=\\\"text/css\\\"?>\\n-<?xml-stylesheet href=\\\"/tests/SimpleTest/test.css\\\" type=\\\"text/css\\\"?>\\n+<?xml-stylesheet href=\\\"chrome://mochikit/content/tests/SimpleTest/test.css\\\" type=\\\"text/css\\\"?>\\n \\n <window title=\\\"Panel Focus Tests\\\"\\n   onload=\\\"setTimeout(showPanel, 0)\\\"\\n@@ -43,6 +43,9 @@ var gButtonBlur = 0;\\n \\n function showPanel()\\n {\\n+  // click on the document so that the window has focus\\n+  synthesizeMouse(document.documentElement, 1, 1, { });\\n+\\n   // focus the button\\n   synthesizeKeyExpectEvent(\\\"VK_TAB\\\", { }, $(\\\"b1\\\"), \\\"focus\\\", \\\"button focus\\\");\\n   // tabbing again should skip the popup\\n\""}