{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas5337fe1\""},"diff":"\"5337fe1 Bug 352021 - Double click on the area on which a close button would appear closes the tab. r=mconnor.\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex d0b3d7c..0ebd124 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -2954,11 +2954,22 @@\\n   <binding id=\\\"tabbrowser-close-tab-button\\\"\\n            extends=\\\"chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton-image\\\">\\n     <handlers>\\n-      <handler event=\\\"command\\\"><![CDATA[\\n+      <handler event=\\\"click\\\"><![CDATA[\\n         var bindingParent = document.getBindingParent(this);\\n         if (bindingParent) {\\n           var tabbedBrowser = document.getBindingParent(bindingParent);\\n           if (bindingParent.localName == \\\"tab\\\") {\\n+            /* The only sequence in which a second click event (i.e. dblclik)\\n+             * can be dispatched on an in-tab close button is when it is shown\\n+             * after the first click (i.e. the first click event was dispatched\\n+             * on the tab). This happens when we show the close button only on\\n+             * the active tab; in which case, it is most likely that the close\\n+             * button area has been accidentally clicked, therefore we do not\\n+             * close the tab. See bug 352021 for no details.\\n+             */\\n+            if (event.detail == 2)\\n+              return;\\n+\\n             tabbedBrowser.removeTab(bindingParent);\\n             tabbedBrowser._blockDblClick = true;\\n \\n\""}