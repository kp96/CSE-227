{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Based4ba5e\""},"diff":"\"ed4ba5e Bug 342511 - correcting another word (with spell checker) doesn not cause current word to be spell-checked, r=brettw, a=dsicore\\ndiff --git a/extensions/spellcheck/src/mozInlineSpellChecker.cpp b/extensions/spellcheck/src/mozInlineSpellChecker.cpp\\nindex ef80e2d..56afc275 100644\\n--- a/extensions/spellcheck/src/mozInlineSpellChecker.cpp\\n+++ b/extensions/spellcheck/src/mozInlineSpellChecker.cpp\\n@@ -76,6 +76,7 @@\\n #include \\\"nsPIDOMWindow.h\\\"\\n #include \\\"nsIDOMEventTarget.h\\\"\\n #include \\\"nsPIDOMEventTarget.h\\\"\\n+#include \\\"nsIDOMMouseEvent.h\\\"\\n #include \\\"nsIDOMKeyEvent.h\\\"\\n #include \\\"nsIDOMNode.h\\\"\\n #include \\\"nsIDOMNodeList.h\\\"\\n@@ -1693,9 +1694,17 @@ NS_IMETHODIMP mozInlineSpellChecker::Blur(nsIDOMEvent* aEvent)\\n \\n NS_IMETHODIMP mozInlineSpellChecker::MouseClick(nsIDOMEvent *aMouseEvent)\\n {\\n+  nsCOMPtr<nsIDOMMouseEvent>mouseEvent = do_QueryInterface(aMouseEvent);\\n+  NS_ENSURE_TRUE(mouseEvent, NS_OK);\\n+\\n   // ignore any errors from HandleNavigationEvent as we don't want to prevent \\n   // anyone else from seeing this event.\\n-  HandleNavigationEvent(aMouseEvent, PR_FALSE);\\n+  PRUint16 button;\\n+  mouseEvent->GetButton(&button);\\n+  if (button == 0)\\n+    HandleNavigationEvent(mouseEvent, PR_FALSE);\\n+  else\\n+    HandleNavigationEvent(mouseEvent, PR_TRUE);\\n   return NS_OK;\\n }\\n \\n\""}