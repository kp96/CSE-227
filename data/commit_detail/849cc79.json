{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas849cc79\""},"diff":"\"849cc79 Adding test.\\ndiff --git a/dom/tests/mochitest/bugs/Makefile.in b/dom/tests/mochitest/bugs/Makefile.in\\nindex 60e8801..e70aca2 100644\\n--- a/dom/tests/mochitest/bugs/Makefile.in\\n+++ b/dom/tests/mochitest/bugs/Makefile.in\\n@@ -48,6 +48,7 @@ _TEST_FILES\\t= \\\\\\n \\t\\ttest_bug159849.html \\\\\\n \\t\\ttest_bug291377.html \\\\\\n \\t\\ttest_bug308856.html \\\\\\n+\\t\\ttest_bug317448.html \\\\\\n \\t\\ttest_bug333983.html \\\\\\n \\t\\ttest_bug342448.html \\\\\\n \\t\\ttest_bug345521.html \\\\\\ndiff --git a/dom/tests/mochitest/bugs/test_bug317448.html b/dom/tests/mochitest/bugs/test_bug317448.html\\nnew file mode 100644\\nindex 0000000..a6a22c1\\n--- /dev/null\\n+++ b/dom/tests/mochitest/bugs/test_bug317448.html\\n@@ -0,0 +1,43 @@\\n+<!DOCTYPE HTML>\\n+<html>\\n+<!--\\n+https://bugzilla.mozilla.org/show_bug.cgi?id=317448\\n+-->\\n+<head>\\n+  <title>Test for Bug 317448</title>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/MochiKit/MochiKit.js\\\"></script>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/tests/SimpleTest/SimpleTest.js\\\"></script>\\n+  <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"/tests/SimpleTest/test.css\\\" />\\n+</head>\\n+<body>\\n+<a target=\\\"_blank\\\" href=\\\"https://bugzilla.mozilla.org/show_bug.cgi?id=317448\\\">Mozilla Bug 317448</a>\\n+<p id=\\\"display\\\"></p>\\n+<div id=\\\"content\\\" style=\\\"display: none\\\">\\n+  \\n+</div>\\n+<pre id=\\\"test\\\">\\n+<script class=\\\"testbody\\\" type=\\\"text/javascript\\\">\\n+\\n+/** Test for Bug 317448 **/\\n+var x = new XMLHttpRequest();\\n+x.open(\\\"GET\\\", document.location.href);\\n+x.send(\\\"\\\");\\n+netscape.security.PrivilegeManager.enablePrivilege(\\\"UniversalXPConnect\\\");\\n+is(x.channel.notificationCallbacks instanceof\\n+     Components.interfaces.nsIInterfaceRequestor,\\n+   true, \\\"Must be interface requestor\\\");\\n+\\n+var count = {};\\n+var interfaces = x.channel.notificationCallbacks.\\n+                 QueryInterface(Components.interfaces.nsIClassInfo).\\n+                 getInterfaces(count).\\n+                 map(function(id) {\\n+                            return Components.interfacesByID[id].toString();\\n+                     });\\n+isnot(interfaces.indexOf(\\\"nsIInterfaceRequestor\\\"), \\\"-1\\\",\\n+      \\\"Must have interface requestor classinfo\\\");\\n+</script>\\n+</pre>\\n+</body>\\n+</html>\\n+\\n\""}