{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas8f94c0c\""},"diff":"\"8f94c0c Bug 397311 - Need a JSAutoRequest in xpcJSWeakReference::Init. r=brendan, sr+a=jst.\\ndiff --git a/js/src/xpconnect/src/xpcJSWeakReference.cpp b/js/src/xpconnect/src/xpcJSWeakReference.cpp\\nindex 887555a..1753083 100755\\n--- a/js/src/xpconnect/src/xpcJSWeakReference.cpp\\n+++ b/js/src/xpconnect/src/xpcJSWeakReference.cpp\\n@@ -68,6 +68,8 @@ nsresult xpcJSWeakReference::Init()\\n     rv = cc->GetArgvPtr(&argv);\\n     NS_ENSURE_SUCCESS(rv, rv);\\n \\n+    JSAutoRequest ar(cx);\\n+\\n     if (JSVAL_IS_NULL(argv[0])) return NS_ERROR_FAILURE;\\n     \\n     JSObject *obj;\\n\""}