{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basff9ab27\""},"diff":"\"ff9ab27 fix for top crasher bug #395344: Topcrash typing in the address bar / search box [@ nsAutoCompleteController::HandleText] r=gavin\\ndiff --git a/toolkit/components/autocomplete/src/nsAutoCompleteController.cpp b/toolkit/components/autocomplete/src/nsAutoCompleteController.cpp\\nindex ac87369..a1836ae 100644\\n--- a/toolkit/components/autocomplete/src/nsAutoCompleteController.cpp\\n+++ b/toolkit/components/autocomplete/src/nsAutoCompleteController.cpp\\n@@ -221,6 +221,13 @@ nsAutoCompleteController::HandleText(PRBool aIgnoreSelection)\\n   // Stop all searches in case they are async.\\n   StopSearch();\\n \\n+  if (!mInput) {\\n+    // StopSearch() can call PostSearchCleanup() which might result\\n+    // in a blur event, which could null out mInput, so we need to check it\\n+    // again.  See bug #395344 for more details\\n+    return NS_OK;\\n+  }\\n+\\n   PRBool disabled;\\n   mInput->GetDisableAutoComplete(&disabled);\\n   NS_ENSURE_TRUE(!disabled, NS_OK);\\n\""}