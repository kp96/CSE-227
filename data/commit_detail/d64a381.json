{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basd64a381\""},"diff":"\"d64a381 uriloader/exthandler dependencies not working in Windows b=393270 r=bsmedberg\\ndiff --git a/config/rules.mk b/config/rules.mk\\nindex 33e5c48..881bcf1 100644\\n--- a/config/rules.mk\\n+++ b/config/rules.mk\\n@@ -1135,27 +1135,12 @@ else # COMPILER_DEPEND\\n #\\n _MDDEPFILE = $(MDDEPDIR)/$(@F).pp\\n \\n-ifeq (,$(CROSS_COMPILE)$(filter-out WINCE WINNT,$(OS_ARCH)))\\n define MAKE_DEPS_AUTO\\n if test -d $(@D); then \\\\\\n \\techo \\\"Building deps for $<\\\"; \\\\\\n-\\ttouch $(_MDDEPFILE) && \\\\\\n-\\t$(MKDEPEND) -o'.$(OBJ_SUFFIX)' -f$(_MDDEPFILE) $(DEFINES) $(ACDEFINES) $(INCLUDES) $< >/dev/null 2>&1 && \\\\\\n-\\tmv $(_MDDEPFILE) $(_MDDEPFILE).old && \\\\\\n-\\tcat $(_MDDEPFILE).old | sed -e \\\"s|^$(srcdir)[^ ]*/||\\\" -e \\\"s|^$(win_srcdir)[^ ]*/||\\\" > $(_MDDEPFILE) && rm -f $(_MDDEPFILE).old ; \\\\\\n+\\t$(MKDEPEND) -o'.$(OBJ_SUFFIX)' -f- $(DEFINES) $(ACDEFINES) $(INCLUDES) $< 2>/dev/null | sed -e \\\"s|^[^ ]*/||\\\" > $(_MDDEPFILE) ; \\\\\\n fi\\n endef\\n-else\\n-define MAKE_DEPS_AUTO\\n-if test -d $(@D); then \\\\\\n-\\techo \\\"Building deps for $<\\\"; \\\\\\n-\\ttouch $(_MDDEPFILE) && \\\\\\n-\\t$(MKDEPEND) -o'.$(OBJ_SUFFIX)' -f$(_MDDEPFILE) $(DEFINES) $(ACDEFINES) $(INCLUDES) $< >/dev/null 2>&1 && \\\\\\n-\\tmv $(_MDDEPFILE) $(_MDDEPFILE).old && \\\\\\n-\\tcat $(_MDDEPFILE).old | sed -e \\\"s|^$(<D)/||g\\\" > $(_MDDEPFILE) && rm -f $(_MDDEPFILE).old ; \\\\\\n-fi\\n-endef\\n-endif # WINNT\\n \\n MAKE_DEPS_AUTO_CC = $(MAKE_DEPS_AUTO)\\n MAKE_DEPS_AUTO_CXX = $(MAKE_DEPS_AUTO)\\n@@ -1896,21 +1881,9 @@ else # ! COMPILER_DEPEND\\n \\n ifndef MOZ_AUTO_DEPS\\n \\n-ifeq ($(OS_ARCH),WINNT)\\n-define MAKE_DEPS_NOAUTO\\n-\\tset -e ; \\\\\\n-\\ttouch $@ && \\\\\\n-\\t$(MKDEPEND) -w1024 -o'.$(OBJ_SUFFIX)' -f$@ $(DEFINES) $(ACDEFINES) $(INCLUDES) $(srcdir)/$(<F) >/dev/null 2>&1 && \\\\\\n-\\tmv $@ $@.old && cat $@.old | sed \\\"s|^$(srcdir)[^ ]*/||g\\\" > $@ && rm -f $@.old\\n-endef\\n-else\\n define MAKE_DEPS_NOAUTO\\n-\\tset -e ; \\\\\\n-\\ttouch $@ && \\\\\\n-\\t$(MKDEPEND) -w1024 -o'.$(OBJ_SUFFIX)' -f$@ $(DEFINES) $(ACDEFINES) $(INCLUDES) $< >/dev/null 2>&1 && \\\\\\n-\\tmv $@ $@.old && cat $@.old | sed \\\"s|^$(<D)/||g\\\" > $@ && rm -f $@.old\\n+\\t$(MKDEPEND) -w1024 -o'.$(OBJ_SUFFIX)' -f- $(DEFINES) $(ACDEFINES) $(INCLUDES) $< 2>/dev/null | sed -e \\\"s|^[^ ]*/||\\\" > $@\\n endef\\n-endif # WINNT\\n \\n $(MDDEPDIR)/%.pp: %.c\\n \\t$(REPORT_BUILD)\\n\""}