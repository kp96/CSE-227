{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas0f7019d\""},"diff":"\"0f7019d Bug 393923. Fix text-offset calculation for first-letter. r=smontagu,a=dbaron\\ndiff --git a/layout/generic/nsTextFrameThebes.cpp b/layout/generic/nsTextFrameThebes.cpp\\nindex d553861..71e64ab 100644\\n--- a/layout/generic/nsTextFrameThebes.cpp\\n+++ b/layout/generic/nsTextFrameThebes.cpp\\n@@ -4959,7 +4959,7 @@ FindFirstLetterRange(const nsTextFragment* aFrag,\\n   gfxSkipCharsIterator iter(aIter);\\n   PRInt32 nextClusterStart;\\n   for (nextClusterStart = i + 1; nextClusterStart < length; ++nextClusterStart) {\\n-    iter.SetOriginalOffset(nextClusterStart);\\n+    iter.SetOriginalOffset(aOffset + nextClusterStart);\\n     if (iter.IsOriginalCharSkipped() ||\\n         aTextRun->IsClusterStart(iter.GetSkippedOffset()))\\n       break;\\n\""}