{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas4f2dea1\""},"diff":"\"4f2dea1 Checking in test for bug 324378 and bug 214577\\ndiff --git a/content/html/document/test/Makefile.in b/content/html/document/test/Makefile.in\\nindex 050caac..810588b 100644\\n--- a/content/html/document/test/Makefile.in\\n+++ b/content/html/document/test/Makefile.in\\n@@ -53,13 +53,14 @@ _TEST_FILES = \\ttest_bug1682.html \\\\\\n \\t\\tbug199692-nested-d2.html \\\\\\n \\t\\ttest_bug172261.html \\\\\\n \\t\\ttest_bug255820.html \\\\\\n+\\t\\ttest_bug259332.html \\\\\\n \\t\\ttest_bug311681.html \\\\\\n \\t\\ttest_bug311681.xhtml \\\\\\n+\\t\\ttest_bug324378.html \\\\\\n \\t\\ttest_bug332848.xhtml \\\\\\n \\t\\ttest_bug359657.html \\\\\\n \\t\\ttest_bug380383.html \\\\\\n \\t\\ttest_bug386495.html \\\\\\n-\\t\\ttest_bug259332.html \\\\\\n \\t\\t$(NULL)\\n \\n libs:: $(_TEST_FILES)\\ndiff --git a/content/html/document/test/test_bug324378.html b/content/html/document/test/test_bug324378.html\\nnew file mode 100644\\nindex 0000000..744f70f\\n--- /dev/null\\n+++ b/content/html/document/test/test_bug324378.html\\n@@ -0,0 +1,77 @@\\n+<!DOCTYPE HTML>\\n+<html id=\\\"a\\\" id=\\\"b\\\">\\n+<!--\\n+https://bugzilla.mozilla.org/show_bug.cgi?id=324378\\n+-->\\n+<head id=\\\"c\\\" id=\\\"d\\\">\\n+    <head id=\\\"j\\\" foo=\\\"k\\\" foo=\\\"l\\\">\\n+  <title>Test for Bug 324378</title>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/MochiKit/MochiKit.js\\\"></script>\\n+  <script type=\\\"text/javascript\\\" src=\\\"/tests/SimpleTest/SimpleTest.js\\\"></script>\\n+  <link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"/tests/SimpleTest/test.css\\\" />\\n+</head>\\n+<body id=\\\"e\\\" id=\\\"f\\\">\\n+<a target=\\\"_blank\\\" href=\\\"https://bugzilla.mozilla.org/show_bug.cgi?id=324378\\\">Mozilla Bug 324378</a>\\n+<script>\\n+  var html = document.documentElement;\\n+  is(document.getElementsByTagName(\\\"html\\\").length, 1,\\n+     \\\"Unexpected number of htmls\\\");\\n+  is(document.getElementsByTagName(\\\"html\\\")[0], html,\\n+     \\\"Unexpected <html> element\\\");\\n+  is(document.getElementsByTagName(\\\"head\\\").length, 1,\\n+     \\\"Unexpected number of heads\\\");\\n+  is(html.getElementsByTagName(\\\"head\\\").length, 1,\\n+     \\\"Unexpected number of heads in <html>\\\");\\n+  is(document.getElementsByTagName(\\\"body\\\").length, 1,\\n+     \\\"Unexpected number of bodies\\\");\\n+  is(html.getElementsByTagName(\\\"body\\\").length, 1,\\n+     \\\"Unexpected number of bodies in <html>\\\");\\n+  var head = document.getElementsByTagName(\\\"head\\\")[0];\\n+  var body = document.getElementsByTagName(\\\"body\\\")[0];\\n+</script>\\n+<p id=\\\"display\\\"></p>\\n+<div id=\\\"content\\\" style=\\\"display: none\\\">\\n+  <html id=\\\"g\\\" foo=\\\"h\\\" foo=\\\"i\\\">\\n+      <body id=\\\"m\\\" foo=\\\"n\\\" foo=\\\"o\\\">  \\n+</div>\\n+<pre id=\\\"test\\\">\\n+<script class=\\\"testbody\\\" type=\\\"text/javascript\\\">\\n+\\n+/** Test for Bug 324378 **/\\n+  is(document.getElementsByTagName(\\\"html\\\").length, 1,\\n+     \\\"Unexpected number of htmls after additions\\\");\\n+  is(document.getElementsByTagName(\\\"html\\\")[0], html,\\n+     \\\"Unexpected <html> element\\\");\\n+  is(document.documentElement, html,\\n+     \\\"Unexpected root node\\\");\\n+  is(document.getElementsByTagName(\\\"head\\\").length, 1,\\n+     \\\"Unexpected number of heads after additions\\\");\\n+  is(document.getElementsByTagName(\\\"head\\\")[0], head,\\n+     \\\"Unexpected <head> element\\\");\\n+  is(document.getElementsByTagName(\\\"body\\\").length, 1,\\n+     \\\"Unexpected number of bodies after additions\\\");\\n+  is(document.getElementsByTagName(\\\"body\\\")[0], body,\\n+     \\\"Unexpected <body> element\\\");\\n+\\n+  is(html.id, \\\"a\\\", \\\"Unexpected <html> id\\\");\\n+  is(head.id, \\\"c\\\", \\\"Unexpected <head> id\\\");\\n+  is(body.id, \\\"e\\\", \\\"Unexpected <body> id\\\");\\n+  is($(\\\"a\\\"), html, \\\"Unexpected node with id=a\\\");\\n+  is($(\\\"b\\\"), null, \\\"Unexpected node with id=b\\\");\\n+  is($(\\\"c\\\"), head, \\\"Unexpected node with id=c\\\");\\n+  is($(\\\"d\\\"), null, \\\"Unexpected node with id=d\\\");\\n+  is($(\\\"e\\\"), body, \\\"Unexpected node with id=e\\\");\\n+  is($(\\\"f\\\"), null, \\\"Unexpected node with id=f\\\");\\n+  is($(\\\"g\\\"), null, \\\"Unexpected node with id=g\\\");\\n+  is($(\\\"j\\\"), null, \\\"Unexpected node with id=j\\\");\\n+  is($(\\\"m\\\"), null, \\\"Unexpected node with id=m\\\");\\n+\\n+  is(html.getAttribute(\\\"foo\\\"), \\\"h\\\", \\\"Unexpected 'foo' value on <html>\\\");\\n+  is(head.getAttribute(\\\"foo\\\"), \\\"k\\\", \\\"Unexpected 'foo' value on <head>\\\");\\n+  is(body.getAttribute(\\\"foo\\\"), \\\"n\\\", \\\"Unexpected 'foo' value on <body>\\\");\\n+\\n+</script>\\n+</pre>\\n+</body>\\n+</html>\\n+\\n\""}