{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas2a503e1\""},"diff":"\"2a503e1 Bug 389437. Handle searching for word breaks when starting at the end of the available text. r=smontagu,a=damon\\ndiff --git a/intl/lwbrk/src/nsSampleWordBreaker.cpp b/intl/lwbrk/src/nsSampleWordBreaker.cpp\\nindex 3fb8df1..f4b6682 100644\\n--- a/intl/lwbrk/src/nsSampleWordBreaker.cpp\\n+++ b/intl/lwbrk/src/nsSampleWordBreaker.cpp\\n@@ -163,6 +163,8 @@ PRInt32 nsSampleWordBreaker::NextWord(\\n {\\n   PRInt8 c1, c2;\\n   PRUint32 cur = aPos;\\n+  if (cur == aLen)\\n+    return NS_WORDBREAKER_NEED_MORE_TEXT;\\n   c1 = this->GetClass(aText[cur]);\\n  \\n   for(cur++; cur <aLen; cur++)\\n@@ -186,6 +188,11 @@ PRInt32 nsSampleWordBreaker::PrevWord(\\n {\\n   PRInt8 c1, c2;\\n   PRUint32 cur = aPos;\\n+  if (cur == aLen) {\\n+    if (cur == 0)\\n+      return NS_WORDBREAKER_NEED_MORE_TEXT;\\n+    --cur;\\n+  }\\n   c1 = this->GetClass(aText[cur]);\\n \\n   for(; cur > 0; cur--)\\n\""}