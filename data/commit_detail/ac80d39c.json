{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basac80d39c\""},"diff":"\"ac80d39c Bug 339477 tabbrowser.xml's observer destructor never gets called, leaking mTabClipWidth at shutdown. Patch by Adam Guthrie <ispiked@gmail.com>, r+a=mconnor\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex a4a47fb..0864778 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -2279,7 +2279,7 @@\\n         }\\n \\n         this._updateDisableBackgroundClose();\\n-        pb2.addObserver(\\\"browser.tabs.disableBackgroundClose\\\", this, false);\\n+        pb2.addObserver(\\\"browser.tabs.disableBackgroundClose\\\", this, true);\\n \\n         var self = this;\\n         function onResize() {\\n@@ -2288,13 +2288,6 @@\\n         window.addEventListener(\\\"resize\\\", onResize, false);\\n       </constructor>\\n \\n-      <destructor>\\n-        var pb2 =\\n-            Components.classes[\\\"@mozilla.org/preferences-service;1\\\"].\\n-            getService(Components.interfaces.nsIPrefBranch2);\\n-        pb2.removeObserver(\\\"browser.tabs.disableBackgroundClose\\\", this);\\n-      </destructor>\\n-\\n       <method name=\\\"_updateDisableBackgroundClose\\\">\\n         <body><![CDATA[\\n           var prefs =\\n\""}