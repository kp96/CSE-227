{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basadab63e\""},"diff":"\"adab63e backing out the fix for bug #390244 vacuuming too aggressively, and vacuuming can take too long. r=dietrich\\ndiff --git a/toolkit/components/places/src/nsNavHistory.cpp b/toolkit/components/places/src/nsNavHistory.cpp\\nindex 93c9da1..2ff5361 100644\\n--- a/toolkit/components/places/src/nsNavHistory.cpp\\n+++ b/toolkit/components/places/src/nsNavHistory.cpp\\n@@ -3349,10 +3349,14 @@ nsNavHistory::PerformVacuumIfIdle()\\n       NS_ENSURE_SUCCESS(rv, rv);\\n     }\\n     else {\\n+#if 0\\n+      // Currently commented out because compression is very slow\\n+      // see bug #390244 for more details\\n       // if our database was created before incremental vacuuming\\n       // do a full vacuum on idle\\n       rv = mDBConn->ExecuteSimpleSQL(NS_LITERAL_CSTRING(\\\"VACUUM;\\\"));\\n       NS_ENSURE_SUCCESS(rv, rv);\\n+#endif\\n     }\\n   }\\n   return NS_OK;\\n\""}