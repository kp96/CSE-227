{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basc39948f\""},"diff":"\"c39948f Fixing thunderbird bustage.\\ndiff --git a/dom/src/base/nsDOMClassInfo.cpp b/dom/src/base/nsDOMClassInfo.cpp\\nindex 7c30779..52de671 100644\\n--- a/dom/src/base/nsDOMClassInfo.cpp\\n+++ b/dom/src/base/nsDOMClassInfo.cpp\\n@@ -8984,15 +8984,20 @@ nsHTMLPluginObjElementSH::NewResolve(nsIXPConnectWrappedNative *wrapper,\\n   nsCOMPtr<nsIPluginInstanceInternal> plugin_internal =\\n     do_QueryInterface(pi);\\n \\n+#ifdef OJI\\n   nsCOMPtr<nsIJVMPluginInstance> java_plugin_instance =\\n     do_QueryInterface(pi);\\n+#endif\\n \\n   JSObject *proto = ::JS_GetPrototype(cx, obj);\\n \\n   if (pi && (!plugin_internal ||\\n              (!proto || strcmp(JS_GET_CLASS(cx, proto)->name,\\n-                               NPRUNTIME_JSCLASS_NAME) != 0)) &&\\n-      !java_plugin_instance) {\\n+                               NPRUNTIME_JSCLASS_NAME) != 0))\\n+#ifdef OJI\\n+      && !java_plugin_instance\\n+#endif\\n+      ) {\\n     // This is not an NPRuntime plugin or Java plugin, continue on...\\n \\n     JSString *str = JSVAL_TO_STRING(id);\\n\""}