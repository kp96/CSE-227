{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas085bc8c\""},"diff":"\"085bc8c Bug 387131, tooltip extends offscreen, r+sr+a=bz\\ndiff --git a/layout/xul/base/src/nsPopupSetFrame.cpp b/layout/xul/base/src/nsPopupSetFrame.cpp\\nindex d38c455..f32bcaf 100644\\n--- a/layout/xul/base/src/nsPopupSetFrame.cpp\\n+++ b/layout/xul/base/src/nsPopupSetFrame.cpp\\n@@ -213,6 +213,13 @@ nsPopupSetFrame::DoLayout(nsBoxLayoutState& aState)\\n \\n       // layout the child\\n       popupChild->Layout(aState);\\n+      // if the width or height changed, readjust the popup position. This is a\\n+      // special case for tooltips where the preferred height doesn't include the\\n+      // real height for its inline element, but does once it is laid out.\\n+      // This is bug 228673 which doesn't have a simple fix.\\n+      if (popupChild->GetRect().width > bounds.width ||\\n+          popupChild->GetRect().height > bounds.height)\\n+        popupChild->SetPopupPosition(nsnull);\\n       popupChild->AdjustView();\\n     }\\n \\n\""}