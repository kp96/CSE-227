{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas3a77d6d\""},"diff":"\"3a77d6d Bug 299555 - F5 reloads Print Preview after right clicking several times on this specific testcase, r=bzbarsky, sr+a=jst\\ndiff --git a/docshell/base/nsDocShell.cpp b/docshell/base/nsDocShell.cpp\\nindex aa51d96..0fafce2 100644\\n--- a/docshell/base/nsDocShell.cpp\\n+++ b/docshell/base/nsDocShell.cpp\\n@@ -673,7 +673,7 @@ nsDocShell::LoadURI(nsIURI * aURI,\\n                     PRUint32 aLoadFlags,\\n                     PRBool aFirstParty)\\n {\\n-    if (mFiredUnloadEvent) {\\n+    if (!IsNavigationAllowed()) {\\n       return NS_OK; // JS may not handle returning of an error code\\n     }\\n     nsresult rv;\\n\""}