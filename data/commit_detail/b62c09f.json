{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basb62c09f\""},"diff":"\"b62c09f bug 394190 - seamonkey/thunderbird not starting up due to manifest embedding issues.  change manifest embedding in the non-libxul case.  r=bsmedberg, a=bz\\ndiff --git a/accessible/public/ia2/Makefile.in b/accessible/public/ia2/Makefile.in\\nindex 1b81227..6f4dce2 100644\\n--- a/accessible/public/ia2/Makefile.in\\n+++ b/accessible/public/ia2/Makefile.in\\n@@ -99,6 +99,8 @@ MIDL_GENERATED_FILES = \\\\\\n   $(MIDL_ENUMS:%.idl=%.h) \\\\\\n   $(NULL)\\n \\n+EMBED_MANIFEST_AT = 2\\n+\\n include $(topsrcdir)/config/rules.mk\\n \\n OS_LIBS = \\\\\\ndiff --git a/accessible/public/msaa/Makefile.in b/accessible/public/msaa/Makefile.in\\nindex c473e80..c37544e 100755\\n--- a/accessible/public/msaa/Makefile.in\\n+++ b/accessible/public/msaa/Makefile.in\\n@@ -119,5 +119,7 @@ export:: done_gen\\n register::\\n \\tregsvr32 -s $(DIST)/bin/$(SHARED_LIBRARY)\\n \\n+EMBED_MANIFEST_AT = 2\\n+\\n include $(topsrcdir)/config/rules.mk\\n \\ndiff --git a/config/rules.mk b/config/rules.mk\\nindex 881bcf1..b9ed4838 100644\\n--- a/config/rules.mk\\n+++ b/config/rules.mk\\n@@ -163,6 +163,10 @@ ifneq (,$(filter OS2 WINNT WINCE,$(OS_ARCH)))\\n IMPORT_LIBRARY\\t\\t:= $(LIB_PREFIX)$(LIBRARY_NAME).$(IMPORT_LIB_SUFFIX)\\n endif\\n \\n+ifeq ($(MOZ_ENABLE_LIBXUL),1)\\n+EMBED_MANIFEST_AT=2\\n+endif\\n+\\n endif # MKSHLIB\\n endif # FORCE_SHARED_LIB && !BUILD_STATIC_LIBS\\n endif # LIBRARY\\n@@ -1069,10 +1073,12 @@ endif # NO_LD_ARCHIVE_FLAGS\\n \\t$(MKSHLIB) $(SHLIB_LDSTARTFILE) $(OBJS) $(LOBJS) $(SUB_SHLOBJS) $(RESFILE) $(LDFLAGS) $(EXTRA_DSO_LDOPTS) $(OS_LIBS) $(EXTRA_LIBS) $(DEF_FILE) $(SHLIB_LDENDFILE)\\n ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))\\n ifdef MSMANIFEST_TOOL\\n+ifdef EMBED_MANIFEST_AT\\n \\t@if test -f $@.manifest; then \\\\\\n-\\t\\tmt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\\\\;2; \\\\\\n+\\t\\tmt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\\\\;$(EMBED_MANIFEST_AT); \\\\\\n \\t\\trm -f $@.manifest; \\\\\\n \\tfi\\n+endif   # EMBED_MANIFEST_AT\\n endif\\t# MSVC with manifest tool\\n endif\\t# WINNT && !GCC\\n ifeq ($(OS_ARCH),Darwin)\\ndiff --git a/embedding/browser/activex/src/control/Makefile.in b/embedding/browser/activex/src/control/Makefile.in\\nindex 68157eb..9cb9a88 100644\\n--- a/embedding/browser/activex/src/control/Makefile.in\\n+++ b/embedding/browser/activex/src/control/Makefile.in\\n@@ -114,6 +114,8 @@ GARBAGE\\t+= $(DEFFILE) $(MIDL_GENERATED_FILES) done_gen\\n \\n ENABLE_CXX_EXCEPTIONS = 1\\n \\n+EMBED_MANIFEST_AT = 2\\n+\\n include $(topsrcdir)/config/rules.mk\\n \\n CXXFLAGS += -D \\\"WIN32\\\" -U \\\"ClientWallet\\\"\\ndiff --git a/embedding/browser/activex/src/control_kicker/Makefile.in b/embedding/browser/activex/src/control_kicker/Makefile.in\\nindex e0beb1f..b6d0f4d 100644\\n--- a/embedding/browser/activex/src/control_kicker/Makefile.in\\n+++ b/embedding/browser/activex/src/control_kicker/Makefile.in\\n@@ -61,9 +61,11 @@ OS_LIBS\\t+= \\\\\\n \\tuuid.lib \\\\\\n \\tshell32.lib \\\\\\n \\t$(NULL)\\n-\\t\\n+\\n ENABLE_CXX_EXCEPTIONS = 1\\n \\n+EMBED_MANIFEST_AT = 2\\n+\\n include $(topsrcdir)/config/rules.mk\\n \\n CXXFLAGS += -D \\\"WIN32\\\" -GF -MT -O1\\n\""}