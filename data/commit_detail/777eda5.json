{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas777eda5\""},"diff":"\"777eda5 [OS/2] Bug 391421: fix submenu highlight offset without breaking TB folder pane, p=mz@scntt/me, r=mkaply\\ndiff --git a/widget/src/os2/nsWindow.cpp b/widget/src/os2/nsWindow.cpp\\nindex d9ea545..ea33a63 100644\\n--- a/widget/src/os2/nsWindow.cpp\\n+++ b/widget/src/os2/nsWindow.cpp\\n@@ -1490,14 +1490,17 @@ NS_METHOD nsWindow::Resize(PRInt32 aX,\\n                       PRInt32 h,\\n                       PRBool   aRepaint)\\n {\\n-  //   NS_ASSERTION((w >=0 ), \\\"Negative width passed to nsWindow::Resize\\\");\\n-  //   NS_ASSERTION((h >=0 ), \\\"Negative height passed to nsWindow::Resize\\\");\\n-\\n-   // Set cached value for lightweight and printing\\n-   mBounds.x      = aX;\\n-   mBounds.y      = aY;\\n-   mBounds.width  = w;\\n-   mBounds.height = h;\\n+   // For mWnd & eWindowType_child set the cached values upfront, see bug 286555.\\n+   // For other mWnd types we defer transfer of values to mBounds to\\n+   // SetWindowPos(), see bug 391421.\\n+   if( !mWnd || mWindowType == eWindowType_child) \\n+   {\\n+      // Set cached value for lightweight and printing\\n+      mBounds.x      = aX ;\\n+      mBounds.y      = aY ;\\n+      mBounds.width  = w  ;\\n+      mBounds.height = h  ;\\n+   }\\n \\n    // WinSetWindowPos() appears not to require a msgq\\n    if( mWnd)\\n\""}