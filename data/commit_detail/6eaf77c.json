{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas6eaf77c\""},"diff":"\"6eaf77c b=391902. r=gavin. FUEL Application.console.open() fails\\ndiff --git a/browser/fuel/src/fuelApplication.js b/browser/fuel/src/fuelApplication.js\\nindex 31667f9..e7eed53 100644\\n--- a/browser/fuel/src/fuelApplication.js\\n+++ b/browser/fuel/src/fuelApplication.js\\n@@ -67,7 +67,7 @@ Console.prototype = {\\n       var wWatch = Components.classes[\\\"@mozilla.org/embedcomp/window-watcher;1\\\"]\\n                              .getService(Ci.nsIWindowWatcher);\\n       wWatch.openWindow(null, \\\"chrome://global/content/console.xul\\\", \\\"_blank\\\",\\n-                        \\\"chrome,dialog=no,all\\\", cmdLine);\\n+                        \\\"chrome,dialog=no,all\\\", null);\\n     } else {\\n       // console was already open\\n       console.focus();\\ndiff --git a/browser/fuel/test/browser_Application.js b/browser/fuel/test/browser_Application.js\\nindex 377cd91..fedfae6 100644\\n--- a/browser/fuel/test/browser_Application.js\\n+++ b/browser/fuel/test/browser_Application.js\\n@@ -1,3 +1,6 @@\\n+const Ci = Components.interfaces;\\n+const Cc = Components.classes;\\n+\\n function test() {\\n   ok(Application, \\\"Check global access to Application\\\");\\n   \\n@@ -5,4 +8,19 @@ function test() {\\n   ok(Application.id, \\\"Check to see if an ID exists for the Application\\\");\\n   ok(Application.name, \\\"Check to see if a name exists for the Application\\\");\\n   ok(Application.version, \\\"Check to see if a version exists for the Application\\\");\\n+  \\n+  var wMediator = Cc[\\\"@mozilla.org/appshell/window-mediator;1\\\"].getService(Ci.nsIWindowMediator);\\n+  var console = wMediator.getMostRecentWindow(\\\"global:console\\\");\\n+  if (!console) {\\n+    Application.console.open();\\n+    setTimeout(checkConsole, 500);\\n+  }\\n+}\\n+\\n+function checkConsole() {\\n+  var wMediator = Cc[\\\"@mozilla.org/appshell/window-mediator;1\\\"].getService(Ci.nsIWindowMediator);\\n+  var console = wMediator.getMostRecentWindow(\\\"global:console\\\");\\n+  ok(console, \\\"Check to see if the console window opened\\\");\\n+  if (console)\\n+    console.close();\\n }\\n\""}