{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basca9ca99\""},"diff":"\"ca9ca99 Part of Bug 381343 - move the composer debug options to the debugQA extension r=KaiRo,sr=Neil\\ndiff --git a/editor/ui/composer/content/editor.js b/editor/ui/composer/content/editor.js\\nindex 0935711..88c68b0 100644\\n--- a/editor/ui/composer/content/editor.js\\n+++ b/editor/ui/composer/content/editor.js\\n@@ -834,14 +834,6 @@ function CheckAndSaveDocument(command, allowDontSave)\\n \\n // --------------------------- File menu ---------------------------\\n \\n-function EditorNewPlaintext()\\n-{\\n-  window.openDialog( \\\"chrome://editor/content/TextEditorAppShell.xul\\\",\\n-                     \\\"_blank\\\",\\n-                     \\\"chrome,dialog=no,all\\\",\\n-                     \\\"about:blank\\\");\\n-}\\n-\\n // Check for changes to document and allow saving before closing\\n // This is hooked up to the OS's window close widget (e.g., \\\"X\\\" for Windows)\\n function EditorCanClose()\\ndiff --git a/editor/ui/composer/content/editor.xul b/editor/ui/composer/content/editor.xul\\nindex 57e4ea2..840df26 100644\\n--- a/editor/ui/composer/content/editor.xul\\n+++ b/editor/ui/composer/content/editor.xul\\n@@ -79,7 +79,6 @@\\n         persist=\\\"screenX screenY width height sizemode\\\">\\n \\n   <script type=\\\"application/x-javascript\\\" src=\\\"chrome://editor/content/editor.js\\\"/>\\n-  <script type=\\\"application/x-javascript\\\" src=\\\"chrome://editor/content/EditorCommandsDebug.js\\\"/>\\n   <script type=\\\"application/x-javascript\\\" src=\\\"chrome://editor/content/EditorContextMenu.js\\\"/>\\n   <script type=\\\"application/x-javascript\\\" src=\\\"chrome://editor/content/StructBarContextMenu.js\\\"/>\\n   <script type=\\\"application/x-javascript\\\" src=\\\"chrome://editor/content/editorApplicationOverlay.js\\\"/>\\n@@ -183,10 +182,6 @@\\n \\n     <menu id=\\\"windowMenu\\\"/>\\n \\n-    <!-- DEBUG only -->\\n-    <menu id=\\\"debugMenu\\\" /> \\n-    <!-- end DEBUG only -->\\n-  \\n     <!-- help menu filled from globalOverlay -->\\n     <menu id=\\\"menu_Help\\\"/>\\n \\ndiff --git a/editor/ui/composer/content/editorOverlay.xul b/editor/ui/composer/content/editorOverlay.xul\\nindex 7e25d1b..2ba1dbf 100644\\n--- a/editor/ui/composer/content/editorOverlay.xul\\n+++ b/editor/ui/composer/content/editorOverlay.xul\\n@@ -916,77 +916,4 @@\\n    -->\\n   <menuitem id=\\\"menu_pasteQuote\\\" accesskey=\\\"&editpastequotation.accesskey;\\\" command=\\\"cmd_pasteQuote\\\" key=\\\"pastequotationkb\\\"/>\\n \\n-  <!-- DEBUG only -->\\n-  <menu id=\\\"debugMenu\\\" label=\\\"&debugMenu.label;\\\">\\n-  <menupopup>\\n-    <menuitem label=\\\"&newEditorTestPage.label;\\\" oncommand=\\\"window.openDialog('chrome://editor/content','_blank','chrome,all,dialog=no','chrome://editor/content/EditorInitPage.html')\\\"/>\\n-    <menuitem label=\\\"&textEditorCmd.label;\\\"     oncommand=\\\"EditorNewPlaintext();\\\" />\\n-    <menuitem label=\\\"&outputTextCmd.label;\\\"\\n-           oncommand=\\\"EditorGetText()\\\"/>\\n-    <menuitem label=\\\"&outputHTMLCmd.label;\\\"\\n-           oncommand=\\\"EditorGetHTML()\\\"/>\\n-    <menuseparator />\\n-    <menuitem label=\\\"&pasteAsQuotationCmd.label;\\\"\\n-           accesskey=\\\"&editpastequotation.accesskey;\\\"\\n-           oncommand=\\\"goDoCommand('cmd_pasteQuote')\\\"/>\\n-    <menuitem label=\\\"&editRewrapCmd.label;\\\"\\n-           oncommand=\\\"try { GetCurrentEditor().rewrap(true); } catch (e) {}\\\"/>\\n-    <menuitem label=\\\"&editStripQuotesCmd.label;\\\"\\n-           oncommand=\\\"try { GetCurrentEditor().stripCites(); } catch (e) {}\\\"/>\\n-    <menuitem label=\\\"&insertTextCmd.label;\\\"\\n-           oncommand=\\\"EditorInsertText('All good things come to those who wait. ')\\\"/>\\n-    <menuitem id=\\\"menu_checkLinks\\\" observes=\\\"cmd_checkLinks\\\"\\n-     label=\\\"&checkLinksCmd.label;\\\"/>\\n-    <menuseparator />\\n-      <menu     accesskey=\\\"&insertformmenu.accesskey;\\\"   id=\\\"insertFormMenu\\\"        label=\\\"&insertFormMenu.label;\\\">\\n-        <menupopup>\\n-          <menuitem accesskey=\\\"&insertform.accesskey;\\\"        command=\\\"cmd_form\\\"        label=\\\"&insertFormCmd.label;\\\"/>\\n-          <menuseparator/>\\n-          <menuitem accesskey=\\\"&insertinputtag.accesskey;\\\"    command=\\\"cmd_inputtag\\\"    label=\\\"&insertInputTagCmd.label;\\\"/>\\n-          <menuitem accesskey=\\\"&insertinputimage.accesskey;\\\"  command=\\\"cmd_inputimage\\\"  label=\\\"&insertInputImageCmd.label;\\\"/>\\n-          <menuitem accesskey=\\\"&inserttextarea.accesskey;\\\"    command=\\\"cmd_textarea\\\"    label=\\\"&insertTextAreaCmd.label;\\\"/>\\n-          <menuitem accesskey=\\\"&insertselect.accesskey;\\\"      command=\\\"cmd_select\\\"      label=\\\"&insertSelectCmd.label;\\\"/>\\n-          <menuitem accesskey=\\\"&insertbutton.accesskey;\\\"      command=\\\"cmd_button\\\"      label=\\\"&insertButtonCmd.label;\\\"/>\\n-          <menuitem accesskey=\\\"&insertlabel.accesskey;\\\"       command=\\\"cmd_label\\\"       label=\\\"&insertLabelCmd.label;\\\"/>\\n-          <menuitem accesskey=\\\"&insertfieldset.accesskey;\\\"    command=\\\"cmd_fieldset\\\"    label=\\\"&insertFieldSetCmd.label;\\\"/>\\n-          <menuseparator/>\\n-          <menuitem accesskey=\\\"&insertisindex.accesskey;\\\"     command=\\\"cmd_isindex\\\"     label=\\\"&insertIsIndexCmd.label;\\\"/>\\n-        </menupopup>\\n-      </menu>\\n-    <menuitem label=\\\"&testSelectionCmd.label;\\\"\\n-           oncommand=\\\"EditorTestSelection()\\\"/>\\n-    <menuitem label=\\\"&testTableLayoutCmd.label;\\\"\\n-           oncommand=\\\"EditorTestTableLayout()\\\"/>\\n-    <menuitem label=\\\"&showEmbeddedCmd.label;\\\"\\n-           oncommand=\\\"EditorShowEmbeddedObjects()\\\"/>\\n-    <menuitem label=\\\"&dumpContentCmd.label;\\\"\\n-           oncommand=\\\"EditorDumpContent()\\\"/>\\n-    <menuitem label=\\\"&testDocumentCmd.label;\\\"\\n-           oncommand=\\\"EditorTestDocument()\\\"/>\\n-    <menuitem label=\\\"&runUnitTestsCmd.label;\\\"\\n-           oncommand=\\\"EditorUnitTests()\\\"/>\\n-    <menuseparator />\\n-    <menuitem label=\\\"&dumpUndoStack.label;\\\"\\n-           oncommand=\\\"DumpUndoStack()\\\"/>\\n-    <menuitem label=\\\"&dumpRedoStack.label;\\\"\\n-           oncommand=\\\"DumpRedoStack()\\\"/>\\n-    <menuitem label=\\\"&executeJSTransactionViaTxmgr.label;\\\"\\n-           oncommand=\\\"ExecuteJSTransactionViaTxmgr()\\\"/>\\n-    <menuitem label=\\\"&executeJSTransactionViaEditor.label;\\\"\\n-           oncommand=\\\"ExecuteJSTransactionViaEditor()\\\"/>\\n-    <menuseparator />\\n-    <menuitem label=\\\"&startLogCmd.label;\\\"\\n-           oncommand=\\\"EditorStartLog()\\\"/>\\n-    <menuitem label=\\\"&stopLogCmd.label;\\\"\\n-           oncommand=\\\"EditorStopLog()\\\"/>\\n-    <menuitem label=\\\"&runLogCmd.label;\\\"\\n-           oncommand=\\\"EditorRunLog()\\\"/>\\n-    <menuseparator />\\n-    <menuitem label=\\\"&setFocusCmd.label;\\\"\\n-            accesskey=\\\"&toolsetfocus.accesskey;\\\"\\n-            oncommand=\\\"window.focus()\\\"/>\\n-  </menupopup>\\n-  </menu>\\n-  <!-- end DEBUG only -->\\n-\\n </overlay>\\ndiff --git a/editor/ui/jar.mn b/editor/ui/jar.mn\\nindex dcb5f40..ea14f85 100644\\n--- a/editor/ui/jar.mn\\n+++ b/editor/ui/jar.mn\\n@@ -14,16 +14,12 @@ comm.jar:\\n *     content/editor-region/contents.rdf                       (composer/content/contents-region.rdf)\\n #endif\\n       content/editor/editor.xul                                (composer/content/editor.xul) \\n-      content/editor/TextEditorAppShell.xul                    (composer/content/TextEditorAppShell.xul) \\n       content/editor/editor.js                                 (composer/content/editor.js) \\n       content/editor/publishprefs.js                           (composer/content/publishprefs.js) \\n       content/editor/editorUtilities.js                        (composer/content/editorUtilities.js) \\n       content/editor/ComposerCommands.js                       (composer/content/ComposerCommands.js) \\n-      content/editor/EditorCommandsDebug.js                    (composer/content/EditorCommandsDebug.js) \\n       content/editor/EditorContextMenu.js                      (composer/content/EditorContextMenu.js) \\n       content/editor/EditorContextMenuOverlay.xul              (composer/content/EditorContextMenuOverlay.xul) \\n-      content/editor/EditorInitPage.html                       (composer/content/EditorInitPage.html) \\n-      content/editor/EditorInitPagePlain.html                  (composer/content/EditorInitPagePlain.html) \\n       content/editor/EditorExtra.css                           (composer/content/EditorExtra.css) \\n       content/editor/EditorAllTags.css                         (composer/content/EditorAllTags.css) \\n       content/editor/EditorParagraphMarks.css                  (composer/content/EditorParagraphMarks.css)\\ndiff --git a/editor/ui/locales/en-US/chrome/composer/editor.dtd b/editor/ui/locales/en-US/chrome/composer/editor.dtd\\nindex 3367184..2433a38 100644\\n--- a/editor/ui/locales/en-US/chrome/composer/editor.dtd\\n+++ b/editor/ui/locales/en-US/chrome/composer/editor.dtd\\n@@ -39,7 +39,6 @@\\n <!-- LOCALIZATION NOTE  (editorWindow.titlemodifier): DONT_TRANSLATE -->\\n <!ENTITY editorWindow.titlemodifier \\\"Composer\\\"> \\n <!ENTITY editorWindow.titlemodifiermenuseparator \\\" - \\\">\\n-<!ENTITY textEditorWindow.titlemodifier \\\"Text Editor\\\"> \\n \\n <!-- Menu items:  the . means that the menu item isn't implemented yet -->\\n \\ndiff --git a/editor/ui/locales/en-US/chrome/composer/editorOverlay.dtd b/editor/ui/locales/en-US/chrome/composer/editorOverlay.dtd\\nindex 0da27b8..a5c471f 100644\\n--- a/editor/ui/locales/en-US/chrome/composer/editorOverlay.dtd\\n+++ b/editor/ui/locales/en-US/chrome/composer/editorOverlay.dtd\\n@@ -486,28 +486,6 @@\\n <!ENTITY toolplaineditor.accesskey \\\"p\\\">\\n <!ENTITY toolsetfocus.accesskey \\\"f\\\">\\n \\n-<!-- Debug menu items -->\\n-<!ENTITY debugMenu.label \\\"Debug\\\">\\n-<!ENTITY newEditorTestPage.label \\\"Composer with Test Page\\\">\\n-<!ENTITY textEditorCmd.label \\\"Plaintext Editor\\\">\\n-<!ENTITY outputTextCmd.label \\\"Output Text\\\">\\n-<!ENTITY outputHTMLCmd.label \\\"Output HTML\\\">\\n-<!ENTITY insertTextCmd.label \\\"Insert Text\\\">\\n-<!ENTITY testSelectionCmd.label \\\"Test Selection\\\">\\n-<!ENTITY testTableLayoutCmd.label \\\"Test Table Layout\\\">\\n-<!ENTITY testDocumentCmd.label \\\"Test Document\\\">\\n-<!ENTITY showEmbeddedCmd.label \\\"Show Embedded Objects\\\">\\n-<!ENTITY dumpContentCmd.label \\\"Dump Content Tree\\\">\\n-<!ENTITY runUnitTestsCmd.label \\\"Run Unit Tests\\\">\\n-<!ENTITY dumpUndoStack.label \\\"Dump Undo Stack\\\">\\n-<!ENTITY dumpRedoStack.label \\\"Dump Redo Stack\\\">\\n-<!ENTITY executeJSTransactionViaTxmgr.label \\\"Execute JS Transaction Via Transaction Manager\\\">\\n-<!ENTITY executeJSTransactionViaEditor.label \\\"Execute JS Transaction Via Editor\\\">\\n-<!ENTITY startLogCmd.label \\\"Start Log\\\">\\n-<!ENTITY stopLogCmd.label \\\"Stop Log\\\">\\n-<!ENTITY runLogCmd.label \\\"Run Log\\\">\\n-<!ENTITY setFocusCmd.label \\\"Set Focus\\\">\\n-\\n <!-- Toolbar-only items -->\\n <!ENTITY menuBar.tooltip \\\"Menu Bar\\\">\\n <!ENTITY compositionToolbar.tooltip \\\"Composition Toolbar\\\">\\n\""}