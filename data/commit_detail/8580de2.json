{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas8580de2\""},"diff":"\"8580de2 Bug 396176 - \\\"Make change in viewSource() due to Bug 382074 backward compatible\\\" [p=philip.chee@gmail.com (Philip Chee) r=Mano a1.9=mconnor]\\ndiff --git a/toolkit/components/console/content/consoleBindings.xml b/toolkit/components/console/content/consoleBindings.xml\\nindex c67383a..f5c7a0c0 100644\\n--- a/toolkit/components/console/content/consoleBindings.xml\\n+++ b/toolkit/components/console/content/consoleBindings.xml\\n@@ -428,7 +428,7 @@\\n           var line = getAttribute(\\\"line\\\");  \\n           window.openDialog(\\n             \\\"chrome://global/content/viewSource.xul\\\", \\\"_blank\\\", \\n-            \\\"all,dialog=no\\\", url, null, null, line);\\n+            \\\"all,dialog=no\\\", url, null, null, line, false);\\n         ]]>\\n       </handler>\\n     </handlers>\\ndiff --git a/toolkit/components/viewsource/content/viewSource.js b/toolkit/components/viewsource/content/viewSource.js\\nindex 6277484..cd13abb 100644\\n--- a/toolkit/components/viewsource/content/viewSource.js\\n+++ b/toolkit/components/viewsource/content/viewSource.js\\n@@ -106,9 +106,9 @@ function viewSource(url)\\n   // Parse the 'arguments' supplied with the dialog.\\n   //    arg[0] - URL string.\\n   //    arg[1] - Charset value in the form 'charset=xxx'.\\n-  //    arg[2] - Whether charset was forced by the user\\n-  //    arg[3] - Page descriptor used to load content from the cache.\\n-  //    arg[4] - Line number to go to.\\n+  //    arg[2] - Page descriptor used to load content from the cache.\\n+  //    arg[3] - Line number to go to.\\n+  //    arg[4] - Whether charset was forced by the user\\n   //\\n   if (\\\"arguments\\\" in window) {\\n     var arg;\\n@@ -133,8 +133,8 @@ function viewSource(url)\\n       }\\n     }\\n     // If the document had a forced charset, set it here also\\n-    if (window.arguments.length >= 3) {\\n-      arg = window.arguments[2];\\n+    if (window.arguments.length >= 5) {\\n+      arg = window.arguments[4];\\n \\n       try {\\n         if (arg === true) {\\n@@ -149,16 +149,16 @@ function viewSource(url)\\n     //\\n     // Get any specified line to jump to.\\n     //\\n-    if (window.arguments.length >= 5) {\\n-      arg = window.arguments[4];\\n+    if (window.arguments.length >= 4) {\\n+      arg = window.arguments[3];\\n       gGoToLine = parseInt(arg);\\n     }\\n     //\\n     // Use the page descriptor to load the content from the cache (if\\n     // available).\\n     //\\n-    if (window.arguments.length >= 4) {\\n-      arg = window.arguments[3];\\n+    if (window.arguments.length >= 3) {\\n+      arg = window.arguments[2];\\n \\n       try {\\n         if (typeof(arg) == \\\"object\\\" && arg != null) {\\ndiff --git a/toolkit/components/viewsource/content/viewSourceUtils.js b/toolkit/components/viewsource/content/viewSourceUtils.js\\nindex f246f5b..5a28414 100644\\n--- a/toolkit/components/viewsource/content/viewSourceUtils.js\\n+++ b/toolkit/components/viewsource/content/viewSourceUtils.js\\n@@ -68,7 +68,7 @@ var gViewSourceUtils = {\\n     openDialog(\\\"chrome://global/content/viewSource.xul\\\",\\n                \\\"_blank\\\",\\n                \\\"all,dialog=no\\\",\\n-               aURL, charset, isForcedCharset, aPageDescriptor);\\n+               aURL, charset, aPageDescriptor, 0, isForcedCharset);\\n   },\\n \\n   // aCallBack is a function accepting two arguments - result (true=success) and a data object\\n\""}