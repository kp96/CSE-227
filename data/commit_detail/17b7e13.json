{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas17b7e13\""},"diff":"\"17b7e13 Fix detection of whether we're in HTML.  Bug 386526, r=sayrer\\ndiff --git a/testing/mochitest/MochiKit/DOM.js b/testing/mochitest/MochiKit/DOM.js\\nindex f63a431..caff07ec 100644\\n--- a/testing/mochitest/MochiKit/DOM.js\\n+++ b/testing/mochitest/MochiKit/DOM.js\\n@@ -871,10 +871,9 @@ MochiKit.Base.update(MochiKit.DOM, {\\n         var m = MochiKit.Base;\\n         if (typeof(document) != \\\"undefined\\\") {\\n             this._document = document;\\n-            var kXULNSURI = \\\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\\\";\\n-            this._xhtml = (document.documentElement &&\\n-                document.createElementNS &&\\n-                document.documentElement.namespaceURI === kXULNSURI);\\n+            this._xhtml =\\n+\\t        document.createElementNS &&\\n+\\t\\tdocument.createElement(\\\"testname\\\").localName == \\\"testname\\\";\\n         } else if (MochiKit.MockDOM) {\\n             this._document = MochiKit.MockDOM.document;\\n         }\\n\""}