{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Bas4218d9d\""},"diff":"\"4218d9d Followup to bug 392251 - try to fix Ts regression by checking for directory existence before trying to enumerate it, r=dcamp on IRC\\ndiff --git a/toolkit/xre/nsXREDirProvider.cpp b/toolkit/xre/nsXREDirProvider.cpp\\nindex 8504b1b..2aae5e1 100644\\n--- a/toolkit/xre/nsXREDirProvider.cpp\\n+++ b/toolkit/xre/nsXREDirProvider.cpp\\n@@ -551,6 +551,10 @@ LoadAppBundlesIntoArray(nsIFile* aXULAppDir,\\n   dir->AppendNative(NS_LITERAL_CSTRING(\\\"distribution\\\"));\\n   dir->AppendNative(NS_LITERAL_CSTRING(\\\"bundles\\\"));\\n \\n+  PRBool exists;\\n+  if (NS_FAILED(dir->Exists(&exists)) || !exists)\\n+    return;\\n+\\n   nsCOMPtr<nsISimpleEnumerator> e;\\n   rv = dir->GetDirectoryEntries(getter_AddRefs(e));\\n   if (NS_FAILED(rv))\\n@@ -573,7 +577,6 @@ LoadAppBundlesIntoArray(nsIFile* aXULAppDir,\\n       ++a;\\n     }\\n     \\n-    PRBool exists;\\n     rv = subdir->Exists(&exists);\\n     if (NS_SUCCEEDED(rv) && exists)\\n       aDirectories.AppendObject(subdir);\\n\""}