{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basa38f108\""},"diff":"\"a38f108 Bug 309292: tab-drop-indicator shouldn't use IDs, patch by Dorando <bugzilla-mozilla@dorando.at>, r=mconnor\\ndiff --git a/browser/base/content/tabbrowser.xml b/browser/base/content/tabbrowser.xml\\nindex 2e17504..2d5fefc 100644\\n--- a/browser/base/content/tabbrowser.xml\\n+++ b/browser/base/content/tabbrowser.xml\\n@@ -59,8 +59,8 @@\\n       <xul:stringbundle src=\\\"chrome://global/locale/tabbrowser.properties\\\"/>\\n       <xul:tabbox flex=\\\"1\\\" eventnode=\\\"document\\\" xbl:inherits=\\\"handleCtrlPageUpDown\\\"\\n                   onselect=\\\"if (!('updateCurrentBrowser' in this.parentNode) || event.target.localName != 'tabpanels') return; this.parentNode.updateCurrentBrowser();\\\">\\n-        <xul:hbox id=\\\"tab-drop-indicator-bar\\\">\\n-          <xul:hbox id=\\\"tab-drop-indicator\\\"/>\\n+        <xul:hbox class=\\\"tab-drop-indicator-bar\\\">\\n+          <xul:hbox class=\\\"tab-drop-indicator\\\"/>\\n         </xul:hbox>          \\n         <xul:hbox class=\\\"tabbrowser-strip\\\" collapsed=\\\"true\\\" tooltip=\\\"_child\\\" context=\\\"_child\\\"\\n                   ondraggesture=\\\"nsDragAndDrop.startDrag(event, this.parentNode.parentNode); event.stopPropagation();\\\"\\n@@ -133,6 +133,9 @@\\n       <field name=\\\"mTabBox\\\">\\n         document.getAnonymousNodes(this)[1]\\n       </field>\\n+      <field name=\\\"mTabDropIndicatorBar\\\">\\n+        this.mTabBox.childNodes[0]\\n+      </field>\\n       <field name=\\\"mStrip\\\">\\n         this.mTabBox.childNodes[1]\\n       </field>\\n@@ -1470,8 +1473,8 @@\\n             if (aDragSession.canDrop && aDragSession.sourceNode.parentNode == this.mTabContainer) {\\n               var newIndex = this.getNewIndex(aEvent);\\n \\n-              var ib = document.getElementById('tab-drop-indicator-bar');\\n-              var ind = document.getElementById('tab-drop-indicator');\\n+              var ib = this.mTabDropIndicatorBar;\\n+              var ind = ib.firstChild;\\n               ib.setAttribute('dragging','true');\\n               \\n               if (window.getComputedStyle(this.parentNode, null).direction == \\\"ltr\\\") {\\n@@ -1538,8 +1541,7 @@\\n         <parameter name=\\\"aDragSession\\\"/>\\n         <body>\\n           <![CDATA[\\n-            var ib = document.getElementById('tab-drop-indicator-bar');\\n-            ib.setAttribute('dragging','false');\\n+            this.mTabDropIndicatorBar.setAttribute('dragging','false');\\n           ]]>\\n         </body>\\n       </method>\\n\""}