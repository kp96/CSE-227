{"sha":"\"47e7bc67f932866e4467f7ab8a23bb167405bebd\"","commit":{"author":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"committer":{"name":"\"Nicolas Silva\"","email":"\"nsilva@mozilla.com\"","date":"\"2016-09-01T15:51:09+02:00\""},"message":"\"Bug 1298345 - Refactor CanvasRenderingContext2D's texture allocation code. r=Basfd18e318\""},"diff":"\"fd18e318 Bug 393704 - Can't build without MOZ_XUL after bug 385275 landed, patch by romaxa <romaxa@gmail.com>, r+sr+a1.9=roc\\ndiff --git a/content/events/src/nsEventStateManager.cpp b/content/events/src/nsEventStateManager.cpp\\nindex 524a1d5..9b1482b 100644\\n--- a/content/events/src/nsEventStateManager.cpp\\n+++ b/content/events/src/nsEventStateManager.cpp\\n@@ -93,7 +93,9 @@\\n #include \\\"nsIContentViewer.h\\\"\\n #include \\\"nsIPrefBranch2.h\\\"\\n #include \\\"nsIObjectFrame.h\\\"\\n+#ifdef MOZ_XUL\\n #include \\\"nsXULPopupManager.h\\\"\\n+#endif\\n \\n #include \\\"nsIServiceManager.h\\\"\\n #include \\\"nsIScriptSecurityManager.h\\\"\\n@@ -3390,6 +3392,7 @@ nsEventStateManager::ShiftFocusInternal(PRBool aForward, nsIContent* aStart)\\n     popupFrame = nsLayoutUtils::GetClosestFrameOfType(curFocusFrame,\\n                                                       nsGkAtoms::menuPopupFrame);\\n   }\\n+#ifdef MOZ_XUL\\n   else {\\n     // if there is no focus, yet a panel is open, focus the\\n     // first item in the popup\\n@@ -3398,6 +3401,7 @@ nsEventStateManager::ShiftFocusInternal(PRBool aForward, nsIContent* aStart)\\n       popupFrame = pm->GetTopPopup(ePopupTypePanel);\\n     }\\n   }\\n+#endif\\n \\n   if (popupFrame) {\\n     // Don't navigate outside of a popup, so pretend that the\\n\""}